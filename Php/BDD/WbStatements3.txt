##sqlwb.pos=73790
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;
CREATE SCHEMA cobrec1;
SET SCHEMA 'cobrec1';


-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (civilite IN ('M.', 'Mme', 'Inconnu', 'Ne souhaite pas s''exprimer', 'Autre')),
    CONSTRAINT verif_compte_email CHECK (email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'),
    CONSTRAINT verif_compte_num_telephone CHECK (num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$')
);

ALTER TABLE ONLY cobrec1._compte
    ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
    ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
    ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11,2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (type_couleur IN ('Vert', 'Jaune' , 'Rouge' , 'Noir' , 'Blanc' , 'Bleu' , 'Violet' , 'Orange' , 'Gris' , 'Marron' ) )
);

ALTER TABLE ONLY cobrec1._couleur
    ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
    ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
    ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4,1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (montant_TVA >= 0.00 AND montant_TVA <= 100.00)
);

ALTER TABLE ONLY cobrec1._TVA
    ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
    ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11,2) DEFAULT 0.0,
    p_volume numeric(11,2) DEFAULT 0.0,
    p_frais_de_port numeric(11,2) DEFAULT 0.0,
    p_prix numeric(11,2) NOT NULL,
    p_note numeric(2,1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (p_note >= 0 AND p_note <= 5),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (p_statut IN ('Ébauche', 'En ligne', 'Hors ligne', 'Supprimé')),
    CONSTRAINT verif_produit_origine CHECK (p_origine IN ('Inconnu', 'Bretagne', 'France', 'UE', 'Hors UE'))
);

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) 
            REFERENCES cobrec1._vendeur(id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) 
            REFERENCES cobrec1._TVA(id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5,2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (reduction_pourcentage >= 0.00 AND reduction_pourcentage <= 100.00),
    CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),
    CONSTRAINT verif_reduction_fin CHECK (reduction_fin > reduction_debut)
);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),
    CONSTRAINT verif_promotion_fin CHECK (promotion_fin > promotion_debut)
);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;


-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
    ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
    ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
    ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
    ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
    ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11,2) DEFAULT 0.0,
    f_total_remise numeric(11,2) DEFAULT 0.0,
    f_total_ht_remise numeric(11,2) DEFAULT 0.0,
    f_total_ttc numeric(11,2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) 
            REFERENCES cobrec1._panier_commande(id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) 
            REFERENCES cobrec1._adresse(id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) 
            REFERENCES cobrec1._facture(id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) 
            REFERENCES cobrec1._facture(id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2,1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client(id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (vote_type IN ('like', 'dislike'))
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2,1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (a_note IN (NULL,0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5,4.0,4.5,5.0))
);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) 
            REFERENCES cobrec1._livraison(id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison,id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (type_signalement IN ('signale_avis', 'signale_compte', 'signale_produit'))
);

ALTER TABLE ONLY cobrec1._signalement
    ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
    ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11,2) NOT NULL,
    remise_unitaire numeric(11,2) DEFAULT 0.0,
    frais_de_port numeric(11,2) DEFAULT 0.0,
    TVA numeric(4,1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (TVA >= 0.00 AND TVA<= 100.00)
);

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) 
            REFERENCES cobrec1._panier_commande(id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
CREATE TABLE cobrec1._represente_promotion (
    id_image integer NOT NULL,
    id_promotion integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion) 
            REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) 
            REFERENCES cobrec1._categorie_produit(id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) 
            REFERENCES cobrec1._couleur(code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit) 
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction) 
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit) 
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion) 
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) 
            REFERENCES cobrec1._seuil_alerte(id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;


-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();


CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;


CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO _compte (nom, prenom, email, num_telephone, mdp, etat_A2F, nb_fois_signale, nb_signalements_avis, nb_cpts_signales, nb_avis_signales) VALUES
('Maeleau', 'Le Hyver', 'admin@cobrec.fr', '0601020304', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 0, 0),
('Lopicier', 'Mallo', 'vendeur1@example.com', '0612345678', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Elouard', 'Jean-Jacques', 'vendeur2@shop.fr', '0623456789', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 1, 0, 0, 0),
('Jean', 'Dupont','client1@gmail.com', '0634567890', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 1, 0, 0),
('Marie', 'Martin','client2@yahoo.fr', '0645678901', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 1, 0),
('Pierre', 'Durand','client3@outlook.com', '0656789012', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Sophie', 'Bernard','client4@free.fr', '0667890123', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Lucas', 'Petit','client5@orange.fr', '0678901234', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Emma', 'Lefebvre','client6@wanadoo.fr', '0689012345', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 0, 0),
('Martinière', 'Yvili', 'vendeur3@boutique.fr', '0690123456', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0);

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO _vendeur (id_compte, SIREN, raison_sociale, denomination, nb_produits_crees) VALUES
(2, '123456789', 'TechStore SARL', 'TechStore', 5),
(3, '987654321', 'FashionHub SAS', 'FashionHub', 3),
(10, '456789123', 'SportPro EURL', 'SportPro', 2);

-- 4. CLIENTS
INSERT INTO _client (id_compte, c_pseudo, c_nb_produits_achetes, c_depense_totale, c_cloture, c_datenaissance) VALUES
(4, 'jdupont', 2, 907.18, FALSE, '1985-03-15'),
(5, 'mmartin', 3, 124.75, FALSE, '1990-07-22'),
(6, 'pdurand', 1, 1091.98, FALSE, '1988-11-10'),
(7, 'sbernard', 2, 298.76, FALSE, '1995-05-30'),
(8, 'lpetit', 0, 0.0, FALSE, '2000-01-18'),
(9, 'elefebvre', 1, 179.98, FALSE, '1992-09-25');


-- 5. ADRESSES
INSERT INTO _adresse (id_compte, a_adresse, a_ville, a_code_postal, a_complement) VALUES
(4, '15 rue de la Paix', 'Paris', '75001', 'Apt 5'),
(5, '23 avenue des Champs', 'Lyon', '69001', NULL),
(6, '8 boulevard Victor Hugo', 'Marseille', '13001', 'Bâtiment B'),
(7, '42 rue du Commerce', 'Toulouse', '31000', NULL),
(8, '67 place de la République', 'Nice', '06000', '3ème étage'),
(9, '91 rue Principale', 'Bordeaux', '33000', NULL),
(2, '12 avenue du Commerce', 'Paris', '75015', 'Entrepôt A'),
(3, '55 rue de la Mode', 'Lyon', '69002', NULL),
(10, '78 boulevard du Sport', 'Marseille', '13008', 'Zone industrielle');

-- 6. COULEURS
INSERT INTO _couleur (code_hexa, nom, type_couleur) VALUES
('#FF0000', 'Rouge vif', 'Rouge'),
('#0000FF', 'Bleu marine', 'Bleu'),
('#000000', 'Noir', 'Noir'),
('#FFFFFF', 'Blanc pur', 'Blanc'),
('#00FF00', 'Vert émeraude', 'Vert'),
('#FFFF00', 'Jaune citron', 'Jaune'),
('#FFA500', 'Orange', 'Orange'),
('#808080', 'Gris', 'Gris'),
('#8B4513', 'Marron chocolat', 'Marron'),
('#EE82EE', 'Violet', 'Violet'),
('#87CEEB', 'Bleu ciel', 'Bleu'),
('#32CD32', 'Vert lime', 'Vert');

-- 7. CATÉGORIES
INSERT INTO _categorie_produit (nom_categorie) VALUES
('Électronique'),
('Vêtements'),
('Accessoires'),
('Maison'),
('Sport'),
('Livres'),
('Informatique'),
('Mode homme'),
('Mode femme'),
('Chaussures');

-- 8. TVA
INSERT INTO _TVA (montant_TVA, libelle_TVA) VALUES
(20.0, 'TVA normale'),
(10.0, 'TVA intermédiaire'),
(5.5, 'TVA réduite'),
(2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO _produit (id_TVA, id_vendeur, p_nom, p_description, p_prix, p_stock, p_statut, p_origine, p_poids, p_volume, p_frais_de_port, p_note, p_nb_ventes) VALUES
(1, 1, 'Smartphone XPro', 'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G', 599.99, 35, 'En ligne', 'Bretagne', 0.180, 0.01, 5.99, 4.3, 15),
(1, 1, 'Ordinateur portable Ultra', 'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7', 899.99, 22, 'En ligne', 'Bretagne', 2.5, 0.03, 9.99, 4.0, 8),
(1, 2, 'T-shirt coton bio', 'T-shirt 100% coton biologique, coupe regular, diverses couleurs', 24.99, 58, 'En ligne', 'Bretagne', 0.15, 0.5, 3.99, 5.0, 42),
(1, 2, 'Jean slim', 'Jean coupe slim stretch, denim premium', 49.99, 62, 'En ligne', 'Bretagne', 1.00, 0.01, 4.99, NULL, 18),
(1, 2, 'Robe d été', 'Robe légère et fluide pour l été, motifs floraux', 39.99, 48, 'En ligne', 'Bretagne', 0.30, 0.08, 4.99, NULL, 12),
(2, 1, 'Casque audio Bluetooth', 'Casque sans fil avec réduction de bruit active, autonomie 30h', 149.99, 15, 'En ligne', 'Bretagne', 0.25, 0.02, 5.99, 4.5, 25),
(1, 2, 'Sac à dos urbain', 'Sac à dos pour ordinateur portable, compartiments multiples, imperméable', 69.99, 35, 'En ligne', 'Bretagne', 0.60, 0.15, 6.99, NULL, 10),
(1, 1, 'Montre connectée', 'Montre sport avec GPS, cardiofréquencemètre, étanche 50m', 199.99, 15, 'En ligne', 'Bretagne', 0.05, 0.01, 3.99, 4.7, 20),
(1, 3, 'Chaussures running', 'Chaussures de course avec amorti premium, semelle respirante', 89.99, 54, 'En ligne', 'Bretagne', 0.40, 0.08, 5.99, 4.2, 16),
(1, 1, 'Tablette 10 pouces', 'Tablette Android, écran Full HD, 64Go, stylet inclus', 299.99, 16, 'En ligne', 'Bretagne', 0.50, 0.02, 7.99, 3.8, 9),
(1, 3, 'Ballon de football', 'Ballon officiel en cuir synthétique, taille 5', 29.99, 85, 'En ligne', 'Bretagne', 0.45, 0.06, 4.99, 4.6, 35),
(1, 2, 'Veste en cuir', 'Veste en cuir véritable, coupe motard, doublure intérieure', 189.99, 15, 'En ligne', 'Bretagne', 1.20, 0.01, 8.99, NULL, 5),
(3, 1, 'Livre cuisine française', 'Recettes traditionnelles de cuisine française, 300 pages', 24.99, 28, 'En ligne', 'Bretagne', 0.80, 0.03, 3.99, 4.8, 22),
(1, 3, 'Tapis de yoga', 'Tapis antidérapant, épaisseur 6mm, avec sac de transport', 34.99, 52, 'En ligne', 'Bretagne', 1.10, 0.02, 5.99, 4.4, 28),
(1, 1, 'Clavier mécanique RGB', 'Clavier gamer avec rétroéclairage RGB, switches mécaniques', 79.99, 29, 'En ligne', 'Bretagne', 0.90, 0.04, 5.99, 4.1, 11),
(1, 1, 'Console NextGen', 'Console de jeu dernière génération, 1To SSD, 4K HDR', 499.99, 0, 'Hors ligne', 'France', 3.5, 0.02, 14.99, 4.8, 25),
(1, 2, 'Sweat à capuche premium', 'Sweat-shirt en coton bio, coupe oversize, poche kangourou', 59.99, 0, 'Hors ligne', 'France', 0.70, 0.03, 5.99, 4.4, 18),
(1, 3, 'Raquette de tennis pro', 'Raquette carbone, tension 25kg, grip confort', 129.99, 0, 'Hors ligne', 'France', 0.35, 0.02, 6.99, 4.7, 32),
(1, 1, 'Écran gaming 4K 27"', 'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms', 349.99, 0, 'Hors ligne', 'France', 5.2, 0.35, 19.99, 4.6, 18),
(1, 2, 'Baskets limited edition', 'Baskets cuir véritable, édition limitée, semelle comfort', 179.99, 0, 'Hors ligne', 'France', 0.80, 0.06, 7.99, 4.9, 65),
(1, 3, 'Vélo de route carbone', 'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses', 1299.99, 0, 'Hors ligne', 'UE', 8.5, 0.15, 29.99, 4.8, 25),
(1, 1, 'Drone professionnel 4K', 'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min', 899.99, 0, 'Hors ligne', 'UE', 1.2, 0.02, 12.99, 4.6, 18),
(1, 2, 'Manteau d hiver imperméable', 'Manteau longueur genoux, doublure polaire, coupe-vent', 179.99, 0, 'Hors ligne', 'UE', 1.5, 0.01, 8.99, 4.4, 65),
(1, 3, 'Tente 4 places', 'Tente familiale, double toit, arceaux aluminium, imperméable', 249.99, 0, 'Hors ligne', 'Hors UE', 4.8, 0.08, 19.99, 4.7, 32),
(1, 1, 'Enceinte Bluetooth waterproof', 'Enceinte portable, autonomie 24h, résistance IP67', 129.99, 0, 'Hors ligne', 'Hors UE', 0.9, 0.05, 6.99, 4.9, 95),
(2, 1, 'Pull Marin de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.', 36.37, 31, 'En ligne', 'Bretagne', 2.06, 0.45, 5.78, 4.4, 12),
(1, 1, 'Bonnet Miki de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.', 121.37, 6, 'Hors ligne', 'Bretagne', 2.3, 0.09, 8.8, 4.3, 60),
(2, 3, 'Galettes Local', 'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.', 147.92, 142, 'En ligne', 'Bretagne', 0.46, 0.46, 5.71, 4.3, 97),
(1, 3, 'Écharpe Rayée Fait main', 'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.', 173.77, 102, 'En ligne', 'Bretagne', 0.91, 0.32, 8.28, 4.4, 58),
(1, 2, 'Écharpe Rayée de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.', 197.02, 168, 'Hors ligne', 'Bretagne', 2.1, 0.12, 7.92, 4.8, 19),
(4, 2, 'Ciré Navy de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.', 104.35, 169, 'En ligne', 'Bretagne', 1.43, 0.14, 7.22, 4.6, 72),
(4, 3, 'Bracelet Ancre Fait main', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 172.75, 44, 'Hors ligne', 'Bretagne', 1.92, 0.4, 8.8, 4.1, 102),
(1, 3, 'Marinière Local', 'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.', 74.29, 80, 'Hors ligne', 'Bretagne', 1.36, 0.23, 13.58, 4.9, 72),
(3, 1, 'Bracelet Ancre de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.', 40.53, 140, 'En ligne', 'Bretagne', 2.76, 0.3, 9.4, 4.1, 97),
(3, 3, 'Pendentif Hermine Fait main', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 164.23, 199, 'Hors ligne', 'Bretagne', 1.64, 0.07, 10.94, 4.9, 47),
(1, 3, 'Sac Voile de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.', 136.95, 100, 'En ligne', 'Bretagne', 1.37, 0.26, 6.09, 4.2, 91),
(2, 3, 'Écharpe Rayée de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 21.13, 22, 'Hors ligne', 'Bretagne', 2.73, 0.43, 5.64, 4.2, 129),
(1, 2, 'Coussin Triskell de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.', 134.55, 95, 'Hors ligne', 'Bretagne', 1.33, 0.24, 11.56, 4.7, 30),
(1, 3, 'Écharpe Rayée Authentique', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.', 36.49, 51, 'En ligne', 'Bretagne', 0.91, 0.13, 13.31, 4.4, 145),
(4, 3, 'Écharpe Rayée Bio', 'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.', 50.4, 107, 'Hors ligne', 'Bretagne', 2.72, 0.09, 5.02, 4.4, 121),
(1, 3, 'Bonnet Miki Authentique', 'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.', 119.47, 143, 'En ligne', 'Bretagne', 0.28, 0.16, 5.45, 4.5, 140),
(3, 1, 'Ciré Navy de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 187.96, 150, 'Hors ligne', 'Bretagne', 0.81, 0.3, 10.57, 4.4, 149),
(1, 1, 'Bol Breton Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.', 66.7, 85, 'En ligne', 'Bretagne', 2.79, 0.47, 5.08, 4.6, 149),
(1, 3, 'Bol Breton Premium', 'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.', 176.18, 99, 'Hors ligne', 'Bretagne', 0.93, 0.22, 9.89, 4.3, 140),
(3, 1, 'Pull Marin de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.', 30.23, 146, 'En ligne', 'Bretagne', 0.55, 0.15, 6.9, 4.3, 72),
(1, 1, 'Affiche Vintage de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.', 155.74, 168, 'En ligne', 'Bretagne', 2.94, 0.09, 8.98, 4.7, 148),
(2, 3, 'Vareuse Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 120.09, 42, 'En ligne', 'Bretagne', 1.35, 0.03, 8.28, 4.9, 15),
(3, 2, 'Pull Marin Bio', 'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.', 151.65, 65, 'En ligne', 'Bretagne', 2.61, 0.49, 12.3, 4.9, 11),
(1, 3, 'Kabig Bio', 'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.', 172.27, 61, 'En ligne', 'Bretagne', 0.68, 0.46, 8.15, 4.8, 63),
(1, 2, 'Phare Miniature Fait main', 'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.', 62.75, 169, 'En ligne', 'Bretagne', 1.58, 0.34, 12.59, 4.3, 12),
(3, 1, 'Bol Breton Fait main', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 75.33, 85, 'Hors ligne', 'Bretagne', 1.37, 0.49, 6.04, 4.9, 53),
(3, 3, 'Bracelet Ancre de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 23.23, 175, 'Hors ligne', 'Bretagne', 2.77, 0.32, 10.97, 4.1, 81),
(1, 2, 'Caramels de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.', 135.67, 102, 'Hors ligne', 'Bretagne', 2.06, 0.45, 10.54, 4.3, 145),
(3, 3, 'Affiche Vintage de Vannes', 'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.', 137.69, 135, 'Hors ligne', 'Bretagne', 1.47, 0.45, 12.16, 4.2, 26),
(4, 2, 'Écharpe Rayée de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.', 37.85, 16, 'Hors ligne', 'Bretagne', 0.81, 0.24, 12.65, 4.1, 111),
(4, 3, 'Vareuse de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 51.36, 183, 'Hors ligne', 'Bretagne', 1.6, 0.03, 7.24, 4.8, 121),
(4, 3, 'Bracelet Ancre Durable', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.', 150.55, 126, 'En ligne', 'Bretagne', 1.41, 0.38, 12.56, 4.3, 138),
(1, 2, 'Lampe Tempête de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.', 73.48, 143, 'Hors ligne', 'Bretagne', 0.33, 0.08, 8.45, 4.2, 59),
(4, 1, 'Sac Voile de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.', 167.42, 104, 'Hors ligne', 'Bretagne', 2.72, 0.3, 11.26, 4.9, 102),
(4, 1, 'Caramels de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.', 61.58, 129, 'En ligne', 'Bretagne', 0.18, 0.17, 11.11, 4.4, 47),
(4, 2, 'Pendentif Hermine de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 35.65, 123, 'Hors ligne', 'Bretagne', 0.63, 0.14, 7.95, 4.5, 91),
(2, 1, 'Ciré Navy Artisanal', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.', 19.84, 94, 'En ligne', 'Bretagne', 0.75, 0.04, 13.62, 4.0, 12),
(3, 1, 'Vareuse de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 51.2, 184, 'En ligne', 'Bretagne', 0.84, 0.19, 10.45, 5.0, 34),
(1, 2, 'Pendentif Hermine Bio', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.', 47.48, 156, 'Hors ligne', 'Bretagne', 2.1, 0.32, 5.92, 4.8, 35),
(4, 1, 'Galettes de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.', 89.39, 130, 'Hors ligne', 'Bretagne', 0.41, 0.48, 10.72, 4.8, 44),
(2, 2, 'Sac Voile Durable', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.', 148.16, 73, 'Hors ligne', 'Bretagne', 1.03, 0.13, 13.41, 4.3, 120),
(1, 1, 'Marinière de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.', 50.09, 71, 'Hors ligne', 'Bretagne', 1.09, 0.44, 11.31, 4.3, 7),
(4, 3, 'Sac Voile Bio', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.', 102.77, 9, 'Hors ligne', 'Bretagne', 0.37, 0.12, 11.23, 4.3, 99),
(2, 1, 'Sac Voile Premium', 'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.', 61.2, 69, 'Hors ligne', 'Bretagne', 0.77, 0.36, 7.84, 4.7, 52),
(1, 1, 'Pendentif Hermine Local', 'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.', 167.37, 80, 'Hors ligne', 'Bretagne', 0.76, 0.1, 5.13, 4.5, 75),
(1, 2, 'Vareuse Durable', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 118.5, 125, 'Hors ligne', 'Bretagne', 1.49, 0.18, 13.69, 4.3, 127),
(4, 2, 'Pendentif Hermine Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 116.38, 82, 'Hors ligne', 'Bretagne', 0.35, 0.13, 10.02, 4.4, 62),
(2, 1, 'Pendentif Hermine de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.', 21.38, 194, 'En ligne', 'Bretagne', 0.39, 0.38, 10.63, 4.3, 25),
(2, 2, 'Ciré Navy de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.', 140.29, 125, 'En ligne', 'Bretagne', 0.94, 0.12, 11.36, 4.7, 121),
(4, 1, 'Pull Marin Authentique', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 181.69, 41, 'Hors ligne', 'Bretagne', 0.31, 0.09, 7.77, 4.7, 150),
(1, 1, 'Bolée à Cidre Local', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.', 103.33, 25, 'En ligne', 'Bretagne', 1.83, 0.45, 11.61, 4.6, 11),
(4, 2, 'Bol Breton de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 133.14, 76, 'Hors ligne', 'Bretagne', 0.63, 0.3, 10.71, 4.5, 28),
(3, 2, 'Phare Miniature de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.', 141.1, 78, 'Hors ligne', 'Bretagne', 2.02, 0.21, 11.84, 4.0, 27),
(1, 1, 'Caramels Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 112.55, 110, 'Hors ligne', 'Bretagne', 0.26, 0.26, 10.6, 4.5, 118),
(4, 1, 'Vareuse de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.', 101.61, 12, 'En ligne', 'Bretagne', 2.92, 0.31, 7.15, 4.2, 146),
(2, 2, 'Lampe Tempête Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.', 145.44, 135, 'En ligne', 'Bretagne', 2.15, 0.21, 9.34, 4.5, 121),
(4, 1, 'Bracelet Ancre de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.', 159.31, 111, 'Hors ligne', 'Bretagne', 1.09, 0.4, 7.4, 4.0, 81),
(2, 2, 'Coussin Triskell Premium', 'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.', 112.71, 121, 'En ligne', 'Bretagne', 2.81, 0.44, 13.83, 4.2, 103),
(1, 2, 'Coussin Triskell Bio', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.', 159.76, 171, 'En ligne', 'Bretagne', 2.94, 0.25, 5.33, 4.5, 89),
(1, 2, 'Lampe Tempête de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 133.75, 44, 'Hors ligne', 'Bretagne', 0.32, 0.39, 7.39, 4.6, 106),
(1, 2, 'Coussin Triskell Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 54.37, 180, 'En ligne', 'Bretagne', 2.77, 0.5, 11.72, 4.4, 30),
(2, 1, 'Bolée à Cidre de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.', 20.61, 96, 'En ligne', 'Bretagne', 1.19, 0.08, 9.78, 4.6, 51),
(3, 3, 'Caramels Durable', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.', 37.05, 123, 'En ligne', 'Bretagne', 1.95, 0.24, 11.0, 4.9, 124),
(2, 2, 'Lampe Tempête Local', 'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.', 90.19, 69, 'Hors ligne', 'Bretagne', 1.42, 0.16, 13.99, 4.9, 32),
(3, 1, 'Bolée à Cidre Artisanal', 'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.', 134.41, 75, 'Hors ligne', 'Bretagne', 0.12, 0.43, 12.0, 5.0, 132),
(3, 2, 'Bonnet Miki Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.', 180.74, 170, 'Hors ligne', 'Bretagne', 0.21, 0.4, 5.3, 4.4, 38),
(4, 1, 'Bonnet Miki Premium', 'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.', 182.65, 47, 'En ligne', 'Bretagne', 0.85, 0.41, 9.34, 4.8, 91),
(3, 1, 'Caramels de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.', 84.57, 72, 'En ligne', 'Bretagne', 1.66, 0.23, 11.06, 4.7, 102),
(1, 1, 'Marinière Premium', 'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.', 51.84, 21, 'Hors ligne', 'Bretagne', 1.94, 0.24, 11.31, 4.6, 34),
(1, 2, 'Pull Marin de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 35.64, 121, 'Hors ligne', 'Bretagne', 1.18, 0.48, 11.27, 4.5, 44),
(4, 2, 'Ciré Jaune de Vannes', 'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.', 189.65, 97, 'En ligne', 'Bretagne', 0.39, 0.35, 9.9, 5.0, 96),
(1, 3, 'Lampe Tempête Authentique', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 122.86, 10, 'En ligne', 'Bretagne', 0.25, 0.17, 13.9, 4.8, 57),
(1, 3, 'Bonnet Miki de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.', 159.05, 157, 'En ligne', 'Bretagne', 0.11, 0.43, 6.3, 4.1, 69),
(3, 3, 'Marinière Authentique', 'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.', 12.98, 72, 'En ligne', 'Bretagne', 0.25, 0.37, 9.73, 4.7, 126),
(4, 2, 'Bracelet Ancre Artisanal', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.', 181.75, 173, 'En ligne', 'Bretagne', 1.61, 0.23, 13.68, 4.1, 127),
(3, 2, 'Lampe Tempête de Vannes', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 38.04, 37, 'Hors ligne', 'Bretagne', 0.9, 0.32, 9.94, 4.3, 140),
(3, 2, 'Pull Marin de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 177.85, 110, 'En ligne', 'Bretagne', 1.08, 0.23, 8.74, 4.1, 114),
(3, 3, 'Coussin Triskell Fait main', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 27.62, 29, 'En ligne', 'Bretagne', 2.26, 0.19, 6.17, 4.1, 148),
(3, 3, 'Galettes Artisanal', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.', 123.48, 95, 'Hors ligne', 'Bretagne', 0.4, 0.26, 6.39, 4.5, 32),
(1, 1, 'Bol Breton Bio', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.', 194.19, 164, 'Hors ligne', 'Bretagne', 1.88, 0.32, 5.24, 4.9, 73);

-- 10. PROMOTIONS (futures)
INSERT INTO _promotion (id_produit, promotion_debut, promotion_fin) VALUES
(1, '2027-12-20 00:00:00', '2027-12-25 23:59:59'),
(2, '2026-02-01 00:00:00', '2026-02-07 23:59:59'),
(3, '2026-02-16 00:00:00', '2026-02-25 23:59:59'),
(4, '2026-04-01 00:00:00', '2026-04-15 23:59:59'),
(5, '2026-05-01 00:00:00', '2026-05-07 23:59:59'),
(6, '2026-06-10 00:00:00', '2026-06-20 23:59:59'),
(7, '2026-07-01 00:00:00', '2026-07-31 23:59:59');

-- 9. RÉDUCTIONS (futures)
INSERT INTO _reduction (id_produit, reduction_pourcentage, reduction_debut, reduction_fin) VALUES
(1, 10.00, '2026-02-09 00:00:00', '2026-02-19 23:59:59'),
(2, 15.00, '2026-02-15 00:00:00', '2026-02-25 23:59:59'),
(3, 20.00, '2026-02-01 00:00:00', '2026-02-15 23:59:59'),
(4, 25.00, '2026-02-20 00:00:00', '2026-02-26 23:59:59'),
(5, 30.00, '2026-06-01 00:00:00', '2026-06-30 23:59:59'),
(6, 60.00, '2026-04-01 00:00:00', '2026-04-15 23:59:59'),
(7, 55.00, '2026-05-01 00:00:00', '2026-05-07 23:59:59'),
(8, 70.00, '2026-06-10 00:00:00', '2026-06-20 23:59:59'),
(9, 65.00, '2026-07-01 00:00:00', '2026-07-31 23:59:59');

-- 12. IMAGES
INSERT INTO _image (i_lien, i_title, i_alt) VALUES
('/img/photo/smartphone_xpro.jpg', 'Smartphone XPro.jpg', 'Image du smartphone'),
('/img/photo/ordinateur_portable_ultra.jpg', 'Ordinateur portable.jpeg', 'Image de l ordinateur'),
('/img/photo/t_shirt_coton_bio.jpg', 'T-shirt.png', 'Image du t-shirt'),
('/img/photo/jean_slim.jpg', 'Jean.jpg', 'Image du jean'),
('/img/photo/casque_audio_bluetooth.jpg', 'Casque audio.jpg', 'Image du casque'),
('/img/photo/avatar_jean.jpg', 'Avatar Jean.jpeg', 'Photo de profil Jean'),
('/img/photo/avatar_marie.jpg', 'Avatar Marie.jpg', 'Photo de profil Marie'),
('/img/photo/logo_techstore.jpg', 'Logo TechStore.jpg', 'Logo entreprise TechStore'),
('/img/photo/logo_fashionhub.jpg', 'Logo FashionHub.jpg', 'Logo entreprise FashionHub'),
('/img/photo/montre_connect_e.jpg', 'Montre connectée.jpg', 'Image de la montre'),
('/img/photo/sac___dos_urbain.jpg', 'Sac à dos.jpeg', 'Image du sac'),
('/img/photo/chaussures_running.jpg', 'Chaussures running.jpeg', 'Image des chaussures'),
('/img/photo/tablette_10_pouces.jpg', 'Tablette.jpg', 'Image de la tablette'),
('/img/photo/ballon_de_football.jpg', 'Ballon football.jpg', 'Image du ballon'),
('/img/photo/veste_en_cuir.jpg', 'Veste cuir.jpg', 'Image de la veste'),
('/img/photo/livre_cuisine_fran_aise.jpg', 'Livre cuisine.jpeg', 'Image du livre'),
('/img/photo/tapis_de_yoga.jpg', 'Tapis yoga.jpeg', 'Image du tapis'),
('/img/photo/clavier_m_canique_rgb.jpg', 'Clavier.jpg', 'Image du clavier'),
('/img/photo/console_nextgen.jpg', 'Console NextGen.jpg', 'Image de la console'),
('/img/photo/sweat___capuche_premium.jpg', 'Sweat à capuche.jpeg', 'Image du sweat'),
('/img/photo/raquette_de_tennis_pro.jpg', 'Raquette tennis.jpg', 'Image de la raquette'),
('/img/photo/_cran_gaming_4k_27_.jpg', 'Écran 4K.jpeg', 'Image de l écran'),
('/img/photo/baskets_limited_edition.jpg', 'Baskets limited.jpeg', 'Image des baskets'),
('/img/photo/v_lo_de_route_carbone.jpg', 'Vélo route.jpeg', 'Image du vélo'),
('/img/photo/drone_professionnel_4k.jpg', 'Drone 4K.jpg', 'Image du drone'),
('/img/photo/manteau_d_hiver_imperm_able.jpg', 'Manteau hiver.jpeg', 'Image du manteau'),
('/img/photo/tente_4_places.jpg', 'Tente 4 places.jpg', 'Image de la tente'),
('/img/photo/enceinte_bluetooth_waterproof.jpg', 'Enceinte Bluetooth.jpg', 'Image de l enceinte'),
('/img/photo/pull_marin_de_saint_malo.jpg', 'Pull Marin de Saint-Malo', 'Photo de Pull Marin de Saint-Malo'),
('/img/photo/bonnet_miki_de_carnac.jpg', 'Bonnet Miki de Carnac', 'Photo de Bonnet Miki de Carnac'),
('/img/photo/galettes_local.jpg', 'Galettes Local', 'Photo de Galettes Local'),
('/img/photo/_charpe_ray_e_fait_main.jpg', 'Écharpe Rayée Fait main', 'Photo de Écharpe Rayée Fait main'),
('/img/photo/_charpe_ray_e_de_brest.jpg', 'Écharpe Rayée de Brest', 'Photo de Écharpe Rayée de Brest'),
('/img/photo/cir__navy_de_concarneau.jpg', 'Ciré Navy de Concarneau', 'Photo de Ciré Navy de Concarneau'),
('/img/photo/bracelet_ancre_fait_main.jpg', 'Bracelet Ancre Fait main', 'Photo de Bracelet Ancre Fait main'),
('/img/photo/marini_re_local.jpg', 'Marinière Local', 'Photo de Marinière Local'),
('/img/photo/bracelet_ancre_de_concarneau.jpg', 'Bracelet Ancre de Concarneau', 'Photo de Bracelet Ancre de Concarneau'),
('/img/photo/pendentif_hermine_fait_main.jpg', 'Pendentif Hermine Fait main', 'Photo de Pendentif Hermine Fait main'),
('/img/photo/sac_voile_de_concarneau.jpg', 'Sac Voile de Concarneau', 'Photo de Sac Voile de Concarneau'),
('/img/photo/_charpe_ray_e_de_saint_malo.jpg', 'Écharpe Rayée de Saint-Malo', 'Photo de Écharpe Rayée de Saint-Malo'),
('/img/photo/coussin_triskell_de_roscoff.jpg', 'Coussin Triskell de Roscoff', 'Photo de Coussin Triskell de Roscoff'),
('/img/photo/_charpe_ray_e_authentique.jpg', 'Écharpe Rayée Authentique', 'Photo de Écharpe Rayée Authentique'),
('/img/photo/_charpe_ray_e_bio.jpg', 'Écharpe Rayée Bio', 'Photo de Écharpe Rayée Bio'),
('/img/photo/bonnet_miki_authentique.jpg', 'Bonnet Miki Authentique', 'Photo de Bonnet Miki Authentique'),
('/img/photo/cir__navy_de_quimper.jpg', 'Ciré Navy de Quimper', 'Photo de Ciré Navy de Quimper'),
('/img/photo/bol_breton_traditionnel.jpg', 'Bol Breton Traditionnel', 'Photo de Bol Breton Traditionnel'),
('/img/photo/bol_breton_premium.jpg', 'Bol Breton Premium', 'Photo de Bol Breton Premium'),
('/img/photo/pull_marin_de_brest.jpg', 'Pull Marin de Brest', 'Photo de Pull Marin de Brest'),
('/img/photo/affiche_vintage_de_dinard.jpg', 'Affiche Vintage de Dinard', 'Photo de Affiche Vintage de Dinard'),
('/img/photo/vareuse_artisanal.jpg', 'Vareuse Artisanal', 'Photo de Vareuse Artisanal'),
('/img/photo/pull_marin_bio.jpg', 'Pull Marin Bio', 'Photo de Pull Marin Bio'),
('/img/photo/kabig_bio.jpg', 'Kabig Bio', 'Photo de Kabig Bio'),
('/img/photo/phare_miniature_fait_main.jpg', 'Phare Miniature Fait main', 'Photo de Phare Miniature Fait main'),
('/img/photo/bol_breton_fait_main.jpg', 'Bol Breton Fait main', 'Photo de Bol Breton Fait main'),
('/img/photo/bracelet_ancre_de_carnac.jpg', 'Bracelet Ancre de Carnac', 'Photo de Bracelet Ancre de Carnac'),
('/img/photo/caramels_de_dinard.jpg', 'Caramels de Dinard', 'Photo de Caramels de Dinard'),
('/img/photo/affiche_vintage_de_vannes.jpg', 'Affiche Vintage de Vannes', 'Photo de Affiche Vintage de Vannes'),
('/img/photo/_charpe_ray_e_de_dinard.jpg', 'Écharpe Rayée de Dinard', 'Photo de Écharpe Rayée de Dinard'),
('/img/photo/vareuse_de_saint_malo.jpg', 'Vareuse de Saint-Malo', 'Photo de Vareuse de Saint-Malo'),
('/img/photo/bracelet_ancre_durable.jpg', 'Bracelet Ancre Durable', 'Photo de Bracelet Ancre Durable'),
('/img/photo/lampe_temp_te_de_quimper.jpg', 'Lampe Tempête de Quimper', 'Photo de Lampe Tempête de Quimper'),
('/img/photo/sac_voile_de_pont_aven.jpg', 'Sac Voile de Pont-Aven', 'Photo de Sac Voile de Pont-Aven'),
('/img/photo/caramels_de_roscoff.jpg', 'Caramels de Roscoff', 'Photo de Caramels de Roscoff'),
('/img/photo/pendentif_hermine_de_saint_malo.jpg', 'Pendentif Hermine de Saint-Malo', 'Photo de Pendentif Hermine de Saint-Malo'),
('/img/photo/cir__navy_artisanal.jpg', 'Ciré Navy Artisanal', 'Photo de Ciré Navy Artisanal'),
('/img/photo/vareuse_de_pont_aven.jpg', 'Vareuse de Pont-Aven', 'Photo de Vareuse de Pont-Aven'),
('/img/photo/pendentif_hermine_bio.jpg', 'Pendentif Hermine Bio', 'Photo de Pendentif Hermine Bio'),
('/img/photo/galettes_de_quimper.jpg', 'Galettes de Quimper', 'Photo de Galettes de Quimper'),
('/img/photo/sac_voile_durable.jpg', 'Sac Voile Durable', 'Photo de Sac Voile Durable'),
('/img/photo/marini_re_de_pont_aven.jpg', 'Marinière de Pont-Aven', 'Photo de Marinière de Pont-Aven'),
('/img/photo/sac_voile_bio.jpg', 'Sac Voile Bio', 'Photo de Sac Voile Bio'),
('/img/photo/sac_voile_premium.jpg', 'Sac Voile Premium', 'Photo de Sac Voile Premium'),
('/img/photo/pendentif_hermine_local.jpg', 'Pendentif Hermine Local', 'Photo de Pendentif Hermine Local'),
('/img/photo/vareuse_durable.jpg', 'Vareuse Durable', 'Photo de Vareuse Durable'),
('/img/photo/pendentif_hermine_traditionnel.jpg', 'Pendentif Hermine Traditionnel', 'Photo de Pendentif Hermine Traditionnel'),
('/img/photo/pendentif_hermine_de_roscoff.jpg', 'Pendentif Hermine de Roscoff', 'Photo de Pendentif Hermine de Roscoff'),
('/img/photo/cir__navy_de_brest.jpg', 'Ciré Navy de Brest', 'Photo de Ciré Navy de Brest'),
('/img/photo/pull_marin_authentique.jpg', 'Pull Marin Authentique', 'Photo de Pull Marin Authentique'),
('/img/photo/bol_e___cidre_local.jpg', 'Bolée à Cidre Local', 'Photo de Bolée à Cidre Local'),
('/img/photo/bol_breton_de_saint_malo.jpg', 'Bol Breton de Saint-Malo', 'Photo de Bol Breton de Saint-Malo'),
('/img/photo/phare_miniature_de_quimper.jpg', 'Phare Miniature de Quimper', 'Photo de Phare Miniature de Quimper'),
('/img/photo/caramels_artisanal.jpg', 'Caramels Artisanal', 'Photo de Caramels Artisanal'),
('/img/photo/vareuse_de_dinard.jpg', 'Vareuse de Dinard', 'Photo de Vareuse de Dinard'),
('/img/photo/lampe_temp_te_traditionnel.jpg', 'Lampe Tempête Traditionnel', 'Photo de Lampe Tempête Traditionnel'),
('/img/photo/bracelet_ancre_de_brest.jpg', 'Bracelet Ancre de Brest', 'Photo de Bracelet Ancre de Brest'),
('/img/photo/coussin_triskell_premium.jpg', 'Coussin Triskell Premium', 'Photo de Coussin Triskell Premium'),
('/img/photo/coussin_triskell_bio.jpg', 'Coussin Triskell Bio', 'Photo de Coussin Triskell Bio'),
('/img/photo/lampe_temp_te_de_saint_malo.jpg', 'Lampe Tempête de Saint-Malo', 'Photo de Lampe Tempête de Saint-Malo'),
('/img/photo/coussin_triskell_artisanal.jpg', 'Coussin Triskell Artisanal', 'Photo de Coussin Triskell Artisanal'),
('/img/photo/bol_e___cidre_de_saint_malo.jpg', 'Bolée à Cidre de Saint-Malo', 'Photo de Bolée à Cidre de Saint-Malo'),
('/img/photo/caramels_durable.jpg', 'Caramels Durable', 'Photo de Caramels Durable'),
('/img/photo/lampe_temp_te_local.jpg', 'Lampe Tempête Local', 'Photo de Lampe Tempête Local'),
('/img/photo/bol_e___cidre_artisanal.jpg', 'Bolée à Cidre Artisanal', 'Photo de Bolée à Cidre Artisanal'),
('/img/photo/bonnet_miki_traditionnel.jpg', 'Bonnet Miki Traditionnel', 'Photo de Bonnet Miki Traditionnel'),
('/img/photo/bonnet_miki_premium.jpg', 'Bonnet Miki Premium', 'Photo de Bonnet Miki Premium'),
('/img/photo/caramels_de_carnac.jpg', 'Caramels de Carnac', 'Photo de Caramels de Carnac'),
('/img/photo/marini_re_premium.jpg', 'Marinière Premium', 'Photo de Marinière Premium'),
('/img/photo/pull_marin_de_quimper.jpg', 'Pull Marin de Quimper', 'Photo de Pull Marin de Quimper'),
('/img/photo/cir__jaune_de_vannes.jpg', 'Ciré Jaune de Vannes', 'Photo de Ciré Jaune de Vannes'),
('/img/photo/lampe_temp_te_authentique.jpg', 'Lampe Tempête Authentique', 'Photo de Lampe Tempête Authentique'),
('/img/photo/bonnet_miki_de_concarneau.jpg', 'Bonnet Miki de Concarneau', 'Photo de Bonnet Miki de Concarneau'),
('/img/photo/marini_re_authentique.jpg', 'Marinière Authentique', 'Photo de Marinière Authentique'),
('/img/photo/bracelet_ancre_artisanal.jpg', 'Bracelet Ancre Artisanal', 'Photo de Bracelet Ancre Artisanal'),
('/img/photo/lampe_temp_te_de_vannes.jpg', 'Lampe Tempête de Vannes', 'Photo de Lampe Tempête de Vannes'),
('/img/photo/pull_marin_de_carnac.jpg', 'Pull Marin de Carnac', 'Photo de Pull Marin de Carnac'),
('/img/photo/coussin_triskell_fait_main.jpg', 'Coussin Triskell Fait main', 'Photo de Coussin Triskell Fait main'),
('/img/photo/galettes_artisanal.jpg', 'Galettes Artisanal', 'Photo de Galettes Artisanal'),
('/img/photo/bol_breton_bio.jpg', 'Bol Breton Bio', 'Photo de Bol Breton Bio');

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO _represente_produit (id_image, id_produit) VALUES
(1, 1), (2,2), (3, 3), (4, 4), (5, 6), (10, 8), (11, 7),
(12, 9), (13, 10), (14, 11), (15, 12), (16, 13), (17, 14), (18, 15),
(19, 16), (20, 17), (21, 18), (22, 19), (23, 20),
(24, 21), (25, 22), (26, 23), (27, 24), (28, 25),
(29, 26), (30, 27), (31, 28), (32, 29), (33, 30), (34, 31), (35, 32), (36, 33), (37, 34), (38, 35), (39, 36), (40, 37), (41, 38), (42, 39), (43, 40), (44, 41), (45, 42), (46, 43), (47, 44), (48, 45), (49, 46), (50, 47), (51, 48), (52, 49), (53, 50), (54, 51), (55, 52), (56, 53), (57, 54), (58, 55), (59, 56), (60, 57), (61, 58), (62, 59), (63, 60), (64, 61), (65, 62), (66, 63), (67, 64), (68, 65), (69, 66), (70, 67), (71, 68), (72, 69), (73, 70), (74, 71), (75, 72), (76, 73), (77, 74), (78, 75), (79, 76), (80, 77), (81, 78), (82, 79), (83, 80), (84, 81), (85, 82), (86, 83), (87, 84), (88, 85), (89, 86), (90, 87), (91, 88), (92, 89), (93, 90), (94, 91), (95, 92), (96, 93), (97, 94), (98, 95), (99, 96), (100, 97), (101, 98), (102, 99), (103, 100), (104, 101), (105, 102), (106, 103), (107, 104), (108, 105);


-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO _represente_compte (id_image, id_compte) VALUES
(6, 4), (7, 5), (8, 2), (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO _fait_partie_de (id_produit, id_categorie) VALUES
(1, 1), (1, 7), (2, 1), (2, 7), (3, 2), (3, 8), (4, 2), (4, 8),
(5, 2), (5, 9), (6, 1), (6, 3), (7, 3), (8, 1), (8, 3), (8, 5),
(9, 5), (9, 10), (10, 1), (10, 7), (11, 5), (12, 2), (12, 8),
(13, 6), (14, 5), (15, 1), (15, 7),
(16, 1), (16, 7), (17, 2), (17, 8), (18, 5), (19, 1), (19, 7), (20, 10),
(21, 5), (22, 1), (22, 3), (23, 2), (23, 8), (24, 4), (24, 5), (25, 1), (25, 3),
(26, 2), (26, 8), (27, 2), (27, 3), (27, 8), (28, 4), (29, 2), (29, 3), (30, 2), (30, 3), (31, 2), (31, 8), (31, 9), (32, 3), (33, 2), (33, 8), (33, 9), (34, 3), (35, 3), (36, 3), (37, 2), (37, 3), (38, 4), (39, 2), (39, 3), (40, 2), (40, 3), (41, 2), (41, 3), (41, 8), (42, 2), (42, 8), (42, 9), (43, 4), (44, 4), (45, 2), (45, 8), (46, 4), (47, 2), (47, 8), (48, 2), (48, 8), (49, 2), (49, 8), (49, 9), (50, 4), (51, 4), (52, 3), (53, 4), (54, 4), (55, 2), (55, 3), (56, 2), (56, 8), (57, 3), (58, 4), (59, 3), (60, 4), (61, 3), (62, 2), (62, 8), (62, 9), (63, 2), (63, 8), (64, 3), (65, 4), (66, 3), (67, 2), (67, 8), (67, 9), (68, 3), (69, 3), (70, 3), (71, 2), (71, 8), (72, 3), (73, 3), (74, 2), (74, 8), (74, 9), (75, 2), (75, 8), (76, 4), (77, 4), (78, 4), (79, 4), (80, 2), (80, 8), (81, 4), (82, 3), (83, 4), (84, 4), (85, 4), (86, 4), (87, 4), (88, 4), (89, 4), (90, 4), (91, 2), (91, 3), (91, 8), (92, 2), (92, 3), (92, 8), (93, 4), (94, 2), (94, 8), (94, 9), (95, 2), (95, 8), (96, 2), (96, 8), (96, 9), (97, 4), (98, 2), (98, 3), (98, 8), (99, 2), (99, 8), (99, 9), (100, 3), (101, 4), (102, 2), (102, 8), (103, 4), (104, 4), (105, 4);


-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO _est_dote_de (id_produit, code_hexa) VALUES
(1, '#000000'), (1, '#FFFFFF'), (2, '#808080'), (3, '#0000FF'), (3, '#FF0000'),
(3, '#00FF00'), (4, '#0000FF'), (4, '#000000'), (5, '#FF0000'), (5, '#FFFFFF'),
(6, '#000000'), (7, '#808080'), (8, '#000000'), (9, '#0000FF'), (9, '#FF0000'),
(10, '#808080'), (11, '#FFFFFF'), (12, '#000000'), (12, '#8B4513'),
(14, '#EE82EE'), (14, '#87CEEB'), (15, '#000000'),
(16, '#000000'), (16, '#FFFFFF'), (17, '#808080'), (17, '#000000'), (18, '#FFFFFF'), (18, '#000000'),
(19, '#000000'), (20, '#FFFFFF'), (20, '#000000'),
(21, '#0000FF'), (21, '#FF0000'), (22, '#808080'), (23, '#000000'), (23, '#8B4513'),
(24, '#87CEEB'), (24, '#32CD32'), (25, '#000000'), (25, '#FF0000'),
(26, '#8B4513'), (27, '#0000FF'), (28, '#FF0000'), (29, '#8B4513'), (30, '#00FF00'), (31, '#000000'), (32, '#8B4513'), (33, '#87CEEB'), (34, '#FFFFFF'), (35, '#FFFFFF'), (36, '#EE82EE'), (37, '#FFFFFF'), (38, '#0000FF'), (39, '#0000FF'), (40, '#000000'), (41, '#000000'), (42, '#FFFFFF'), (43, '#8B4513'), (44, '#87CEEB'), (45, '#87CEEB'), (46, '#32CD32'), (47, '#87CEEB'), (48, '#00FF00'), (49, '#FFA500'), (50, '#EE82EE'), (51, '#FF0000'), (52, '#FFFF00'), (53, '#FFFFFF'), (54, '#0000FF'), (55, '#FFFFFF'), (56, '#808080'), (57, '#00FF00'), (58, '#FFFF00'), (59, '#00FF00'), (60, '#FFA500'), (61, '#00FF00'), (62, '#FFFFFF'), (63, '#00FF00'), (64, '#87CEEB'), (65, '#EE82EE'), (66, '#FFFF00'), (67, '#808080'), (68, '#FFA500'), (69, '#00FF00'), (70, '#32CD32'), (71, '#0000FF'), (72, '#00FF00'), (73, '#8B4513'), (74, '#FFA500'), (75, '#32CD32'), (76, '#87CEEB'), (77, '#FFFF00'), (78, '#0000FF'), (79, '#8B4513'), (80, '#0000FF'), (81, '#EE82EE'), (82, '#8B4513'), (83, '#FFFF00'), (84, '#8B4513'), (85, '#FFFF00'), (86, '#32CD32'), (87, '#EE82EE'), (88, '#0000FF'), (89, '#EE82EE'), (90, '#FFFFFF'), (91, '#000000'), (92, '#FFFFFF'), (93, '#808080'), (94, '#808080'), (95, '#00FF00'), (96, '#0000FF'), (97, '#EE82EE'), (98, '#000000'), (99, '#808080'), (100, '#808080'), (101, '#0000FF'), (102, '#87CEEB'), (103, '#FFA500'), (104, '#0000FF'), (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO _seuil_alerte (nb_seuil, message_seuil) VALUES
(10, 'Stock faible - Envisager un réapprovisionnement'),
(5, 'Stock critique - Réapprovisionnement urgent'),
(3, 'Rupture imminente - Commander immédiatement'),
(20, 'Stock normal - Surveillance recommandée'),
(1, 'Rupture de stock - Produit indisponible');

INSERT INTO _adresse (id_compte, a_numero, a_adresse, a_ville, a_code_postal, a_pays) VALUES
(4, 13, 'rue du Pillard', 'Rennes', 35590, 'France');

-- 18. PANIERS/COMMANDES
INSERT INTO _panier_commande (id_client, timestamp_commande) VALUES
(1, '2025-11-01 10:30:00'),
(2, '2025-11-02 14:45:00'),
(3, '2025-11-03 09:15:00'),
(1, NULL),
(4, '2025-11-04 16:20:00'),
(6, '2025-11-05 11:00:00'),
(2, NULL),
(5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO _contient (id_panier, id_produit, quantite, prix_unitaire, remise_unitaire, frais_de_port, TVA) VALUES
(1, 1, 1, 599.99, 0.0, 5.99, 20.0),
(1, 6, 1, 149.99, 0.0, 5.99, 20.0),
(2, 3, 2, 24.99, 0.0, 3.99, 20.0),
(2, 4, 1, 49.99, 0.0, 4.99, 20.0),
(3, 2, 1, 899.99, 0.0, 9.99, 20.0),
(4, 7, 1, 69.99, 0.0, 6.99, 20.0),
(5, 5, 1, 39.99, 0.0, 4.99, 20.0),
(5, 8, 1, 199.99, 0.0, 3.99, 20.0),
(6, 9, 2, 89.99, 0.0, 5.99, 20.0),
(7, 10, 1, 299.99, 0.0, 7.99, 20.0),
(8, 11, 1, 29.99, 0.0, 4.99, 20.0),
(8, 13, 1, 24.99, 0.0, 3.99, 20.0),
(8, 14, 1, 34.99, 0.0, 5.99, 20.0);

-- 20. FACTURES
INSERT INTO _facture (id_panier, id_adresse, f_total_ht, f_total_remise, f_total_ht_remise, f_total_ttc) VALUES
(1, 1, 755.98, 0.0, 755.98, 907.18),
(2, 1, 103.96, 0.0, 103.96, 124.75),
(3, 1, 909.98, 0.0, 909.98, 1091.98),
(5, 1, 248.97, 0.0, 248.97, 298.76),
(6, 1, 185.97, 0.0, 185.97, 223.16),
(8, 1, 95.96, 0.0, 95.96, 115.15);

-- 21. PAIEMENTS
INSERT INTO _paiement (id_facture, mode_paiement, numero_carte, mois_annee_expiration, cryptogramme_carte, timestamp_paiement) VALUES
(1, 'CB', '1234567890123456', '12/27', '123', '2025-11-01 10:35:00'),
(2, 'CB', '6543210987654321', '06/26', '456', '2025-11-02 14:50:00'),
(3, 'CB', '1111222233334444', '03/28', '789', '2025-11-03 09:20:00'),
(4, 'CB', '9999888877776666', '09/27', '321', '2025-11-04 16:25:00'),
(5, 'CB', '5555666677778888', '11/26', '654', '2025-11-05 11:05:00'),
(6, 'CB', '4444333322221111', '08/27', '987', '2025-11-06 13:35:00');

-- 22. LIVRAISONS
INSERT INTO _livraison (id_facture, date_livraison, etat_livraison) VALUES
(1, '2025-11-05', 'Livré'),
(2, '2025-11-06', 'Livré'),
(3, '2025-11-08', 'En transit'),
(4, NULL, 'En préparation'),
(5, '2025-11-09', 'Livré'),
(6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO _definie_pour (id_seuil, id_compte) VALUES
(1, 2), (2, 2), (3, 2), (4, 2), (5, 2),
(1, 3), (2, 3), (3, 3), (5, 3),
(1, 10), (2, 10), (3, 10), (4, 10), (5, 10),
(5, 1);


-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;
UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;
UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;
UPDATE cobrec1._commentaire SET a_note = 0.0;


SELECT DISTINCT ON (p.id_produit)
            p.id_produit,
            p.p_nom,
            p.p_description,
            p.p_prix,
            p.p_stock,
            r.reduction_pourcentage,
            promotion.id_produit,
            (SELECT COUNT(*) FROM cobrec1._avis av2 WHERE av2.id_produit = p.id_produit AND av2.a_note IS NOT NULL) as nombre_avis,
            (SELECT ROUND(COALESCE(AVG(av3.a_note), 0)::numeric, 1) FROM cobrec1._avis av3 WHERE av3.id_produit = p.id_produit AND av3.a_note IS NOT NULL) as note_moyenne,
            (SELECT COALESCE(i2.i_lien, '/img/photo/smartphone_xpro.jpg') FROM cobrec1._represente_produit rp2 LEFT JOIN cobrec1._image i2 ON rp2.id_image = i2.id_image WHERE rp2.id_produit = p.id_produit LIMIT 1) as image_url,
            STRING_AGG(DISTINCT cp.nom_categorie, ', ') as categories
        FROM cobrec1._produit p
        LEFT JOIN cobrec1._reduction r ON p.id_produit = r.id_produit 
        LEFT JOIN cobrec1._promotion ON p.id_produit = _promotion.id_produit 
        LEFT JOIN cobrec1._tva t ON p.id_tva = t.id_tva
        LEFT JOIN cobrec1._fait_partie_de fpd ON p.id_produit = fpd.id_produit
        LEFT JOIN cobrec1._categorie_produit cp ON fpd.id_categorie = cp.id_categorie
        WHERE p.p_statut = 'En ligne'
        GROUP BY p.id_produit, p.p_nom, p.p_description, p.p_prix, p.p_stock, 
                 p.p_note, p.p_nb_ventes, p.p_statut, r.reduction_pourcentage, 
                 t.montant_tva
        ORDER BY p.id_produit
----------- WbStatement -----------
##sqlwb.pos=74570
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;
CREATE SCHEMA cobrec1;
SET SCHEMA 'cobrec1';


-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (civilite IN ('M.', 'Mme', 'Inconnu', 'Ne souhaite pas s''exprimer', 'Autre')),
    CONSTRAINT verif_compte_email CHECK (email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'),
    CONSTRAINT verif_compte_num_telephone CHECK (num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$')
);

ALTER TABLE ONLY cobrec1._compte
    ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
    ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
    ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11,2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (type_couleur IN ('Vert', 'Jaune' , 'Rouge' , 'Noir' , 'Blanc' , 'Bleu' , 'Violet' , 'Orange' , 'Gris' , 'Marron' ) )
);

ALTER TABLE ONLY cobrec1._couleur
    ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
    ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
    ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4,1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (montant_TVA >= 0.00 AND montant_TVA <= 100.00)
);

ALTER TABLE ONLY cobrec1._TVA
    ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
    ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11,2) DEFAULT 0.0,
    p_volume numeric(11,2) DEFAULT 0.0,
    p_frais_de_port numeric(11,2) DEFAULT 0.0,
    p_prix numeric(11,2) NOT NULL,
    p_note numeric(2,1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (p_note >= 0 AND p_note <= 5),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (p_statut IN ('Ébauche', 'En ligne', 'Hors ligne', 'Supprimé')),
    CONSTRAINT verif_produit_origine CHECK (p_origine IN ('Inconnu', 'Bretagne', 'France', 'UE', 'Hors UE'))
);

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) 
            REFERENCES cobrec1._vendeur(id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) 
            REFERENCES cobrec1._TVA(id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5,2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (reduction_pourcentage >= 0.00 AND reduction_pourcentage <= 100.00),
    CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),
    CONSTRAINT verif_reduction_fin CHECK (reduction_fin > reduction_debut)
);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),
    CONSTRAINT verif_promotion_fin CHECK (promotion_fin > promotion_debut)
);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;


-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
    ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
    ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
    ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
    ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
    ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11,2) DEFAULT 0.0,
    f_total_remise numeric(11,2) DEFAULT 0.0,
    f_total_ht_remise numeric(11,2) DEFAULT 0.0,
    f_total_ttc numeric(11,2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) 
            REFERENCES cobrec1._panier_commande(id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) 
            REFERENCES cobrec1._adresse(id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) 
            REFERENCES cobrec1._facture(id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) 
            REFERENCES cobrec1._facture(id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2,1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client(id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (vote_type IN ('like', 'dislike'))
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2,1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (a_note IN (NULL,0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5,4.0,4.5,5.0))
);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) 
            REFERENCES cobrec1._livraison(id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison,id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (type_signalement IN ('signale_avis', 'signale_compte', 'signale_produit'))
);

ALTER TABLE ONLY cobrec1._signalement
    ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
    ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11,2) NOT NULL,
    remise_unitaire numeric(11,2) DEFAULT 0.0,
    frais_de_port numeric(11,2) DEFAULT 0.0,
    TVA numeric(4,1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (TVA >= 0.00 AND TVA<= 100.00)
);

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) 
            REFERENCES cobrec1._panier_commande(id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
CREATE TABLE cobrec1._represente_promotion (
    id_image integer NOT NULL,
    id_promotion integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion) 
            REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) 
            REFERENCES cobrec1._categorie_produit(id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) 
            REFERENCES cobrec1._couleur(code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit) 
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction) 
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit) 
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion) 
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) 
            REFERENCES cobrec1._seuil_alerte(id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;


-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();


CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;


CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO _compte (nom, prenom, email, num_telephone, mdp, etat_A2F, nb_fois_signale, nb_signalements_avis, nb_cpts_signales, nb_avis_signales) VALUES
('Maeleau', 'Le Hyver', 'admin@cobrec.fr', '0601020304', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 0, 0),
('Lopicier', 'Mallo', 'vendeur1@example.com', '0612345678', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Elouard', 'Jean-Jacques', 'vendeur2@shop.fr', '0623456789', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 1, 0, 0, 0),
('Jean', 'Dupont','client1@gmail.com', '0634567890', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 1, 0, 0),
('Marie', 'Martin','client2@yahoo.fr', '0645678901', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 1, 0),
('Pierre', 'Durand','client3@outlook.com', '0656789012', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Sophie', 'Bernard','client4@free.fr', '0667890123', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Lucas', 'Petit','client5@orange.fr', '0678901234', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Emma', 'Lefebvre','client6@wanadoo.fr', '0689012345', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 0, 0),
('Martinière', 'Yvili', 'vendeur3@boutique.fr', '0690123456', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0);

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO _vendeur (id_compte, SIREN, raison_sociale, denomination, nb_produits_crees) VALUES
(2, '123456789', 'TechStore SARL', 'TechStore', 5),
(3, '987654321', 'FashionHub SAS', 'FashionHub', 3),
(10, '456789123', 'SportPro EURL', 'SportPro', 2);

-- 4. CLIENTS
INSERT INTO _client (id_compte, c_pseudo, c_nb_produits_achetes, c_depense_totale, c_cloture, c_datenaissance) VALUES
(4, 'jdupont', 2, 907.18, FALSE, '1985-03-15'),
(5, 'mmartin', 3, 124.75, FALSE, '1990-07-22'),
(6, 'pdurand', 1, 1091.98, FALSE, '1988-11-10'),
(7, 'sbernard', 2, 298.76, FALSE, '1995-05-30'),
(8, 'lpetit', 0, 0.0, FALSE, '2000-01-18'),
(9, 'elefebvre', 1, 179.98, FALSE, '1992-09-25');


-- 5. ADRESSES
INSERT INTO _adresse (id_compte, a_adresse, a_ville, a_code_postal, a_complement) VALUES
(4, '15 rue de la Paix', 'Paris', '75001', 'Apt 5'),
(5, '23 avenue des Champs', 'Lyon', '69001', NULL),
(6, '8 boulevard Victor Hugo', 'Marseille', '13001', 'Bâtiment B'),
(7, '42 rue du Commerce', 'Toulouse', '31000', NULL),
(8, '67 place de la République', 'Nice', '06000', '3ème étage'),
(9, '91 rue Principale', 'Bordeaux', '33000', NULL),
(2, '12 avenue du Commerce', 'Paris', '75015', 'Entrepôt A'),
(3, '55 rue de la Mode', 'Lyon', '69002', NULL),
(10, '78 boulevard du Sport', 'Marseille', '13008', 'Zone industrielle');

-- 6. COULEURS
INSERT INTO _couleur (code_hexa, nom, type_couleur) VALUES
('#FF0000', 'Rouge vif', 'Rouge'),
('#0000FF', 'Bleu marine', 'Bleu'),
('#000000', 'Noir', 'Noir'),
('#FFFFFF', 'Blanc pur', 'Blanc'),
('#00FF00', 'Vert émeraude', 'Vert'),
('#FFFF00', 'Jaune citron', 'Jaune'),
('#FFA500', 'Orange', 'Orange'),
('#808080', 'Gris', 'Gris'),
('#8B4513', 'Marron chocolat', 'Marron'),
('#EE82EE', 'Violet', 'Violet'),
('#87CEEB', 'Bleu ciel', 'Bleu'),
('#32CD32', 'Vert lime', 'Vert');

-- 7. CATÉGORIES
INSERT INTO _categorie_produit (nom_categorie) VALUES
('Électronique'),
('Vêtements'),
('Accessoires'),
('Maison'),
('Sport'),
('Livres'),
('Informatique'),
('Mode homme'),
('Mode femme'),
('Chaussures');

-- 8. TVA
INSERT INTO _TVA (montant_TVA, libelle_TVA) VALUES
(20.0, 'TVA normale'),
(10.0, 'TVA intermédiaire'),
(5.5, 'TVA réduite'),
(2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO _produit (id_TVA, id_vendeur, p_nom, p_description, p_prix, p_stock, p_statut, p_origine, p_poids, p_volume, p_frais_de_port, p_note, p_nb_ventes) VALUES
(1, 1, 'Smartphone XPro', 'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G', 599.99, 35, 'En ligne', 'Bretagne', 0.180, 0.01, 5.99, 4.3, 15),
(1, 1, 'Ordinateur portable Ultra', 'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7', 899.99, 22, 'En ligne', 'Bretagne', 2.5, 0.03, 9.99, 4.0, 8),
(1, 2, 'T-shirt coton bio', 'T-shirt 100% coton biologique, coupe regular, diverses couleurs', 24.99, 58, 'En ligne', 'Bretagne', 0.15, 0.5, 3.99, 5.0, 42),
(1, 2, 'Jean slim', 'Jean coupe slim stretch, denim premium', 49.99, 62, 'En ligne', 'Bretagne', 1.00, 0.01, 4.99, NULL, 18),
(1, 2, 'Robe d été', 'Robe légère et fluide pour l été, motifs floraux', 39.99, 48, 'En ligne', 'Bretagne', 0.30, 0.08, 4.99, NULL, 12),
(2, 1, 'Casque audio Bluetooth', 'Casque sans fil avec réduction de bruit active, autonomie 30h', 149.99, 15, 'En ligne', 'Bretagne', 0.25, 0.02, 5.99, 4.5, 25),
(1, 2, 'Sac à dos urbain', 'Sac à dos pour ordinateur portable, compartiments multiples, imperméable', 69.99, 35, 'En ligne', 'Bretagne', 0.60, 0.15, 6.99, NULL, 10),
(1, 1, 'Montre connectée', 'Montre sport avec GPS, cardiofréquencemètre, étanche 50m', 199.99, 15, 'En ligne', 'Bretagne', 0.05, 0.01, 3.99, 4.7, 20),
(1, 3, 'Chaussures running', 'Chaussures de course avec amorti premium, semelle respirante', 89.99, 54, 'En ligne', 'Bretagne', 0.40, 0.08, 5.99, 4.2, 16),
(1, 1, 'Tablette 10 pouces', 'Tablette Android, écran Full HD, 64Go, stylet inclus', 299.99, 16, 'En ligne', 'Bretagne', 0.50, 0.02, 7.99, 3.8, 9),
(1, 3, 'Ballon de football', 'Ballon officiel en cuir synthétique, taille 5', 29.99, 85, 'En ligne', 'Bretagne', 0.45, 0.06, 4.99, 4.6, 35),
(1, 2, 'Veste en cuir', 'Veste en cuir véritable, coupe motard, doublure intérieure', 189.99, 15, 'En ligne', 'Bretagne', 1.20, 0.01, 8.99, NULL, 5),
(3, 1, 'Livre cuisine française', 'Recettes traditionnelles de cuisine française, 300 pages', 24.99, 28, 'En ligne', 'Bretagne', 0.80, 0.03, 3.99, 4.8, 22),
(1, 3, 'Tapis de yoga', 'Tapis antidérapant, épaisseur 6mm, avec sac de transport', 34.99, 52, 'En ligne', 'Bretagne', 1.10, 0.02, 5.99, 4.4, 28),
(1, 1, 'Clavier mécanique RGB', 'Clavier gamer avec rétroéclairage RGB, switches mécaniques', 79.99, 29, 'En ligne', 'Bretagne', 0.90, 0.04, 5.99, 4.1, 11),
(1, 1, 'Console NextGen', 'Console de jeu dernière génération, 1To SSD, 4K HDR', 499.99, 0, 'Hors ligne', 'France', 3.5, 0.02, 14.99, 4.8, 25),
(1, 2, 'Sweat à capuche premium', 'Sweat-shirt en coton bio, coupe oversize, poche kangourou', 59.99, 0, 'Hors ligne', 'France', 0.70, 0.03, 5.99, 4.4, 18),
(1, 3, 'Raquette de tennis pro', 'Raquette carbone, tension 25kg, grip confort', 129.99, 0, 'Hors ligne', 'France', 0.35, 0.02, 6.99, 4.7, 32),
(1, 1, 'Écran gaming 4K 27"', 'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms', 349.99, 0, 'Hors ligne', 'France', 5.2, 0.35, 19.99, 4.6, 18),
(1, 2, 'Baskets limited edition', 'Baskets cuir véritable, édition limitée, semelle comfort', 179.99, 0, 'Hors ligne', 'France', 0.80, 0.06, 7.99, 4.9, 65),
(1, 3, 'Vélo de route carbone', 'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses', 1299.99, 0, 'Hors ligne', 'UE', 8.5, 0.15, 29.99, 4.8, 25),
(1, 1, 'Drone professionnel 4K', 'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min', 899.99, 0, 'Hors ligne', 'UE', 1.2, 0.02, 12.99, 4.6, 18),
(1, 2, 'Manteau d hiver imperméable', 'Manteau longueur genoux, doublure polaire, coupe-vent', 179.99, 0, 'Hors ligne', 'UE', 1.5, 0.01, 8.99, 4.4, 65),
(1, 3, 'Tente 4 places', 'Tente familiale, double toit, arceaux aluminium, imperméable', 249.99, 0, 'Hors ligne', 'Hors UE', 4.8, 0.08, 19.99, 4.7, 32),
(1, 1, 'Enceinte Bluetooth waterproof', 'Enceinte portable, autonomie 24h, résistance IP67', 129.99, 0, 'Hors ligne', 'Hors UE', 0.9, 0.05, 6.99, 4.9, 95),
(2, 1, 'Pull Marin de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.', 36.37, 31, 'En ligne', 'Bretagne', 2.06, 0.45, 5.78, 4.4, 12),
(1, 1, 'Bonnet Miki de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.', 121.37, 6, 'Hors ligne', 'Bretagne', 2.3, 0.09, 8.8, 4.3, 60),
(2, 3, 'Galettes Local', 'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.', 147.92, 142, 'En ligne', 'Bretagne', 0.46, 0.46, 5.71, 4.3, 97),
(1, 3, 'Écharpe Rayée Fait main', 'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.', 173.77, 102, 'En ligne', 'Bretagne', 0.91, 0.32, 8.28, 4.4, 58),
(1, 2, 'Écharpe Rayée de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.', 197.02, 168, 'Hors ligne', 'Bretagne', 2.1, 0.12, 7.92, 4.8, 19),
(4, 2, 'Ciré Navy de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.', 104.35, 169, 'En ligne', 'Bretagne', 1.43, 0.14, 7.22, 4.6, 72),
(4, 3, 'Bracelet Ancre Fait main', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 172.75, 44, 'Hors ligne', 'Bretagne', 1.92, 0.4, 8.8, 4.1, 102),
(1, 3, 'Marinière Local', 'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.', 74.29, 80, 'Hors ligne', 'Bretagne', 1.36, 0.23, 13.58, 4.9, 72),
(3, 1, 'Bracelet Ancre de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.', 40.53, 140, 'En ligne', 'Bretagne', 2.76, 0.3, 9.4, 4.1, 97),
(3, 3, 'Pendentif Hermine Fait main', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 164.23, 199, 'Hors ligne', 'Bretagne', 1.64, 0.07, 10.94, 4.9, 47),
(1, 3, 'Sac Voile de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.', 136.95, 100, 'En ligne', 'Bretagne', 1.37, 0.26, 6.09, 4.2, 91),
(2, 3, 'Écharpe Rayée de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 21.13, 22, 'Hors ligne', 'Bretagne', 2.73, 0.43, 5.64, 4.2, 129),
(1, 2, 'Coussin Triskell de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.', 134.55, 95, 'Hors ligne', 'Bretagne', 1.33, 0.24, 11.56, 4.7, 30),
(1, 3, 'Écharpe Rayée Authentique', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.', 36.49, 51, 'En ligne', 'Bretagne', 0.91, 0.13, 13.31, 4.4, 145),
(4, 3, 'Écharpe Rayée Bio', 'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.', 50.4, 107, 'Hors ligne', 'Bretagne', 2.72, 0.09, 5.02, 4.4, 121),
(1, 3, 'Bonnet Miki Authentique', 'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.', 119.47, 143, 'En ligne', 'Bretagne', 0.28, 0.16, 5.45, 4.5, 140),
(3, 1, 'Ciré Navy de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 187.96, 150, 'Hors ligne', 'Bretagne', 0.81, 0.3, 10.57, 4.4, 149),
(1, 1, 'Bol Breton Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.', 66.7, 85, 'En ligne', 'Bretagne', 2.79, 0.47, 5.08, 4.6, 149),
(1, 3, 'Bol Breton Premium', 'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.', 176.18, 99, 'Hors ligne', 'Bretagne', 0.93, 0.22, 9.89, 4.3, 140),
(3, 1, 'Pull Marin de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.', 30.23, 146, 'En ligne', 'Bretagne', 0.55, 0.15, 6.9, 4.3, 72),
(1, 1, 'Affiche Vintage de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.', 155.74, 168, 'En ligne', 'Bretagne', 2.94, 0.09, 8.98, 4.7, 148),
(2, 3, 'Vareuse Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 120.09, 42, 'En ligne', 'Bretagne', 1.35, 0.03, 8.28, 4.9, 15),
(3, 2, 'Pull Marin Bio', 'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.', 151.65, 65, 'En ligne', 'Bretagne', 2.61, 0.49, 12.3, 4.9, 11),
(1, 3, 'Kabig Bio', 'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.', 172.27, 61, 'En ligne', 'Bretagne', 0.68, 0.46, 8.15, 4.8, 63),
(1, 2, 'Phare Miniature Fait main', 'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.', 62.75, 169, 'En ligne', 'Bretagne', 1.58, 0.34, 12.59, 4.3, 12),
(3, 1, 'Bol Breton Fait main', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 75.33, 85, 'Hors ligne', 'Bretagne', 1.37, 0.49, 6.04, 4.9, 53),
(3, 3, 'Bracelet Ancre de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 23.23, 175, 'Hors ligne', 'Bretagne', 2.77, 0.32, 10.97, 4.1, 81),
(1, 2, 'Caramels de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.', 135.67, 102, 'Hors ligne', 'Bretagne', 2.06, 0.45, 10.54, 4.3, 145),
(3, 3, 'Affiche Vintage de Vannes', 'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.', 137.69, 135, 'Hors ligne', 'Bretagne', 1.47, 0.45, 12.16, 4.2, 26),
(4, 2, 'Écharpe Rayée de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.', 37.85, 16, 'Hors ligne', 'Bretagne', 0.81, 0.24, 12.65, 4.1, 111),
(4, 3, 'Vareuse de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 51.36, 183, 'Hors ligne', 'Bretagne', 1.6, 0.03, 7.24, 4.8, 121),
(4, 3, 'Bracelet Ancre Durable', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.', 150.55, 126, 'En ligne', 'Bretagne', 1.41, 0.38, 12.56, 4.3, 138),
(1, 2, 'Lampe Tempête de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.', 73.48, 143, 'Hors ligne', 'Bretagne', 0.33, 0.08, 8.45, 4.2, 59),
(4, 1, 'Sac Voile de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.', 167.42, 104, 'Hors ligne', 'Bretagne', 2.72, 0.3, 11.26, 4.9, 102),
(4, 1, 'Caramels de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.', 61.58, 129, 'En ligne', 'Bretagne', 0.18, 0.17, 11.11, 4.4, 47),
(4, 2, 'Pendentif Hermine de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 35.65, 123, 'Hors ligne', 'Bretagne', 0.63, 0.14, 7.95, 4.5, 91),
(2, 1, 'Ciré Navy Artisanal', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.', 19.84, 94, 'En ligne', 'Bretagne', 0.75, 0.04, 13.62, 4.0, 12),
(3, 1, 'Vareuse de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 51.2, 184, 'En ligne', 'Bretagne', 0.84, 0.19, 10.45, 5.0, 34),
(1, 2, 'Pendentif Hermine Bio', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.', 47.48, 156, 'Hors ligne', 'Bretagne', 2.1, 0.32, 5.92, 4.8, 35),
(4, 1, 'Galettes de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.', 89.39, 130, 'Hors ligne', 'Bretagne', 0.41, 0.48, 10.72, 4.8, 44),
(2, 2, 'Sac Voile Durable', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.', 148.16, 73, 'Hors ligne', 'Bretagne', 1.03, 0.13, 13.41, 4.3, 120),
(1, 1, 'Marinière de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.', 50.09, 71, 'Hors ligne', 'Bretagne', 1.09, 0.44, 11.31, 4.3, 7),
(4, 3, 'Sac Voile Bio', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.', 102.77, 9, 'Hors ligne', 'Bretagne', 0.37, 0.12, 11.23, 4.3, 99),
(2, 1, 'Sac Voile Premium', 'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.', 61.2, 69, 'Hors ligne', 'Bretagne', 0.77, 0.36, 7.84, 4.7, 52),
(1, 1, 'Pendentif Hermine Local', 'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.', 167.37, 80, 'Hors ligne', 'Bretagne', 0.76, 0.1, 5.13, 4.5, 75),
(1, 2, 'Vareuse Durable', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 118.5, 125, 'Hors ligne', 'Bretagne', 1.49, 0.18, 13.69, 4.3, 127),
(4, 2, 'Pendentif Hermine Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 116.38, 82, 'Hors ligne', 'Bretagne', 0.35, 0.13, 10.02, 4.4, 62),
(2, 1, 'Pendentif Hermine de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.', 21.38, 194, 'En ligne', 'Bretagne', 0.39, 0.38, 10.63, 4.3, 25),
(2, 2, 'Ciré Navy de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.', 140.29, 125, 'En ligne', 'Bretagne', 0.94, 0.12, 11.36, 4.7, 121),
(4, 1, 'Pull Marin Authentique', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 181.69, 41, 'Hors ligne', 'Bretagne', 0.31, 0.09, 7.77, 4.7, 150),
(1, 1, 'Bolée à Cidre Local', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.', 103.33, 25, 'En ligne', 'Bretagne', 1.83, 0.45, 11.61, 4.6, 11),
(4, 2, 'Bol Breton de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 133.14, 76, 'Hors ligne', 'Bretagne', 0.63, 0.3, 10.71, 4.5, 28),
(3, 2, 'Phare Miniature de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.', 141.1, 78, 'Hors ligne', 'Bretagne', 2.02, 0.21, 11.84, 4.0, 27),
(1, 1, 'Caramels Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 112.55, 110, 'Hors ligne', 'Bretagne', 0.26, 0.26, 10.6, 4.5, 118),
(4, 1, 'Vareuse de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.', 101.61, 12, 'En ligne', 'Bretagne', 2.92, 0.31, 7.15, 4.2, 146),
(2, 2, 'Lampe Tempête Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.', 145.44, 135, 'En ligne', 'Bretagne', 2.15, 0.21, 9.34, 4.5, 121),
(4, 1, 'Bracelet Ancre de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.', 159.31, 111, 'Hors ligne', 'Bretagne', 1.09, 0.4, 7.4, 4.0, 81),
(2, 2, 'Coussin Triskell Premium', 'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.', 112.71, 121, 'En ligne', 'Bretagne', 2.81, 0.44, 13.83, 4.2, 103),
(1, 2, 'Coussin Triskell Bio', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.', 159.76, 171, 'En ligne', 'Bretagne', 2.94, 0.25, 5.33, 4.5, 89),
(1, 2, 'Lampe Tempête de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 133.75, 44, 'Hors ligne', 'Bretagne', 0.32, 0.39, 7.39, 4.6, 106),
(1, 2, 'Coussin Triskell Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 54.37, 180, 'En ligne', 'Bretagne', 2.77, 0.5, 11.72, 4.4, 30),
(2, 1, 'Bolée à Cidre de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.', 20.61, 96, 'En ligne', 'Bretagne', 1.19, 0.08, 9.78, 4.6, 51),
(3, 3, 'Caramels Durable', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.', 37.05, 123, 'En ligne', 'Bretagne', 1.95, 0.24, 11.0, 4.9, 124),
(2, 2, 'Lampe Tempête Local', 'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.', 90.19, 69, 'Hors ligne', 'Bretagne', 1.42, 0.16, 13.99, 4.9, 32),
(3, 1, 'Bolée à Cidre Artisanal', 'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.', 134.41, 75, 'Hors ligne', 'Bretagne', 0.12, 0.43, 12.0, 5.0, 132),
(3, 2, 'Bonnet Miki Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.', 180.74, 170, 'Hors ligne', 'Bretagne', 0.21, 0.4, 5.3, 4.4, 38),
(4, 1, 'Bonnet Miki Premium', 'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.', 182.65, 47, 'En ligne', 'Bretagne', 0.85, 0.41, 9.34, 4.8, 91),
(3, 1, 'Caramels de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.', 84.57, 72, 'En ligne', 'Bretagne', 1.66, 0.23, 11.06, 4.7, 102),
(1, 1, 'Marinière Premium', 'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.', 51.84, 21, 'Hors ligne', 'Bretagne', 1.94, 0.24, 11.31, 4.6, 34),
(1, 2, 'Pull Marin de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 35.64, 121, 'Hors ligne', 'Bretagne', 1.18, 0.48, 11.27, 4.5, 44),
(4, 2, 'Ciré Jaune de Vannes', 'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.', 189.65, 97, 'En ligne', 'Bretagne', 0.39, 0.35, 9.9, 5.0, 96),
(1, 3, 'Lampe Tempête Authentique', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 122.86, 10, 'En ligne', 'Bretagne', 0.25, 0.17, 13.9, 4.8, 57),
(1, 3, 'Bonnet Miki de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.', 159.05, 157, 'En ligne', 'Bretagne', 0.11, 0.43, 6.3, 4.1, 69),
(3, 3, 'Marinière Authentique', 'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.', 12.98, 72, 'En ligne', 'Bretagne', 0.25, 0.37, 9.73, 4.7, 126),
(4, 2, 'Bracelet Ancre Artisanal', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.', 181.75, 173, 'En ligne', 'Bretagne', 1.61, 0.23, 13.68, 4.1, 127),
(3, 2, 'Lampe Tempête de Vannes', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 38.04, 37, 'Hors ligne', 'Bretagne', 0.9, 0.32, 9.94, 4.3, 140),
(3, 2, 'Pull Marin de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 177.85, 110, 'En ligne', 'Bretagne', 1.08, 0.23, 8.74, 4.1, 114),
(3, 3, 'Coussin Triskell Fait main', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 27.62, 29, 'En ligne', 'Bretagne', 2.26, 0.19, 6.17, 4.1, 148),
(3, 3, 'Galettes Artisanal', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.', 123.48, 95, 'Hors ligne', 'Bretagne', 0.4, 0.26, 6.39, 4.5, 32),
(1, 1, 'Bol Breton Bio', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.', 194.19, 164, 'Hors ligne', 'Bretagne', 1.88, 0.32, 5.24, 4.9, 73);

-- 10. PROMOTIONS (futures)
INSERT INTO _promotion (id_produit, promotion_debut, promotion_fin) VALUES
(1, '2027-12-20 00:00:00', '2027-12-25 23:59:59'),
(2, '2026-02-01 00:00:00', '2026-02-07 23:59:59'),
(3, '2026-02-16 00:00:00', '2026-02-25 23:59:59'),
(4, '2026-04-01 00:00:00', '2026-04-15 23:59:59'),
(5, '2026-05-01 00:00:00', '2026-05-07 23:59:59'),
(6, '2026-06-10 00:00:00', '2026-06-20 23:59:59'),
(7, '2026-07-01 00:00:00', '2026-07-31 23:59:59');

-- 9. RÉDUCTIONS (futures)
INSERT INTO _reduction (id_produit, reduction_pourcentage, reduction_debut, reduction_fin) VALUES
(1, 10.00, '2026-02-09 00:00:00', '2026-02-19 23:59:59'),
(2, 15.00, '2026-02-15 00:00:00', '2026-02-25 23:59:59'),
(3, 20.00, '2026-02-01 00:00:00', '2026-02-15 23:59:59'),
(4, 25.00, '2026-02-20 00:00:00', '2026-02-26 23:59:59'),
(5, 30.00, '2026-06-01 00:00:00', '2026-06-30 23:59:59'),
(6, 60.00, '2026-04-01 00:00:00', '2026-04-15 23:59:59'),
(7, 55.00, '2026-05-01 00:00:00', '2026-05-07 23:59:59'),
(8, 70.00, '2026-06-10 00:00:00', '2026-06-20 23:59:59'),
(9, 65.00, '2026-07-01 00:00:00', '2026-07-31 23:59:59');

-- 12. IMAGES
INSERT INTO _image (i_lien, i_title, i_alt) VALUES
('/img/photo/smartphone_xpro.jpg', 'Smartphone XPro.jpg', 'Image du smartphone'),
('/img/photo/ordinateur_portable_ultra.jpg', 'Ordinateur portable.jpeg', 'Image de l ordinateur'),
('/img/photo/t_shirt_coton_bio.jpg', 'T-shirt.png', 'Image du t-shirt'),
('/img/photo/jean_slim.jpg', 'Jean.jpg', 'Image du jean'),
('/img/photo/casque_audio_bluetooth.jpg', 'Casque audio.jpg', 'Image du casque'),
('/img/photo/avatar_jean.jpg', 'Avatar Jean.jpeg', 'Photo de profil Jean'),
('/img/photo/avatar_marie.jpg', 'Avatar Marie.jpg', 'Photo de profil Marie'),
('/img/photo/logo_techstore.jpg', 'Logo TechStore.jpg', 'Logo entreprise TechStore'),
('/img/photo/logo_fashionhub.jpg', 'Logo FashionHub.jpg', 'Logo entreprise FashionHub'),
('/img/photo/montre_connect_e.jpg', 'Montre connectée.jpg', 'Image de la montre'),
('/img/photo/sac___dos_urbain.jpg', 'Sac à dos.jpeg', 'Image du sac'),
('/img/photo/chaussures_running.jpg', 'Chaussures running.jpeg', 'Image des chaussures'),
('/img/photo/tablette_10_pouces.jpg', 'Tablette.jpg', 'Image de la tablette'),
('/img/photo/ballon_de_football.jpg', 'Ballon football.jpg', 'Image du ballon'),
('/img/photo/veste_en_cuir.jpg', 'Veste cuir.jpg', 'Image de la veste'),
('/img/photo/livre_cuisine_fran_aise.jpg', 'Livre cuisine.jpeg', 'Image du livre'),
('/img/photo/tapis_de_yoga.jpg', 'Tapis yoga.jpeg', 'Image du tapis'),
('/img/photo/clavier_m_canique_rgb.jpg', 'Clavier.jpg', 'Image du clavier'),
('/img/photo/console_nextgen.jpg', 'Console NextGen.jpg', 'Image de la console'),
('/img/photo/sweat___capuche_premium.jpg', 'Sweat à capuche.jpeg', 'Image du sweat'),
('/img/photo/raquette_de_tennis_pro.jpg', 'Raquette tennis.jpg', 'Image de la raquette'),
('/img/photo/_cran_gaming_4k_27_.jpg', 'Écran 4K.jpeg', 'Image de l écran'),
('/img/photo/baskets_limited_edition.jpg', 'Baskets limited.jpeg', 'Image des baskets'),
('/img/photo/v_lo_de_route_carbone.jpg', 'Vélo route.jpeg', 'Image du vélo'),
('/img/photo/drone_professionnel_4k.jpg', 'Drone 4K.jpg', 'Image du drone'),
('/img/photo/manteau_d_hiver_imperm_able.jpg', 'Manteau hiver.jpeg', 'Image du manteau'),
('/img/photo/tente_4_places.jpg', 'Tente 4 places.jpg', 'Image de la tente'),
('/img/photo/enceinte_bluetooth_waterproof.jpg', 'Enceinte Bluetooth.jpg', 'Image de l enceinte'),
('/img/photo/pull_marin_de_saint_malo.jpg', 'Pull Marin de Saint-Malo', 'Photo de Pull Marin de Saint-Malo'),
('/img/photo/bonnet_miki_de_carnac.jpg', 'Bonnet Miki de Carnac', 'Photo de Bonnet Miki de Carnac'),
('/img/photo/galettes_local.jpg', 'Galettes Local', 'Photo de Galettes Local'),
('/img/photo/_charpe_ray_e_fait_main.jpg', 'Écharpe Rayée Fait main', 'Photo de Écharpe Rayée Fait main'),
('/img/photo/_charpe_ray_e_de_brest.jpg', 'Écharpe Rayée de Brest', 'Photo de Écharpe Rayée de Brest'),
('/img/photo/cir__navy_de_concarneau.jpg', 'Ciré Navy de Concarneau', 'Photo de Ciré Navy de Concarneau'),
('/img/photo/bracelet_ancre_fait_main.jpg', 'Bracelet Ancre Fait main', 'Photo de Bracelet Ancre Fait main'),
('/img/photo/marini_re_local.jpg', 'Marinière Local', 'Photo de Marinière Local'),
('/img/photo/bracelet_ancre_de_concarneau.jpg', 'Bracelet Ancre de Concarneau', 'Photo de Bracelet Ancre de Concarneau'),
('/img/photo/pendentif_hermine_fait_main.jpg', 'Pendentif Hermine Fait main', 'Photo de Pendentif Hermine Fait main'),
('/img/photo/sac_voile_de_concarneau.jpg', 'Sac Voile de Concarneau', 'Photo de Sac Voile de Concarneau'),
('/img/photo/_charpe_ray_e_de_saint_malo.jpg', 'Écharpe Rayée de Saint-Malo', 'Photo de Écharpe Rayée de Saint-Malo'),
('/img/photo/coussin_triskell_de_roscoff.jpg', 'Coussin Triskell de Roscoff', 'Photo de Coussin Triskell de Roscoff'),
('/img/photo/_charpe_ray_e_authentique.jpg', 'Écharpe Rayée Authentique', 'Photo de Écharpe Rayée Authentique'),
('/img/photo/_charpe_ray_e_bio.jpg', 'Écharpe Rayée Bio', 'Photo de Écharpe Rayée Bio'),
('/img/photo/bonnet_miki_authentique.jpg', 'Bonnet Miki Authentique', 'Photo de Bonnet Miki Authentique'),
('/img/photo/cir__navy_de_quimper.jpg', 'Ciré Navy de Quimper', 'Photo de Ciré Navy de Quimper'),
('/img/photo/bol_breton_traditionnel.jpg', 'Bol Breton Traditionnel', 'Photo de Bol Breton Traditionnel'),
('/img/photo/bol_breton_premium.jpg', 'Bol Breton Premium', 'Photo de Bol Breton Premium'),
('/img/photo/pull_marin_de_brest.jpg', 'Pull Marin de Brest', 'Photo de Pull Marin de Brest'),
('/img/photo/affiche_vintage_de_dinard.jpg', 'Affiche Vintage de Dinard', 'Photo de Affiche Vintage de Dinard'),
('/img/photo/vareuse_artisanal.jpg', 'Vareuse Artisanal', 'Photo de Vareuse Artisanal'),
('/img/photo/pull_marin_bio.jpg', 'Pull Marin Bio', 'Photo de Pull Marin Bio'),
('/img/photo/kabig_bio.jpg', 'Kabig Bio', 'Photo de Kabig Bio'),
('/img/photo/phare_miniature_fait_main.jpg', 'Phare Miniature Fait main', 'Photo de Phare Miniature Fait main'),
('/img/photo/bol_breton_fait_main.jpg', 'Bol Breton Fait main', 'Photo de Bol Breton Fait main'),
('/img/photo/bracelet_ancre_de_carnac.jpg', 'Bracelet Ancre de Carnac', 'Photo de Bracelet Ancre de Carnac'),
('/img/photo/caramels_de_dinard.jpg', 'Caramels de Dinard', 'Photo de Caramels de Dinard'),
('/img/photo/affiche_vintage_de_vannes.jpg', 'Affiche Vintage de Vannes', 'Photo de Affiche Vintage de Vannes'),
('/img/photo/_charpe_ray_e_de_dinard.jpg', 'Écharpe Rayée de Dinard', 'Photo de Écharpe Rayée de Dinard'),
('/img/photo/vareuse_de_saint_malo.jpg', 'Vareuse de Saint-Malo', 'Photo de Vareuse de Saint-Malo'),
('/img/photo/bracelet_ancre_durable.jpg', 'Bracelet Ancre Durable', 'Photo de Bracelet Ancre Durable'),
('/img/photo/lampe_temp_te_de_quimper.jpg', 'Lampe Tempête de Quimper', 'Photo de Lampe Tempête de Quimper'),
('/img/photo/sac_voile_de_pont_aven.jpg', 'Sac Voile de Pont-Aven', 'Photo de Sac Voile de Pont-Aven'),
('/img/photo/caramels_de_roscoff.jpg', 'Caramels de Roscoff', 'Photo de Caramels de Roscoff'),
('/img/photo/pendentif_hermine_de_saint_malo.jpg', 'Pendentif Hermine de Saint-Malo', 'Photo de Pendentif Hermine de Saint-Malo'),
('/img/photo/cir__navy_artisanal.jpg', 'Ciré Navy Artisanal', 'Photo de Ciré Navy Artisanal'),
('/img/photo/vareuse_de_pont_aven.jpg', 'Vareuse de Pont-Aven', 'Photo de Vareuse de Pont-Aven'),
('/img/photo/pendentif_hermine_bio.jpg', 'Pendentif Hermine Bio', 'Photo de Pendentif Hermine Bio'),
('/img/photo/galettes_de_quimper.jpg', 'Galettes de Quimper', 'Photo de Galettes de Quimper'),
('/img/photo/sac_voile_durable.jpg', 'Sac Voile Durable', 'Photo de Sac Voile Durable'),
('/img/photo/marini_re_de_pont_aven.jpg', 'Marinière de Pont-Aven', 'Photo de Marinière de Pont-Aven'),
('/img/photo/sac_voile_bio.jpg', 'Sac Voile Bio', 'Photo de Sac Voile Bio'),
('/img/photo/sac_voile_premium.jpg', 'Sac Voile Premium', 'Photo de Sac Voile Premium'),
('/img/photo/pendentif_hermine_local.jpg', 'Pendentif Hermine Local', 'Photo de Pendentif Hermine Local'),
('/img/photo/vareuse_durable.jpg', 'Vareuse Durable', 'Photo de Vareuse Durable'),
('/img/photo/pendentif_hermine_traditionnel.jpg', 'Pendentif Hermine Traditionnel', 'Photo de Pendentif Hermine Traditionnel'),
('/img/photo/pendentif_hermine_de_roscoff.jpg', 'Pendentif Hermine de Roscoff', 'Photo de Pendentif Hermine de Roscoff'),
('/img/photo/cir__navy_de_brest.jpg', 'Ciré Navy de Brest', 'Photo de Ciré Navy de Brest'),
('/img/photo/pull_marin_authentique.jpg', 'Pull Marin Authentique', 'Photo de Pull Marin Authentique'),
('/img/photo/bol_e___cidre_local.jpg', 'Bolée à Cidre Local', 'Photo de Bolée à Cidre Local'),
('/img/photo/bol_breton_de_saint_malo.jpg', 'Bol Breton de Saint-Malo', 'Photo de Bol Breton de Saint-Malo'),
('/img/photo/phare_miniature_de_quimper.jpg', 'Phare Miniature de Quimper', 'Photo de Phare Miniature de Quimper'),
('/img/photo/caramels_artisanal.jpg', 'Caramels Artisanal', 'Photo de Caramels Artisanal'),
('/img/photo/vareuse_de_dinard.jpg', 'Vareuse de Dinard', 'Photo de Vareuse de Dinard'),
('/img/photo/lampe_temp_te_traditionnel.jpg', 'Lampe Tempête Traditionnel', 'Photo de Lampe Tempête Traditionnel'),
('/img/photo/bracelet_ancre_de_brest.jpg', 'Bracelet Ancre de Brest', 'Photo de Bracelet Ancre de Brest'),
('/img/photo/coussin_triskell_premium.jpg', 'Coussin Triskell Premium', 'Photo de Coussin Triskell Premium'),
('/img/photo/coussin_triskell_bio.jpg', 'Coussin Triskell Bio', 'Photo de Coussin Triskell Bio'),
('/img/photo/lampe_temp_te_de_saint_malo.jpg', 'Lampe Tempête de Saint-Malo', 'Photo de Lampe Tempête de Saint-Malo'),
('/img/photo/coussin_triskell_artisanal.jpg', 'Coussin Triskell Artisanal', 'Photo de Coussin Triskell Artisanal'),
('/img/photo/bol_e___cidre_de_saint_malo.jpg', 'Bolée à Cidre de Saint-Malo', 'Photo de Bolée à Cidre de Saint-Malo'),
('/img/photo/caramels_durable.jpg', 'Caramels Durable', 'Photo de Caramels Durable'),
('/img/photo/lampe_temp_te_local.jpg', 'Lampe Tempête Local', 'Photo de Lampe Tempête Local'),
('/img/photo/bol_e___cidre_artisanal.jpg', 'Bolée à Cidre Artisanal', 'Photo de Bolée à Cidre Artisanal'),
('/img/photo/bonnet_miki_traditionnel.jpg', 'Bonnet Miki Traditionnel', 'Photo de Bonnet Miki Traditionnel'),
('/img/photo/bonnet_miki_premium.jpg', 'Bonnet Miki Premium', 'Photo de Bonnet Miki Premium'),
('/img/photo/caramels_de_carnac.jpg', 'Caramels de Carnac', 'Photo de Caramels de Carnac'),
('/img/photo/marini_re_premium.jpg', 'Marinière Premium', 'Photo de Marinière Premium'),
('/img/photo/pull_marin_de_quimper.jpg', 'Pull Marin de Quimper', 'Photo de Pull Marin de Quimper'),
('/img/photo/cir__jaune_de_vannes.jpg', 'Ciré Jaune de Vannes', 'Photo de Ciré Jaune de Vannes'),
('/img/photo/lampe_temp_te_authentique.jpg', 'Lampe Tempête Authentique', 'Photo de Lampe Tempête Authentique'),
('/img/photo/bonnet_miki_de_concarneau.jpg', 'Bonnet Miki de Concarneau', 'Photo de Bonnet Miki de Concarneau'),
('/img/photo/marini_re_authentique.jpg', 'Marinière Authentique', 'Photo de Marinière Authentique'),
('/img/photo/bracelet_ancre_artisanal.jpg', 'Bracelet Ancre Artisanal', 'Photo de Bracelet Ancre Artisanal'),
('/img/photo/lampe_temp_te_de_vannes.jpg', 'Lampe Tempête de Vannes', 'Photo de Lampe Tempête de Vannes'),
('/img/photo/pull_marin_de_carnac.jpg', 'Pull Marin de Carnac', 'Photo de Pull Marin de Carnac'),
('/img/photo/coussin_triskell_fait_main.jpg', 'Coussin Triskell Fait main', 'Photo de Coussin Triskell Fait main'),
('/img/photo/galettes_artisanal.jpg', 'Galettes Artisanal', 'Photo de Galettes Artisanal'),
('/img/photo/bol_breton_bio.jpg', 'Bol Breton Bio', 'Photo de Bol Breton Bio');

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO _represente_produit (id_image, id_produit) VALUES
(1, 1), (2,2), (3, 3), (4, 4), (5, 6), (10, 8), (11, 7),
(12, 9), (13, 10), (14, 11), (15, 12), (16, 13), (17, 14), (18, 15),
(19, 16), (20, 17), (21, 18), (22, 19), (23, 20),
(24, 21), (25, 22), (26, 23), (27, 24), (28, 25),
(29, 26), (30, 27), (31, 28), (32, 29), (33, 30), (34, 31), (35, 32), (36, 33), (37, 34), (38, 35), (39, 36), (40, 37), (41, 38), (42, 39), (43, 40), (44, 41), (45, 42), (46, 43), (47, 44), (48, 45), (49, 46), (50, 47), (51, 48), (52, 49), (53, 50), (54, 51), (55, 52), (56, 53), (57, 54), (58, 55), (59, 56), (60, 57), (61, 58), (62, 59), (63, 60), (64, 61), (65, 62), (66, 63), (67, 64), (68, 65), (69, 66), (70, 67), (71, 68), (72, 69), (73, 70), (74, 71), (75, 72), (76, 73), (77, 74), (78, 75), (79, 76), (80, 77), (81, 78), (82, 79), (83, 80), (84, 81), (85, 82), (86, 83), (87, 84), (88, 85), (89, 86), (90, 87), (91, 88), (92, 89), (93, 90), (94, 91), (95, 92), (96, 93), (97, 94), (98, 95), (99, 96), (100, 97), (101, 98), (102, 99), (103, 100), (104, 101), (105, 102), (106, 103), (107, 104), (108, 105);


-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO _represente_compte (id_image, id_compte) VALUES
(6, 4), (7, 5), (8, 2), (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO _fait_partie_de (id_produit, id_categorie) VALUES
(1, 1), (1, 7), (2, 1), (2, 7), (3, 2), (3, 8), (4, 2), (4, 8),
(5, 2), (5, 9), (6, 1), (6, 3), (7, 3), (8, 1), (8, 3), (8, 5),
(9, 5), (9, 10), (10, 1), (10, 7), (11, 5), (12, 2), (12, 8),
(13, 6), (14, 5), (15, 1), (15, 7),
(16, 1), (16, 7), (17, 2), (17, 8), (18, 5), (19, 1), (19, 7), (20, 10),
(21, 5), (22, 1), (22, 3), (23, 2), (23, 8), (24, 4), (24, 5), (25, 1), (25, 3),
(26, 2), (26, 8), (27, 2), (27, 3), (27, 8), (28, 4), (29, 2), (29, 3), (30, 2), (30, 3), (31, 2), (31, 8), (31, 9), (32, 3), (33, 2), (33, 8), (33, 9), (34, 3), (35, 3), (36, 3), (37, 2), (37, 3), (38, 4), (39, 2), (39, 3), (40, 2), (40, 3), (41, 2), (41, 3), (41, 8), (42, 2), (42, 8), (42, 9), (43, 4), (44, 4), (45, 2), (45, 8), (46, 4), (47, 2), (47, 8), (48, 2), (48, 8), (49, 2), (49, 8), (49, 9), (50, 4), (51, 4), (52, 3), (53, 4), (54, 4), (55, 2), (55, 3), (56, 2), (56, 8), (57, 3), (58, 4), (59, 3), (60, 4), (61, 3), (62, 2), (62, 8), (62, 9), (63, 2), (63, 8), (64, 3), (65, 4), (66, 3), (67, 2), (67, 8), (67, 9), (68, 3), (69, 3), (70, 3), (71, 2), (71, 8), (72, 3), (73, 3), (74, 2), (74, 8), (74, 9), (75, 2), (75, 8), (76, 4), (77, 4), (78, 4), (79, 4), (80, 2), (80, 8), (81, 4), (82, 3), (83, 4), (84, 4), (85, 4), (86, 4), (87, 4), (88, 4), (89, 4), (90, 4), (91, 2), (91, 3), (91, 8), (92, 2), (92, 3), (92, 8), (93, 4), (94, 2), (94, 8), (94, 9), (95, 2), (95, 8), (96, 2), (96, 8), (96, 9), (97, 4), (98, 2), (98, 3), (98, 8), (99, 2), (99, 8), (99, 9), (100, 3), (101, 4), (102, 2), (102, 8), (103, 4), (104, 4), (105, 4);


-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO _est_dote_de (id_produit, code_hexa) VALUES
(1, '#000000'), (1, '#FFFFFF'), (2, '#808080'), (3, '#0000FF'), (3, '#FF0000'),
(3, '#00FF00'), (4, '#0000FF'), (4, '#000000'), (5, '#FF0000'), (5, '#FFFFFF'),
(6, '#000000'), (7, '#808080'), (8, '#000000'), (9, '#0000FF'), (9, '#FF0000'),
(10, '#808080'), (11, '#FFFFFF'), (12, '#000000'), (12, '#8B4513'),
(14, '#EE82EE'), (14, '#87CEEB'), (15, '#000000'),
(16, '#000000'), (16, '#FFFFFF'), (17, '#808080'), (17, '#000000'), (18, '#FFFFFF'), (18, '#000000'),
(19, '#000000'), (20, '#FFFFFF'), (20, '#000000'),
(21, '#0000FF'), (21, '#FF0000'), (22, '#808080'), (23, '#000000'), (23, '#8B4513'),
(24, '#87CEEB'), (24, '#32CD32'), (25, '#000000'), (25, '#FF0000'),
(26, '#8B4513'), (27, '#0000FF'), (28, '#FF0000'), (29, '#8B4513'), (30, '#00FF00'), (31, '#000000'), (32, '#8B4513'), (33, '#87CEEB'), (34, '#FFFFFF'), (35, '#FFFFFF'), (36, '#EE82EE'), (37, '#FFFFFF'), (38, '#0000FF'), (39, '#0000FF'), (40, '#000000'), (41, '#000000'), (42, '#FFFFFF'), (43, '#8B4513'), (44, '#87CEEB'), (45, '#87CEEB'), (46, '#32CD32'), (47, '#87CEEB'), (48, '#00FF00'), (49, '#FFA500'), (50, '#EE82EE'), (51, '#FF0000'), (52, '#FFFF00'), (53, '#FFFFFF'), (54, '#0000FF'), (55, '#FFFFFF'), (56, '#808080'), (57, '#00FF00'), (58, '#FFFF00'), (59, '#00FF00'), (60, '#FFA500'), (61, '#00FF00'), (62, '#FFFFFF'), (63, '#00FF00'), (64, '#87CEEB'), (65, '#EE82EE'), (66, '#FFFF00'), (67, '#808080'), (68, '#FFA500'), (69, '#00FF00'), (70, '#32CD32'), (71, '#0000FF'), (72, '#00FF00'), (73, '#8B4513'), (74, '#FFA500'), (75, '#32CD32'), (76, '#87CEEB'), (77, '#FFFF00'), (78, '#0000FF'), (79, '#8B4513'), (80, '#0000FF'), (81, '#EE82EE'), (82, '#8B4513'), (83, '#FFFF00'), (84, '#8B4513'), (85, '#FFFF00'), (86, '#32CD32'), (87, '#EE82EE'), (88, '#0000FF'), (89, '#EE82EE'), (90, '#FFFFFF'), (91, '#000000'), (92, '#FFFFFF'), (93, '#808080'), (94, '#808080'), (95, '#00FF00'), (96, '#0000FF'), (97, '#EE82EE'), (98, '#000000'), (99, '#808080'), (100, '#808080'), (101, '#0000FF'), (102, '#87CEEB'), (103, '#FFA500'), (104, '#0000FF'), (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO _seuil_alerte (nb_seuil, message_seuil) VALUES
(10, 'Stock faible - Envisager un réapprovisionnement'),
(5, 'Stock critique - Réapprovisionnement urgent'),
(3, 'Rupture imminente - Commander immédiatement'),
(20, 'Stock normal - Surveillance recommandée'),
(1, 'Rupture de stock - Produit indisponible');

INSERT INTO _adresse (id_compte, a_numero, a_adresse, a_ville, a_code_postal, a_pays) VALUES
(4, 13, 'rue du Pillard', 'Rennes', 35590, 'France');

-- 18. PANIERS/COMMANDES
INSERT INTO _panier_commande (id_client, timestamp_commande) VALUES
(1, '2025-11-01 10:30:00'),
(2, '2025-11-02 14:45:00'),
(3, '2025-11-03 09:15:00'),
(1, NULL),
(4, '2025-11-04 16:20:00'),
(6, '2025-11-05 11:00:00'),
(2, NULL),
(5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO _contient (id_panier, id_produit, quantite, prix_unitaire, remise_unitaire, frais_de_port, TVA) VALUES
(1, 1, 1, 599.99, 0.0, 5.99, 20.0),
(1, 6, 1, 149.99, 0.0, 5.99, 20.0),
(2, 3, 2, 24.99, 0.0, 3.99, 20.0),
(2, 4, 1, 49.99, 0.0, 4.99, 20.0),
(3, 2, 1, 899.99, 0.0, 9.99, 20.0),
(4, 7, 1, 69.99, 0.0, 6.99, 20.0),
(5, 5, 1, 39.99, 0.0, 4.99, 20.0),
(5, 8, 1, 199.99, 0.0, 3.99, 20.0),
(6, 9, 2, 89.99, 0.0, 5.99, 20.0),
(7, 10, 1, 299.99, 0.0, 7.99, 20.0),
(8, 11, 1, 29.99, 0.0, 4.99, 20.0),
(8, 13, 1, 24.99, 0.0, 3.99, 20.0),
(8, 14, 1, 34.99, 0.0, 5.99, 20.0);

-- 20. FACTURES
INSERT INTO _facture (id_panier, id_adresse, f_total_ht, f_total_remise, f_total_ht_remise, f_total_ttc) VALUES
(1, 1, 755.98, 0.0, 755.98, 907.18),
(2, 1, 103.96, 0.0, 103.96, 124.75),
(3, 1, 909.98, 0.0, 909.98, 1091.98),
(5, 1, 248.97, 0.0, 248.97, 298.76),
(6, 1, 185.97, 0.0, 185.97, 223.16),
(8, 1, 95.96, 0.0, 95.96, 115.15);

-- 21. PAIEMENTS
INSERT INTO _paiement (id_facture, mode_paiement, numero_carte, mois_annee_expiration, cryptogramme_carte, timestamp_paiement) VALUES
(1, 'CB', '1234567890123456', '12/27', '123', '2025-11-01 10:35:00'),
(2, 'CB', '6543210987654321', '06/26', '456', '2025-11-02 14:50:00'),
(3, 'CB', '1111222233334444', '03/28', '789', '2025-11-03 09:20:00'),
(4, 'CB', '9999888877776666', '09/27', '321', '2025-11-04 16:25:00'),
(5, 'CB', '5555666677778888', '11/26', '654', '2025-11-05 11:05:00'),
(6, 'CB', '4444333322221111', '08/27', '987', '2025-11-06 13:35:00');

-- 22. LIVRAISONS
INSERT INTO _livraison (id_facture, date_livraison, etat_livraison) VALUES
(1, '2025-11-05', 'Livré'),
(2, '2025-11-06', 'Livré'),
(3, '2025-11-08', 'En transit'),
(4, NULL, 'En préparation'),
(5, '2025-11-09', 'Livré'),
(6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO _definie_pour (id_seuil, id_compte) VALUES
(1, 2), (2, 2), (3, 2), (4, 2), (5, 2),
(1, 3), (2, 3), (3, 3), (5, 3),
(1, 10), (2, 10), (3, 10), (4, 10), (5, 10),
(5, 1);


-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;
UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;
UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;
UPDATE cobrec1._commentaire SET a_note = 0.0;


SELECT DISTINCT ON (p.id_produit)
            p.id_produit,
            p.p_nom,
            p.p_description,
            p.p_prix,
            p.p_stock,
            r.reduction_pourcentage,
            pr.id_produit,
            (SELECT COUNT(*) FROM cobrec1._avis av2 WHERE av2.id_produit = p.id_produit AND av2.a_note IS NOT NULL) as nombre_avis,
            (SELECT ROUND(COALESCE(AVG(av3.a_note), 0)::numeric, 1) FROM cobrec1._avis av3 WHERE av3.id_produit = p.id_produit AND av3.a_note IS NOT NULL) as note_moyenne,
            (SELECT COALESCE(i2.i_lien, '/img/photo/smartphone_xpro.jpg') FROM cobrec1._represente_produit rp2 LEFT JOIN cobrec1._image i2 ON rp2.id_image = i2.id_image WHERE rp2.id_produit = p.id_produit LIMIT 1) as image_url,
            STRING_AGG(DISTINCT cp.nom_categorie, ', ') as categories
        FROM cobrec1._produit p
        LEFT JOIN cobrec1._reduction r ON p.id_produit = r.id_produit 
        LEFT JOIN cobrec1._promotion pr ON p.id_produit = pr.id_produit 
        LEFT JOIN cobrec1._tva t ON p.id_tva = t.id_tva
        LEFT JOIN cobrec1._fait_partie_de fpd ON p.id_produit = fpd.id_produit
        LEFT JOIN cobrec1._categorie_produit cp ON fpd.id_categorie = cp.id_categorie
        WHERE p.p_statut = 'En ligne'
        GROUP BY p.id_produit, p.p_nom, p.p_description, p.p_prix, p.p_stock, 
                 p.p_note, p.p_nb_ventes, p.p_statut, r.reduction_pourcentage, 
                 t.montant_tva
        ORDER BY p.id_produit
----------- WbStatement -----------
##sqlwb.pos=74841
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;
CREATE SCHEMA cobrec1;
SET SCHEMA 'cobrec1';


-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (civilite IN ('M.', 'Mme', 'Inconnu', 'Ne souhaite pas s''exprimer', 'Autre')),
    CONSTRAINT verif_compte_email CHECK (email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'),
    CONSTRAINT verif_compte_num_telephone CHECK (num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$')
);

ALTER TABLE ONLY cobrec1._compte
    ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
    ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
    ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11,2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (type_couleur IN ('Vert', 'Jaune' , 'Rouge' , 'Noir' , 'Blanc' , 'Bleu' , 'Violet' , 'Orange' , 'Gris' , 'Marron' ) )
);

ALTER TABLE ONLY cobrec1._couleur
    ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
    ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
    ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4,1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (montant_TVA >= 0.00 AND montant_TVA <= 100.00)
);

ALTER TABLE ONLY cobrec1._TVA
    ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
    ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11,2) DEFAULT 0.0,
    p_volume numeric(11,2) DEFAULT 0.0,
    p_frais_de_port numeric(11,2) DEFAULT 0.0,
    p_prix numeric(11,2) NOT NULL,
    p_note numeric(2,1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (p_note >= 0 AND p_note <= 5),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (p_statut IN ('Ébauche', 'En ligne', 'Hors ligne', 'Supprimé')),
    CONSTRAINT verif_produit_origine CHECK (p_origine IN ('Inconnu', 'Bretagne', 'France', 'UE', 'Hors UE'))
);

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) 
            REFERENCES cobrec1._vendeur(id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) 
            REFERENCES cobrec1._TVA(id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5,2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (reduction_pourcentage >= 0.00 AND reduction_pourcentage <= 100.00),
    CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),
    CONSTRAINT verif_reduction_fin CHECK (reduction_fin > reduction_debut)
);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),
    CONSTRAINT verif_promotion_fin CHECK (promotion_fin > promotion_debut)
);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;


-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
    ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
    ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
    ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
    ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
    ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11,2) DEFAULT 0.0,
    f_total_remise numeric(11,2) DEFAULT 0.0,
    f_total_ht_remise numeric(11,2) DEFAULT 0.0,
    f_total_ttc numeric(11,2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) 
            REFERENCES cobrec1._panier_commande(id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) 
            REFERENCES cobrec1._adresse(id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) 
            REFERENCES cobrec1._facture(id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) 
            REFERENCES cobrec1._facture(id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2,1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client(id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (vote_type IN ('like', 'dislike'))
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2,1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (a_note IN (NULL,0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5,4.0,4.5,5.0))
);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) 
            REFERENCES cobrec1._livraison(id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison,id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (type_signalement IN ('signale_avis', 'signale_compte', 'signale_produit'))
);

ALTER TABLE ONLY cobrec1._signalement
    ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
    ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11,2) NOT NULL,
    remise_unitaire numeric(11,2) DEFAULT 0.0,
    frais_de_port numeric(11,2) DEFAULT 0.0,
    TVA numeric(4,1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (TVA >= 0.00 AND TVA<= 100.00)
);

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) 
            REFERENCES cobrec1._panier_commande(id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
CREATE TABLE cobrec1._represente_promotion (
    id_image integer NOT NULL,
    id_promotion integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion) 
            REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) 
            REFERENCES cobrec1._categorie_produit(id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) 
            REFERENCES cobrec1._couleur(code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit) 
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction) 
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit) 
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion) 
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) 
            REFERENCES cobrec1._seuil_alerte(id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;


-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();


CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;


CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO _compte (nom, prenom, email, num_telephone, mdp, etat_A2F, nb_fois_signale, nb_signalements_avis, nb_cpts_signales, nb_avis_signales) VALUES
('Maeleau', 'Le Hyver', 'admin@cobrec.fr', '0601020304', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 0, 0),
('Lopicier', 'Mallo', 'vendeur1@example.com', '0612345678', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Elouard', 'Jean-Jacques', 'vendeur2@shop.fr', '0623456789', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 1, 0, 0, 0),
('Jean', 'Dupont','client1@gmail.com', '0634567890', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 1, 0, 0),
('Marie', 'Martin','client2@yahoo.fr', '0645678901', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 1, 0),
('Pierre', 'Durand','client3@outlook.com', '0656789012', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Sophie', 'Bernard','client4@free.fr', '0667890123', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Lucas', 'Petit','client5@orange.fr', '0678901234', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Emma', 'Lefebvre','client6@wanadoo.fr', '0689012345', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 0, 0),
('Martinière', 'Yvili', 'vendeur3@boutique.fr', '0690123456', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0);

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO _vendeur (id_compte, SIREN, raison_sociale, denomination, nb_produits_crees) VALUES
(2, '123456789', 'TechStore SARL', 'TechStore', 5),
(3, '987654321', 'FashionHub SAS', 'FashionHub', 3),
(10, '456789123', 'SportPro EURL', 'SportPro', 2);

-- 4. CLIENTS
INSERT INTO _client (id_compte, c_pseudo, c_nb_produits_achetes, c_depense_totale, c_cloture, c_datenaissance) VALUES
(4, 'jdupont', 2, 907.18, FALSE, '1985-03-15'),
(5, 'mmartin', 3, 124.75, FALSE, '1990-07-22'),
(6, 'pdurand', 1, 1091.98, FALSE, '1988-11-10'),
(7, 'sbernard', 2, 298.76, FALSE, '1995-05-30'),
(8, 'lpetit', 0, 0.0, FALSE, '2000-01-18'),
(9, 'elefebvre', 1, 179.98, FALSE, '1992-09-25');


-- 5. ADRESSES
INSERT INTO _adresse (id_compte, a_adresse, a_ville, a_code_postal, a_complement) VALUES
(4, '15 rue de la Paix', 'Paris', '75001', 'Apt 5'),
(5, '23 avenue des Champs', 'Lyon', '69001', NULL),
(6, '8 boulevard Victor Hugo', 'Marseille', '13001', 'Bâtiment B'),
(7, '42 rue du Commerce', 'Toulouse', '31000', NULL),
(8, '67 place de la République', 'Nice', '06000', '3ème étage'),
(9, '91 rue Principale', 'Bordeaux', '33000', NULL),
(2, '12 avenue du Commerce', 'Paris', '75015', 'Entrepôt A'),
(3, '55 rue de la Mode', 'Lyon', '69002', NULL),
(10, '78 boulevard du Sport', 'Marseille', '13008', 'Zone industrielle');

-- 6. COULEURS
INSERT INTO _couleur (code_hexa, nom, type_couleur) VALUES
('#FF0000', 'Rouge vif', 'Rouge'),
('#0000FF', 'Bleu marine', 'Bleu'),
('#000000', 'Noir', 'Noir'),
('#FFFFFF', 'Blanc pur', 'Blanc'),
('#00FF00', 'Vert émeraude', 'Vert'),
('#FFFF00', 'Jaune citron', 'Jaune'),
('#FFA500', 'Orange', 'Orange'),
('#808080', 'Gris', 'Gris'),
('#8B4513', 'Marron chocolat', 'Marron'),
('#EE82EE', 'Violet', 'Violet'),
('#87CEEB', 'Bleu ciel', 'Bleu'),
('#32CD32', 'Vert lime', 'Vert');

-- 7. CATÉGORIES
INSERT INTO _categorie_produit (nom_categorie) VALUES
('Électronique'),
('Vêtements'),
('Accessoires'),
('Maison'),
('Sport'),
('Livres'),
('Informatique'),
('Mode homme'),
('Mode femme'),
('Chaussures');

-- 8. TVA
INSERT INTO _TVA (montant_TVA, libelle_TVA) VALUES
(20.0, 'TVA normale'),
(10.0, 'TVA intermédiaire'),
(5.5, 'TVA réduite'),
(2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO _produit (id_TVA, id_vendeur, p_nom, p_description, p_prix, p_stock, p_statut, p_origine, p_poids, p_volume, p_frais_de_port, p_note, p_nb_ventes) VALUES
(1, 1, 'Smartphone XPro', 'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G', 599.99, 35, 'En ligne', 'Bretagne', 0.180, 0.01, 5.99, 4.3, 15),
(1, 1, 'Ordinateur portable Ultra', 'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7', 899.99, 22, 'En ligne', 'Bretagne', 2.5, 0.03, 9.99, 4.0, 8),
(1, 2, 'T-shirt coton bio', 'T-shirt 100% coton biologique, coupe regular, diverses couleurs', 24.99, 58, 'En ligne', 'Bretagne', 0.15, 0.5, 3.99, 5.0, 42),
(1, 2, 'Jean slim', 'Jean coupe slim stretch, denim premium', 49.99, 62, 'En ligne', 'Bretagne', 1.00, 0.01, 4.99, NULL, 18),
(1, 2, 'Robe d été', 'Robe légère et fluide pour l été, motifs floraux', 39.99, 48, 'En ligne', 'Bretagne', 0.30, 0.08, 4.99, NULL, 12),
(2, 1, 'Casque audio Bluetooth', 'Casque sans fil avec réduction de bruit active, autonomie 30h', 149.99, 15, 'En ligne', 'Bretagne', 0.25, 0.02, 5.99, 4.5, 25),
(1, 2, 'Sac à dos urbain', 'Sac à dos pour ordinateur portable, compartiments multiples, imperméable', 69.99, 35, 'En ligne', 'Bretagne', 0.60, 0.15, 6.99, NULL, 10),
(1, 1, 'Montre connectée', 'Montre sport avec GPS, cardiofréquencemètre, étanche 50m', 199.99, 15, 'En ligne', 'Bretagne', 0.05, 0.01, 3.99, 4.7, 20),
(1, 3, 'Chaussures running', 'Chaussures de course avec amorti premium, semelle respirante', 89.99, 54, 'En ligne', 'Bretagne', 0.40, 0.08, 5.99, 4.2, 16),
(1, 1, 'Tablette 10 pouces', 'Tablette Android, écran Full HD, 64Go, stylet inclus', 299.99, 16, 'En ligne', 'Bretagne', 0.50, 0.02, 7.99, 3.8, 9),
(1, 3, 'Ballon de football', 'Ballon officiel en cuir synthétique, taille 5', 29.99, 85, 'En ligne', 'Bretagne', 0.45, 0.06, 4.99, 4.6, 35),
(1, 2, 'Veste en cuir', 'Veste en cuir véritable, coupe motard, doublure intérieure', 189.99, 15, 'En ligne', 'Bretagne', 1.20, 0.01, 8.99, NULL, 5),
(3, 1, 'Livre cuisine française', 'Recettes traditionnelles de cuisine française, 300 pages', 24.99, 28, 'En ligne', 'Bretagne', 0.80, 0.03, 3.99, 4.8, 22),
(1, 3, 'Tapis de yoga', 'Tapis antidérapant, épaisseur 6mm, avec sac de transport', 34.99, 52, 'En ligne', 'Bretagne', 1.10, 0.02, 5.99, 4.4, 28),
(1, 1, 'Clavier mécanique RGB', 'Clavier gamer avec rétroéclairage RGB, switches mécaniques', 79.99, 29, 'En ligne', 'Bretagne', 0.90, 0.04, 5.99, 4.1, 11),
(1, 1, 'Console NextGen', 'Console de jeu dernière génération, 1To SSD, 4K HDR', 499.99, 0, 'Hors ligne', 'France', 3.5, 0.02, 14.99, 4.8, 25),
(1, 2, 'Sweat à capuche premium', 'Sweat-shirt en coton bio, coupe oversize, poche kangourou', 59.99, 0, 'Hors ligne', 'France', 0.70, 0.03, 5.99, 4.4, 18),
(1, 3, 'Raquette de tennis pro', 'Raquette carbone, tension 25kg, grip confort', 129.99, 0, 'Hors ligne', 'France', 0.35, 0.02, 6.99, 4.7, 32),
(1, 1, 'Écran gaming 4K 27"', 'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms', 349.99, 0, 'Hors ligne', 'France', 5.2, 0.35, 19.99, 4.6, 18),
(1, 2, 'Baskets limited edition', 'Baskets cuir véritable, édition limitée, semelle comfort', 179.99, 0, 'Hors ligne', 'France', 0.80, 0.06, 7.99, 4.9, 65),
(1, 3, 'Vélo de route carbone', 'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses', 1299.99, 0, 'Hors ligne', 'UE', 8.5, 0.15, 29.99, 4.8, 25),
(1, 1, 'Drone professionnel 4K', 'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min', 899.99, 0, 'Hors ligne', 'UE', 1.2, 0.02, 12.99, 4.6, 18),
(1, 2, 'Manteau d hiver imperméable', 'Manteau longueur genoux, doublure polaire, coupe-vent', 179.99, 0, 'Hors ligne', 'UE', 1.5, 0.01, 8.99, 4.4, 65),
(1, 3, 'Tente 4 places', 'Tente familiale, double toit, arceaux aluminium, imperméable', 249.99, 0, 'Hors ligne', 'Hors UE', 4.8, 0.08, 19.99, 4.7, 32),
(1, 1, 'Enceinte Bluetooth waterproof', 'Enceinte portable, autonomie 24h, résistance IP67', 129.99, 0, 'Hors ligne', 'Hors UE', 0.9, 0.05, 6.99, 4.9, 95),
(2, 1, 'Pull Marin de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.', 36.37, 31, 'En ligne', 'Bretagne', 2.06, 0.45, 5.78, 4.4, 12),
(1, 1, 'Bonnet Miki de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.', 121.37, 6, 'Hors ligne', 'Bretagne', 2.3, 0.09, 8.8, 4.3, 60),
(2, 3, 'Galettes Local', 'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.', 147.92, 142, 'En ligne', 'Bretagne', 0.46, 0.46, 5.71, 4.3, 97),
(1, 3, 'Écharpe Rayée Fait main', 'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.', 173.77, 102, 'En ligne', 'Bretagne', 0.91, 0.32, 8.28, 4.4, 58),
(1, 2, 'Écharpe Rayée de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.', 197.02, 168, 'Hors ligne', 'Bretagne', 2.1, 0.12, 7.92, 4.8, 19),
(4, 2, 'Ciré Navy de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.', 104.35, 169, 'En ligne', 'Bretagne', 1.43, 0.14, 7.22, 4.6, 72),
(4, 3, 'Bracelet Ancre Fait main', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 172.75, 44, 'Hors ligne', 'Bretagne', 1.92, 0.4, 8.8, 4.1, 102),
(1, 3, 'Marinière Local', 'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.', 74.29, 80, 'Hors ligne', 'Bretagne', 1.36, 0.23, 13.58, 4.9, 72),
(3, 1, 'Bracelet Ancre de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.', 40.53, 140, 'En ligne', 'Bretagne', 2.76, 0.3, 9.4, 4.1, 97),
(3, 3, 'Pendentif Hermine Fait main', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 164.23, 199, 'Hors ligne', 'Bretagne', 1.64, 0.07, 10.94, 4.9, 47),
(1, 3, 'Sac Voile de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.', 136.95, 100, 'En ligne', 'Bretagne', 1.37, 0.26, 6.09, 4.2, 91),
(2, 3, 'Écharpe Rayée de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 21.13, 22, 'Hors ligne', 'Bretagne', 2.73, 0.43, 5.64, 4.2, 129),
(1, 2, 'Coussin Triskell de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.', 134.55, 95, 'Hors ligne', 'Bretagne', 1.33, 0.24, 11.56, 4.7, 30),
(1, 3, 'Écharpe Rayée Authentique', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.', 36.49, 51, 'En ligne', 'Bretagne', 0.91, 0.13, 13.31, 4.4, 145),
(4, 3, 'Écharpe Rayée Bio', 'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.', 50.4, 107, 'Hors ligne', 'Bretagne', 2.72, 0.09, 5.02, 4.4, 121),
(1, 3, 'Bonnet Miki Authentique', 'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.', 119.47, 143, 'En ligne', 'Bretagne', 0.28, 0.16, 5.45, 4.5, 140),
(3, 1, 'Ciré Navy de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 187.96, 150, 'Hors ligne', 'Bretagne', 0.81, 0.3, 10.57, 4.4, 149),
(1, 1, 'Bol Breton Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.', 66.7, 85, 'En ligne', 'Bretagne', 2.79, 0.47, 5.08, 4.6, 149),
(1, 3, 'Bol Breton Premium', 'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.', 176.18, 99, 'Hors ligne', 'Bretagne', 0.93, 0.22, 9.89, 4.3, 140),
(3, 1, 'Pull Marin de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.', 30.23, 146, 'En ligne', 'Bretagne', 0.55, 0.15, 6.9, 4.3, 72),
(1, 1, 'Affiche Vintage de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.', 155.74, 168, 'En ligne', 'Bretagne', 2.94, 0.09, 8.98, 4.7, 148),
(2, 3, 'Vareuse Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 120.09, 42, 'En ligne', 'Bretagne', 1.35, 0.03, 8.28, 4.9, 15),
(3, 2, 'Pull Marin Bio', 'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.', 151.65, 65, 'En ligne', 'Bretagne', 2.61, 0.49, 12.3, 4.9, 11),
(1, 3, 'Kabig Bio', 'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.', 172.27, 61, 'En ligne', 'Bretagne', 0.68, 0.46, 8.15, 4.8, 63),
(1, 2, 'Phare Miniature Fait main', 'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.', 62.75, 169, 'En ligne', 'Bretagne', 1.58, 0.34, 12.59, 4.3, 12),
(3, 1, 'Bol Breton Fait main', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 75.33, 85, 'Hors ligne', 'Bretagne', 1.37, 0.49, 6.04, 4.9, 53),
(3, 3, 'Bracelet Ancre de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 23.23, 175, 'Hors ligne', 'Bretagne', 2.77, 0.32, 10.97, 4.1, 81),
(1, 2, 'Caramels de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.', 135.67, 102, 'Hors ligne', 'Bretagne', 2.06, 0.45, 10.54, 4.3, 145),
(3, 3, 'Affiche Vintage de Vannes', 'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.', 137.69, 135, 'Hors ligne', 'Bretagne', 1.47, 0.45, 12.16, 4.2, 26),
(4, 2, 'Écharpe Rayée de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.', 37.85, 16, 'Hors ligne', 'Bretagne', 0.81, 0.24, 12.65, 4.1, 111),
(4, 3, 'Vareuse de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 51.36, 183, 'Hors ligne', 'Bretagne', 1.6, 0.03, 7.24, 4.8, 121),
(4, 3, 'Bracelet Ancre Durable', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.', 150.55, 126, 'En ligne', 'Bretagne', 1.41, 0.38, 12.56, 4.3, 138),
(1, 2, 'Lampe Tempête de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.', 73.48, 143, 'Hors ligne', 'Bretagne', 0.33, 0.08, 8.45, 4.2, 59),
(4, 1, 'Sac Voile de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.', 167.42, 104, 'Hors ligne', 'Bretagne', 2.72, 0.3, 11.26, 4.9, 102),
(4, 1, 'Caramels de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.', 61.58, 129, 'En ligne', 'Bretagne', 0.18, 0.17, 11.11, 4.4, 47),
(4, 2, 'Pendentif Hermine de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 35.65, 123, 'Hors ligne', 'Bretagne', 0.63, 0.14, 7.95, 4.5, 91),
(2, 1, 'Ciré Navy Artisanal', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.', 19.84, 94, 'En ligne', 'Bretagne', 0.75, 0.04, 13.62, 4.0, 12),
(3, 1, 'Vareuse de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 51.2, 184, 'En ligne', 'Bretagne', 0.84, 0.19, 10.45, 5.0, 34),
(1, 2, 'Pendentif Hermine Bio', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.', 47.48, 156, 'Hors ligne', 'Bretagne', 2.1, 0.32, 5.92, 4.8, 35),
(4, 1, 'Galettes de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.', 89.39, 130, 'Hors ligne', 'Bretagne', 0.41, 0.48, 10.72, 4.8, 44),
(2, 2, 'Sac Voile Durable', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.', 148.16, 73, 'Hors ligne', 'Bretagne', 1.03, 0.13, 13.41, 4.3, 120),
(1, 1, 'Marinière de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.', 50.09, 71, 'Hors ligne', 'Bretagne', 1.09, 0.44, 11.31, 4.3, 7),
(4, 3, 'Sac Voile Bio', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.', 102.77, 9, 'Hors ligne', 'Bretagne', 0.37, 0.12, 11.23, 4.3, 99),
(2, 1, 'Sac Voile Premium', 'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.', 61.2, 69, 'Hors ligne', 'Bretagne', 0.77, 0.36, 7.84, 4.7, 52),
(1, 1, 'Pendentif Hermine Local', 'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.', 167.37, 80, 'Hors ligne', 'Bretagne', 0.76, 0.1, 5.13, 4.5, 75),
(1, 2, 'Vareuse Durable', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 118.5, 125, 'Hors ligne', 'Bretagne', 1.49, 0.18, 13.69, 4.3, 127),
(4, 2, 'Pendentif Hermine Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 116.38, 82, 'Hors ligne', 'Bretagne', 0.35, 0.13, 10.02, 4.4, 62),
(2, 1, 'Pendentif Hermine de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.', 21.38, 194, 'En ligne', 'Bretagne', 0.39, 0.38, 10.63, 4.3, 25),
(2, 2, 'Ciré Navy de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.', 140.29, 125, 'En ligne', 'Bretagne', 0.94, 0.12, 11.36, 4.7, 121),
(4, 1, 'Pull Marin Authentique', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 181.69, 41, 'Hors ligne', 'Bretagne', 0.31, 0.09, 7.77, 4.7, 150),
(1, 1, 'Bolée à Cidre Local', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.', 103.33, 25, 'En ligne', 'Bretagne', 1.83, 0.45, 11.61, 4.6, 11),
(4, 2, 'Bol Breton de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 133.14, 76, 'Hors ligne', 'Bretagne', 0.63, 0.3, 10.71, 4.5, 28),
(3, 2, 'Phare Miniature de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.', 141.1, 78, 'Hors ligne', 'Bretagne', 2.02, 0.21, 11.84, 4.0, 27),
(1, 1, 'Caramels Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 112.55, 110, 'Hors ligne', 'Bretagne', 0.26, 0.26, 10.6, 4.5, 118),
(4, 1, 'Vareuse de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.', 101.61, 12, 'En ligne', 'Bretagne', 2.92, 0.31, 7.15, 4.2, 146),
(2, 2, 'Lampe Tempête Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.', 145.44, 135, 'En ligne', 'Bretagne', 2.15, 0.21, 9.34, 4.5, 121),
(4, 1, 'Bracelet Ancre de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.', 159.31, 111, 'Hors ligne', 'Bretagne', 1.09, 0.4, 7.4, 4.0, 81),
(2, 2, 'Coussin Triskell Premium', 'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.', 112.71, 121, 'En ligne', 'Bretagne', 2.81, 0.44, 13.83, 4.2, 103),
(1, 2, 'Coussin Triskell Bio', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.', 159.76, 171, 'En ligne', 'Bretagne', 2.94, 0.25, 5.33, 4.5, 89),
(1, 2, 'Lampe Tempête de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 133.75, 44, 'Hors ligne', 'Bretagne', 0.32, 0.39, 7.39, 4.6, 106),
(1, 2, 'Coussin Triskell Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 54.37, 180, 'En ligne', 'Bretagne', 2.77, 0.5, 11.72, 4.4, 30),
(2, 1, 'Bolée à Cidre de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.', 20.61, 96, 'En ligne', 'Bretagne', 1.19, 0.08, 9.78, 4.6, 51),
(3, 3, 'Caramels Durable', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.', 37.05, 123, 'En ligne', 'Bretagne', 1.95, 0.24, 11.0, 4.9, 124),
(2, 2, 'Lampe Tempête Local', 'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.', 90.19, 69, 'Hors ligne', 'Bretagne', 1.42, 0.16, 13.99, 4.9, 32),
(3, 1, 'Bolée à Cidre Artisanal', 'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.', 134.41, 75, 'Hors ligne', 'Bretagne', 0.12, 0.43, 12.0, 5.0, 132),
(3, 2, 'Bonnet Miki Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.', 180.74, 170, 'Hors ligne', 'Bretagne', 0.21, 0.4, 5.3, 4.4, 38),
(4, 1, 'Bonnet Miki Premium', 'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.', 182.65, 47, 'En ligne', 'Bretagne', 0.85, 0.41, 9.34, 4.8, 91),
(3, 1, 'Caramels de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.', 84.57, 72, 'En ligne', 'Bretagne', 1.66, 0.23, 11.06, 4.7, 102),
(1, 1, 'Marinière Premium', 'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.', 51.84, 21, 'Hors ligne', 'Bretagne', 1.94, 0.24, 11.31, 4.6, 34),
(1, 2, 'Pull Marin de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 35.64, 121, 'Hors ligne', 'Bretagne', 1.18, 0.48, 11.27, 4.5, 44),
(4, 2, 'Ciré Jaune de Vannes', 'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.', 189.65, 97, 'En ligne', 'Bretagne', 0.39, 0.35, 9.9, 5.0, 96),
(1, 3, 'Lampe Tempête Authentique', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 122.86, 10, 'En ligne', 'Bretagne', 0.25, 0.17, 13.9, 4.8, 57),
(1, 3, 'Bonnet Miki de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.', 159.05, 157, 'En ligne', 'Bretagne', 0.11, 0.43, 6.3, 4.1, 69),
(3, 3, 'Marinière Authentique', 'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.', 12.98, 72, 'En ligne', 'Bretagne', 0.25, 0.37, 9.73, 4.7, 126),
(4, 2, 'Bracelet Ancre Artisanal', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.', 181.75, 173, 'En ligne', 'Bretagne', 1.61, 0.23, 13.68, 4.1, 127),
(3, 2, 'Lampe Tempête de Vannes', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 38.04, 37, 'Hors ligne', 'Bretagne', 0.9, 0.32, 9.94, 4.3, 140),
(3, 2, 'Pull Marin de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 177.85, 110, 'En ligne', 'Bretagne', 1.08, 0.23, 8.74, 4.1, 114),
(3, 3, 'Coussin Triskell Fait main', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 27.62, 29, 'En ligne', 'Bretagne', 2.26, 0.19, 6.17, 4.1, 148),
(3, 3, 'Galettes Artisanal', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.', 123.48, 95, 'Hors ligne', 'Bretagne', 0.4, 0.26, 6.39, 4.5, 32),
(1, 1, 'Bol Breton Bio', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.', 194.19, 164, 'Hors ligne', 'Bretagne', 1.88, 0.32, 5.24, 4.9, 73);

-- 10. PROMOTIONS (futures)
INSERT INTO _promotion (id_produit, promotion_debut, promotion_fin) VALUES
(1, '2027-12-20 00:00:00', '2027-12-25 23:59:59'),
(2, '2026-02-01 00:00:00', '2026-02-07 23:59:59'),
(3, '2026-02-16 00:00:00', '2026-02-25 23:59:59'),
(4, '2026-04-01 00:00:00', '2026-04-15 23:59:59'),
(5, '2026-05-01 00:00:00', '2026-05-07 23:59:59'),
(6, '2026-06-10 00:00:00', '2026-06-20 23:59:59'),
(7, '2026-07-01 00:00:00', '2026-07-31 23:59:59');

-- 9. RÉDUCTIONS (futures)
INSERT INTO _reduction (id_produit, reduction_pourcentage, reduction_debut, reduction_fin) VALUES
(1, 10.00, '2026-02-09 00:00:00', '2026-02-19 23:59:59'),
(2, 15.00, '2026-02-15 00:00:00', '2026-02-25 23:59:59'),
(3, 20.00, '2026-02-01 00:00:00', '2026-02-15 23:59:59'),
(4, 25.00, '2026-02-20 00:00:00', '2026-02-26 23:59:59'),
(5, 30.00, '2026-06-01 00:00:00', '2026-06-30 23:59:59'),
(6, 60.00, '2026-04-01 00:00:00', '2026-04-15 23:59:59'),
(7, 55.00, '2026-05-01 00:00:00', '2026-05-07 23:59:59'),
(8, 70.00, '2026-06-10 00:00:00', '2026-06-20 23:59:59'),
(9, 65.00, '2026-07-01 00:00:00', '2026-07-31 23:59:59');

-- 12. IMAGES
INSERT INTO _image (i_lien, i_title, i_alt) VALUES
('/img/photo/smartphone_xpro.jpg', 'Smartphone XPro.jpg', 'Image du smartphone'),
('/img/photo/ordinateur_portable_ultra.jpg', 'Ordinateur portable.jpeg', 'Image de l ordinateur'),
('/img/photo/t_shirt_coton_bio.jpg', 'T-shirt.png', 'Image du t-shirt'),
('/img/photo/jean_slim.jpg', 'Jean.jpg', 'Image du jean'),
('/img/photo/casque_audio_bluetooth.jpg', 'Casque audio.jpg', 'Image du casque'),
('/img/photo/avatar_jean.jpg', 'Avatar Jean.jpeg', 'Photo de profil Jean'),
('/img/photo/avatar_marie.jpg', 'Avatar Marie.jpg', 'Photo de profil Marie'),
('/img/photo/logo_techstore.jpg', 'Logo TechStore.jpg', 'Logo entreprise TechStore'),
('/img/photo/logo_fashionhub.jpg', 'Logo FashionHub.jpg', 'Logo entreprise FashionHub'),
('/img/photo/montre_connect_e.jpg', 'Montre connectée.jpg', 'Image de la montre'),
('/img/photo/sac___dos_urbain.jpg', 'Sac à dos.jpeg', 'Image du sac'),
('/img/photo/chaussures_running.jpg', 'Chaussures running.jpeg', 'Image des chaussures'),
('/img/photo/tablette_10_pouces.jpg', 'Tablette.jpg', 'Image de la tablette'),
('/img/photo/ballon_de_football.jpg', 'Ballon football.jpg', 'Image du ballon'),
('/img/photo/veste_en_cuir.jpg', 'Veste cuir.jpg', 'Image de la veste'),
('/img/photo/livre_cuisine_fran_aise.jpg', 'Livre cuisine.jpeg', 'Image du livre'),
('/img/photo/tapis_de_yoga.jpg', 'Tapis yoga.jpeg', 'Image du tapis'),
('/img/photo/clavier_m_canique_rgb.jpg', 'Clavier.jpg', 'Image du clavier'),
('/img/photo/console_nextgen.jpg', 'Console NextGen.jpg', 'Image de la console'),
('/img/photo/sweat___capuche_premium.jpg', 'Sweat à capuche.jpeg', 'Image du sweat'),
('/img/photo/raquette_de_tennis_pro.jpg', 'Raquette tennis.jpg', 'Image de la raquette'),
('/img/photo/_cran_gaming_4k_27_.jpg', 'Écran 4K.jpeg', 'Image de l écran'),
('/img/photo/baskets_limited_edition.jpg', 'Baskets limited.jpeg', 'Image des baskets'),
('/img/photo/v_lo_de_route_carbone.jpg', 'Vélo route.jpeg', 'Image du vélo'),
('/img/photo/drone_professionnel_4k.jpg', 'Drone 4K.jpg', 'Image du drone'),
('/img/photo/manteau_d_hiver_imperm_able.jpg', 'Manteau hiver.jpeg', 'Image du manteau'),
('/img/photo/tente_4_places.jpg', 'Tente 4 places.jpg', 'Image de la tente'),
('/img/photo/enceinte_bluetooth_waterproof.jpg', 'Enceinte Bluetooth.jpg', 'Image de l enceinte'),
('/img/photo/pull_marin_de_saint_malo.jpg', 'Pull Marin de Saint-Malo', 'Photo de Pull Marin de Saint-Malo'),
('/img/photo/bonnet_miki_de_carnac.jpg', 'Bonnet Miki de Carnac', 'Photo de Bonnet Miki de Carnac'),
('/img/photo/galettes_local.jpg', 'Galettes Local', 'Photo de Galettes Local'),
('/img/photo/_charpe_ray_e_fait_main.jpg', 'Écharpe Rayée Fait main', 'Photo de Écharpe Rayée Fait main'),
('/img/photo/_charpe_ray_e_de_brest.jpg', 'Écharpe Rayée de Brest', 'Photo de Écharpe Rayée de Brest'),
('/img/photo/cir__navy_de_concarneau.jpg', 'Ciré Navy de Concarneau', 'Photo de Ciré Navy de Concarneau'),
('/img/photo/bracelet_ancre_fait_main.jpg', 'Bracelet Ancre Fait main', 'Photo de Bracelet Ancre Fait main'),
('/img/photo/marini_re_local.jpg', 'Marinière Local', 'Photo de Marinière Local'),
('/img/photo/bracelet_ancre_de_concarneau.jpg', 'Bracelet Ancre de Concarneau', 'Photo de Bracelet Ancre de Concarneau'),
('/img/photo/pendentif_hermine_fait_main.jpg', 'Pendentif Hermine Fait main', 'Photo de Pendentif Hermine Fait main'),
('/img/photo/sac_voile_de_concarneau.jpg', 'Sac Voile de Concarneau', 'Photo de Sac Voile de Concarneau'),
('/img/photo/_charpe_ray_e_de_saint_malo.jpg', 'Écharpe Rayée de Saint-Malo', 'Photo de Écharpe Rayée de Saint-Malo'),
('/img/photo/coussin_triskell_de_roscoff.jpg', 'Coussin Triskell de Roscoff', 'Photo de Coussin Triskell de Roscoff'),
('/img/photo/_charpe_ray_e_authentique.jpg', 'Écharpe Rayée Authentique', 'Photo de Écharpe Rayée Authentique'),
('/img/photo/_charpe_ray_e_bio.jpg', 'Écharpe Rayée Bio', 'Photo de Écharpe Rayée Bio'),
('/img/photo/bonnet_miki_authentique.jpg', 'Bonnet Miki Authentique', 'Photo de Bonnet Miki Authentique'),
('/img/photo/cir__navy_de_quimper.jpg', 'Ciré Navy de Quimper', 'Photo de Ciré Navy de Quimper'),
('/img/photo/bol_breton_traditionnel.jpg', 'Bol Breton Traditionnel', 'Photo de Bol Breton Traditionnel'),
('/img/photo/bol_breton_premium.jpg', 'Bol Breton Premium', 'Photo de Bol Breton Premium'),
('/img/photo/pull_marin_de_brest.jpg', 'Pull Marin de Brest', 'Photo de Pull Marin de Brest'),
('/img/photo/affiche_vintage_de_dinard.jpg', 'Affiche Vintage de Dinard', 'Photo de Affiche Vintage de Dinard'),
('/img/photo/vareuse_artisanal.jpg', 'Vareuse Artisanal', 'Photo de Vareuse Artisanal'),
('/img/photo/pull_marin_bio.jpg', 'Pull Marin Bio', 'Photo de Pull Marin Bio'),
('/img/photo/kabig_bio.jpg', 'Kabig Bio', 'Photo de Kabig Bio'),
('/img/photo/phare_miniature_fait_main.jpg', 'Phare Miniature Fait main', 'Photo de Phare Miniature Fait main'),
('/img/photo/bol_breton_fait_main.jpg', 'Bol Breton Fait main', 'Photo de Bol Breton Fait main'),
('/img/photo/bracelet_ancre_de_carnac.jpg', 'Bracelet Ancre de Carnac', 'Photo de Bracelet Ancre de Carnac'),
('/img/photo/caramels_de_dinard.jpg', 'Caramels de Dinard', 'Photo de Caramels de Dinard'),
('/img/photo/affiche_vintage_de_vannes.jpg', 'Affiche Vintage de Vannes', 'Photo de Affiche Vintage de Vannes'),
('/img/photo/_charpe_ray_e_de_dinard.jpg', 'Écharpe Rayée de Dinard', 'Photo de Écharpe Rayée de Dinard'),
('/img/photo/vareuse_de_saint_malo.jpg', 'Vareuse de Saint-Malo', 'Photo de Vareuse de Saint-Malo'),
('/img/photo/bracelet_ancre_durable.jpg', 'Bracelet Ancre Durable', 'Photo de Bracelet Ancre Durable'),
('/img/photo/lampe_temp_te_de_quimper.jpg', 'Lampe Tempête de Quimper', 'Photo de Lampe Tempête de Quimper'),
('/img/photo/sac_voile_de_pont_aven.jpg', 'Sac Voile de Pont-Aven', 'Photo de Sac Voile de Pont-Aven'),
('/img/photo/caramels_de_roscoff.jpg', 'Caramels de Roscoff', 'Photo de Caramels de Roscoff'),
('/img/photo/pendentif_hermine_de_saint_malo.jpg', 'Pendentif Hermine de Saint-Malo', 'Photo de Pendentif Hermine de Saint-Malo'),
('/img/photo/cir__navy_artisanal.jpg', 'Ciré Navy Artisanal', 'Photo de Ciré Navy Artisanal'),
('/img/photo/vareuse_de_pont_aven.jpg', 'Vareuse de Pont-Aven', 'Photo de Vareuse de Pont-Aven'),
('/img/photo/pendentif_hermine_bio.jpg', 'Pendentif Hermine Bio', 'Photo de Pendentif Hermine Bio'),
('/img/photo/galettes_de_quimper.jpg', 'Galettes de Quimper', 'Photo de Galettes de Quimper'),
('/img/photo/sac_voile_durable.jpg', 'Sac Voile Durable', 'Photo de Sac Voile Durable'),
('/img/photo/marini_re_de_pont_aven.jpg', 'Marinière de Pont-Aven', 'Photo de Marinière de Pont-Aven'),
('/img/photo/sac_voile_bio.jpg', 'Sac Voile Bio', 'Photo de Sac Voile Bio'),
('/img/photo/sac_voile_premium.jpg', 'Sac Voile Premium', 'Photo de Sac Voile Premium'),
('/img/photo/pendentif_hermine_local.jpg', 'Pendentif Hermine Local', 'Photo de Pendentif Hermine Local'),
('/img/photo/vareuse_durable.jpg', 'Vareuse Durable', 'Photo de Vareuse Durable'),
('/img/photo/pendentif_hermine_traditionnel.jpg', 'Pendentif Hermine Traditionnel', 'Photo de Pendentif Hermine Traditionnel'),
('/img/photo/pendentif_hermine_de_roscoff.jpg', 'Pendentif Hermine de Roscoff', 'Photo de Pendentif Hermine de Roscoff'),
('/img/photo/cir__navy_de_brest.jpg', 'Ciré Navy de Brest', 'Photo de Ciré Navy de Brest'),
('/img/photo/pull_marin_authentique.jpg', 'Pull Marin Authentique', 'Photo de Pull Marin Authentique'),
('/img/photo/bol_e___cidre_local.jpg', 'Bolée à Cidre Local', 'Photo de Bolée à Cidre Local'),
('/img/photo/bol_breton_de_saint_malo.jpg', 'Bol Breton de Saint-Malo', 'Photo de Bol Breton de Saint-Malo'),
('/img/photo/phare_miniature_de_quimper.jpg', 'Phare Miniature de Quimper', 'Photo de Phare Miniature de Quimper'),
('/img/photo/caramels_artisanal.jpg', 'Caramels Artisanal', 'Photo de Caramels Artisanal'),
('/img/photo/vareuse_de_dinard.jpg', 'Vareuse de Dinard', 'Photo de Vareuse de Dinard'),
('/img/photo/lampe_temp_te_traditionnel.jpg', 'Lampe Tempête Traditionnel', 'Photo de Lampe Tempête Traditionnel'),
('/img/photo/bracelet_ancre_de_brest.jpg', 'Bracelet Ancre de Brest', 'Photo de Bracelet Ancre de Brest'),
('/img/photo/coussin_triskell_premium.jpg', 'Coussin Triskell Premium', 'Photo de Coussin Triskell Premium'),
('/img/photo/coussin_triskell_bio.jpg', 'Coussin Triskell Bio', 'Photo de Coussin Triskell Bio'),
('/img/photo/lampe_temp_te_de_saint_malo.jpg', 'Lampe Tempête de Saint-Malo', 'Photo de Lampe Tempête de Saint-Malo'),
('/img/photo/coussin_triskell_artisanal.jpg', 'Coussin Triskell Artisanal', 'Photo de Coussin Triskell Artisanal'),
('/img/photo/bol_e___cidre_de_saint_malo.jpg', 'Bolée à Cidre de Saint-Malo', 'Photo de Bolée à Cidre de Saint-Malo'),
('/img/photo/caramels_durable.jpg', 'Caramels Durable', 'Photo de Caramels Durable'),
('/img/photo/lampe_temp_te_local.jpg', 'Lampe Tempête Local', 'Photo de Lampe Tempête Local'),
('/img/photo/bol_e___cidre_artisanal.jpg', 'Bolée à Cidre Artisanal', 'Photo de Bolée à Cidre Artisanal'),
('/img/photo/bonnet_miki_traditionnel.jpg', 'Bonnet Miki Traditionnel', 'Photo de Bonnet Miki Traditionnel'),
('/img/photo/bonnet_miki_premium.jpg', 'Bonnet Miki Premium', 'Photo de Bonnet Miki Premium'),
('/img/photo/caramels_de_carnac.jpg', 'Caramels de Carnac', 'Photo de Caramels de Carnac'),
('/img/photo/marini_re_premium.jpg', 'Marinière Premium', 'Photo de Marinière Premium'),
('/img/photo/pull_marin_de_quimper.jpg', 'Pull Marin de Quimper', 'Photo de Pull Marin de Quimper'),
('/img/photo/cir__jaune_de_vannes.jpg', 'Ciré Jaune de Vannes', 'Photo de Ciré Jaune de Vannes'),
('/img/photo/lampe_temp_te_authentique.jpg', 'Lampe Tempête Authentique', 'Photo de Lampe Tempête Authentique'),
('/img/photo/bonnet_miki_de_concarneau.jpg', 'Bonnet Miki de Concarneau', 'Photo de Bonnet Miki de Concarneau'),
('/img/photo/marini_re_authentique.jpg', 'Marinière Authentique', 'Photo de Marinière Authentique'),
('/img/photo/bracelet_ancre_artisanal.jpg', 'Bracelet Ancre Artisanal', 'Photo de Bracelet Ancre Artisanal'),
('/img/photo/lampe_temp_te_de_vannes.jpg', 'Lampe Tempête de Vannes', 'Photo de Lampe Tempête de Vannes'),
('/img/photo/pull_marin_de_carnac.jpg', 'Pull Marin de Carnac', 'Photo de Pull Marin de Carnac'),
('/img/photo/coussin_triskell_fait_main.jpg', 'Coussin Triskell Fait main', 'Photo de Coussin Triskell Fait main'),
('/img/photo/galettes_artisanal.jpg', 'Galettes Artisanal', 'Photo de Galettes Artisanal'),
('/img/photo/bol_breton_bio.jpg', 'Bol Breton Bio', 'Photo de Bol Breton Bio');

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO _represente_produit (id_image, id_produit) VALUES
(1, 1), (2,2), (3, 3), (4, 4), (5, 6), (10, 8), (11, 7),
(12, 9), (13, 10), (14, 11), (15, 12), (16, 13), (17, 14), (18, 15),
(19, 16), (20, 17), (21, 18), (22, 19), (23, 20),
(24, 21), (25, 22), (26, 23), (27, 24), (28, 25),
(29, 26), (30, 27), (31, 28), (32, 29), (33, 30), (34, 31), (35, 32), (36, 33), (37, 34), (38, 35), (39, 36), (40, 37), (41, 38), (42, 39), (43, 40), (44, 41), (45, 42), (46, 43), (47, 44), (48, 45), (49, 46), (50, 47), (51, 48), (52, 49), (53, 50), (54, 51), (55, 52), (56, 53), (57, 54), (58, 55), (59, 56), (60, 57), (61, 58), (62, 59), (63, 60), (64, 61), (65, 62), (66, 63), (67, 64), (68, 65), (69, 66), (70, 67), (71, 68), (72, 69), (73, 70), (74, 71), (75, 72), (76, 73), (77, 74), (78, 75), (79, 76), (80, 77), (81, 78), (82, 79), (83, 80), (84, 81), (85, 82), (86, 83), (87, 84), (88, 85), (89, 86), (90, 87), (91, 88), (92, 89), (93, 90), (94, 91), (95, 92), (96, 93), (97, 94), (98, 95), (99, 96), (100, 97), (101, 98), (102, 99), (103, 100), (104, 101), (105, 102), (106, 103), (107, 104), (108, 105);


-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO _represente_compte (id_image, id_compte) VALUES
(6, 4), (7, 5), (8, 2), (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO _fait_partie_de (id_produit, id_categorie) VALUES
(1, 1), (1, 7), (2, 1), (2, 7), (3, 2), (3, 8), (4, 2), (4, 8),
(5, 2), (5, 9), (6, 1), (6, 3), (7, 3), (8, 1), (8, 3), (8, 5),
(9, 5), (9, 10), (10, 1), (10, 7), (11, 5), (12, 2), (12, 8),
(13, 6), (14, 5), (15, 1), (15, 7),
(16, 1), (16, 7), (17, 2), (17, 8), (18, 5), (19, 1), (19, 7), (20, 10),
(21, 5), (22, 1), (22, 3), (23, 2), (23, 8), (24, 4), (24, 5), (25, 1), (25, 3),
(26, 2), (26, 8), (27, 2), (27, 3), (27, 8), (28, 4), (29, 2), (29, 3), (30, 2), (30, 3), (31, 2), (31, 8), (31, 9), (32, 3), (33, 2), (33, 8), (33, 9), (34, 3), (35, 3), (36, 3), (37, 2), (37, 3), (38, 4), (39, 2), (39, 3), (40, 2), (40, 3), (41, 2), (41, 3), (41, 8), (42, 2), (42, 8), (42, 9), (43, 4), (44, 4), (45, 2), (45, 8), (46, 4), (47, 2), (47, 8), (48, 2), (48, 8), (49, 2), (49, 8), (49, 9), (50, 4), (51, 4), (52, 3), (53, 4), (54, 4), (55, 2), (55, 3), (56, 2), (56, 8), (57, 3), (58, 4), (59, 3), (60, 4), (61, 3), (62, 2), (62, 8), (62, 9), (63, 2), (63, 8), (64, 3), (65, 4), (66, 3), (67, 2), (67, 8), (67, 9), (68, 3), (69, 3), (70, 3), (71, 2), (71, 8), (72, 3), (73, 3), (74, 2), (74, 8), (74, 9), (75, 2), (75, 8), (76, 4), (77, 4), (78, 4), (79, 4), (80, 2), (80, 8), (81, 4), (82, 3), (83, 4), (84, 4), (85, 4), (86, 4), (87, 4), (88, 4), (89, 4), (90, 4), (91, 2), (91, 3), (91, 8), (92, 2), (92, 3), (92, 8), (93, 4), (94, 2), (94, 8), (94, 9), (95, 2), (95, 8), (96, 2), (96, 8), (96, 9), (97, 4), (98, 2), (98, 3), (98, 8), (99, 2), (99, 8), (99, 9), (100, 3), (101, 4), (102, 2), (102, 8), (103, 4), (104, 4), (105, 4);


-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO _est_dote_de (id_produit, code_hexa) VALUES
(1, '#000000'), (1, '#FFFFFF'), (2, '#808080'), (3, '#0000FF'), (3, '#FF0000'),
(3, '#00FF00'), (4, '#0000FF'), (4, '#000000'), (5, '#FF0000'), (5, '#FFFFFF'),
(6, '#000000'), (7, '#808080'), (8, '#000000'), (9, '#0000FF'), (9, '#FF0000'),
(10, '#808080'), (11, '#FFFFFF'), (12, '#000000'), (12, '#8B4513'),
(14, '#EE82EE'), (14, '#87CEEB'), (15, '#000000'),
(16, '#000000'), (16, '#FFFFFF'), (17, '#808080'), (17, '#000000'), (18, '#FFFFFF'), (18, '#000000'),
(19, '#000000'), (20, '#FFFFFF'), (20, '#000000'),
(21, '#0000FF'), (21, '#FF0000'), (22, '#808080'), (23, '#000000'), (23, '#8B4513'),
(24, '#87CEEB'), (24, '#32CD32'), (25, '#000000'), (25, '#FF0000'),
(26, '#8B4513'), (27, '#0000FF'), (28, '#FF0000'), (29, '#8B4513'), (30, '#00FF00'), (31, '#000000'), (32, '#8B4513'), (33, '#87CEEB'), (34, '#FFFFFF'), (35, '#FFFFFF'), (36, '#EE82EE'), (37, '#FFFFFF'), (38, '#0000FF'), (39, '#0000FF'), (40, '#000000'), (41, '#000000'), (42, '#FFFFFF'), (43, '#8B4513'), (44, '#87CEEB'), (45, '#87CEEB'), (46, '#32CD32'), (47, '#87CEEB'), (48, '#00FF00'), (49, '#FFA500'), (50, '#EE82EE'), (51, '#FF0000'), (52, '#FFFF00'), (53, '#FFFFFF'), (54, '#0000FF'), (55, '#FFFFFF'), (56, '#808080'), (57, '#00FF00'), (58, '#FFFF00'), (59, '#00FF00'), (60, '#FFA500'), (61, '#00FF00'), (62, '#FFFFFF'), (63, '#00FF00'), (64, '#87CEEB'), (65, '#EE82EE'), (66, '#FFFF00'), (67, '#808080'), (68, '#FFA500'), (69, '#00FF00'), (70, '#32CD32'), (71, '#0000FF'), (72, '#00FF00'), (73, '#8B4513'), (74, '#FFA500'), (75, '#32CD32'), (76, '#87CEEB'), (77, '#FFFF00'), (78, '#0000FF'), (79, '#8B4513'), (80, '#0000FF'), (81, '#EE82EE'), (82, '#8B4513'), (83, '#FFFF00'), (84, '#8B4513'), (85, '#FFFF00'), (86, '#32CD32'), (87, '#EE82EE'), (88, '#0000FF'), (89, '#EE82EE'), (90, '#FFFFFF'), (91, '#000000'), (92, '#FFFFFF'), (93, '#808080'), (94, '#808080'), (95, '#00FF00'), (96, '#0000FF'), (97, '#EE82EE'), (98, '#000000'), (99, '#808080'), (100, '#808080'), (101, '#0000FF'), (102, '#87CEEB'), (103, '#FFA500'), (104, '#0000FF'), (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO _seuil_alerte (nb_seuil, message_seuil) VALUES
(10, 'Stock faible - Envisager un réapprovisionnement'),
(5, 'Stock critique - Réapprovisionnement urgent'),
(3, 'Rupture imminente - Commander immédiatement'),
(20, 'Stock normal - Surveillance recommandée'),
(1, 'Rupture de stock - Produit indisponible');

INSERT INTO _adresse (id_compte, a_numero, a_adresse, a_ville, a_code_postal, a_pays) VALUES
(4, 13, 'rue du Pillard', 'Rennes', 35590, 'France');

-- 18. PANIERS/COMMANDES
INSERT INTO _panier_commande (id_client, timestamp_commande) VALUES
(1, '2025-11-01 10:30:00'),
(2, '2025-11-02 14:45:00'),
(3, '2025-11-03 09:15:00'),
(1, NULL),
(4, '2025-11-04 16:20:00'),
(6, '2025-11-05 11:00:00'),
(2, NULL),
(5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO _contient (id_panier, id_produit, quantite, prix_unitaire, remise_unitaire, frais_de_port, TVA) VALUES
(1, 1, 1, 599.99, 0.0, 5.99, 20.0),
(1, 6, 1, 149.99, 0.0, 5.99, 20.0),
(2, 3, 2, 24.99, 0.0, 3.99, 20.0),
(2, 4, 1, 49.99, 0.0, 4.99, 20.0),
(3, 2, 1, 899.99, 0.0, 9.99, 20.0),
(4, 7, 1, 69.99, 0.0, 6.99, 20.0),
(5, 5, 1, 39.99, 0.0, 4.99, 20.0),
(5, 8, 1, 199.99, 0.0, 3.99, 20.0),
(6, 9, 2, 89.99, 0.0, 5.99, 20.0),
(7, 10, 1, 299.99, 0.0, 7.99, 20.0),
(8, 11, 1, 29.99, 0.0, 4.99, 20.0),
(8, 13, 1, 24.99, 0.0, 3.99, 20.0),
(8, 14, 1, 34.99, 0.0, 5.99, 20.0);

-- 20. FACTURES
INSERT INTO _facture (id_panier, id_adresse, f_total_ht, f_total_remise, f_total_ht_remise, f_total_ttc) VALUES
(1, 1, 755.98, 0.0, 755.98, 907.18),
(2, 1, 103.96, 0.0, 103.96, 124.75),
(3, 1, 909.98, 0.0, 909.98, 1091.98),
(5, 1, 248.97, 0.0, 248.97, 298.76),
(6, 1, 185.97, 0.0, 185.97, 223.16),
(8, 1, 95.96, 0.0, 95.96, 115.15);

-- 21. PAIEMENTS
INSERT INTO _paiement (id_facture, mode_paiement, numero_carte, mois_annee_expiration, cryptogramme_carte, timestamp_paiement) VALUES
(1, 'CB', '1234567890123456', '12/27', '123', '2025-11-01 10:35:00'),
(2, 'CB', '6543210987654321', '06/26', '456', '2025-11-02 14:50:00'),
(3, 'CB', '1111222233334444', '03/28', '789', '2025-11-03 09:20:00'),
(4, 'CB', '9999888877776666', '09/27', '321', '2025-11-04 16:25:00'),
(5, 'CB', '5555666677778888', '11/26', '654', '2025-11-05 11:05:00'),
(6, 'CB', '4444333322221111', '08/27', '987', '2025-11-06 13:35:00');

-- 22. LIVRAISONS
INSERT INTO _livraison (id_facture, date_livraison, etat_livraison) VALUES
(1, '2025-11-05', 'Livré'),
(2, '2025-11-06', 'Livré'),
(3, '2025-11-08', 'En transit'),
(4, NULL, 'En préparation'),
(5, '2025-11-09', 'Livré'),
(6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO _definie_pour (id_seuil, id_compte) VALUES
(1, 2), (2, 2), (3, 2), (4, 2), (5, 2),
(1, 3), (2, 3), (3, 3), (5, 3),
(1, 10), (2, 10), (3, 10), (4, 10), (5, 10),
(5, 1);


-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;
UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;
UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;
UPDATE cobrec1._commentaire SET a_note = 0.0;


SELECT DISTINCT ON (p.id_produit)
    p.id_produit,
    p.p_nom,
    p.p_description,
    p.p_prix,
    p.p_stock,
    r.reduction_pourcentage,
    pr.id_produit,
    (SELECT COUNT(*) FROM cobrec1._avis av2 WHERE av2.id_produit = p.id_produit AND av2.a_note IS NOT NULL) as nombre_avis,
    (SELECT ROUND(COALESCE(AVG(av3.a_note), 0)::numeric, 1) FROM cobrec1._avis av3 WHERE av3.id_produit = p.id_produit AND av3.a_note IS NOT NULL) as note_moyenne,
    (SELECT COALESCE(i2.i_lien, '/img/photo/smartphone_xpro.jpg') FROM cobrec1._represente_produit rp2 LEFT JOIN cobrec1._image i2 ON rp2.id_image = i2.id_image WHERE rp2.id_produit = p.id_produit LIMIT 1) as image_url,
    STRING_AGG(DISTINCT cp.nom_categorie, ', ') as categories
FROM cobrec1._produit p
LEFT JOIN cobrec1._reduction r ON p.id_produit = r.id_produit 
LEFT JOIN cobrec1._promotion pr ON p.id_produit = pr.id_produit 
LEFT JOIN cobrec1._tva t ON p.id_tva = t.id_tva
LEFT JOIN cobrec1._fait_partie_de fpd ON p.id_produit = fpd.id_produit
LEFT JOIN cobrec1._categorie_produit cp ON fpd.id_categorie = cp.id_categorie
WHERE p.p_statut = 'En ligne'
GROUP BY p.id_produit, p.p_nom, p.p_description, p.p_prix, p.p_stock, 
         p.p_note, p.p_nb_ventes, p.p_statut, r.reduction_pourcentage, 
         pr.id_produit, t.montant_tva
ORDER BY p.id_produit
----------- WbStatement -----------
##sqlwb.pos=73761
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;
CREATE SCHEMA cobrec1;
SET SCHEMA 'cobrec1';


-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (civilite IN ('M.', 'Mme', 'Inconnu', 'Ne souhaite pas s''exprimer', 'Autre')),
    CONSTRAINT verif_compte_email CHECK (email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'),
    CONSTRAINT verif_compte_num_telephone CHECK (num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$')
);

ALTER TABLE ONLY cobrec1._compte
    ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
    ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
    ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11,2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (type_couleur IN ('Vert', 'Jaune' , 'Rouge' , 'Noir' , 'Blanc' , 'Bleu' , 'Violet' , 'Orange' , 'Gris' , 'Marron' ) )
);

ALTER TABLE ONLY cobrec1._couleur
    ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
    ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
    ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4,1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (montant_TVA >= 0.00 AND montant_TVA <= 100.00)
);

ALTER TABLE ONLY cobrec1._TVA
    ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
    ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11,2) DEFAULT 0.0,
    p_volume numeric(11,2) DEFAULT 0.0,
    p_frais_de_port numeric(11,2) DEFAULT 0.0,
    p_prix numeric(11,2) NOT NULL,
    p_note numeric(2,1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (p_note >= 0 AND p_note <= 5),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (p_statut IN ('Ébauche', 'En ligne', 'Hors ligne', 'Supprimé')),
    CONSTRAINT verif_produit_origine CHECK (p_origine IN ('Inconnu', 'Bretagne', 'France', 'UE', 'Hors UE'))
);

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) 
            REFERENCES cobrec1._vendeur(id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) 
            REFERENCES cobrec1._TVA(id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5,2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (reduction_pourcentage >= 0.00 AND reduction_pourcentage <= 100.00),
    CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),
    CONSTRAINT verif_reduction_fin CHECK (reduction_fin > reduction_debut)
);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),
    CONSTRAINT verif_promotion_fin CHECK (promotion_fin > promotion_debut)
);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;


-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
    ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
    ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
    ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
    ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
    ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11,2) DEFAULT 0.0,
    f_total_remise numeric(11,2) DEFAULT 0.0,
    f_total_ht_remise numeric(11,2) DEFAULT 0.0,
    f_total_ttc numeric(11,2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) 
            REFERENCES cobrec1._panier_commande(id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) 
            REFERENCES cobrec1._adresse(id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) 
            REFERENCES cobrec1._facture(id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) 
            REFERENCES cobrec1._facture(id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2,1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client(id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (vote_type IN ('like', 'dislike'))
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2,1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (a_note IN (NULL,0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5,4.0,4.5,5.0))
);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) 
            REFERENCES cobrec1._livraison(id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison,id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (type_signalement IN ('signale_avis', 'signale_compte', 'signale_produit'))
);

ALTER TABLE ONLY cobrec1._signalement
    ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
    ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11,2) NOT NULL,
    remise_unitaire numeric(11,2) DEFAULT 0.0,
    frais_de_port numeric(11,2) DEFAULT 0.0,
    TVA numeric(4,1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (TVA >= 0.00 AND TVA<= 100.00)
);

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) 
            REFERENCES cobrec1._panier_commande(id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
CREATE TABLE cobrec1._represente_promotion (
    id_image integer NOT NULL,
    id_promotion integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion) 
            REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) 
            REFERENCES cobrec1._categorie_produit(id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) 
            REFERENCES cobrec1._couleur(code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit) 
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction) 
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit) 
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion) 
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) 
            REFERENCES cobrec1._seuil_alerte(id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;


-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();


CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;


CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO _compte (nom, prenom, email, num_telephone, mdp, etat_A2F, nb_fois_signale, nb_signalements_avis, nb_cpts_signales, nb_avis_signales) VALUES
('Maeleau', 'Le Hyver', 'admin@cobrec.fr', '0601020304', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 0, 0),
('Lopicier', 'Mallo', 'vendeur1@example.com', '0612345678', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Elouard', 'Jean-Jacques', 'vendeur2@shop.fr', '0623456789', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 1, 0, 0, 0),
('Jean', 'Dupont','client1@gmail.com', '0634567890', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 1, 0, 0),
('Marie', 'Martin','client2@yahoo.fr', '0645678901', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 1, 0),
('Pierre', 'Durand','client3@outlook.com', '0656789012', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Sophie', 'Bernard','client4@free.fr', '0667890123', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Lucas', 'Petit','client5@orange.fr', '0678901234', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Emma', 'Lefebvre','client6@wanadoo.fr', '0689012345', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 0, 0),
('Martinière', 'Yvili', 'vendeur3@boutique.fr', '0690123456', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0);

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO _vendeur (id_compte, SIREN, raison_sociale, denomination, nb_produits_crees) VALUES
(2, '123456789', 'TechStore SARL', 'TechStore', 5),
(3, '987654321', 'FashionHub SAS', 'FashionHub', 3),
(10, '456789123', 'SportPro EURL', 'SportPro', 2);

-- 4. CLIENTS
INSERT INTO _client (id_compte, c_pseudo, c_nb_produits_achetes, c_depense_totale, c_cloture, c_datenaissance) VALUES
(4, 'jdupont', 2, 907.18, FALSE, '1985-03-15'),
(5, 'mmartin', 3, 124.75, FALSE, '1990-07-22'),
(6, 'pdurand', 1, 1091.98, FALSE, '1988-11-10'),
(7, 'sbernard', 2, 298.76, FALSE, '1995-05-30'),
(8, 'lpetit', 0, 0.0, FALSE, '2000-01-18'),
(9, 'elefebvre', 1, 179.98, FALSE, '1992-09-25');


-- 5. ADRESSES
INSERT INTO _adresse (id_compte, a_adresse, a_ville, a_code_postal, a_complement) VALUES
(4, '15 rue de la Paix', 'Paris', '75001', 'Apt 5'),
(5, '23 avenue des Champs', 'Lyon', '69001', NULL),
(6, '8 boulevard Victor Hugo', 'Marseille', '13001', 'Bâtiment B'),
(7, '42 rue du Commerce', 'Toulouse', '31000', NULL),
(8, '67 place de la République', 'Nice', '06000', '3ème étage'),
(9, '91 rue Principale', 'Bordeaux', '33000', NULL),
(2, '12 avenue du Commerce', 'Paris', '75015', 'Entrepôt A'),
(3, '55 rue de la Mode', 'Lyon', '69002', NULL),
(10, '78 boulevard du Sport', 'Marseille', '13008', 'Zone industrielle');

-- 6. COULEURS
INSERT INTO _couleur (code_hexa, nom, type_couleur) VALUES
('#FF0000', 'Rouge vif', 'Rouge'),
('#0000FF', 'Bleu marine', 'Bleu'),
('#000000', 'Noir', 'Noir'),
('#FFFFFF', 'Blanc pur', 'Blanc'),
('#00FF00', 'Vert émeraude', 'Vert'),
('#FFFF00', 'Jaune citron', 'Jaune'),
('#FFA500', 'Orange', 'Orange'),
('#808080', 'Gris', 'Gris'),
('#8B4513', 'Marron chocolat', 'Marron'),
('#EE82EE', 'Violet', 'Violet'),
('#87CEEB', 'Bleu ciel', 'Bleu'),
('#32CD32', 'Vert lime', 'Vert');

-- 7. CATÉGORIES
INSERT INTO _categorie_produit (nom_categorie) VALUES
('Électronique'),
('Vêtements'),
('Accessoires'),
('Maison'),
('Sport'),
('Livres'),
('Informatique'),
('Mode homme'),
('Mode femme'),
('Chaussures');

-- 8. TVA
INSERT INTO _TVA (montant_TVA, libelle_TVA) VALUES
(20.0, 'TVA normale'),
(10.0, 'TVA intermédiaire'),
(5.5, 'TVA réduite'),
(2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO _produit (id_TVA, id_vendeur, p_nom, p_description, p_prix, p_stock, p_statut, p_origine, p_poids, p_volume, p_frais_de_port, p_note, p_nb_ventes) VALUES
(1, 1, 'Smartphone XPro', 'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G', 599.99, 35, 'En ligne', 'Bretagne', 0.180, 0.01, 5.99, 4.3, 15),
(1, 1, 'Ordinateur portable Ultra', 'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7', 899.99, 22, 'En ligne', 'Bretagne', 2.5, 0.03, 9.99, 4.0, 8),
(1, 2, 'T-shirt coton bio', 'T-shirt 100% coton biologique, coupe regular, diverses couleurs', 24.99, 58, 'En ligne', 'Bretagne', 0.15, 0.5, 3.99, 5.0, 42),
(1, 2, 'Jean slim', 'Jean coupe slim stretch, denim premium', 49.99, 62, 'En ligne', 'Bretagne', 1.00, 0.01, 4.99, NULL, 18),
(1, 2, 'Robe d été', 'Robe légère et fluide pour l été, motifs floraux', 39.99, 48, 'En ligne', 'Bretagne', 0.30, 0.08, 4.99, NULL, 12),
(2, 1, 'Casque audio Bluetooth', 'Casque sans fil avec réduction de bruit active, autonomie 30h', 149.99, 15, 'En ligne', 'Bretagne', 0.25, 0.02, 5.99, 4.5, 25),
(1, 2, 'Sac à dos urbain', 'Sac à dos pour ordinateur portable, compartiments multiples, imperméable', 69.99, 35, 'En ligne', 'Bretagne', 0.60, 0.15, 6.99, NULL, 10),
(1, 1, 'Montre connectée', 'Montre sport avec GPS, cardiofréquencemètre, étanche 50m', 199.99, 15, 'En ligne', 'Bretagne', 0.05, 0.01, 3.99, 4.7, 20),
(1, 3, 'Chaussures running', 'Chaussures de course avec amorti premium, semelle respirante', 89.99, 54, 'En ligne', 'Bretagne', 0.40, 0.08, 5.99, 4.2, 16),
(1, 1, 'Tablette 10 pouces', 'Tablette Android, écran Full HD, 64Go, stylet inclus', 299.99, 16, 'En ligne', 'Bretagne', 0.50, 0.02, 7.99, 3.8, 9),
(1, 3, 'Ballon de football', 'Ballon officiel en cuir synthétique, taille 5', 29.99, 85, 'En ligne', 'Bretagne', 0.45, 0.06, 4.99, 4.6, 35),
(1, 2, 'Veste en cuir', 'Veste en cuir véritable, coupe motard, doublure intérieure', 189.99, 15, 'En ligne', 'Bretagne', 1.20, 0.01, 8.99, NULL, 5),
(3, 1, 'Livre cuisine française', 'Recettes traditionnelles de cuisine française, 300 pages', 24.99, 28, 'En ligne', 'Bretagne', 0.80, 0.03, 3.99, 4.8, 22),
(1, 3, 'Tapis de yoga', 'Tapis antidérapant, épaisseur 6mm, avec sac de transport', 34.99, 52, 'En ligne', 'Bretagne', 1.10, 0.02, 5.99, 4.4, 28),
(1, 1, 'Clavier mécanique RGB', 'Clavier gamer avec rétroéclairage RGB, switches mécaniques', 79.99, 29, 'En ligne', 'Bretagne', 0.90, 0.04, 5.99, 4.1, 11),
(1, 1, 'Console NextGen', 'Console de jeu dernière génération, 1To SSD, 4K HDR', 499.99, 0, 'Hors ligne', 'France', 3.5, 0.02, 14.99, 4.8, 25),
(1, 2, 'Sweat à capuche premium', 'Sweat-shirt en coton bio, coupe oversize, poche kangourou', 59.99, 0, 'Hors ligne', 'France', 0.70, 0.03, 5.99, 4.4, 18),
(1, 3, 'Raquette de tennis pro', 'Raquette carbone, tension 25kg, grip confort', 129.99, 0, 'Hors ligne', 'France', 0.35, 0.02, 6.99, 4.7, 32),
(1, 1, 'Écran gaming 4K 27"', 'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms', 349.99, 0, 'Hors ligne', 'France', 5.2, 0.35, 19.99, 4.6, 18),
(1, 2, 'Baskets limited edition', 'Baskets cuir véritable, édition limitée, semelle comfort', 179.99, 0, 'Hors ligne', 'France', 0.80, 0.06, 7.99, 4.9, 65),
(1, 3, 'Vélo de route carbone', 'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses', 1299.99, 0, 'Hors ligne', 'UE', 8.5, 0.15, 29.99, 4.8, 25),
(1, 1, 'Drone professionnel 4K', 'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min', 899.99, 0, 'Hors ligne', 'UE', 1.2, 0.02, 12.99, 4.6, 18),
(1, 2, 'Manteau d hiver imperméable', 'Manteau longueur genoux, doublure polaire, coupe-vent', 179.99, 0, 'Hors ligne', 'UE', 1.5, 0.01, 8.99, 4.4, 65),
(1, 3, 'Tente 4 places', 'Tente familiale, double toit, arceaux aluminium, imperméable', 249.99, 0, 'Hors ligne', 'Hors UE', 4.8, 0.08, 19.99, 4.7, 32),
(1, 1, 'Enceinte Bluetooth waterproof', 'Enceinte portable, autonomie 24h, résistance IP67', 129.99, 0, 'Hors ligne', 'Hors UE', 0.9, 0.05, 6.99, 4.9, 95),
(2, 1, 'Pull Marin de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.', 36.37, 31, 'En ligne', 'Bretagne', 2.06, 0.45, 5.78, 4.4, 12),
(1, 1, 'Bonnet Miki de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.', 121.37, 6, 'Hors ligne', 'Bretagne', 2.3, 0.09, 8.8, 4.3, 60),
(2, 3, 'Galettes Local', 'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.', 147.92, 142, 'En ligne', 'Bretagne', 0.46, 0.46, 5.71, 4.3, 97),
(1, 3, 'Écharpe Rayée Fait main', 'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.', 173.77, 102, 'En ligne', 'Bretagne', 0.91, 0.32, 8.28, 4.4, 58),
(1, 2, 'Écharpe Rayée de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.', 197.02, 168, 'Hors ligne', 'Bretagne', 2.1, 0.12, 7.92, 4.8, 19),
(4, 2, 'Ciré Navy de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.', 104.35, 169, 'En ligne', 'Bretagne', 1.43, 0.14, 7.22, 4.6, 72),
(4, 3, 'Bracelet Ancre Fait main', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 172.75, 44, 'Hors ligne', 'Bretagne', 1.92, 0.4, 8.8, 4.1, 102),
(1, 3, 'Marinière Local', 'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.', 74.29, 80, 'Hors ligne', 'Bretagne', 1.36, 0.23, 13.58, 4.9, 72),
(3, 1, 'Bracelet Ancre de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.', 40.53, 140, 'En ligne', 'Bretagne', 2.76, 0.3, 9.4, 4.1, 97),
(3, 3, 'Pendentif Hermine Fait main', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 164.23, 199, 'Hors ligne', 'Bretagne', 1.64, 0.07, 10.94, 4.9, 47),
(1, 3, 'Sac Voile de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.', 136.95, 100, 'En ligne', 'Bretagne', 1.37, 0.26, 6.09, 4.2, 91),
(2, 3, 'Écharpe Rayée de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 21.13, 22, 'Hors ligne', 'Bretagne', 2.73, 0.43, 5.64, 4.2, 129),
(1, 2, 'Coussin Triskell de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.', 134.55, 95, 'Hors ligne', 'Bretagne', 1.33, 0.24, 11.56, 4.7, 30),
(1, 3, 'Écharpe Rayée Authentique', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.', 36.49, 51, 'En ligne', 'Bretagne', 0.91, 0.13, 13.31, 4.4, 145),
(4, 3, 'Écharpe Rayée Bio', 'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.', 50.4, 107, 'Hors ligne', 'Bretagne', 2.72, 0.09, 5.02, 4.4, 121),
(1, 3, 'Bonnet Miki Authentique', 'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.', 119.47, 143, 'En ligne', 'Bretagne', 0.28, 0.16, 5.45, 4.5, 140),
(3, 1, 'Ciré Navy de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 187.96, 150, 'Hors ligne', 'Bretagne', 0.81, 0.3, 10.57, 4.4, 149),
(1, 1, 'Bol Breton Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.', 66.7, 85, 'En ligne', 'Bretagne', 2.79, 0.47, 5.08, 4.6, 149),
(1, 3, 'Bol Breton Premium', 'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.', 176.18, 99, 'Hors ligne', 'Bretagne', 0.93, 0.22, 9.89, 4.3, 140),
(3, 1, 'Pull Marin de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.', 30.23, 146, 'En ligne', 'Bretagne', 0.55, 0.15, 6.9, 4.3, 72),
(1, 1, 'Affiche Vintage de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.', 155.74, 168, 'En ligne', 'Bretagne', 2.94, 0.09, 8.98, 4.7, 148),
(2, 3, 'Vareuse Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 120.09, 42, 'En ligne', 'Bretagne', 1.35, 0.03, 8.28, 4.9, 15),
(3, 2, 'Pull Marin Bio', 'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.', 151.65, 65, 'En ligne', 'Bretagne', 2.61, 0.49, 12.3, 4.9, 11),
(1, 3, 'Kabig Bio', 'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.', 172.27, 61, 'En ligne', 'Bretagne', 0.68, 0.46, 8.15, 4.8, 63),
(1, 2, 'Phare Miniature Fait main', 'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.', 62.75, 169, 'En ligne', 'Bretagne', 1.58, 0.34, 12.59, 4.3, 12),
(3, 1, 'Bol Breton Fait main', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 75.33, 85, 'Hors ligne', 'Bretagne', 1.37, 0.49, 6.04, 4.9, 53),
(3, 3, 'Bracelet Ancre de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 23.23, 175, 'Hors ligne', 'Bretagne', 2.77, 0.32, 10.97, 4.1, 81),
(1, 2, 'Caramels de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.', 135.67, 102, 'Hors ligne', 'Bretagne', 2.06, 0.45, 10.54, 4.3, 145),
(3, 3, 'Affiche Vintage de Vannes', 'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.', 137.69, 135, 'Hors ligne', 'Bretagne', 1.47, 0.45, 12.16, 4.2, 26),
(4, 2, 'Écharpe Rayée de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.', 37.85, 16, 'Hors ligne', 'Bretagne', 0.81, 0.24, 12.65, 4.1, 111),
(4, 3, 'Vareuse de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 51.36, 183, 'Hors ligne', 'Bretagne', 1.6, 0.03, 7.24, 4.8, 121),
(4, 3, 'Bracelet Ancre Durable', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.', 150.55, 126, 'En ligne', 'Bretagne', 1.41, 0.38, 12.56, 4.3, 138),
(1, 2, 'Lampe Tempête de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.', 73.48, 143, 'Hors ligne', 'Bretagne', 0.33, 0.08, 8.45, 4.2, 59),
(4, 1, 'Sac Voile de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.', 167.42, 104, 'Hors ligne', 'Bretagne', 2.72, 0.3, 11.26, 4.9, 102),
(4, 1, 'Caramels de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.', 61.58, 129, 'En ligne', 'Bretagne', 0.18, 0.17, 11.11, 4.4, 47),
(4, 2, 'Pendentif Hermine de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 35.65, 123, 'Hors ligne', 'Bretagne', 0.63, 0.14, 7.95, 4.5, 91),
(2, 1, 'Ciré Navy Artisanal', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.', 19.84, 94, 'En ligne', 'Bretagne', 0.75, 0.04, 13.62, 4.0, 12),
(3, 1, 'Vareuse de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 51.2, 184, 'En ligne', 'Bretagne', 0.84, 0.19, 10.45, 5.0, 34),
(1, 2, 'Pendentif Hermine Bio', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.', 47.48, 156, 'Hors ligne', 'Bretagne', 2.1, 0.32, 5.92, 4.8, 35),
(4, 1, 'Galettes de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.', 89.39, 130, 'Hors ligne', 'Bretagne', 0.41, 0.48, 10.72, 4.8, 44),
(2, 2, 'Sac Voile Durable', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.', 148.16, 73, 'Hors ligne', 'Bretagne', 1.03, 0.13, 13.41, 4.3, 120),
(1, 1, 'Marinière de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.', 50.09, 71, 'Hors ligne', 'Bretagne', 1.09, 0.44, 11.31, 4.3, 7),
(4, 3, 'Sac Voile Bio', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.', 102.77, 9, 'Hors ligne', 'Bretagne', 0.37, 0.12, 11.23, 4.3, 99),
(2, 1, 'Sac Voile Premium', 'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.', 61.2, 69, 'Hors ligne', 'Bretagne', 0.77, 0.36, 7.84, 4.7, 52),
(1, 1, 'Pendentif Hermine Local', 'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.', 167.37, 80, 'Hors ligne', 'Bretagne', 0.76, 0.1, 5.13, 4.5, 75),
(1, 2, 'Vareuse Durable', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 118.5, 125, 'Hors ligne', 'Bretagne', 1.49, 0.18, 13.69, 4.3, 127),
(4, 2, 'Pendentif Hermine Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 116.38, 82, 'Hors ligne', 'Bretagne', 0.35, 0.13, 10.02, 4.4, 62),
(2, 1, 'Pendentif Hermine de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.', 21.38, 194, 'En ligne', 'Bretagne', 0.39, 0.38, 10.63, 4.3, 25),
(2, 2, 'Ciré Navy de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.', 140.29, 125, 'En ligne', 'Bretagne', 0.94, 0.12, 11.36, 4.7, 121),
(4, 1, 'Pull Marin Authentique', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 181.69, 41, 'Hors ligne', 'Bretagne', 0.31, 0.09, 7.77, 4.7, 150),
(1, 1, 'Bolée à Cidre Local', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.', 103.33, 25, 'En ligne', 'Bretagne', 1.83, 0.45, 11.61, 4.6, 11),
(4, 2, 'Bol Breton de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 133.14, 76, 'Hors ligne', 'Bretagne', 0.63, 0.3, 10.71, 4.5, 28),
(3, 2, 'Phare Miniature de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.', 141.1, 78, 'Hors ligne', 'Bretagne', 2.02, 0.21, 11.84, 4.0, 27),
(1, 1, 'Caramels Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 112.55, 110, 'Hors ligne', 'Bretagne', 0.26, 0.26, 10.6, 4.5, 118),
(4, 1, 'Vareuse de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.', 101.61, 12, 'En ligne', 'Bretagne', 2.92, 0.31, 7.15, 4.2, 146),
(2, 2, 'Lampe Tempête Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.', 145.44, 135, 'En ligne', 'Bretagne', 2.15, 0.21, 9.34, 4.5, 121),
(4, 1, 'Bracelet Ancre de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.', 159.31, 111, 'Hors ligne', 'Bretagne', 1.09, 0.4, 7.4, 4.0, 81),
(2, 2, 'Coussin Triskell Premium', 'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.', 112.71, 121, 'En ligne', 'Bretagne', 2.81, 0.44, 13.83, 4.2, 103),
(1, 2, 'Coussin Triskell Bio', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.', 159.76, 171, 'En ligne', 'Bretagne', 2.94, 0.25, 5.33, 4.5, 89),
(1, 2, 'Lampe Tempête de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 133.75, 44, 'Hors ligne', 'Bretagne', 0.32, 0.39, 7.39, 4.6, 106),
(1, 2, 'Coussin Triskell Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 54.37, 180, 'En ligne', 'Bretagne', 2.77, 0.5, 11.72, 4.4, 30),
(2, 1, 'Bolée à Cidre de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.', 20.61, 96, 'En ligne', 'Bretagne', 1.19, 0.08, 9.78, 4.6, 51),
(3, 3, 'Caramels Durable', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.', 37.05, 123, 'En ligne', 'Bretagne', 1.95, 0.24, 11.0, 4.9, 124),
(2, 2, 'Lampe Tempête Local', 'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.', 90.19, 69, 'Hors ligne', 'Bretagne', 1.42, 0.16, 13.99, 4.9, 32),
(3, 1, 'Bolée à Cidre Artisanal', 'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.', 134.41, 75, 'Hors ligne', 'Bretagne', 0.12, 0.43, 12.0, 5.0, 132),
(3, 2, 'Bonnet Miki Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.', 180.74, 170, 'Hors ligne', 'Bretagne', 0.21, 0.4, 5.3, 4.4, 38),
(4, 1, 'Bonnet Miki Premium', 'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.', 182.65, 47, 'En ligne', 'Bretagne', 0.85, 0.41, 9.34, 4.8, 91),
(3, 1, 'Caramels de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.', 84.57, 72, 'En ligne', 'Bretagne', 1.66, 0.23, 11.06, 4.7, 102),
(1, 1, 'Marinière Premium', 'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.', 51.84, 21, 'Hors ligne', 'Bretagne', 1.94, 0.24, 11.31, 4.6, 34),
(1, 2, 'Pull Marin de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 35.64, 121, 'Hors ligne', 'Bretagne', 1.18, 0.48, 11.27, 4.5, 44),
(4, 2, 'Ciré Jaune de Vannes', 'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.', 189.65, 97, 'En ligne', 'Bretagne', 0.39, 0.35, 9.9, 5.0, 96),
(1, 3, 'Lampe Tempête Authentique', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 122.86, 10, 'En ligne', 'Bretagne', 0.25, 0.17, 13.9, 4.8, 57),
(1, 3, 'Bonnet Miki de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.', 159.05, 157, 'En ligne', 'Bretagne', 0.11, 0.43, 6.3, 4.1, 69),
(3, 3, 'Marinière Authentique', 'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.', 12.98, 72, 'En ligne', 'Bretagne', 0.25, 0.37, 9.73, 4.7, 126),
(4, 2, 'Bracelet Ancre Artisanal', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.', 181.75, 173, 'En ligne', 'Bretagne', 1.61, 0.23, 13.68, 4.1, 127),
(3, 2, 'Lampe Tempête de Vannes', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 38.04, 37, 'Hors ligne', 'Bretagne', 0.9, 0.32, 9.94, 4.3, 140),
(3, 2, 'Pull Marin de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 177.85, 110, 'En ligne', 'Bretagne', 1.08, 0.23, 8.74, 4.1, 114),
(3, 3, 'Coussin Triskell Fait main', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 27.62, 29, 'En ligne', 'Bretagne', 2.26, 0.19, 6.17, 4.1, 148),
(3, 3, 'Galettes Artisanal', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.', 123.48, 95, 'Hors ligne', 'Bretagne', 0.4, 0.26, 6.39, 4.5, 32),
(1, 1, 'Bol Breton Bio', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.', 194.19, 164, 'Hors ligne', 'Bretagne', 1.88, 0.32, 5.24, 4.9, 73);

-- 10. PROMOTIONS (futures)
INSERT INTO _promotion (id_produit, promotion_debut, promotion_fin) VALUES
(1, '2027-12-20 00:00:00', '2027-12-25 23:59:59'),
(2, '2026-02-01 00:00:00', '2026-02-07 23:59:59'),
(3, '2026-02-16 00:00:00', '2026-02-25 23:59:59'),
(4, '2026-04-01 00:00:00', '2026-04-15 23:59:59'),
(5, '2026-05-01 00:00:00', '2026-05-07 23:59:59'),
(6, '2026-06-10 00:00:00', '2026-06-20 23:59:59'),
(7, '2026-07-01 00:00:00', '2026-07-31 23:59:59');

-- 9. RÉDUCTIONS (futures)
INSERT INTO _reduction (id_produit, reduction_pourcentage, reduction_debut, reduction_fin) VALUES
(1, 10.00, '2026-02-09 00:00:00', '2026-02-19 23:59:59'),
(2, 15.00, '2026-02-15 00:00:00', '2026-02-25 23:59:59'),
(3, 20.00, '2026-02-01 00:00:00', '2026-02-15 23:59:59'),
(4, 25.00, '2026-02-20 00:00:00', '2026-02-26 23:59:59'),
(5, 30.00, '2026-06-01 00:00:00', '2026-06-30 23:59:59'),
(6, 60.00, '2026-04-01 00:00:00', '2026-04-15 23:59:59'),
(7, 55.00, '2026-05-01 00:00:00', '2026-05-07 23:59:59'),
(8, 70.00, '2026-06-10 00:00:00', '2026-06-20 23:59:59'),
(9, 65.00, '2026-07-01 00:00:00', '2026-07-31 23:59:59');

-- 12. IMAGES
INSERT INTO _image (i_lien, i_title, i_alt) VALUES
('/img/photo/smartphone_xpro.jpg', 'Smartphone XPro.jpg', 'Image du smartphone'),
('/img/photo/ordinateur_portable_ultra.jpg', 'Ordinateur portable.jpeg', 'Image de l ordinateur'),
('/img/photo/t_shirt_coton_bio.jpg', 'T-shirt.png', 'Image du t-shirt'),
('/img/photo/jean_slim.jpg', 'Jean.jpg', 'Image du jean'),
('/img/photo/casque_audio_bluetooth.jpg', 'Casque audio.jpg', 'Image du casque'),
('/img/photo/avatar_jean.jpg', 'Avatar Jean.jpeg', 'Photo de profil Jean'),
('/img/photo/avatar_marie.jpg', 'Avatar Marie.jpg', 'Photo de profil Marie'),
('/img/photo/logo_techstore.jpg', 'Logo TechStore.jpg', 'Logo entreprise TechStore'),
('/img/photo/logo_fashionhub.jpg', 'Logo FashionHub.jpg', 'Logo entreprise FashionHub'),
('/img/photo/montre_connect_e.jpg', 'Montre connectée.jpg', 'Image de la montre'),
('/img/photo/sac___dos_urbain.jpg', 'Sac à dos.jpeg', 'Image du sac'),
('/img/photo/chaussures_running.jpg', 'Chaussures running.jpeg', 'Image des chaussures'),
('/img/photo/tablette_10_pouces.jpg', 'Tablette.jpg', 'Image de la tablette'),
('/img/photo/ballon_de_football.jpg', 'Ballon football.jpg', 'Image du ballon'),
('/img/photo/veste_en_cuir.jpg', 'Veste cuir.jpg', 'Image de la veste'),
('/img/photo/livre_cuisine_fran_aise.jpg', 'Livre cuisine.jpeg', 'Image du livre'),
('/img/photo/tapis_de_yoga.jpg', 'Tapis yoga.jpeg', 'Image du tapis'),
('/img/photo/clavier_m_canique_rgb.jpg', 'Clavier.jpg', 'Image du clavier'),
('/img/photo/console_nextgen.jpg', 'Console NextGen.jpg', 'Image de la console'),
('/img/photo/sweat___capuche_premium.jpg', 'Sweat à capuche.jpeg', 'Image du sweat'),
('/img/photo/raquette_de_tennis_pro.jpg', 'Raquette tennis.jpg', 'Image de la raquette'),
('/img/photo/_cran_gaming_4k_27_.jpg', 'Écran 4K.jpeg', 'Image de l écran'),
('/img/photo/baskets_limited_edition.jpg', 'Baskets limited.jpeg', 'Image des baskets'),
('/img/photo/v_lo_de_route_carbone.jpg', 'Vélo route.jpeg', 'Image du vélo'),
('/img/photo/drone_professionnel_4k.jpg', 'Drone 4K.jpg', 'Image du drone'),
('/img/photo/manteau_d_hiver_imperm_able.jpg', 'Manteau hiver.jpeg', 'Image du manteau'),
('/img/photo/tente_4_places.jpg', 'Tente 4 places.jpg', 'Image de la tente'),
('/img/photo/enceinte_bluetooth_waterproof.jpg', 'Enceinte Bluetooth.jpg', 'Image de l enceinte'),
('/img/photo/pull_marin_de_saint_malo.jpg', 'Pull Marin de Saint-Malo', 'Photo de Pull Marin de Saint-Malo'),
('/img/photo/bonnet_miki_de_carnac.jpg', 'Bonnet Miki de Carnac', 'Photo de Bonnet Miki de Carnac'),
('/img/photo/galettes_local.jpg', 'Galettes Local', 'Photo de Galettes Local'),
('/img/photo/_charpe_ray_e_fait_main.jpg', 'Écharpe Rayée Fait main', 'Photo de Écharpe Rayée Fait main'),
('/img/photo/_charpe_ray_e_de_brest.jpg', 'Écharpe Rayée de Brest', 'Photo de Écharpe Rayée de Brest'),
('/img/photo/cir__navy_de_concarneau.jpg', 'Ciré Navy de Concarneau', 'Photo de Ciré Navy de Concarneau'),
('/img/photo/bracelet_ancre_fait_main.jpg', 'Bracelet Ancre Fait main', 'Photo de Bracelet Ancre Fait main'),
('/img/photo/marini_re_local.jpg', 'Marinière Local', 'Photo de Marinière Local'),
('/img/photo/bracelet_ancre_de_concarneau.jpg', 'Bracelet Ancre de Concarneau', 'Photo de Bracelet Ancre de Concarneau'),
('/img/photo/pendentif_hermine_fait_main.jpg', 'Pendentif Hermine Fait main', 'Photo de Pendentif Hermine Fait main'),
('/img/photo/sac_voile_de_concarneau.jpg', 'Sac Voile de Concarneau', 'Photo de Sac Voile de Concarneau'),
('/img/photo/_charpe_ray_e_de_saint_malo.jpg', 'Écharpe Rayée de Saint-Malo', 'Photo de Écharpe Rayée de Saint-Malo'),
('/img/photo/coussin_triskell_de_roscoff.jpg', 'Coussin Triskell de Roscoff', 'Photo de Coussin Triskell de Roscoff'),
('/img/photo/_charpe_ray_e_authentique.jpg', 'Écharpe Rayée Authentique', 'Photo de Écharpe Rayée Authentique'),
('/img/photo/_charpe_ray_e_bio.jpg', 'Écharpe Rayée Bio', 'Photo de Écharpe Rayée Bio'),
('/img/photo/bonnet_miki_authentique.jpg', 'Bonnet Miki Authentique', 'Photo de Bonnet Miki Authentique'),
('/img/photo/cir__navy_de_quimper.jpg', 'Ciré Navy de Quimper', 'Photo de Ciré Navy de Quimper'),
('/img/photo/bol_breton_traditionnel.jpg', 'Bol Breton Traditionnel', 'Photo de Bol Breton Traditionnel'),
('/img/photo/bol_breton_premium.jpg', 'Bol Breton Premium', 'Photo de Bol Breton Premium'),
('/img/photo/pull_marin_de_brest.jpg', 'Pull Marin de Brest', 'Photo de Pull Marin de Brest'),
('/img/photo/affiche_vintage_de_dinard.jpg', 'Affiche Vintage de Dinard', 'Photo de Affiche Vintage de Dinard'),
('/img/photo/vareuse_artisanal.jpg', 'Vareuse Artisanal', 'Photo de Vareuse Artisanal'),
('/img/photo/pull_marin_bio.jpg', 'Pull Marin Bio', 'Photo de Pull Marin Bio'),
('/img/photo/kabig_bio.jpg', 'Kabig Bio', 'Photo de Kabig Bio'),
('/img/photo/phare_miniature_fait_main.jpg', 'Phare Miniature Fait main', 'Photo de Phare Miniature Fait main'),
('/img/photo/bol_breton_fait_main.jpg', 'Bol Breton Fait main', 'Photo de Bol Breton Fait main'),
('/img/photo/bracelet_ancre_de_carnac.jpg', 'Bracelet Ancre de Carnac', 'Photo de Bracelet Ancre de Carnac'),
('/img/photo/caramels_de_dinard.jpg', 'Caramels de Dinard', 'Photo de Caramels de Dinard'),
('/img/photo/affiche_vintage_de_vannes.jpg', 'Affiche Vintage de Vannes', 'Photo de Affiche Vintage de Vannes'),
('/img/photo/_charpe_ray_e_de_dinard.jpg', 'Écharpe Rayée de Dinard', 'Photo de Écharpe Rayée de Dinard'),
('/img/photo/vareuse_de_saint_malo.jpg', 'Vareuse de Saint-Malo', 'Photo de Vareuse de Saint-Malo'),
('/img/photo/bracelet_ancre_durable.jpg', 'Bracelet Ancre Durable', 'Photo de Bracelet Ancre Durable'),
('/img/photo/lampe_temp_te_de_quimper.jpg', 'Lampe Tempête de Quimper', 'Photo de Lampe Tempête de Quimper'),
('/img/photo/sac_voile_de_pont_aven.jpg', 'Sac Voile de Pont-Aven', 'Photo de Sac Voile de Pont-Aven'),
('/img/photo/caramels_de_roscoff.jpg', 'Caramels de Roscoff', 'Photo de Caramels de Roscoff'),
('/img/photo/pendentif_hermine_de_saint_malo.jpg', 'Pendentif Hermine de Saint-Malo', 'Photo de Pendentif Hermine de Saint-Malo'),
('/img/photo/cir__navy_artisanal.jpg', 'Ciré Navy Artisanal', 'Photo de Ciré Navy Artisanal'),
('/img/photo/vareuse_de_pont_aven.jpg', 'Vareuse de Pont-Aven', 'Photo de Vareuse de Pont-Aven'),
('/img/photo/pendentif_hermine_bio.jpg', 'Pendentif Hermine Bio', 'Photo de Pendentif Hermine Bio'),
('/img/photo/galettes_de_quimper.jpg', 'Galettes de Quimper', 'Photo de Galettes de Quimper'),
('/img/photo/sac_voile_durable.jpg', 'Sac Voile Durable', 'Photo de Sac Voile Durable'),
('/img/photo/marini_re_de_pont_aven.jpg', 'Marinière de Pont-Aven', 'Photo de Marinière de Pont-Aven'),
('/img/photo/sac_voile_bio.jpg', 'Sac Voile Bio', 'Photo de Sac Voile Bio'),
('/img/photo/sac_voile_premium.jpg', 'Sac Voile Premium', 'Photo de Sac Voile Premium'),
('/img/photo/pendentif_hermine_local.jpg', 'Pendentif Hermine Local', 'Photo de Pendentif Hermine Local'),
('/img/photo/vareuse_durable.jpg', 'Vareuse Durable', 'Photo de Vareuse Durable'),
('/img/photo/pendentif_hermine_traditionnel.jpg', 'Pendentif Hermine Traditionnel', 'Photo de Pendentif Hermine Traditionnel'),
('/img/photo/pendentif_hermine_de_roscoff.jpg', 'Pendentif Hermine de Roscoff', 'Photo de Pendentif Hermine de Roscoff'),
('/img/photo/cir__navy_de_brest.jpg', 'Ciré Navy de Brest', 'Photo de Ciré Navy de Brest'),
('/img/photo/pull_marin_authentique.jpg', 'Pull Marin Authentique', 'Photo de Pull Marin Authentique'),
('/img/photo/bol_e___cidre_local.jpg', 'Bolée à Cidre Local', 'Photo de Bolée à Cidre Local'),
('/img/photo/bol_breton_de_saint_malo.jpg', 'Bol Breton de Saint-Malo', 'Photo de Bol Breton de Saint-Malo'),
('/img/photo/phare_miniature_de_quimper.jpg', 'Phare Miniature de Quimper', 'Photo de Phare Miniature de Quimper'),
('/img/photo/caramels_artisanal.jpg', 'Caramels Artisanal', 'Photo de Caramels Artisanal'),
('/img/photo/vareuse_de_dinard.jpg', 'Vareuse de Dinard', 'Photo de Vareuse de Dinard'),
('/img/photo/lampe_temp_te_traditionnel.jpg', 'Lampe Tempête Traditionnel', 'Photo de Lampe Tempête Traditionnel'),
('/img/photo/bracelet_ancre_de_brest.jpg', 'Bracelet Ancre de Brest', 'Photo de Bracelet Ancre de Brest'),
('/img/photo/coussin_triskell_premium.jpg', 'Coussin Triskell Premium', 'Photo de Coussin Triskell Premium'),
('/img/photo/coussin_triskell_bio.jpg', 'Coussin Triskell Bio', 'Photo de Coussin Triskell Bio'),
('/img/photo/lampe_temp_te_de_saint_malo.jpg', 'Lampe Tempête de Saint-Malo', 'Photo de Lampe Tempête de Saint-Malo'),
('/img/photo/coussin_triskell_artisanal.jpg', 'Coussin Triskell Artisanal', 'Photo de Coussin Triskell Artisanal'),
('/img/photo/bol_e___cidre_de_saint_malo.jpg', 'Bolée à Cidre de Saint-Malo', 'Photo de Bolée à Cidre de Saint-Malo'),
('/img/photo/caramels_durable.jpg', 'Caramels Durable', 'Photo de Caramels Durable'),
('/img/photo/lampe_temp_te_local.jpg', 'Lampe Tempête Local', 'Photo de Lampe Tempête Local'),
('/img/photo/bol_e___cidre_artisanal.jpg', 'Bolée à Cidre Artisanal', 'Photo de Bolée à Cidre Artisanal'),
('/img/photo/bonnet_miki_traditionnel.jpg', 'Bonnet Miki Traditionnel', 'Photo de Bonnet Miki Traditionnel'),
('/img/photo/bonnet_miki_premium.jpg', 'Bonnet Miki Premium', 'Photo de Bonnet Miki Premium'),
('/img/photo/caramels_de_carnac.jpg', 'Caramels de Carnac', 'Photo de Caramels de Carnac'),
('/img/photo/marini_re_premium.jpg', 'Marinière Premium', 'Photo de Marinière Premium'),
('/img/photo/pull_marin_de_quimper.jpg', 'Pull Marin de Quimper', 'Photo de Pull Marin de Quimper'),
('/img/photo/cir__jaune_de_vannes.jpg', 'Ciré Jaune de Vannes', 'Photo de Ciré Jaune de Vannes'),
('/img/photo/lampe_temp_te_authentique.jpg', 'Lampe Tempête Authentique', 'Photo de Lampe Tempête Authentique'),
('/img/photo/bonnet_miki_de_concarneau.jpg', 'Bonnet Miki de Concarneau', 'Photo de Bonnet Miki de Concarneau'),
('/img/photo/marini_re_authentique.jpg', 'Marinière Authentique', 'Photo de Marinière Authentique'),
('/img/photo/bracelet_ancre_artisanal.jpg', 'Bracelet Ancre Artisanal', 'Photo de Bracelet Ancre Artisanal'),
('/img/photo/lampe_temp_te_de_vannes.jpg', 'Lampe Tempête de Vannes', 'Photo de Lampe Tempête de Vannes'),
('/img/photo/pull_marin_de_carnac.jpg', 'Pull Marin de Carnac', 'Photo de Pull Marin de Carnac'),
('/img/photo/coussin_triskell_fait_main.jpg', 'Coussin Triskell Fait main', 'Photo de Coussin Triskell Fait main'),
('/img/photo/galettes_artisanal.jpg', 'Galettes Artisanal', 'Photo de Galettes Artisanal'),
('/img/photo/bol_breton_bio.jpg', 'Bol Breton Bio', 'Photo de Bol Breton Bio');

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO _represente_produit (id_image, id_produit) VALUES
(1, 1), (2,2), (3, 3), (4, 4), (5, 6), (10, 8), (11, 7),
(12, 9), (13, 10), (14, 11), (15, 12), (16, 13), (17, 14), (18, 15),
(19, 16), (20, 17), (21, 18), (22, 19), (23, 20),
(24, 21), (25, 22), (26, 23), (27, 24), (28, 25),
(29, 26), (30, 27), (31, 28), (32, 29), (33, 30), (34, 31), (35, 32), (36, 33), (37, 34), (38, 35), (39, 36), (40, 37), (41, 38), (42, 39), (43, 40), (44, 41), (45, 42), (46, 43), (47, 44), (48, 45), (49, 46), (50, 47), (51, 48), (52, 49), (53, 50), (54, 51), (55, 52), (56, 53), (57, 54), (58, 55), (59, 56), (60, 57), (61, 58), (62, 59), (63, 60), (64, 61), (65, 62), (66, 63), (67, 64), (68, 65), (69, 66), (70, 67), (71, 68), (72, 69), (73, 70), (74, 71), (75, 72), (76, 73), (77, 74), (78, 75), (79, 76), (80, 77), (81, 78), (82, 79), (83, 80), (84, 81), (85, 82), (86, 83), (87, 84), (88, 85), (89, 86), (90, 87), (91, 88), (92, 89), (93, 90), (94, 91), (95, 92), (96, 93), (97, 94), (98, 95), (99, 96), (100, 97), (101, 98), (102, 99), (103, 100), (104, 101), (105, 102), (106, 103), (107, 104), (108, 105);


-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO _represente_compte (id_image, id_compte) VALUES
(6, 4), (7, 5), (8, 2), (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO _fait_partie_de (id_produit, id_categorie) VALUES
(1, 1), (1, 7), (2, 1), (2, 7), (3, 2), (3, 8), (4, 2), (4, 8),
(5, 2), (5, 9), (6, 1), (6, 3), (7, 3), (8, 1), (8, 3), (8, 5),
(9, 5), (9, 10), (10, 1), (10, 7), (11, 5), (12, 2), (12, 8),
(13, 6), (14, 5), (15, 1), (15, 7),
(16, 1), (16, 7), (17, 2), (17, 8), (18, 5), (19, 1), (19, 7), (20, 10),
(21, 5), (22, 1), (22, 3), (23, 2), (23, 8), (24, 4), (24, 5), (25, 1), (25, 3),
(26, 2), (26, 8), (27, 2), (27, 3), (27, 8), (28, 4), (29, 2), (29, 3), (30, 2), (30, 3), (31, 2), (31, 8), (31, 9), (32, 3), (33, 2), (33, 8), (33, 9), (34, 3), (35, 3), (36, 3), (37, 2), (37, 3), (38, 4), (39, 2), (39, 3), (40, 2), (40, 3), (41, 2), (41, 3), (41, 8), (42, 2), (42, 8), (42, 9), (43, 4), (44, 4), (45, 2), (45, 8), (46, 4), (47, 2), (47, 8), (48, 2), (48, 8), (49, 2), (49, 8), (49, 9), (50, 4), (51, 4), (52, 3), (53, 4), (54, 4), (55, 2), (55, 3), (56, 2), (56, 8), (57, 3), (58, 4), (59, 3), (60, 4), (61, 3), (62, 2), (62, 8), (62, 9), (63, 2), (63, 8), (64, 3), (65, 4), (66, 3), (67, 2), (67, 8), (67, 9), (68, 3), (69, 3), (70, 3), (71, 2), (71, 8), (72, 3), (73, 3), (74, 2), (74, 8), (74, 9), (75, 2), (75, 8), (76, 4), (77, 4), (78, 4), (79, 4), (80, 2), (80, 8), (81, 4), (82, 3), (83, 4), (84, 4), (85, 4), (86, 4), (87, 4), (88, 4), (89, 4), (90, 4), (91, 2), (91, 3), (91, 8), (92, 2), (92, 3), (92, 8), (93, 4), (94, 2), (94, 8), (94, 9), (95, 2), (95, 8), (96, 2), (96, 8), (96, 9), (97, 4), (98, 2), (98, 3), (98, 8), (99, 2), (99, 8), (99, 9), (100, 3), (101, 4), (102, 2), (102, 8), (103, 4), (104, 4), (105, 4);


-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO _est_dote_de (id_produit, code_hexa) VALUES
(1, '#000000'), (1, '#FFFFFF'), (2, '#808080'), (3, '#0000FF'), (3, '#FF0000'),
(3, '#00FF00'), (4, '#0000FF'), (4, '#000000'), (5, '#FF0000'), (5, '#FFFFFF'),
(6, '#000000'), (7, '#808080'), (8, '#000000'), (9, '#0000FF'), (9, '#FF0000'),
(10, '#808080'), (11, '#FFFFFF'), (12, '#000000'), (12, '#8B4513'),
(14, '#EE82EE'), (14, '#87CEEB'), (15, '#000000'),
(16, '#000000'), (16, '#FFFFFF'), (17, '#808080'), (17, '#000000'), (18, '#FFFFFF'), (18, '#000000'),
(19, '#000000'), (20, '#FFFFFF'), (20, '#000000'),
(21, '#0000FF'), (21, '#FF0000'), (22, '#808080'), (23, '#000000'), (23, '#8B4513'),
(24, '#87CEEB'), (24, '#32CD32'), (25, '#000000'), (25, '#FF0000'),
(26, '#8B4513'), (27, '#0000FF'), (28, '#FF0000'), (29, '#8B4513'), (30, '#00FF00'), (31, '#000000'), (32, '#8B4513'), (33, '#87CEEB'), (34, '#FFFFFF'), (35, '#FFFFFF'), (36, '#EE82EE'), (37, '#FFFFFF'), (38, '#0000FF'), (39, '#0000FF'), (40, '#000000'), (41, '#000000'), (42, '#FFFFFF'), (43, '#8B4513'), (44, '#87CEEB'), (45, '#87CEEB'), (46, '#32CD32'), (47, '#87CEEB'), (48, '#00FF00'), (49, '#FFA500'), (50, '#EE82EE'), (51, '#FF0000'), (52, '#FFFF00'), (53, '#FFFFFF'), (54, '#0000FF'), (55, '#FFFFFF'), (56, '#808080'), (57, '#00FF00'), (58, '#FFFF00'), (59, '#00FF00'), (60, '#FFA500'), (61, '#00FF00'), (62, '#FFFFFF'), (63, '#00FF00'), (64, '#87CEEB'), (65, '#EE82EE'), (66, '#FFFF00'), (67, '#808080'), (68, '#FFA500'), (69, '#00FF00'), (70, '#32CD32'), (71, '#0000FF'), (72, '#00FF00'), (73, '#8B4513'), (74, '#FFA500'), (75, '#32CD32'), (76, '#87CEEB'), (77, '#FFFF00'), (78, '#0000FF'), (79, '#8B4513'), (80, '#0000FF'), (81, '#EE82EE'), (82, '#8B4513'), (83, '#FFFF00'), (84, '#8B4513'), (85, '#FFFF00'), (86, '#32CD32'), (87, '#EE82EE'), (88, '#0000FF'), (89, '#EE82EE'), (90, '#FFFFFF'), (91, '#000000'), (92, '#FFFFFF'), (93, '#808080'), (94, '#808080'), (95, '#00FF00'), (96, '#0000FF'), (97, '#EE82EE'), (98, '#000000'), (99, '#808080'), (100, '#808080'), (101, '#0000FF'), (102, '#87CEEB'), (103, '#FFA500'), (104, '#0000FF'), (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO _seuil_alerte (nb_seuil, message_seuil) VALUES
(10, 'Stock faible - Envisager un réapprovisionnement'),
(5, 'Stock critique - Réapprovisionnement urgent'),
(3, 'Rupture imminente - Commander immédiatement'),
(20, 'Stock normal - Surveillance recommandée'),
(1, 'Rupture de stock - Produit indisponible');

INSERT INTO _adresse (id_compte, a_numero, a_adresse, a_ville, a_code_postal, a_pays) VALUES
(4, 13, 'rue du Pillard', 'Rennes', 35590, 'France');

-- 18. PANIERS/COMMANDES
INSERT INTO _panier_commande (id_client, timestamp_commande) VALUES
(1, '2025-11-01 10:30:00'),
(2, '2025-11-02 14:45:00'),
(3, '2025-11-03 09:15:00'),
(1, NULL),
(4, '2025-11-04 16:20:00'),
(6, '2025-11-05 11:00:00'),
(2, NULL),
(5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO _contient (id_panier, id_produit, quantite, prix_unitaire, remise_unitaire, frais_de_port, TVA) VALUES
(1, 1, 1, 599.99, 0.0, 5.99, 20.0),
(1, 6, 1, 149.99, 0.0, 5.99, 20.0),
(2, 3, 2, 24.99, 0.0, 3.99, 20.0),
(2, 4, 1, 49.99, 0.0, 4.99, 20.0),
(3, 2, 1, 899.99, 0.0, 9.99, 20.0),
(4, 7, 1, 69.99, 0.0, 6.99, 20.0),
(5, 5, 1, 39.99, 0.0, 4.99, 20.0),
(5, 8, 1, 199.99, 0.0, 3.99, 20.0),
(6, 9, 2, 89.99, 0.0, 5.99, 20.0),
(7, 10, 1, 299.99, 0.0, 7.99, 20.0),
(8, 11, 1, 29.99, 0.0, 4.99, 20.0),
(8, 13, 1, 24.99, 0.0, 3.99, 20.0),
(8, 14, 1, 34.99, 0.0, 5.99, 20.0);

-- 20. FACTURES
INSERT INTO _facture (id_panier, id_adresse, f_total_ht, f_total_remise, f_total_ht_remise, f_total_ttc) VALUES
(1, 1, 755.98, 0.0, 755.98, 907.18),
(2, 1, 103.96, 0.0, 103.96, 124.75),
(3, 1, 909.98, 0.0, 909.98, 1091.98),
(5, 1, 248.97, 0.0, 248.97, 298.76),
(6, 1, 185.97, 0.0, 185.97, 223.16),
(8, 1, 95.96, 0.0, 95.96, 115.15);

-- 21. PAIEMENTS
INSERT INTO _paiement (id_facture, mode_paiement, numero_carte, mois_annee_expiration, cryptogramme_carte, timestamp_paiement) VALUES
(1, 'CB', '1234567890123456', '12/27', '123', '2025-11-01 10:35:00'),
(2, 'CB', '6543210987654321', '06/26', '456', '2025-11-02 14:50:00'),
(3, 'CB', '1111222233334444', '03/28', '789', '2025-11-03 09:20:00'),
(4, 'CB', '9999888877776666', '09/27', '321', '2025-11-04 16:25:00'),
(5, 'CB', '5555666677778888', '11/26', '654', '2025-11-05 11:05:00'),
(6, 'CB', '4444333322221111', '08/27', '987', '2025-11-06 13:35:00');

-- 22. LIVRAISONS
INSERT INTO _livraison (id_facture, date_livraison, etat_livraison) VALUES
(1, '2025-11-05', 'Livré'),
(2, '2025-11-06', 'Livré'),
(3, '2025-11-08', 'En transit'),
(4, NULL, 'En préparation'),
(5, '2025-11-09', 'Livré'),
(6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO _definie_pour (id_seuil, id_compte) VALUES
(1, 2), (2, 2), (3, 2), (4, 2), (5, 2),
(1, 3), (2, 3), (3, 3), (5, 3),
(1, 10), (2, 10), (3, 10), (4, 10), (5, 10),
(5, 1);


-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;
UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;
UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;
UPDATE cobrec1._commentaire SET a_note = 0.0;


SELECT DISTINCT ON (p.id_produit)
    p.id_produit,
    p.p_nom,
    p.p_description,
    p.p_prix,
    p.p_stock,
    r.reduction_pourcentage,
    pr.id_produit as estEnpromo,
    (SELECT COUNT(*) FROM cobrec1._avis av2 WHERE av2.id_produit = p.id_produit AND av2.a_note IS NOT NULL) as nombre_avis,
    (SELECT ROUND(COALESCE(AVG(av3.a_note), 0)::numeric, 1) FROM cobrec1._avis av3 WHERE av3.id_produit = p.id_produit AND av3.a_note IS NOT NULL) as note_moyenne,
    (SELECT COALESCE(i2.i_lien, '/img/photo/smartphone_xpro.jpg') FROM cobrec1._represente_produit rp2 LEFT JOIN cobrec1._image i2 ON rp2.id_image = i2.id_image WHERE rp2.id_produit = p.id_produit LIMIT 1) as image_url,
    STRING_AGG(DISTINCT cp.nom_categorie, ', ') as categories
FROM cobrec1._produit p
LEFT JOIN cobrec1._reduction r ON p.id_produit = r.id_produit 
LEFT JOIN cobrec1._promotion pr ON p.id_produit = pr.id_produit 
LEFT JOIN cobrec1._tva t ON p.id_tva = t.id_tva
LEFT JOIN cobrec1._fait_partie_de fpd ON p.id_produit = fpd.id_produit
LEFT JOIN cobrec1._categorie_produit cp ON fpd.id_categorie = cp.id_categorie
WHERE p.p_statut = 'En ligne'
GROUP BY p.id_produit, p.p_nom, p.p_description, p.p_prix, p.p_stock, 
         p.p_note, p.p_nb_ventes, p.p_statut, r.reduction_pourcentage, 
         pr.id_produit, t.montant_tva
ORDER BY p.id_produit
----------- WbStatement -----------
##sqlwb.pos=74915
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;
CREATE SCHEMA cobrec1;
SET SCHEMA 'cobrec1';


-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (civilite IN ('M.', 'Mme', 'Inconnu', 'Ne souhaite pas s''exprimer', 'Autre')),
    CONSTRAINT verif_compte_email CHECK (email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'),
    CONSTRAINT verif_compte_num_telephone CHECK (num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$')
);

ALTER TABLE ONLY cobrec1._compte
    ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
    ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
    ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
    ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11,2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
    ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (type_couleur IN ('Vert', 'Jaune' , 'Rouge' , 'Noir' , 'Blanc' , 'Bleu' , 'Violet' , 'Orange' , 'Gris' , 'Marron' ) )
);

ALTER TABLE ONLY cobrec1._couleur
    ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
    ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
    ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4,1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (montant_TVA >= 0.00 AND montant_TVA <= 100.00)
);

ALTER TABLE ONLY cobrec1._TVA
    ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
    ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11,2) DEFAULT 0.0,
    p_volume numeric(11,2) DEFAULT 0.0,
    p_frais_de_port numeric(11,2) DEFAULT 0.0,
    p_prix numeric(11,2) NOT NULL,
    p_note numeric(2,1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (p_note >= 0 AND p_note <= 5),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (p_statut IN ('Ébauche', 'En ligne', 'Hors ligne', 'Supprimé')),
    CONSTRAINT verif_produit_origine CHECK (p_origine IN ('Inconnu', 'Bretagne', 'France', 'UE', 'Hors UE'))
);

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) 
            REFERENCES cobrec1._vendeur(id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) 
            REFERENCES cobrec1._TVA(id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
    ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5,2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (reduction_pourcentage >= 0.00 AND reduction_pourcentage <= 100.00),
    CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),
    CONSTRAINT verif_reduction_fin CHECK (reduction_fin > reduction_debut)
);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
    ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),
    CONSTRAINT verif_promotion_fin CHECK (promotion_fin > promotion_debut)
);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
    ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;


-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
    ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
    ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
    ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
    ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
    ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11,2) DEFAULT 0.0,
    f_total_remise numeric(11,2) DEFAULT 0.0,
    f_total_ht_remise numeric(11,2) DEFAULT 0.0,
    f_total_ttc numeric(11,2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
    ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) 
            REFERENCES cobrec1._panier_commande(id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
    ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) 
            REFERENCES cobrec1._adresse(id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
    ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) 
            REFERENCES cobrec1._facture(id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
    ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) 
            REFERENCES cobrec1._facture(id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2,1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
    ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client(id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (vote_type IN ('like', 'dislike'))
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2,1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (a_note IN (NULL,0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5,4.0,4.5,5.0))
);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) 
            REFERENCES cobrec1._client(id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) 
            REFERENCES cobrec1._livraison(id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
    ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison,id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
    ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (type_signalement IN ('signale_avis', 'signale_compte', 'signale_produit'))
);

ALTER TABLE ONLY cobrec1._signalement
    ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
    ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11,2) NOT NULL,
    remise_unitaire numeric(11,2) DEFAULT 0.0,
    frais_de_port numeric(11,2) DEFAULT 0.0,
    TVA numeric(4,1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (TVA >= 0.00 AND TVA<= 100.00)
);

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) 
            REFERENCES cobrec1._panier_commande(id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
    ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
    ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
CREATE TABLE cobrec1._represente_promotion (
    id_image integer NOT NULL,
    id_promotion integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_promotion
    ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion) 
            REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) 
            REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
    ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
    ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) 
            REFERENCES cobrec1._categorie_produit(id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
    ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) 
            REFERENCES cobrec1._couleur(code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit) 
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction) 
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit) 
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion) 
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
    ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) 
            REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
    ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
    ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) 
            REFERENCES cobrec1._avis(id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
    ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) 
            REFERENCES cobrec1._signalement(id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) 
            REFERENCES cobrec1._seuil_alerte(id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
    ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) 
            REFERENCES cobrec1._compte(id_compte) ON DELETE CASCADE;


-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();


CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;


CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO _compte (nom, prenom, email, num_telephone, mdp, etat_A2F, nb_fois_signale, nb_signalements_avis, nb_cpts_signales, nb_avis_signales) VALUES
('Maeleau', 'Le Hyver', 'admin@cobrec.fr', '0601020304', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 0, 0),
('Lopicier', 'Mallo', 'vendeur1@example.com', '0612345678', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Elouard', 'Jean-Jacques', 'vendeur2@shop.fr', '0623456789', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 1, 0, 0, 0),
('Jean', 'Dupont','client1@gmail.com', '0634567890', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 1, 0, 0),
('Marie', 'Martin','client2@yahoo.fr', '0645678901', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 1, 0),
('Pierre', 'Durand','client3@outlook.com', '0656789012', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Sophie', 'Bernard','client4@free.fr', '0667890123', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Lucas', 'Petit','client5@orange.fr', '0678901234', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0),
('Emma', 'Lefebvre','client6@wanadoo.fr', '0689012345', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', TRUE, 0, 0, 0, 0),
('Martinière', 'Yvili', 'vendeur3@boutique.fr', '0690123456', '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS', FALSE, 0, 0, 0, 0);

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO _vendeur (id_compte, SIREN, raison_sociale, denomination, nb_produits_crees) VALUES
(2, '123456789', 'TechStore SARL', 'TechStore', 5),
(3, '987654321', 'FashionHub SAS', 'FashionHub', 3),
(10, '456789123', 'SportPro EURL', 'SportPro', 2);

-- 4. CLIENTS
INSERT INTO _client (id_compte, c_pseudo, c_nb_produits_achetes, c_depense_totale, c_cloture, c_datenaissance) VALUES
(4, 'jdupont', 2, 907.18, FALSE, '1985-03-15'),
(5, 'mmartin', 3, 124.75, FALSE, '1990-07-22'),
(6, 'pdurand', 1, 1091.98, FALSE, '1988-11-10'),
(7, 'sbernard', 2, 298.76, FALSE, '1995-05-30'),
(8, 'lpetit', 0, 0.0, FALSE, '2000-01-18'),
(9, 'elefebvre', 1, 179.98, FALSE, '1992-09-25');


-- 5. ADRESSES
INSERT INTO _adresse (id_compte, a_adresse, a_ville, a_code_postal, a_complement) VALUES
(4, '15 rue de la Paix', 'Paris', '75001', 'Apt 5'),
(5, '23 avenue des Champs', 'Lyon', '69001', NULL),
(6, '8 boulevard Victor Hugo', 'Marseille', '13001', 'Bâtiment B'),
(7, '42 rue du Commerce', 'Toulouse', '31000', NULL),
(8, '67 place de la République', 'Nice', '06000', '3ème étage'),
(9, '91 rue Principale', 'Bordeaux', '33000', NULL),
(2, '12 avenue du Commerce', 'Paris', '75015', 'Entrepôt A'),
(3, '55 rue de la Mode', 'Lyon', '69002', NULL),
(10, '78 boulevard du Sport', 'Marseille', '13008', 'Zone industrielle');

-- 6. COULEURS
INSERT INTO _couleur (code_hexa, nom, type_couleur) VALUES
('#FF0000', 'Rouge vif', 'Rouge'),
('#0000FF', 'Bleu marine', 'Bleu'),
('#000000', 'Noir', 'Noir'),
('#FFFFFF', 'Blanc pur', 'Blanc'),
('#00FF00', 'Vert émeraude', 'Vert'),
('#FFFF00', 'Jaune citron', 'Jaune'),
('#FFA500', 'Orange', 'Orange'),
('#808080', 'Gris', 'Gris'),
('#8B4513', 'Marron chocolat', 'Marron'),
('#EE82EE', 'Violet', 'Violet'),
('#87CEEB', 'Bleu ciel', 'Bleu'),
('#32CD32', 'Vert lime', 'Vert');

-- 7. CATÉGORIES
INSERT INTO _categorie_produit (nom_categorie) VALUES
('Électronique'),
('Vêtements'),
('Accessoires'),
('Maison'),
('Sport'),
('Livres'),
('Informatique'),
('Mode homme'),
('Mode femme'),
('Chaussures');

-- 8. TVA
INSERT INTO _TVA (montant_TVA, libelle_TVA) VALUES
(20.0, 'TVA normale'),
(10.0, 'TVA intermédiaire'),
(5.5, 'TVA réduite'),
(2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO _produit (id_TVA, id_vendeur, p_nom, p_description, p_prix, p_stock, p_statut, p_origine, p_poids, p_volume, p_frais_de_port, p_note, p_nb_ventes) VALUES
(1, 1, 'Smartphone XPro', 'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G', 599.99, 35, 'En ligne', 'Bretagne', 0.180, 0.01, 5.99, 4.3, 15),
(1, 1, 'Ordinateur portable Ultra', 'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7', 899.99, 22, 'En ligne', 'Bretagne', 2.5, 0.03, 9.99, 4.0, 8),
(1, 2, 'T-shirt coton bio', 'T-shirt 100% coton biologique, coupe regular, diverses couleurs', 24.99, 58, 'En ligne', 'Bretagne', 0.15, 0.5, 3.99, 5.0, 42),
(1, 2, 'Jean slim', 'Jean coupe slim stretch, denim premium', 49.99, 62, 'En ligne', 'Bretagne', 1.00, 0.01, 4.99, NULL, 18),
(1, 2, 'Robe d été', 'Robe légère et fluide pour l été, motifs floraux', 39.99, 48, 'En ligne', 'Bretagne', 0.30, 0.08, 4.99, NULL, 12),
(2, 1, 'Casque audio Bluetooth', 'Casque sans fil avec réduction de bruit active, autonomie 30h', 149.99, 15, 'En ligne', 'Bretagne', 0.25, 0.02, 5.99, 4.5, 25),
(1, 2, 'Sac à dos urbain', 'Sac à dos pour ordinateur portable, compartiments multiples, imperméable', 69.99, 35, 'En ligne', 'Bretagne', 0.60, 0.15, 6.99, NULL, 10),
(1, 1, 'Montre connectée', 'Montre sport avec GPS, cardiofréquencemètre, étanche 50m', 199.99, 15, 'En ligne', 'Bretagne', 0.05, 0.01, 3.99, 4.7, 20),
(1, 3, 'Chaussures running', 'Chaussures de course avec amorti premium, semelle respirante', 89.99, 54, 'En ligne', 'Bretagne', 0.40, 0.08, 5.99, 4.2, 16),
(1, 1, 'Tablette 10 pouces', 'Tablette Android, écran Full HD, 64Go, stylet inclus', 299.99, 16, 'En ligne', 'Bretagne', 0.50, 0.02, 7.99, 3.8, 9),
(1, 3, 'Ballon de football', 'Ballon officiel en cuir synthétique, taille 5', 29.99, 85, 'En ligne', 'Bretagne', 0.45, 0.06, 4.99, 4.6, 35),
(1, 2, 'Veste en cuir', 'Veste en cuir véritable, coupe motard, doublure intérieure', 189.99, 15, 'En ligne', 'Bretagne', 1.20, 0.01, 8.99, NULL, 5),
(3, 1, 'Livre cuisine française', 'Recettes traditionnelles de cuisine française, 300 pages', 24.99, 28, 'En ligne', 'Bretagne', 0.80, 0.03, 3.99, 4.8, 22),
(1, 3, 'Tapis de yoga', 'Tapis antidérapant, épaisseur 6mm, avec sac de transport', 34.99, 52, 'En ligne', 'Bretagne', 1.10, 0.02, 5.99, 4.4, 28),
(1, 1, 'Clavier mécanique RGB', 'Clavier gamer avec rétroéclairage RGB, switches mécaniques', 79.99, 29, 'En ligne', 'Bretagne', 0.90, 0.04, 5.99, 4.1, 11),
(1, 1, 'Console NextGen', 'Console de jeu dernière génération, 1To SSD, 4K HDR', 499.99, 0, 'Hors ligne', 'France', 3.5, 0.02, 14.99, 4.8, 25),
(1, 2, 'Sweat à capuche premium', 'Sweat-shirt en coton bio, coupe oversize, poche kangourou', 59.99, 0, 'Hors ligne', 'France', 0.70, 0.03, 5.99, 4.4, 18),
(1, 3, 'Raquette de tennis pro', 'Raquette carbone, tension 25kg, grip confort', 129.99, 0, 'Hors ligne', 'France', 0.35, 0.02, 6.99, 4.7, 32),
(1, 1, 'Écran gaming 4K 27"', 'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms', 349.99, 0, 'Hors ligne', 'France', 5.2, 0.35, 19.99, 4.6, 18),
(1, 2, 'Baskets limited edition', 'Baskets cuir véritable, édition limitée, semelle comfort', 179.99, 0, 'Hors ligne', 'France', 0.80, 0.06, 7.99, 4.9, 65),
(1, 3, 'Vélo de route carbone', 'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses', 1299.99, 0, 'Hors ligne', 'UE', 8.5, 0.15, 29.99, 4.8, 25),
(1, 1, 'Drone professionnel 4K', 'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min', 899.99, 0, 'Hors ligne', 'UE', 1.2, 0.02, 12.99, 4.6, 18),
(1, 2, 'Manteau d hiver imperméable', 'Manteau longueur genoux, doublure polaire, coupe-vent', 179.99, 0, 'Hors ligne', 'UE', 1.5, 0.01, 8.99, 4.4, 65),
(1, 3, 'Tente 4 places', 'Tente familiale, double toit, arceaux aluminium, imperméable', 249.99, 0, 'Hors ligne', 'Hors UE', 4.8, 0.08, 19.99, 4.7, 32),
(1, 1, 'Enceinte Bluetooth waterproof', 'Enceinte portable, autonomie 24h, résistance IP67', 129.99, 0, 'Hors ligne', 'Hors UE', 0.9, 0.05, 6.99, 4.9, 95),
(2, 1, 'Pull Marin de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.', 36.37, 31, 'En ligne', 'Bretagne', 2.06, 0.45, 5.78, 4.4, 12),
(1, 1, 'Bonnet Miki de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.', 121.37, 6, 'Hors ligne', 'Bretagne', 2.3, 0.09, 8.8, 4.3, 60),
(2, 3, 'Galettes Local', 'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.', 147.92, 142, 'En ligne', 'Bretagne', 0.46, 0.46, 5.71, 4.3, 97),
(1, 3, 'Écharpe Rayée Fait main', 'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.', 173.77, 102, 'En ligne', 'Bretagne', 0.91, 0.32, 8.28, 4.4, 58),
(1, 2, 'Écharpe Rayée de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.', 197.02, 168, 'Hors ligne', 'Bretagne', 2.1, 0.12, 7.92, 4.8, 19),
(4, 2, 'Ciré Navy de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.', 104.35, 169, 'En ligne', 'Bretagne', 1.43, 0.14, 7.22, 4.6, 72),
(4, 3, 'Bracelet Ancre Fait main', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 172.75, 44, 'Hors ligne', 'Bretagne', 1.92, 0.4, 8.8, 4.1, 102),
(1, 3, 'Marinière Local', 'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.', 74.29, 80, 'Hors ligne', 'Bretagne', 1.36, 0.23, 13.58, 4.9, 72),
(3, 1, 'Bracelet Ancre de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.', 40.53, 140, 'En ligne', 'Bretagne', 2.76, 0.3, 9.4, 4.1, 97),
(3, 3, 'Pendentif Hermine Fait main', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 164.23, 199, 'Hors ligne', 'Bretagne', 1.64, 0.07, 10.94, 4.9, 47),
(1, 3, 'Sac Voile de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.', 136.95, 100, 'En ligne', 'Bretagne', 1.37, 0.26, 6.09, 4.2, 91),
(2, 3, 'Écharpe Rayée de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 21.13, 22, 'Hors ligne', 'Bretagne', 2.73, 0.43, 5.64, 4.2, 129),
(1, 2, 'Coussin Triskell de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.', 134.55, 95, 'Hors ligne', 'Bretagne', 1.33, 0.24, 11.56, 4.7, 30),
(1, 3, 'Écharpe Rayée Authentique', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.', 36.49, 51, 'En ligne', 'Bretagne', 0.91, 0.13, 13.31, 4.4, 145),
(4, 3, 'Écharpe Rayée Bio', 'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.', 50.4, 107, 'Hors ligne', 'Bretagne', 2.72, 0.09, 5.02, 4.4, 121),
(1, 3, 'Bonnet Miki Authentique', 'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.', 119.47, 143, 'En ligne', 'Bretagne', 0.28, 0.16, 5.45, 4.5, 140),
(3, 1, 'Ciré Navy de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 187.96, 150, 'Hors ligne', 'Bretagne', 0.81, 0.3, 10.57, 4.4, 149),
(1, 1, 'Bol Breton Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.', 66.7, 85, 'En ligne', 'Bretagne', 2.79, 0.47, 5.08, 4.6, 149),
(1, 3, 'Bol Breton Premium', 'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.', 176.18, 99, 'Hors ligne', 'Bretagne', 0.93, 0.22, 9.89, 4.3, 140),
(3, 1, 'Pull Marin de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.', 30.23, 146, 'En ligne', 'Bretagne', 0.55, 0.15, 6.9, 4.3, 72),
(1, 1, 'Affiche Vintage de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.', 155.74, 168, 'En ligne', 'Bretagne', 2.94, 0.09, 8.98, 4.7, 148),
(2, 3, 'Vareuse Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 120.09, 42, 'En ligne', 'Bretagne', 1.35, 0.03, 8.28, 4.9, 15),
(3, 2, 'Pull Marin Bio', 'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.', 151.65, 65, 'En ligne', 'Bretagne', 2.61, 0.49, 12.3, 4.9, 11),
(1, 3, 'Kabig Bio', 'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.', 172.27, 61, 'En ligne', 'Bretagne', 0.68, 0.46, 8.15, 4.8, 63),
(1, 2, 'Phare Miniature Fait main', 'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.', 62.75, 169, 'En ligne', 'Bretagne', 1.58, 0.34, 12.59, 4.3, 12),
(3, 1, 'Bol Breton Fait main', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 75.33, 85, 'Hors ligne', 'Bretagne', 1.37, 0.49, 6.04, 4.9, 53),
(3, 3, 'Bracelet Ancre de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 23.23, 175, 'Hors ligne', 'Bretagne', 2.77, 0.32, 10.97, 4.1, 81),
(1, 2, 'Caramels de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.', 135.67, 102, 'Hors ligne', 'Bretagne', 2.06, 0.45, 10.54, 4.3, 145),
(3, 3, 'Affiche Vintage de Vannes', 'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.', 137.69, 135, 'Hors ligne', 'Bretagne', 1.47, 0.45, 12.16, 4.2, 26),
(4, 2, 'Écharpe Rayée de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.', 37.85, 16, 'Hors ligne', 'Bretagne', 0.81, 0.24, 12.65, 4.1, 111),
(4, 3, 'Vareuse de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 51.36, 183, 'Hors ligne', 'Bretagne', 1.6, 0.03, 7.24, 4.8, 121),
(4, 3, 'Bracelet Ancre Durable', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.', 150.55, 126, 'En ligne', 'Bretagne', 1.41, 0.38, 12.56, 4.3, 138),
(1, 2, 'Lampe Tempête de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.', 73.48, 143, 'Hors ligne', 'Bretagne', 0.33, 0.08, 8.45, 4.2, 59),
(4, 1, 'Sac Voile de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.', 167.42, 104, 'Hors ligne', 'Bretagne', 2.72, 0.3, 11.26, 4.9, 102),
(4, 1, 'Caramels de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.', 61.58, 129, 'En ligne', 'Bretagne', 0.18, 0.17, 11.11, 4.4, 47),
(4, 2, 'Pendentif Hermine de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.', 35.65, 123, 'Hors ligne', 'Bretagne', 0.63, 0.14, 7.95, 4.5, 91),
(2, 1, 'Ciré Navy Artisanal', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.', 19.84, 94, 'En ligne', 'Bretagne', 0.75, 0.04, 13.62, 4.0, 12),
(3, 1, 'Vareuse de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 51.2, 184, 'En ligne', 'Bretagne', 0.84, 0.19, 10.45, 5.0, 34),
(1, 2, 'Pendentif Hermine Bio', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.', 47.48, 156, 'Hors ligne', 'Bretagne', 2.1, 0.32, 5.92, 4.8, 35),
(4, 1, 'Galettes de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.', 89.39, 130, 'Hors ligne', 'Bretagne', 0.41, 0.48, 10.72, 4.8, 44),
(2, 2, 'Sac Voile Durable', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.', 148.16, 73, 'Hors ligne', 'Bretagne', 1.03, 0.13, 13.41, 4.3, 120),
(1, 1, 'Marinière de Pont-Aven', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.', 50.09, 71, 'Hors ligne', 'Bretagne', 1.09, 0.44, 11.31, 4.3, 7),
(4, 3, 'Sac Voile Bio', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.', 102.77, 9, 'Hors ligne', 'Bretagne', 0.37, 0.12, 11.23, 4.3, 99),
(2, 1, 'Sac Voile Premium', 'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.', 61.2, 69, 'Hors ligne', 'Bretagne', 0.77, 0.36, 7.84, 4.7, 52),
(1, 1, 'Pendentif Hermine Local', 'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.', 167.37, 80, 'Hors ligne', 'Bretagne', 0.76, 0.1, 5.13, 4.5, 75),
(1, 2, 'Vareuse Durable', 'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.', 118.5, 125, 'Hors ligne', 'Bretagne', 1.49, 0.18, 13.69, 4.3, 127),
(4, 2, 'Pendentif Hermine Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 116.38, 82, 'Hors ligne', 'Bretagne', 0.35, 0.13, 10.02, 4.4, 62),
(2, 1, 'Pendentif Hermine de Roscoff', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.', 21.38, 194, 'En ligne', 'Bretagne', 0.39, 0.38, 10.63, 4.3, 25),
(2, 2, 'Ciré Navy de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.', 140.29, 125, 'En ligne', 'Bretagne', 0.94, 0.12, 11.36, 4.7, 121),
(4, 1, 'Pull Marin Authentique', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 181.69, 41, 'Hors ligne', 'Bretagne', 0.31, 0.09, 7.77, 4.7, 150),
(1, 1, 'Bolée à Cidre Local', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.', 103.33, 25, 'En ligne', 'Bretagne', 1.83, 0.45, 11.61, 4.6, 11),
(4, 2, 'Bol Breton de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 133.14, 76, 'Hors ligne', 'Bretagne', 0.63, 0.3, 10.71, 4.5, 28),
(3, 2, 'Phare Miniature de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.', 141.1, 78, 'Hors ligne', 'Bretagne', 2.02, 0.21, 11.84, 4.0, 27),
(1, 1, 'Caramels Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 112.55, 110, 'Hors ligne', 'Bretagne', 0.26, 0.26, 10.6, 4.5, 118),
(4, 1, 'Vareuse de Dinard', 'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.', 101.61, 12, 'En ligne', 'Bretagne', 2.92, 0.31, 7.15, 4.2, 146),
(2, 2, 'Lampe Tempête Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.', 145.44, 135, 'En ligne', 'Bretagne', 2.15, 0.21, 9.34, 4.5, 121),
(4, 1, 'Bracelet Ancre de Brest', 'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.', 159.31, 111, 'Hors ligne', 'Bretagne', 1.09, 0.4, 7.4, 4.0, 81),
(2, 2, 'Coussin Triskell Premium', 'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.', 112.71, 121, 'En ligne', 'Bretagne', 2.81, 0.44, 13.83, 4.2, 103),
(1, 2, 'Coussin Triskell Bio', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.', 159.76, 171, 'En ligne', 'Bretagne', 2.94, 0.25, 5.33, 4.5, 89),
(1, 2, 'Lampe Tempête de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.', 133.75, 44, 'Hors ligne', 'Bretagne', 0.32, 0.39, 7.39, 4.6, 106),
(1, 2, 'Coussin Triskell Artisanal', 'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.', 54.37, 180, 'En ligne', 'Bretagne', 2.77, 0.5, 11.72, 4.4, 30),
(2, 1, 'Bolée à Cidre de Saint-Malo', 'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.', 20.61, 96, 'En ligne', 'Bretagne', 1.19, 0.08, 9.78, 4.6, 51),
(3, 3, 'Caramels Durable', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.', 37.05, 123, 'En ligne', 'Bretagne', 1.95, 0.24, 11.0, 4.9, 124),
(2, 2, 'Lampe Tempête Local', 'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.', 90.19, 69, 'Hors ligne', 'Bretagne', 1.42, 0.16, 13.99, 4.9, 32),
(3, 1, 'Bolée à Cidre Artisanal', 'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.', 134.41, 75, 'Hors ligne', 'Bretagne', 0.12, 0.43, 12.0, 5.0, 132),
(3, 2, 'Bonnet Miki Traditionnel', 'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.', 180.74, 170, 'Hors ligne', 'Bretagne', 0.21, 0.4, 5.3, 4.4, 38),
(4, 1, 'Bonnet Miki Premium', 'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.', 182.65, 47, 'En ligne', 'Bretagne', 0.85, 0.41, 9.34, 4.8, 91),
(3, 1, 'Caramels de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.', 84.57, 72, 'En ligne', 'Bretagne', 1.66, 0.23, 11.06, 4.7, 102),
(1, 1, 'Marinière Premium', 'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.', 51.84, 21, 'Hors ligne', 'Bretagne', 1.94, 0.24, 11.31, 4.6, 34),
(1, 2, 'Pull Marin de Quimper', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 35.64, 121, 'Hors ligne', 'Bretagne', 1.18, 0.48, 11.27, 4.5, 44),
(4, 2, 'Ciré Jaune de Vannes', 'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.', 189.65, 97, 'En ligne', 'Bretagne', 0.39, 0.35, 9.9, 5.0, 96),
(1, 3, 'Lampe Tempête Authentique', 'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.', 122.86, 10, 'En ligne', 'Bretagne', 0.25, 0.17, 13.9, 4.8, 57),
(1, 3, 'Bonnet Miki de Concarneau', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.', 159.05, 157, 'En ligne', 'Bretagne', 0.11, 0.43, 6.3, 4.1, 69),
(3, 3, 'Marinière Authentique', 'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.', 12.98, 72, 'En ligne', 'Bretagne', 0.25, 0.37, 9.73, 4.7, 126),
(4, 2, 'Bracelet Ancre Artisanal', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.', 181.75, 173, 'En ligne', 'Bretagne', 1.61, 0.23, 13.68, 4.1, 127),
(3, 2, 'Lampe Tempête de Vannes', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 38.04, 37, 'Hors ligne', 'Bretagne', 0.9, 0.32, 9.94, 4.3, 140),
(3, 2, 'Pull Marin de Carnac', 'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.', 177.85, 110, 'En ligne', 'Bretagne', 1.08, 0.23, 8.74, 4.1, 114),
(3, 3, 'Coussin Triskell Fait main', 'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.', 27.62, 29, 'En ligne', 'Bretagne', 2.26, 0.19, 6.17, 4.1, 148),
(3, 3, 'Galettes Artisanal', 'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.', 123.48, 95, 'Hors ligne', 'Bretagne', 0.4, 0.26, 6.39, 4.5, 32),
(1, 1, 'Bol Breton Bio', 'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.', 194.19, 164, 'Hors ligne', 'Bretagne', 1.88, 0.32, 5.24, 4.9, 73);

-- 10. PROMOTIONS (futures)
INSERT INTO _promotion (id_produit, promotion_debut, promotion_fin) VALUES
(1, '2027-12-20 00:00:00', '2027-12-25 23:59:59'),
(2, '2026-02-01 00:00:00', '2026-02-07 23:59:59'),
(3, '2026-02-16 00:00:00', '2026-02-25 23:59:59'),
(4, '2026-04-01 00:00:00', '2026-04-15 23:59:59'),
(5, '2026-05-01 00:00:00', '2026-05-07 23:59:59'),
(6, '2026-06-10 00:00:00', '2026-06-20 23:59:59'),
(7, '2026-07-01 00:00:00', '2026-07-31 23:59:59');

-- 9. RÉDUCTIONS (futures)
INSERT INTO _reduction (id_produit, reduction_pourcentage, reduction_debut, reduction_fin) VALUES
(1, 10.00, '2026-02-09 00:00:00', '2026-02-19 23:59:59'),
(2, 15.00, '2026-02-15 00:00:00', '2026-02-25 23:59:59'),
(3, 20.00, '2026-02-01 00:00:00', '2026-02-15 23:59:59'),
(4, 25.00, '2026-02-20 00:00:00', '2026-02-26 23:59:59'),
(5, 30.00, '2026-06-01 00:00:00', '2026-06-30 23:59:59'),
(6, 60.00, '2026-04-01 00:00:00', '2026-04-15 23:59:59'),
(7, 55.00, '2026-05-01 00:00:00', '2026-05-07 23:59:59'),
(8, 70.00, '2026-06-10 00:00:00', '2026-06-20 23:59:59'),
(9, 65.00, '2026-07-01 00:00:00', '2026-07-31 23:59:59');

-- 12. IMAGES
INSERT INTO _image (i_lien, i_title, i_alt) VALUES
('/img/photo/smartphone_xpro.jpg', 'Smartphone XPro.jpg', 'Image du smartphone'),
('/img/photo/ordinateur_portable_ultra.jpg', 'Ordinateur portable.jpeg', 'Image de l ordinateur'),
('/img/photo/t_shirt_coton_bio.jpg', 'T-shirt.png', 'Image du t-shirt'),
('/img/photo/jean_slim.jpg', 'Jean.jpg', 'Image du jean'),
('/img/photo/casque_audio_bluetooth.jpg', 'Casque audio.jpg', 'Image du casque'),
('/img/photo/avatar_jean.jpg', 'Avatar Jean.jpeg', 'Photo de profil Jean'),
('/img/photo/avatar_marie.jpg', 'Avatar Marie.jpg', 'Photo de profil Marie'),
('/img/photo/logo_techstore.jpg', 'Logo TechStore.jpg', 'Logo entreprise TechStore'),
('/img/photo/logo_fashionhub.jpg', 'Logo FashionHub.jpg', 'Logo entreprise FashionHub'),
('/img/photo/montre_connect_e.jpg', 'Montre connectée.jpg', 'Image de la montre'),
('/img/photo/sac___dos_urbain.jpg', 'Sac à dos.jpeg', 'Image du sac'),
('/img/photo/chaussures_running.jpg', 'Chaussures running.jpeg', 'Image des chaussures'),
('/img/photo/tablette_10_pouces.jpg', 'Tablette.jpg', 'Image de la tablette'),
('/img/photo/ballon_de_football.jpg', 'Ballon football.jpg', 'Image du ballon'),
('/img/photo/veste_en_cuir.jpg', 'Veste cuir.jpg', 'Image de la veste'),
('/img/photo/livre_cuisine_fran_aise.jpg', 'Livre cuisine.jpeg', 'Image du livre'),
('/img/photo/tapis_de_yoga.jpg', 'Tapis yoga.jpeg', 'Image du tapis'),
('/img/photo/clavier_m_canique_rgb.jpg', 'Clavier.jpg', 'Image du clavier'),
('/img/photo/console_nextgen.jpg', 'Console NextGen.jpg', 'Image de la console'),
('/img/photo/sweat___capuche_premium.jpg', 'Sweat à capuche.jpeg', 'Image du sweat'),
('/img/photo/raquette_de_tennis_pro.jpg', 'Raquette tennis.jpg', 'Image de la raquette'),
('/img/photo/_cran_gaming_4k_27_.jpg', 'Écran 4K.jpeg', 'Image de l écran'),
('/img/photo/baskets_limited_edition.jpg', 'Baskets limited.jpeg', 'Image des baskets'),
('/img/photo/v_lo_de_route_carbone.jpg', 'Vélo route.jpeg', 'Image du vélo'),
('/img/photo/drone_professionnel_4k.jpg', 'Drone 4K.jpg', 'Image du drone'),
('/img/photo/manteau_d_hiver_imperm_able.jpg', 'Manteau hiver.jpeg', 'Image du manteau'),
('/img/photo/tente_4_places.jpg', 'Tente 4 places.jpg', 'Image de la tente'),
('/img/photo/enceinte_bluetooth_waterproof.jpg', 'Enceinte Bluetooth.jpg', 'Image de l enceinte'),
('/img/photo/pull_marin_de_saint_malo.jpg', 'Pull Marin de Saint-Malo', 'Photo de Pull Marin de Saint-Malo'),
('/img/photo/bonnet_miki_de_carnac.jpg', 'Bonnet Miki de Carnac', 'Photo de Bonnet Miki de Carnac'),
('/img/photo/galettes_local.jpg', 'Galettes Local', 'Photo de Galettes Local'),
('/img/photo/_charpe_ray_e_fait_main.jpg', 'Écharpe Rayée Fait main', 'Photo de Écharpe Rayée Fait main'),
('/img/photo/_charpe_ray_e_de_brest.jpg', 'Écharpe Rayée de Brest', 'Photo de Écharpe Rayée de Brest'),
('/img/photo/cir__navy_de_concarneau.jpg', 'Ciré Navy de Concarneau', 'Photo de Ciré Navy de Concarneau'),
('/img/photo/bracelet_ancre_fait_main.jpg', 'Bracelet Ancre Fait main', 'Photo de Bracelet Ancre Fait main'),
('/img/photo/marini_re_local.jpg', 'Marinière Local', 'Photo de Marinière Local'),
('/img/photo/bracelet_ancre_de_concarneau.jpg', 'Bracelet Ancre de Concarneau', 'Photo de Bracelet Ancre de Concarneau'),
('/img/photo/pendentif_hermine_fait_main.jpg', 'Pendentif Hermine Fait main', 'Photo de Pendentif Hermine Fait main'),
('/img/photo/sac_voile_de_concarneau.jpg', 'Sac Voile de Concarneau', 'Photo de Sac Voile de Concarneau'),
('/img/photo/_charpe_ray_e_de_saint_malo.jpg', 'Écharpe Rayée de Saint-Malo', 'Photo de Écharpe Rayée de Saint-Malo'),
('/img/photo/coussin_triskell_de_roscoff.jpg', 'Coussin Triskell de Roscoff', 'Photo de Coussin Triskell de Roscoff'),
('/img/photo/_charpe_ray_e_authentique.jpg', 'Écharpe Rayée Authentique', 'Photo de Écharpe Rayée Authentique'),
('/img/photo/_charpe_ray_e_bio.jpg', 'Écharpe Rayée Bio', 'Photo de Écharpe Rayée Bio'),
('/img/photo/bonnet_miki_authentique.jpg', 'Bonnet Miki Authentique', 'Photo de Bonnet Miki Authentique'),
('/img/photo/cir__navy_de_quimper.jpg', 'Ciré Navy de Quimper', 'Photo de Ciré Navy de Quimper'),
('/img/photo/bol_breton_traditionnel.jpg', 'Bol Breton Traditionnel', 'Photo de Bol Breton Traditionnel'),
('/img/photo/bol_breton_premium.jpg', 'Bol Breton Premium', 'Photo de Bol Breton Premium'),
('/img/photo/pull_marin_de_brest.jpg', 'Pull Marin de Brest', 'Photo de Pull Marin de Brest'),
('/img/photo/affiche_vintage_de_dinard.jpg', 'Affiche Vintage de Dinard', 'Photo de Affiche Vintage de Dinard'),
('/img/photo/vareuse_artisanal.jpg', 'Vareuse Artisanal', 'Photo de Vareuse Artisanal'),
('/img/photo/pull_marin_bio.jpg', 'Pull Marin Bio', 'Photo de Pull Marin Bio'),
('/img/photo/kabig_bio.jpg', 'Kabig Bio', 'Photo de Kabig Bio'),
('/img/photo/phare_miniature_fait_main.jpg', 'Phare Miniature Fait main', 'Photo de Phare Miniature Fait main'),
('/img/photo/bol_breton_fait_main.jpg', 'Bol Breton Fait main', 'Photo de Bol Breton Fait main'),
('/img/photo/bracelet_ancre_de_carnac.jpg', 'Bracelet Ancre de Carnac', 'Photo de Bracelet Ancre de Carnac'),
('/img/photo/caramels_de_dinard.jpg', 'Caramels de Dinard', 'Photo de Caramels de Dinard'),
('/img/photo/affiche_vintage_de_vannes.jpg', 'Affiche Vintage de Vannes', 'Photo de Affiche Vintage de Vannes'),
('/img/photo/_charpe_ray_e_de_dinard.jpg', 'Écharpe Rayée de Dinard', 'Photo de Écharpe Rayée de Dinard'),
('/img/photo/vareuse_de_saint_malo.jpg', 'Vareuse de Saint-Malo', 'Photo de Vareuse de Saint-Malo'),
('/img/photo/bracelet_ancre_durable.jpg', 'Bracelet Ancre Durable', 'Photo de Bracelet Ancre Durable'),
('/img/photo/lampe_temp_te_de_quimper.jpg', 'Lampe Tempête de Quimper', 'Photo de Lampe Tempête de Quimper'),
('/img/photo/sac_voile_de_pont_aven.jpg', 'Sac Voile de Pont-Aven', 'Photo de Sac Voile de Pont-Aven'),
('/img/photo/caramels_de_roscoff.jpg', 'Caramels de Roscoff', 'Photo de Caramels de Roscoff'),
('/img/photo/pendentif_hermine_de_saint_malo.jpg', 'Pendentif Hermine de Saint-Malo', 'Photo de Pendentif Hermine de Saint-Malo'),
('/img/photo/cir__navy_artisanal.jpg', 'Ciré Navy Artisanal', 'Photo de Ciré Navy Artisanal'),
('/img/photo/vareuse_de_pont_aven.jpg', 'Vareuse de Pont-Aven', 'Photo de Vareuse de Pont-Aven'),
('/img/photo/pendentif_hermine_bio.jpg', 'Pendentif Hermine Bio', 'Photo de Pendentif Hermine Bio'),
('/img/photo/galettes_de_quimper.jpg', 'Galettes de Quimper', 'Photo de Galettes de Quimper'),
('/img/photo/sac_voile_durable.jpg', 'Sac Voile Durable', 'Photo de Sac Voile Durable'),
('/img/photo/marini_re_de_pont_aven.jpg', 'Marinière de Pont-Aven', 'Photo de Marinière de Pont-Aven'),
('/img/photo/sac_voile_bio.jpg', 'Sac Voile Bio', 'Photo de Sac Voile Bio'),
('/img/photo/sac_voile_premium.jpg', 'Sac Voile Premium', 'Photo de Sac Voile Premium'),
('/img/photo/pendentif_hermine_local.jpg', 'Pendentif Hermine Local', 'Photo de Pendentif Hermine Local'),
('/img/photo/vareuse_durable.jpg', 'Vareuse Durable', 'Photo de Vareuse Durable'),
('/img/photo/pendentif_hermine_traditionnel.jpg', 'Pendentif Hermine Traditionnel', 'Photo de Pendentif Hermine Traditionnel'),
('/img/photo/pendentif_hermine_de_roscoff.jpg', 'Pendentif Hermine de Roscoff', 'Photo de Pendentif Hermine de Roscoff'),
('/img/photo/cir__navy_de_brest.jpg', 'Ciré Navy de Brest', 'Photo de Ciré Navy de Brest'),
('/img/photo/pull_marin_authentique.jpg', 'Pull Marin Authentique', 'Photo de Pull Marin Authentique'),
('/img/photo/bol_e___cidre_local.jpg', 'Bolée à Cidre Local', 'Photo de Bolée à Cidre Local'),
('/img/photo/bol_breton_de_saint_malo.jpg', 'Bol Breton de Saint-Malo', 'Photo de Bol Breton de Saint-Malo'),
('/img/photo/phare_miniature_de_quimper.jpg', 'Phare Miniature de Quimper', 'Photo de Phare Miniature de Quimper'),
('/img/photo/caramels_artisanal.jpg', 'Caramels Artisanal', 'Photo de Caramels Artisanal'),
('/img/photo/vareuse_de_dinard.jpg', 'Vareuse de Dinard', 'Photo de Vareuse de Dinard'),
('/img/photo/lampe_temp_te_traditionnel.jpg', 'Lampe Tempête Traditionnel', 'Photo de Lampe Tempête Traditionnel'),
('/img/photo/bracelet_ancre_de_brest.jpg', 'Bracelet Ancre de Brest', 'Photo de Bracelet Ancre de Brest'),
('/img/photo/coussin_triskell_premium.jpg', 'Coussin Triskell Premium', 'Photo de Coussin Triskell Premium'),
('/img/photo/coussin_triskell_bio.jpg', 'Coussin Triskell Bio', 'Photo de Coussin Triskell Bio'),
('/img/photo/lampe_temp_te_de_saint_malo.jpg', 'Lampe Tempête de Saint-Malo', 'Photo de Lampe Tempête de Saint-Malo'),
('/img/photo/coussin_triskell_artisanal.jpg', 'Coussin Triskell Artisanal', 'Photo de Coussin Triskell Artisanal'),
('/img/photo/bol_e___cidre_de_saint_malo.jpg', 'Bolée à Cidre de Saint-Malo', 'Photo de Bolée à Cidre de Saint-Malo'),
('/img/photo/caramels_durable.jpg', 'Caramels Durable', 'Photo de Caramels Durable'),
('/img/photo/lampe_temp_te_local.jpg', 'Lampe Tempête Local', 'Photo de Lampe Tempête Local'),
('/img/photo/bol_e___cidre_artisanal.jpg', 'Bolée à Cidre Artisanal', 'Photo de Bolée à Cidre Artisanal'),
('/img/photo/bonnet_miki_traditionnel.jpg', 'Bonnet Miki Traditionnel', 'Photo de Bonnet Miki Traditionnel'),
('/img/photo/bonnet_miki_premium.jpg', 'Bonnet Miki Premium', 'Photo de Bonnet Miki Premium'),
('/img/photo/caramels_de_carnac.jpg', 'Caramels de Carnac', 'Photo de Caramels de Carnac'),
('/img/photo/marini_re_premium.jpg', 'Marinière Premium', 'Photo de Marinière Premium'),
('/img/photo/pull_marin_de_quimper.jpg', 'Pull Marin de Quimper', 'Photo de Pull Marin de Quimper'),
('/img/photo/cir__jaune_de_vannes.jpg', 'Ciré Jaune de Vannes', 'Photo de Ciré Jaune de Vannes'),
('/img/photo/lampe_temp_te_authentique.jpg', 'Lampe Tempête Authentique', 'Photo de Lampe Tempête Authentique'),
('/img/photo/bonnet_miki_de_concarneau.jpg', 'Bonnet Miki de Concarneau', 'Photo de Bonnet Miki de Concarneau'),
('/img/photo/marini_re_authentique.jpg', 'Marinière Authentique', 'Photo de Marinière Authentique'),
('/img/photo/bracelet_ancre_artisanal.jpg', 'Bracelet Ancre Artisanal', 'Photo de Bracelet Ancre Artisanal'),
('/img/photo/lampe_temp_te_de_vannes.jpg', 'Lampe Tempête de Vannes', 'Photo de Lampe Tempête de Vannes'),
('/img/photo/pull_marin_de_carnac.jpg', 'Pull Marin de Carnac', 'Photo de Pull Marin de Carnac'),
('/img/photo/coussin_triskell_fait_main.jpg', 'Coussin Triskell Fait main', 'Photo de Coussin Triskell Fait main'),
('/img/photo/galettes_artisanal.jpg', 'Galettes Artisanal', 'Photo de Galettes Artisanal'),
('/img/photo/bol_breton_bio.jpg', 'Bol Breton Bio', 'Photo de Bol Breton Bio');

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO _represente_produit (id_image, id_produit) VALUES
(1, 1), (2,2), (3, 3), (4, 4), (5, 6), (10, 8), (11, 7),
(12, 9), (13, 10), (14, 11), (15, 12), (16, 13), (17, 14), (18, 15),
(19, 16), (20, 17), (21, 18), (22, 19), (23, 20),
(24, 21), (25, 22), (26, 23), (27, 24), (28, 25),
(29, 26), (30, 27), (31, 28), (32, 29), (33, 30), (34, 31), (35, 32), (36, 33), (37, 34), (38, 35), (39, 36), (40, 37), (41, 38), (42, 39), (43, 40), (44, 41), (45, 42), (46, 43), (47, 44), (48, 45), (49, 46), (50, 47), (51, 48), (52, 49), (53, 50), (54, 51), (55, 52), (56, 53), (57, 54), (58, 55), (59, 56), (60, 57), (61, 58), (62, 59), (63, 60), (64, 61), (65, 62), (66, 63), (67, 64), (68, 65), (69, 66), (70, 67), (71, 68), (72, 69), (73, 70), (74, 71), (75, 72), (76, 73), (77, 74), (78, 75), (79, 76), (80, 77), (81, 78), (82, 79), (83, 80), (84, 81), (85, 82), (86, 83), (87, 84), (88, 85), (89, 86), (90, 87), (91, 88), (92, 89), (93, 90), (94, 91), (95, 92), (96, 93), (97, 94), (98, 95), (99, 96), (100, 97), (101, 98), (102, 99), (103, 100), (104, 101), (105, 102), (106, 103), (107, 104), (108, 105);


-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO _represente_compte (id_image, id_compte) VALUES
(6, 4), (7, 5), (8, 2), (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO _fait_partie_de (id_produit, id_categorie) VALUES
(1, 1), (1, 7), (2, 1), (2, 7), (3, 2), (3, 8), (4, 2), (4, 8),
(5, 2), (5, 9), (6, 1), (6, 3), (7, 3), (8, 1), (8, 3), (8, 5),
(9, 5), (9, 10), (10, 1), (10, 7), (11, 5), (12, 2), (12, 8),
(13, 6), (14, 5), (15, 1), (15, 7),
(16, 1), (16, 7), (17, 2), (17, 8), (18, 5), (19, 1), (19, 7), (20, 10),
(21, 5), (22, 1), (22, 3), (23, 2), (23, 8), (24, 4), (24, 5), (25, 1), (25, 3),
(26, 2), (26, 8), (27, 2), (27, 3), (27, 8), (28, 4), (29, 2), (29, 3), (30, 2), (30, 3), (31, 2), (31, 8), (31, 9), (32, 3), (33, 2), (33, 8), (33, 9), (34, 3), (35, 3), (36, 3), (37, 2), (37, 3), (38, 4), (39, 2), (39, 3), (40, 2), (40, 3), (41, 2), (41, 3), (41, 8), (42, 2), (42, 8), (42, 9), (43, 4), (44, 4), (45, 2), (45, 8), (46, 4), (47, 2), (47, 8), (48, 2), (48, 8), (49, 2), (49, 8), (49, 9), (50, 4), (51, 4), (52, 3), (53, 4), (54, 4), (55, 2), (55, 3), (56, 2), (56, 8), (57, 3), (58, 4), (59, 3), (60, 4), (61, 3), (62, 2), (62, 8), (62, 9), (63, 2), (63, 8), (64, 3), (65, 4), (66, 3), (67, 2), (67, 8), (67, 9), (68, 3), (69, 3), (70, 3), (71, 2), (71, 8), (72, 3), (73, 3), (74, 2), (74, 8), (74, 9), (75, 2), (75, 8), (76, 4), (77, 4), (78, 4), (79, 4), (80, 2), (80, 8), (81, 4), (82, 3), (83, 4), (84, 4), (85, 4), (86, 4), (87, 4), (88, 4), (89, 4), (90, 4), (91, 2), (91, 3), (91, 8), (92, 2), (92, 3), (92, 8), (93, 4), (94, 2), (94, 8), (94, 9), (95, 2), (95, 8), (96, 2), (96, 8), (96, 9), (97, 4), (98, 2), (98, 3), (98, 8), (99, 2), (99, 8), (99, 9), (100, 3), (101, 4), (102, 2), (102, 8), (103, 4), (104, 4), (105, 4);


-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO _est_dote_de (id_produit, code_hexa) VALUES
(1, '#000000'), (1, '#FFFFFF'), (2, '#808080'), (3, '#0000FF'), (3, '#FF0000'),
(3, '#00FF00'), (4, '#0000FF'), (4, '#000000'), (5, '#FF0000'), (5, '#FFFFFF'),
(6, '#000000'), (7, '#808080'), (8, '#000000'), (9, '#0000FF'), (9, '#FF0000'),
(10, '#808080'), (11, '#FFFFFF'), (12, '#000000'), (12, '#8B4513'),
(14, '#EE82EE'), (14, '#87CEEB'), (15, '#000000'),
(16, '#000000'), (16, '#FFFFFF'), (17, '#808080'), (17, '#000000'), (18, '#FFFFFF'), (18, '#000000'),
(19, '#000000'), (20, '#FFFFFF'), (20, '#000000'),
(21, '#0000FF'), (21, '#FF0000'), (22, '#808080'), (23, '#000000'), (23, '#8B4513'),
(24, '#87CEEB'), (24, '#32CD32'), (25, '#000000'), (25, '#FF0000'),
(26, '#8B4513'), (27, '#0000FF'), (28, '#FF0000'), (29, '#8B4513'), (30, '#00FF00'), (31, '#000000'), (32, '#8B4513'), (33, '#87CEEB'), (34, '#FFFFFF'), (35, '#FFFFFF'), (36, '#EE82EE'), (37, '#FFFFFF'), (38, '#0000FF'), (39, '#0000FF'), (40, '#000000'), (41, '#000000'), (42, '#FFFFFF'), (43, '#8B4513'), (44, '#87CEEB'), (45, '#87CEEB'), (46, '#32CD32'), (47, '#87CEEB'), (48, '#00FF00'), (49, '#FFA500'), (50, '#EE82EE'), (51, '#FF0000'), (52, '#FFFF00'), (53, '#FFFFFF'), (54, '#0000FF'), (55, '#FFFFFF'), (56, '#808080'), (57, '#00FF00'), (58, '#FFFF00'), (59, '#00FF00'), (60, '#FFA500'), (61, '#00FF00'), (62, '#FFFFFF'), (63, '#00FF00'), (64, '#87CEEB'), (65, '#EE82EE'), (66, '#FFFF00'), (67, '#808080'), (68, '#FFA500'), (69, '#00FF00'), (70, '#32CD32'), (71, '#0000FF'), (72, '#00FF00'), (73, '#8B4513'), (74, '#FFA500'), (75, '#32CD32'), (76, '#87CEEB'), (77, '#FFFF00'), (78, '#0000FF'), (79, '#8B4513'), (80, '#0000FF'), (81, '#EE82EE'), (82, '#8B4513'), (83, '#FFFF00'), (84, '#8B4513'), (85, '#FFFF00'), (86, '#32CD32'), (87, '#EE82EE'), (88, '#0000FF'), (89, '#EE82EE'), (90, '#FFFFFF'), (91, '#000000'), (92, '#FFFFFF'), (93, '#808080'), (94, '#808080'), (95, '#00FF00'), (96, '#0000FF'), (97, '#EE82EE'), (98, '#000000'), (99, '#808080'), (100, '#808080'), (101, '#0000FF'), (102, '#87CEEB'), (103, '#FFA500'), (104, '#0000FF'), (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO _seuil_alerte (nb_seuil, message_seuil) VALUES
(10, 'Stock faible - Envisager un réapprovisionnement'),
(5, 'Stock critique - Réapprovisionnement urgent'),
(3, 'Rupture imminente - Commander immédiatement'),
(20, 'Stock normal - Surveillance recommandée'),
(1, 'Rupture de stock - Produit indisponible');

INSERT INTO _adresse (id_compte, a_numero, a_adresse, a_ville, a_code_postal, a_pays) VALUES
(4, 13, 'rue du Pillard', 'Rennes', 35590, 'France');

-- 18. PANIERS/COMMANDES
INSERT INTO _panier_commande (id_client, timestamp_commande) VALUES
(1, '2025-11-01 10:30:00'),
(2, '2025-11-02 14:45:00'),
(3, '2025-11-03 09:15:00'),
(1, NULL),
(4, '2025-11-04 16:20:00'),
(6, '2025-11-05 11:00:00'),
(2, NULL),
(5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO _contient (id_panier, id_produit, quantite, prix_unitaire, remise_unitaire, frais_de_port, TVA) VALUES
(1, 1, 1, 599.99, 0.0, 5.99, 20.0),
(1, 6, 1, 149.99, 0.0, 5.99, 20.0),
(2, 3, 2, 24.99, 0.0, 3.99, 20.0),
(2, 4, 1, 49.99, 0.0, 4.99, 20.0),
(3, 2, 1, 899.99, 0.0, 9.99, 20.0),
(4, 7, 1, 69.99, 0.0, 6.99, 20.0),
(5, 5, 1, 39.99, 0.0, 4.99, 20.0),
(5, 8, 1, 199.99, 0.0, 3.99, 20.0),
(6, 9, 2, 89.99, 0.0, 5.99, 20.0),
(7, 10, 1, 299.99, 0.0, 7.99, 20.0),
(8, 11, 1, 29.99, 0.0, 4.99, 20.0),
(8, 13, 1, 24.99, 0.0, 3.99, 20.0),
(8, 14, 1, 34.99, 0.0, 5.99, 20.0);

-- 20. FACTURES
INSERT INTO _facture (id_panier, id_adresse, f_total_ht, f_total_remise, f_total_ht_remise, f_total_ttc) VALUES
(1, 1, 755.98, 0.0, 755.98, 907.18),
(2, 1, 103.96, 0.0, 103.96, 124.75),
(3, 1, 909.98, 0.0, 909.98, 1091.98),
(5, 1, 248.97, 0.0, 248.97, 298.76),
(6, 1, 185.97, 0.0, 185.97, 223.16),
(8, 1, 95.96, 0.0, 95.96, 115.15);

-- 21. PAIEMENTS
INSERT INTO _paiement (id_facture, mode_paiement, numero_carte, mois_annee_expiration, cryptogramme_carte, timestamp_paiement) VALUES
(1, 'CB', '1234567890123456', '12/27', '123', '2025-11-01 10:35:00'),
(2, 'CB', '6543210987654321', '06/26', '456', '2025-11-02 14:50:00'),
(3, 'CB', '1111222233334444', '03/28', '789', '2025-11-03 09:20:00'),
(4, 'CB', '9999888877776666', '09/27', '321', '2025-11-04 16:25:00'),
(5, 'CB', '5555666677778888', '11/26', '654', '2025-11-05 11:05:00'),
(6, 'CB', '4444333322221111', '08/27', '987', '2025-11-06 13:35:00');

-- 22. LIVRAISONS
INSERT INTO _livraison (id_facture, date_livraison, etat_livraison) VALUES
(1, '2025-11-05', 'Livré'),
(2, '2025-11-06', 'Livré'),
(3, '2025-11-08', 'En transit'),
(4, NULL, 'En préparation'),
(5, '2025-11-09', 'Livré'),
(6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO _definie_pour (id_seuil, id_compte) VALUES
(1, 2), (2, 2), (3, 2), (4, 2), (5, 2),
(1, 3), (2, 3), (3, 3), (5, 3),
(1, 10), (2, 10), (3, 10), (4, 10), (5, 10),
(5, 1);


-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;
UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;
UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;
UPDATE cobrec1._commentaire SET a_note = 0.0;


SELECT DISTINCT ON (p.id_produit)
    p.id_produit,
    p.p_nom,
    p.p_description,
    p.p_prix,
    p.p_stock,
    r.reduction_pourcentage,
    pr.id_produit as estEnpromo,
    (SELECT COUNT(*) FROM cobrec1._avis av2 WHERE av2.id_produit = p.id_produit AND av2.a_note IS NOT NULL) as nombre_avis,
    (SELECT ROUND(COALESCE(AVG(av3.a_note), 0)::numeric, 1) FROM cobrec1._avis av3 WHERE av3.id_produit = p.id_produit AND av3.a_note IS NOT NULL) as note_moyenne,
    (SELECT COALESCE(i2.i_lien, '/img/photo/smartphone_xpro.jpg') FROM cobrec1._represente_produit rp2 LEFT JOIN cobrec1._image i2 ON rp2.id_image = i2.id_image WHERE rp2.id_produit = p.id_produit LIMIT 1) as image_url,
    STRING_AGG(DISTINCT cp.nom_categorie, ', ') as categories
FROM cobrec1._produit p
LEFT JOIN cobrec1._reduction r ON p.id_produit = r.id_produit 
LEFT JOIN cobrec1._promotion pr ON p.id_produit = pr.id_produit 
LEFT JOIN cobrec1._tva t ON p.id_tva = t.id_tva
LEFT JOIN cobrec1._fait_partie_de fpd ON p.id_produit = fpd.id_produit
LEFT JOIN cobrec1._categorie_produit cp ON fpd.id_categorie = cp.id_categorie
WHERE p.p_statut = 'En ligne'
GROUP BY p.id_produit, p.p_nom, p.p_description, p.p_prix, p.p_stock, 
         p.p_note, p.p_nb_ventes, p.p_statut, r.reduction_pourcentage, 
         pr.id_produit, t.montant_tva
ORDER BY p.id_produit
----------- WbStatement -----------
##sqlwb.pos=97020
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;

CREATE SCHEMA cobrec1;

SET SCHEMA 'cobrec1';

-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (
        civilite IN (
            'M.',
            'Mme',
            'Inconnu',
            'Ne souhaite pas s''exprimer',
            'Autre'
        )
    ),
    CONSTRAINT verif_compte_email CHECK (
        email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'
    ),
    CONSTRAINT verif_compte_num_telephone CHECK (
        num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$'
    )
);

ALTER TABLE ONLY cobrec1._compte
ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11, 2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (
        type_couleur IN (
            'Vert',
            'Jaune',
            'Rouge',
            'Noir',
            'Blanc',
            'Bleu',
            'Violet',
            'Orange',
            'Gris',
            'Marron'
        )
    )
);

ALTER TABLE ONLY cobrec1._couleur
ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4, 1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (
        montant_TVA >= 0.00
        AND montant_TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11, 2) DEFAULT 0.0,
    p_volume numeric(11, 2) DEFAULT 0.0,
    p_frais_de_port numeric(11, 2) DEFAULT 0.0,
    p_prix numeric(11, 2) NOT NULL,
    p_note numeric(2, 1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (
        p_note >= 0
        AND p_note <= 5
    ),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (
        p_statut IN (
            'Ébauche',
            'En ligne',
            'Hors ligne',
            'Supprimé'
        )
    ),
    CONSTRAINT verif_produit_origine CHECK (
        p_origine IN (
            'Inconnu',
            'Bretagne',
            'France',
            'UE',
            'Hors UE'
        )
    )
);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) REFERENCES cobrec1._vendeur (id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) REFERENCES cobrec1._TVA (id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5, 2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (
        reduction_pourcentage >= 0.00
        AND reduction_pourcentage <= 100.00
    ),
    /*CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_reduction_fin CHECK (
        reduction_fin > reduction_debut
    )
);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    /*CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_promotion_fin CHECK (
        promotion_fin > promotion_debut
    )
);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11, 2) DEFAULT 0.0,
    f_total_remise numeric(11, 2) DEFAULT 0.0,
    f_total_ttc numeric(11, 2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) REFERENCES cobrec1._adresse (id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2, 1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (
        vote_type IN ('like', 'dislike')
    )
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2, 1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (
        a_note IN (
            NULL,
            0.0,
            0.5,
            1.0,
            1.5,
            2.0,
            2.5,
            3.0,
            3.5,
            4.0,
            4.5,
            5.0
        )
    )
);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) REFERENCES cobrec1._livraison (id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison, id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (
        type_signalement IN (
            'signale_avis',
            'signale_compte',
            'signale_produit'
        )
    )
);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11, 2) NOT NULL,
    remise_unitaire numeric(11, 2) DEFAULT 0.0,
    frais_de_port numeric(11, 2) DEFAULT 0.0,
    TVA numeric(4, 1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (
        TVA >= 0.00
        AND TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
-- CREATE TABLE cobrec1._represente_promotion (
--     id_image integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image)
--             REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) REFERENCES cobrec1._categorie_produit (id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) REFERENCES cobrec1._couleur (code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction)
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) REFERENCES cobrec1._seuil_alerte (id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();

CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

CREATE FUNCTION mise_sur_marche_produit_insert()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche_insert
AFTER INSERT on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit_insert();

CREATE FUNCTION update_p_modif_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_modif = OLD.p_modif) THEN
        NEW.p_modif = CURRENT_TIMESTAMP;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_update_p_modif_produit
BEFORE UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE update_p_modif_produit();

CREATE FUNCTION produit_deja_en_reduction_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_insert
BEFORE INSERT on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_insert();

CREATE FUNCTION produit_deja_en_reduction_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_update
BEFORE UPDATE on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_update();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO
    _compte (
        nom,
        prenom,
        email,
        num_telephone,
        mdp,
        etat_A2F,
        nb_fois_signale,
        nb_signalements_avis,
        nb_cpts_signales,
        nb_avis_signales
    )
VALUES (
        'Maeleau',
        'Le Hyver',
        'admin@cobrec.fr',
        '0601020304',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Lopicier',
        'Mallo',
        'vendeur1@example.com',
        '0612345678',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Elouard',
        'Jean-Jacques',
        'vendeur2@shop.fr',
        '0623456789',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        1,
        0,
        0,
        0
    ),
    (
        'Jean',
        'Dupont',
        'client1@gmail.com',
        '0634567890',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        1,
        0,
        0
    ),
    (
        'Marie',
        'Martin',
        'client2@yahoo.fr',
        '0645678901',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        1,
        0
    ),
    (
        'Pierre',
        'Durand',
        'client3@outlook.com',
        '0656789012',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Sophie',
        'Bernard',
        'client4@free.fr',
        '0667890123',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Lucas',
        'Petit',
        'client5@orange.fr',
        '0678901234',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Emma',
        'Lefebvre',
        'client6@wanadoo.fr',
        '0689012345',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Martinière',
        'Yvili',
        'vendeur3@boutique.fr',
        '0690123456',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    );

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO
    _vendeur (
        id_compte,
        SIREN,
        raison_sociale,
        denomination,
        nb_produits_crees
    )
VALUES (
        2,
        '123456789',
        'TechStore SARL',
        'TechStore',
        5
    ),
    (
        3,
        '987654321',
        'FashionHub SAS',
        'FashionHub',
        3
    ),
    (
        10,
        '456789123',
        'SportPro EURL',
        'SportPro',
        2
    );

-- 4. CLIENTS
INSERT INTO
    _client (
        id_compte,
        c_pseudo,
        c_nb_produits_achetes,
        c_depense_totale,
        c_cloture,
        c_datenaissance
    )
VALUES (
        4,
        'jdupont',
        2,
        907.18,
        FALSE,
        '1985-03-15'
    ),
    (
        5,
        'mmartin',
        3,
        124.75,
        FALSE,
        '1990-07-22'
    ),
    (
        6,
        'pdurand',
        1,
        1091.98,
        FALSE,
        '1988-11-10'
    ),
    (
        7,
        'sbernard',
        2,
        298.76,
        FALSE,
        '1995-05-30'
    ),
    (
        8,
        'lpetit',
        0,
        0.0,
        FALSE,
        '2000-01-18'
    ),
    (
        9,
        'elefebvre',
        1,
        179.98,
        FALSE,
        '1992-09-25'
    );

-- 5. ADRESSES
INSERT INTO
    _adresse (
        id_compte,
        a_adresse,
        a_ville,
        a_code_postal,
        a_complement
    )
VALUES (
        4,
        '15 rue de la Paix',
        'Paris',
        '75001',
        'Apt 5'
    ),
    (
        5,
        '23 avenue des Champs',
        'Lyon',
        '69001',
        NULL
    ),
    (
        6,
        '8 boulevard Victor Hugo',
        'Marseille',
        '13001',
        'Bâtiment B'
    ),
    (
        7,
        '42 rue du Commerce',
        'Toulouse',
        '31000',
        NULL
    ),
    (
        8,
        '67 place de la République',
        'Nice',
        '06000',
        '3ème étage'
    ),
    (
        9,
        '91 rue Principale',
        'Bordeaux',
        '33000',
        NULL
    ),
    (
        2,
        '12 avenue du Commerce',
        'Paris',
        '75015',
        'Entrepôt A'
    ),
    (
        3,
        '55 rue de la Mode',
        'Lyon',
        '69002',
        NULL
    ),
    (
        10,
        '78 boulevard du Sport',
        'Marseille',
        '13008',
        'Zone industrielle'
    );

-- 6. COULEURS
INSERT INTO
    _couleur (code_hexa, nom, type_couleur)
VALUES (
        '#FF0000',
        'Rouge vif',
        'Rouge'
    ),
    (
        '#0000FF',
        'Bleu marine',
        'Bleu'
    ),
    ('#000000', 'Noir', 'Noir'),
    (
        '#FFFFFF',
        'Blanc pur',
        'Blanc'
    ),
    (
        '#00FF00',
        'Vert émeraude',
        'Vert'
    ),
    (
        '#FFFF00',
        'Jaune citron',
        'Jaune'
    ),
    ('#FFA500', 'Orange', 'Orange'),
    ('#808080', 'Gris', 'Gris'),
    (
        '#8B4513',
        'Marron chocolat',
        'Marron'
    ),
    ('#EE82EE', 'Violet', 'Violet'),
    (
        '#87CEEB',
        'Bleu ciel',
        'Bleu'
    ),
    (
        '#32CD32',
        'Vert lime',
        'Vert'
    );

-- 7. CATÉGORIES
INSERT INTO
    _categorie_produit (nom_categorie)
VALUES ('Électronique'),
    ('Vêtements'),
    ('Accessoires'),
    ('Maison'),
    ('Sport'),
    ('Livres'),
    ('Informatique'),
    ('Mode homme'),
    ('Mode femme'),
    ('Chaussures');

-- 8. TVA
INSERT INTO
    _TVA (montant_TVA, libelle_TVA)
VALUES (20.0, 'TVA normale'),
    (10.0, 'TVA intermédiaire'),
    (5.5, 'TVA réduite'),
    (2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO
    _produit (
        id_TVA,
        id_vendeur,
        p_nom,
        p_description,
        p_prix,
        p_stock,
        p_statut,
        p_origine,
        p_poids,
        p_volume,
        p_frais_de_port,
        p_note,
        p_nb_ventes
    )
VALUES (
        1,
        1,
        'Smartphone XPro',
        'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G',
        599.99,
        35,
        'En ligne',
        'Bretagne',
        0.180,
        0.01,
        5.99,
        4.3,
        15
    ),
    (
        1,
        1,
        'Ordinateur portable Ultra',
        'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7',
        899.99,
        22,
        'En ligne',
        'Bretagne',
        2.5,
        0.03,
        9.99,
        4.0,
        8
    ),
    (
        1,
        2,
        'T-shirt coton bio',
        'T-shirt 100% coton biologique, coupe regular, diverses couleurs',
        24.99,
        58,
        'En ligne',
        'Bretagne',
        0.15,
        0.5,
        3.99,
        5.0,
        42
    ),
    (
        1,
        2,
        'Jean slim',
        'Jean coupe slim stretch, denim premium',
        49.99,
        62,
        'En ligne',
        'Bretagne',
        1.00,
        0.01,
        4.99,
        NULL,
        18
    ),
    (
        1,
        2,
        'Robe d été',
        'Robe légère et fluide pour l été, motifs floraux',
        39.99,
        48,
        'En ligne',
        'Bretagne',
        0.30,
        0.08,
        4.99,
        NULL,
        12
    ),
    (
        2,
        1,
        'Casque audio Bluetooth',
        'Casque sans fil avec réduction de bruit active, autonomie 30h',
        149.99,
        15,
        'En ligne',
        'Bretagne',
        0.25,
        0.02,
        5.99,
        4.5,
        25
    ),
    (
        1,
        2,
        'Sac à dos urbain',
        'Sac à dos pour ordinateur portable, compartiments multiples, imperméable',
        69.99,
        35,
        'En ligne',
        'Bretagne',
        0.60,
        0.15,
        6.99,
        NULL,
        10
    ),
    (
        1,
        1,
        'Montre connectée',
        'Montre sport avec GPS, cardiofréquencemètre, étanche 50m',
        199.99,
        15,
        'En ligne',
        'Bretagne',
        0.05,
        0.01,
        3.99,
        4.7,
        20
    ),
    (
        1,
        3,
        'Chaussures running',
        'Chaussures de course avec amorti premium, semelle respirante',
        89.99,
        54,
        'En ligne',
        'Bretagne',
        0.40,
        0.08,
        5.99,
        4.2,
        16
    ),
    (
        1,
        1,
        'Tablette 10 pouces',
        'Tablette Android, écran Full HD, 64Go, stylet inclus',
        299.99,
        16,
        'En ligne',
        'Bretagne',
        0.50,
        0.02,
        7.99,
        3.8,
        9
    ),
    (
        1,
        3,
        'Ballon de football',
        'Ballon officiel en cuir synthétique, taille 5',
        29.99,
        85,
        'En ligne',
        'Bretagne',
        0.45,
        0.06,
        4.99,
        4.6,
        35
    ),
    (
        1,
        2,
        'Veste en cuir',
        'Veste en cuir véritable, coupe motard, doublure intérieure',
        189.99,
        15,
        'En ligne',
        'Bretagne',
        1.20,
        0.01,
        8.99,
        NULL,
        5
    ),
    (
        3,
        1,
        'Livre cuisine française',
        'Recettes traditionnelles de cuisine française, 300 pages',
        24.99,
        28,
        'En ligne',
        'Bretagne',
        0.80,
        0.03,
        3.99,
        4.8,
        22
    ),
    (
        1,
        3,
        'Tapis de yoga',
        'Tapis antidérapant, épaisseur 6mm, avec sac de transport',
        34.99,
        52,
        'En ligne',
        'Bretagne',
        1.10,
        0.02,
        5.99,
        4.4,
        28
    ),
    (
        1,
        1,
        'Clavier mécanique RGB',
        'Clavier gamer avec rétroéclairage RGB, switches mécaniques',
        79.99,
        29,
        'En ligne',
        'Bretagne',
        0.90,
        0.04,
        5.99,
        4.1,
        11
    ),
    (
        1,
        1,
        'Console NextGen',
        'Console de jeu dernière génération, 1To SSD, 4K HDR',
        499.99,
        0,
        'Hors ligne',
        'France',
        3.5,
        0.02,
        14.99,
        4.8,
        25
    ),
    (
        1,
        2,
        'Sweat à capuche premium',
        'Sweat-shirt en coton bio, coupe oversize, poche kangourou',
        59.99,
        0,
        'Hors ligne',
        'France',
        0.70,
        0.03,
        5.99,
        4.4,
        18
    ),
    (
        1,
        3,
        'Raquette de tennis pro',
        'Raquette carbone, tension 25kg, grip confort',
        129.99,
        0,
        'Hors ligne',
        'France',
        0.35,
        0.02,
        6.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Écran gaming 4K 27"',
        'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms',
        349.99,
        0,
        'Hors ligne',
        'France',
        5.2,
        0.35,
        19.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Baskets limited edition',
        'Baskets cuir véritable, édition limitée, semelle comfort',
        179.99,
        0,
        'Hors ligne',
        'France',
        0.80,
        0.06,
        7.99,
        4.9,
        65
    ),
    (
        1,
        3,
        'Vélo de route carbone',
        'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses',
        1299.99,
        0,
        'Hors ligne',
        'UE',
        8.5,
        0.15,
        29.99,
        4.8,
        25
    ),
    (
        1,
        1,
        'Drone professionnel 4K',
        'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min',
        899.99,
        0,
        'Hors ligne',
        'UE',
        1.2,
        0.02,
        12.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Manteau d hiver imperméable',
        'Manteau longueur genoux, doublure polaire, coupe-vent',
        179.99,
        0,
        'Hors ligne',
        'UE',
        1.5,
        0.01,
        8.99,
        4.4,
        65
    ),
    (
        1,
        3,
        'Tente 4 places',
        'Tente familiale, double toit, arceaux aluminium, imperméable',
        249.99,
        0,
        'Hors ligne',
        'Hors UE',
        4.8,
        0.08,
        19.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Enceinte Bluetooth waterproof',
        'Enceinte portable, autonomie 24h, résistance IP67',
        129.99,
        0,
        'Hors ligne',
        'Hors UE',
        0.9,
        0.05,
        6.99,
        4.9,
        95
    ),
    (
        2,
        1,
        'Pull Marin de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.',
        36.37,
        31,
        'En ligne',
        'Bretagne',
        2.06,
        0.45,
        5.78,
        4.4,
        12
    ),
    (
        1,
        1,
        'Bonnet Miki de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.',
        121.37,
        6,
        'Hors ligne',
        'Bretagne',
        2.3,
        0.09,
        8.8,
        4.3,
        60
    ),
    (
        2,
        3,
        'Galettes Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        147.92,
        142,
        'En ligne',
        'Bretagne',
        0.46,
        0.46,
        5.71,
        4.3,
        97
    ),
    (
        1,
        3,
        'Écharpe Rayée Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        173.77,
        102,
        'En ligne',
        'Bretagne',
        0.91,
        0.32,
        8.28,
        4.4,
        58
    ),
    (
        1,
        2,
        'Écharpe Rayée de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.',
        197.02,
        168,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.12,
        7.92,
        4.8,
        19
    ),
    (
        4,
        2,
        'Ciré Navy de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        104.35,
        169,
        'En ligne',
        'Bretagne',
        1.43,
        0.14,
        7.22,
        4.6,
        72
    ),
    (
        4,
        3,
        'Bracelet Ancre Fait main',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        172.75,
        44,
        'Hors ligne',
        'Bretagne',
        1.92,
        0.4,
        8.8,
        4.1,
        102
    ),
    (
        1,
        3,
        'Marinière Local',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        74.29,
        80,
        'Hors ligne',
        'Bretagne',
        1.36,
        0.23,
        13.58,
        4.9,
        72
    ),
    (
        3,
        1,
        'Bracelet Ancre de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.',
        40.53,
        140,
        'En ligne',
        'Bretagne',
        2.76,
        0.3,
        9.4,
        4.1,
        97
    ),
    (
        3,
        3,
        'Pendentif Hermine Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        164.23,
        199,
        'Hors ligne',
        'Bretagne',
        1.64,
        0.07,
        10.94,
        4.9,
        47
    ),
    (
        1,
        3,
        'Sac Voile de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.',
        136.95,
        100,
        'En ligne',
        'Bretagne',
        1.37,
        0.26,
        6.09,
        4.2,
        91
    ),
    (
        2,
        3,
        'Écharpe Rayée de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        21.13,
        22,
        'Hors ligne',
        'Bretagne',
        2.73,
        0.43,
        5.64,
        4.2,
        129
    ),
    (
        1,
        2,
        'Coussin Triskell de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        134.55,
        95,
        'Hors ligne',
        'Bretagne',
        1.33,
        0.24,
        11.56,
        4.7,
        30
    ),
    (
        1,
        3,
        'Écharpe Rayée Authentique',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.',
        36.49,
        51,
        'En ligne',
        'Bretagne',
        0.91,
        0.13,
        13.31,
        4.4,
        145
    ),
    (
        4,
        3,
        'Écharpe Rayée Bio',
        'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.',
        50.4,
        107,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.09,
        5.02,
        4.4,
        121
    ),
    (
        1,
        3,
        'Bonnet Miki Authentique',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        119.47,
        143,
        'En ligne',
        'Bretagne',
        0.28,
        0.16,
        5.45,
        4.5,
        140
    ),
    (
        3,
        1,
        'Ciré Navy de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        187.96,
        150,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.3,
        10.57,
        4.4,
        149
    ),
    (
        1,
        1,
        'Bol Breton Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.',
        66.7,
        85,
        'En ligne',
        'Bretagne',
        2.79,
        0.47,
        5.08,
        4.6,
        149
    ),
    (
        1,
        3,
        'Bol Breton Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        176.18,
        99,
        'Hors ligne',
        'Bretagne',
        0.93,
        0.22,
        9.89,
        4.3,
        140
    ),
    (
        3,
        1,
        'Pull Marin de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.',
        30.23,
        146,
        'En ligne',
        'Bretagne',
        0.55,
        0.15,
        6.9,
        4.3,
        72
    ),
    (
        1,
        1,
        'Affiche Vintage de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        155.74,
        168,
        'En ligne',
        'Bretagne',
        2.94,
        0.09,
        8.98,
        4.7,
        148
    ),
    (
        2,
        3,
        'Vareuse Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        120.09,
        42,
        'En ligne',
        'Bretagne',
        1.35,
        0.03,
        8.28,
        4.9,
        15
    ),
    (
        3,
        2,
        'Pull Marin Bio',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.',
        151.65,
        65,
        'En ligne',
        'Bretagne',
        2.61,
        0.49,
        12.3,
        4.9,
        11
    ),
    (
        1,
        3,
        'Kabig Bio',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.',
        172.27,
        61,
        'En ligne',
        'Bretagne',
        0.68,
        0.46,
        8.15,
        4.8,
        63
    ),
    (
        1,
        2,
        'Phare Miniature Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        62.75,
        169,
        'En ligne',
        'Bretagne',
        1.58,
        0.34,
        12.59,
        4.3,
        12
    ),
    (
        3,
        1,
        'Bol Breton Fait main',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        75.33,
        85,
        'Hors ligne',
        'Bretagne',
        1.37,
        0.49,
        6.04,
        4.9,
        53
    ),
    (
        3,
        3,
        'Bracelet Ancre de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        23.23,
        175,
        'Hors ligne',
        'Bretagne',
        2.77,
        0.32,
        10.97,
        4.1,
        81
    ),
    (
        1,
        2,
        'Caramels de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        135.67,
        102,
        'Hors ligne',
        'Bretagne',
        2.06,
        0.45,
        10.54,
        4.3,
        145
    ),
    (
        3,
        3,
        'Affiche Vintage de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.',
        137.69,
        135,
        'Hors ligne',
        'Bretagne',
        1.47,
        0.45,
        12.16,
        4.2,
        26
    ),
    (
        4,
        2,
        'Écharpe Rayée de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        37.85,
        16,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.24,
        12.65,
        4.1,
        111
    ),
    (
        4,
        3,
        'Vareuse de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        51.36,
        183,
        'Hors ligne',
        'Bretagne',
        1.6,
        0.03,
        7.24,
        4.8,
        121
    ),
    (
        4,
        3,
        'Bracelet Ancre Durable',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.',
        150.55,
        126,
        'En ligne',
        'Bretagne',
        1.41,
        0.38,
        12.56,
        4.3,
        138
    ),
    (
        1,
        2,
        'Lampe Tempête de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        73.48,
        143,
        'Hors ligne',
        'Bretagne',
        0.33,
        0.08,
        8.45,
        4.2,
        59
    ),
    (
        4,
        1,
        'Sac Voile de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.',
        167.42,
        104,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.3,
        11.26,
        4.9,
        102
    ),
    (
        4,
        1,
        'Caramels de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        61.58,
        129,
        'En ligne',
        'Bretagne',
        0.18,
        0.17,
        11.11,
        4.4,
        47
    ),
    (
        4,
        2,
        'Pendentif Hermine de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        35.65,
        123,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.14,
        7.95,
        4.5,
        91
    ),
    (
        2,
        1,
        'Ciré Navy Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.',
        19.84,
        94,
        'En ligne',
        'Bretagne',
        0.75,
        0.04,
        13.62,
        4.0,
        12
    ),
    (
        3,
        1,
        'Vareuse de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        51.2,
        184,
        'En ligne',
        'Bretagne',
        0.84,
        0.19,
        10.45,
        5.0,
        34
    ),
    (
        1,
        2,
        'Pendentif Hermine Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        47.48,
        156,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.32,
        5.92,
        4.8,
        35
    ),
    (
        4,
        1,
        'Galettes de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.',
        89.39,
        130,
        'Hors ligne',
        'Bretagne',
        0.41,
        0.48,
        10.72,
        4.8,
        44
    ),
    (
        2,
        2,
        'Sac Voile Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.',
        148.16,
        73,
        'Hors ligne',
        'Bretagne',
        1.03,
        0.13,
        13.41,
        4.3,
        120
    ),
    (
        1,
        1,
        'Marinière de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.',
        50.09,
        71,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.44,
        11.31,
        4.3,
        7
    ),
    (
        4,
        3,
        'Sac Voile Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        102.77,
        9,
        'Hors ligne',
        'Bretagne',
        0.37,
        0.12,
        11.23,
        4.3,
        99
    ),
    (
        2,
        1,
        'Sac Voile Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        61.2,
        69,
        'Hors ligne',
        'Bretagne',
        0.77,
        0.36,
        7.84,
        4.7,
        52
    ),
    (
        1,
        1,
        'Pendentif Hermine Local',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.',
        167.37,
        80,
        'Hors ligne',
        'Bretagne',
        0.76,
        0.1,
        5.13,
        4.5,
        75
    ),
    (
        1,
        2,
        'Vareuse Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        118.5,
        125,
        'Hors ligne',
        'Bretagne',
        1.49,
        0.18,
        13.69,
        4.3,
        127
    ),
    (
        4,
        2,
        'Pendentif Hermine Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        116.38,
        82,
        'Hors ligne',
        'Bretagne',
        0.35,
        0.13,
        10.02,
        4.4,
        62
    ),
    (
        2,
        1,
        'Pendentif Hermine de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        21.38,
        194,
        'En ligne',
        'Bretagne',
        0.39,
        0.38,
        10.63,
        4.3,
        25
    ),
    (
        2,
        2,
        'Ciré Navy de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.',
        140.29,
        125,
        'En ligne',
        'Bretagne',
        0.94,
        0.12,
        11.36,
        4.7,
        121
    ),
    (
        4,
        1,
        'Pull Marin Authentique',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        181.69,
        41,
        'Hors ligne',
        'Bretagne',
        0.31,
        0.09,
        7.77,
        4.7,
        150
    ),
    (
        1,
        1,
        'Bolée à Cidre Local',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        103.33,
        25,
        'En ligne',
        'Bretagne',
        1.83,
        0.45,
        11.61,
        4.6,
        11
    ),
    (
        4,
        2,
        'Bol Breton de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.14,
        76,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.3,
        10.71,
        4.5,
        28
    ),
    (
        3,
        2,
        'Phare Miniature de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        141.1,
        78,
        'Hors ligne',
        'Bretagne',
        2.02,
        0.21,
        11.84,
        4.0,
        27
    ),
    (
        1,
        1,
        'Caramels Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        112.55,
        110,
        'Hors ligne',
        'Bretagne',
        0.26,
        0.26,
        10.6,
        4.5,
        118
    ),
    (
        4,
        1,
        'Vareuse de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.',
        101.61,
        12,
        'En ligne',
        'Bretagne',
        2.92,
        0.31,
        7.15,
        4.2,
        146
    ),
    (
        2,
        2,
        'Lampe Tempête Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        145.44,
        135,
        'En ligne',
        'Bretagne',
        2.15,
        0.21,
        9.34,
        4.5,
        121
    ),
    (
        4,
        1,
        'Bracelet Ancre de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.',
        159.31,
        111,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.4,
        7.4,
        4.0,
        81
    ),
    (
        2,
        2,
        'Coussin Triskell Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        112.71,
        121,
        'En ligne',
        'Bretagne',
        2.81,
        0.44,
        13.83,
        4.2,
        103
    ),
    (
        1,
        2,
        'Coussin Triskell Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        159.76,
        171,
        'En ligne',
        'Bretagne',
        2.94,
        0.25,
        5.33,
        4.5,
        89
    ),
    (
        1,
        2,
        'Lampe Tempête de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.75,
        44,
        'Hors ligne',
        'Bretagne',
        0.32,
        0.39,
        7.39,
        4.6,
        106
    ),
    (
        1,
        2,
        'Coussin Triskell Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        54.37,
        180,
        'En ligne',
        'Bretagne',
        2.77,
        0.5,
        11.72,
        4.4,
        30
    ),
    (
        2,
        1,
        'Bolée à Cidre de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.',
        20.61,
        96,
        'En ligne',
        'Bretagne',
        1.19,
        0.08,
        9.78,
        4.6,
        51
    ),
    (
        3,
        3,
        'Caramels Durable',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        37.05,
        123,
        'En ligne',
        'Bretagne',
        1.95,
        0.24,
        11.0,
        4.9,
        124
    ),
    (
        2,
        2,
        'Lampe Tempête Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        90.19,
        69,
        'Hors ligne',
        'Bretagne',
        1.42,
        0.16,
        13.99,
        4.9,
        32
    ),
    (
        3,
        1,
        'Bolée à Cidre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        134.41,
        75,
        'Hors ligne',
        'Bretagne',
        0.12,
        0.43,
        12.0,
        5.0,
        132
    ),
    (
        3,
        2,
        'Bonnet Miki Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        180.74,
        170,
        'Hors ligne',
        'Bretagne',
        0.21,
        0.4,
        5.3,
        4.4,
        38
    ),
    (
        4,
        1,
        'Bonnet Miki Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        182.65,
        47,
        'En ligne',
        'Bretagne',
        0.85,
        0.41,
        9.34,
        4.8,
        91
    ),
    (
        3,
        1,
        'Caramels de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        84.57,
        72,
        'En ligne',
        'Bretagne',
        1.66,
        0.23,
        11.06,
        4.7,
        102
    ),
    (
        1,
        1,
        'Marinière Premium',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        51.84,
        21,
        'Hors ligne',
        'Bretagne',
        1.94,
        0.24,
        11.31,
        4.6,
        34
    ),
    (
        1,
        2,
        'Pull Marin de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        35.64,
        121,
        'Hors ligne',
        'Bretagne',
        1.18,
        0.48,
        11.27,
        4.5,
        44
    ),
    (
        4,
        2,
        'Ciré Jaune de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        189.65,
        97,
        'En ligne',
        'Bretagne',
        0.39,
        0.35,
        9.9,
        5.0,
        96
    ),
    (
        1,
        3,
        'Lampe Tempête Authentique',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        122.86,
        10,
        'En ligne',
        'Bretagne',
        0.25,
        0.17,
        13.9,
        4.8,
        57
    ),
    (
        1,
        3,
        'Bonnet Miki de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        159.05,
        157,
        'En ligne',
        'Bretagne',
        0.11,
        0.43,
        6.3,
        4.1,
        69
    ),
    (
        3,
        3,
        'Marinière Authentique',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        12.98,
        72,
        'En ligne',
        'Bretagne',
        0.25,
        0.37,
        9.73,
        4.7,
        126
    ),
    (
        4,
        2,
        'Bracelet Ancre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.',
        181.75,
        173,
        'En ligne',
        'Bretagne',
        1.61,
        0.23,
        13.68,
        4.1,
        127
    ),
    (
        3,
        2,
        'Lampe Tempête de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        38.04,
        37,
        'Hors ligne',
        'Bretagne',
        0.9,
        0.32,
        9.94,
        4.3,
        140
    ),
    (
        3,
        2,
        'Pull Marin de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        177.85,
        110,
        'En ligne',
        'Bretagne',
        1.08,
        0.23,
        8.74,
        4.1,
        114
    ),
    (
        3,
        3,
        'Coussin Triskell Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        27.62,
        29,
        'En ligne',
        'Bretagne',
        2.26,
        0.19,
        6.17,
        4.1,
        148
    ),
    (
        3,
        3,
        'Galettes Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.',
        123.48,
        95,
        'Hors ligne',
        'Bretagne',
        0.4,
        0.26,
        6.39,
        4.5,
        32
    ),
    (
        1,
        1,
        'Bol Breton Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.',
        194.19,
        164,
        'Hors ligne',
        'Bretagne',
        1.88,
        0.32,
        5.24,
        4.9,
        73
    );

-- 10. PROMOTIONS (futures)
INSERT INTO
    _promotion (
        id_produit,
        promotion_debut,
        promotion_fin
    )
VALUES (
        1,
        '2027-12-20 00:00:00',
        '2027-12-25 23:59:00'
    ),
    (
        2,
        '2026-02-01 00:00:00',
        '2026-02-07 23:59:00'
    ),
    (
        3,
        '2026-02-16 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        4,
        '2026-04-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        5,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        6,
        '2026-06-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        7,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 9. RÉDUCTIONS (futures)
INSERT INTO
    _reduction (
        id_produit,
        reduction_pourcentage,
        reduction_debut,
        reduction_fin
    )
VALUES (
        1,
        10.00,
        '2026-01-05 00:00:00',
        '2026-09-19 23:59:00'
    ),
    (
        2,
        15.00,
        '2026-02-15 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        3,
        20.00,
        '2026-01-01 00:00:00',
        '2026-05-15 23:59:00'
    ),
    (
        4,
        25.00,
        '2026-01-20 00:00:00',
        '2026-02-26 23:59:00'
    ),
    (
        5,
        30.00,
        '2026-06-01 00:00:00',
        '2026-06-30 23:59:00'
    ),
    (
        6,
        60.00,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        7,
        55.00,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        8,
        70.00,
        '2026-01-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        9,
        65.00,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 12. IMAGES
INSERT INTO
    _image (i_lien, i_title, i_alt)
VALUES (
        '/img/photo/smartphone_xpro.jpg',
        'Smartphone XPro.jpg',
        'Image du smartphone'
    ),
    (
        '/img/photo/ordinateur_portable_ultra.jpg',
        'Ordinateur portable.jpeg',
        'Image de l ordinateur'
    ),
    (
        '/img/photo/t_shirt_coton_bio.jpg',
        'T-shirt.png',
        'Image du t-shirt'
    ),
    (
        '/img/photo/jean_slim.jpg',
        'Jean.jpg',
        'Image du jean'
    ),
    (
        '/img/photo/casque_audio_bluetooth.jpg',
        'Casque audio.jpg',
        'Image du casque'
    ),
    (
        '/img/photo/avatar_jean.jpg',
        'Avatar Jean.jpeg',
        'Photo de profil Jean'
    ),
    (
        '/img/photo/avatar_marie.jpg',
        'Avatar Marie.jpg',
        'Photo de profil Marie'
    ),
    (
        '/img/photo/logo_techstore.jpg',
        'Logo TechStore.jpg',
        'Logo entreprise TechStore'
    ),
    (
        '/img/photo/logo_fashionhub.jpg',
        'Logo FashionHub.jpg',
        'Logo entreprise FashionHub'
    ),
    (
        '/img/photo/montre_connect_e.jpg',
        'Montre connectée.jpg',
        'Image de la montre'
    ),
    (
        '/img/photo/sac___dos_urbain.jpg',
        'Sac à dos.jpeg',
        'Image du sac'
    ),
    (
        '/img/photo/chaussures_running.jpg',
        'Chaussures running.jpeg',
        'Image des chaussures'
    ),
    (
        '/img/photo/tablette_10_pouces.jpg',
        'Tablette.jpg',
        'Image de la tablette'
    ),
    (
        '/img/photo/ballon_de_football.jpg',
        'Ballon football.jpg',
        'Image du ballon'
    ),
    (
        '/img/photo/veste_en_cuir.jpg',
        'Veste cuir.jpg',
        'Image de la veste'
    ),
    (
        '/img/photo/livre_cuisine_fran_aise.jpg',
        'Livre cuisine.jpeg',
        'Image du livre'
    ),
    (
        '/img/photo/tapis_de_yoga.jpg',
        'Tapis yoga.jpeg',
        'Image du tapis'
    ),
    (
        '/img/photo/clavier_m_canique_rgb.jpg',
        'Clavier.jpg',
        'Image du clavier'
    ),
    (
        '/img/photo/console_nextgen.jpg',
        'Console NextGen.jpg',
        'Image de la console'
    ),
    (
        '/img/photo/sweat___capuche_premium.jpg',
        'Sweat à capuche.jpeg',
        'Image du sweat'
    ),
    (
        '/img/photo/raquette_de_tennis_pro.jpg',
        'Raquette tennis.jpg',
        'Image de la raquette'
    ),
    (
        '/img/photo/_cran_gaming_4k_27_.jpg',
        'Écran 4K.jpeg',
        'Image de l écran'
    ),
    (
        '/img/photo/baskets_limited_edition.jpg',
        'Baskets limited.jpeg',
        'Image des baskets'
    ),
    (
        '/img/photo/v_lo_de_route_carbone.jpg',
        'Vélo route.jpeg',
        'Image du vélo'
    ),
    (
        '/img/photo/drone_professionnel_4k.jpg',
        'Drone 4K.jpg',
        'Image du drone'
    ),
    (
        '/img/photo/manteau_d_hiver_imperm_able.jpg',
        'Manteau hiver.jpeg',
        'Image du manteau'
    ),
    (
        '/img/photo/tente_4_places.jpg',
        'Tente 4 places.jpg',
        'Image de la tente'
    ),
    (
        '/img/photo/enceinte_bluetooth_waterproof.jpg',
        'Enceinte Bluetooth.jpg',
        'Image de l enceinte'
    ),
    (
        '/img/photo/pull_marin_de_saint_malo.jpg',
        'Pull Marin de Saint-Malo',
        'Photo de Pull Marin de Saint-Malo'
    ),
    (
        '/img/photo/bonnet_miki_de_carnac.jpg',
        'Bonnet Miki de Carnac',
        'Photo de Bonnet Miki de Carnac'
    ),
    (
        '/img/photo/galettes_local.jpg',
        'Galettes Local',
        'Photo de Galettes Local'
    ),
    (
        '/img/photo/_charpe_ray_e_fait_main.jpg',
        'Écharpe Rayée Fait main',
        'Photo de Écharpe Rayée Fait main'
    ),
    (
        '/img/photo/_charpe_ray_e_de_brest.jpg',
        'Écharpe Rayée de Brest',
        'Photo de Écharpe Rayée de Brest'
    ),
    (
        '/img/photo/cir__navy_de_concarneau.jpg',
        'Ciré Navy de Concarneau',
        'Photo de Ciré Navy de Concarneau'
    ),
    (
        '/img/photo/bracelet_ancre_fait_main.jpg',
        'Bracelet Ancre Fait main',
        'Photo de Bracelet Ancre Fait main'
    ),
    (
        '/img/photo/marini_re_local.jpg',
        'Marinière Local',
        'Photo de Marinière Local'
    ),
    (
        '/img/photo/bracelet_ancre_de_concarneau.jpg',
        'Bracelet Ancre de Concarneau',
        'Photo de Bracelet Ancre de Concarneau'
    ),
    (
        '/img/photo/pendentif_hermine_fait_main.jpg',
        'Pendentif Hermine Fait main',
        'Photo de Pendentif Hermine Fait main'
    ),
    (
        '/img/photo/sac_voile_de_concarneau.jpg',
        'Sac Voile de Concarneau',
        'Photo de Sac Voile de Concarneau'
    ),
    (
        '/img/photo/_charpe_ray_e_de_saint_malo.jpg',
        'Écharpe Rayée de Saint-Malo',
        'Photo de Écharpe Rayée de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_de_roscoff.jpg',
        'Coussin Triskell de Roscoff',
        'Photo de Coussin Triskell de Roscoff'
    ),
    (
        '/img/photo/_charpe_ray_e_authentique.jpg',
        'Écharpe Rayée Authentique',
        'Photo de Écharpe Rayée Authentique'
    ),
    (
        '/img/photo/_charpe_ray_e_bio.jpg',
        'Écharpe Rayée Bio',
        'Photo de Écharpe Rayée Bio'
    ),
    (
        '/img/photo/bonnet_miki_authentique.jpg',
        'Bonnet Miki Authentique',
        'Photo de Bonnet Miki Authentique'
    ),
    (
        '/img/photo/cir__navy_de_quimper.jpg',
        'Ciré Navy de Quimper',
        'Photo de Ciré Navy de Quimper'
    ),
    (
        '/img/photo/bol_breton_traditionnel.jpg',
        'Bol Breton Traditionnel',
        'Photo de Bol Breton Traditionnel'
    ),
    (
        '/img/photo/bol_breton_premium.jpg',
        'Bol Breton Premium',
        'Photo de Bol Breton Premium'
    ),
    (
        '/img/photo/pull_marin_de_brest.jpg',
        'Pull Marin de Brest',
        'Photo de Pull Marin de Brest'
    ),
    (
        '/img/photo/affiche_vintage_de_dinard.jpg',
        'Affiche Vintage de Dinard',
        'Photo de Affiche Vintage de Dinard'
    ),
    (
        '/img/photo/vareuse_artisanal.jpg',
        'Vareuse Artisanal',
        'Photo de Vareuse Artisanal'
    ),
    (
        '/img/photo/pull_marin_bio.jpg',
        'Pull Marin Bio',
        'Photo de Pull Marin Bio'
    ),
    (
        '/img/photo/kabig_bio.jpg',
        'Kabig Bio',
        'Photo de Kabig Bio'
    ),
    (
        '/img/photo/phare_miniature_fait_main.jpg',
        'Phare Miniature Fait main',
        'Photo de Phare Miniature Fait main'
    ),
    (
        '/img/photo/bol_breton_fait_main.jpg',
        'Bol Breton Fait main',
        'Photo de Bol Breton Fait main'
    ),
    (
        '/img/photo/bracelet_ancre_de_carnac.jpg',
        'Bracelet Ancre de Carnac',
        'Photo de Bracelet Ancre de Carnac'
    ),
    (
        '/img/photo/caramels_de_dinard.jpg',
        'Caramels de Dinard',
        'Photo de Caramels de Dinard'
    ),
    (
        '/img/photo/affiche_vintage_de_vannes.jpg',
        'Affiche Vintage de Vannes',
        'Photo de Affiche Vintage de Vannes'
    ),
    (
        '/img/photo/_charpe_ray_e_de_dinard.jpg',
        'Écharpe Rayée de Dinard',
        'Photo de Écharpe Rayée de Dinard'
    ),
    (
        '/img/photo/vareuse_de_saint_malo.jpg',
        'Vareuse de Saint-Malo',
        'Photo de Vareuse de Saint-Malo'
    ),
    (
        '/img/photo/bracelet_ancre_durable.jpg',
        'Bracelet Ancre Durable',
        'Photo de Bracelet Ancre Durable'
    ),
    (
        '/img/photo/lampe_temp_te_de_quimper.jpg',
        'Lampe Tempête de Quimper',
        'Photo de Lampe Tempête de Quimper'
    ),
    (
        '/img/photo/sac_voile_de_pont_aven.jpg',
        'Sac Voile de Pont-Aven',
        'Photo de Sac Voile de Pont-Aven'
    ),
    (
        '/img/photo/caramels_de_roscoff.jpg',
        'Caramels de Roscoff',
        'Photo de Caramels de Roscoff'
    ),
    (
        '/img/photo/pendentif_hermine_de_saint_malo.jpg',
        'Pendentif Hermine de Saint-Malo',
        'Photo de Pendentif Hermine de Saint-Malo'
    ),
    (
        '/img/photo/cir__navy_artisanal.jpg',
        'Ciré Navy Artisanal',
        'Photo de Ciré Navy Artisanal'
    ),
    (
        '/img/photo/vareuse_de_pont_aven.jpg',
        'Vareuse de Pont-Aven',
        'Photo de Vareuse de Pont-Aven'
    ),
    (
        '/img/photo/pendentif_hermine_bio.jpg',
        'Pendentif Hermine Bio',
        'Photo de Pendentif Hermine Bio'
    ),
    (
        '/img/photo/galettes_de_quimper.jpg',
        'Galettes de Quimper',
        'Photo de Galettes de Quimper'
    ),
    (
        '/img/photo/sac_voile_durable.jpg',
        'Sac Voile Durable',
        'Photo de Sac Voile Durable'
    ),
    (
        '/img/photo/marini_re_de_pont_aven.jpg',
        'Marinière de Pont-Aven',
        'Photo de Marinière de Pont-Aven'
    ),
    (
        '/img/photo/sac_voile_bio.jpg',
        'Sac Voile Bio',
        'Photo de Sac Voile Bio'
    ),
    (
        '/img/photo/sac_voile_premium.jpg',
        'Sac Voile Premium',
        'Photo de Sac Voile Premium'
    ),
    (
        '/img/photo/pendentif_hermine_local.jpg',
        'Pendentif Hermine Local',
        'Photo de Pendentif Hermine Local'
    ),
    (
        '/img/photo/vareuse_durable.jpg',
        'Vareuse Durable',
        'Photo de Vareuse Durable'
    ),
    (
        '/img/photo/pendentif_hermine_traditionnel.jpg',
        'Pendentif Hermine Traditionnel',
        'Photo de Pendentif Hermine Traditionnel'
    ),
    (
        '/img/photo/pendentif_hermine_de_roscoff.jpg',
        'Pendentif Hermine de Roscoff',
        'Photo de Pendentif Hermine de Roscoff'
    ),
    (
        '/img/photo/cir__navy_de_brest.jpg',
        'Ciré Navy de Brest',
        'Photo de Ciré Navy de Brest'
    ),
    (
        '/img/photo/pull_marin_authentique.jpg',
        'Pull Marin Authentique',
        'Photo de Pull Marin Authentique'
    ),
    (
        '/img/photo/bol_e___cidre_local.jpg',
        'Bolée à Cidre Local',
        'Photo de Bolée à Cidre Local'
    ),
    (
        '/img/photo/bol_breton_de_saint_malo.jpg',
        'Bol Breton de Saint-Malo',
        'Photo de Bol Breton de Saint-Malo'
    ),
    (
        '/img/photo/phare_miniature_de_quimper.jpg',
        'Phare Miniature de Quimper',
        'Photo de Phare Miniature de Quimper'
    ),
    (
        '/img/photo/caramels_artisanal.jpg',
        'Caramels Artisanal',
        'Photo de Caramels Artisanal'
    ),
    (
        '/img/photo/vareuse_de_dinard.jpg',
        'Vareuse de Dinard',
        'Photo de Vareuse de Dinard'
    ),
    (
        '/img/photo/lampe_temp_te_traditionnel.jpg',
        'Lampe Tempête Traditionnel',
        'Photo de Lampe Tempête Traditionnel'
    ),
    (
        '/img/photo/bracelet_ancre_de_brest.jpg',
        'Bracelet Ancre de Brest',
        'Photo de Bracelet Ancre de Brest'
    ),
    (
        '/img/photo/coussin_triskell_premium.jpg',
        'Coussin Triskell Premium',
        'Photo de Coussin Triskell Premium'
    ),
    (
        '/img/photo/coussin_triskell_bio.jpg',
        'Coussin Triskell Bio',
        'Photo de Coussin Triskell Bio'
    ),
    (
        '/img/photo/lampe_temp_te_de_saint_malo.jpg',
        'Lampe Tempête de Saint-Malo',
        'Photo de Lampe Tempête de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_artisanal.jpg',
        'Coussin Triskell Artisanal',
        'Photo de Coussin Triskell Artisanal'
    ),
    (
        '/img/photo/bol_e___cidre_de_saint_malo.jpg',
        'Bolée à Cidre de Saint-Malo',
        'Photo de Bolée à Cidre de Saint-Malo'
    ),
    (
        '/img/photo/caramels_durable.jpg',
        'Caramels Durable',
        'Photo de Caramels Durable'
    ),
    (
        '/img/photo/lampe_temp_te_local.jpg',
        'Lampe Tempête Local',
        'Photo de Lampe Tempête Local'
    ),
    (
        '/img/photo/bol_e___cidre_artisanal.jpg',
        'Bolée à Cidre Artisanal',
        'Photo de Bolée à Cidre Artisanal'
    ),
    (
        '/img/photo/bonnet_miki_traditionnel.jpg',
        'Bonnet Miki Traditionnel',
        'Photo de Bonnet Miki Traditionnel'
    ),
    (
        '/img/photo/bonnet_miki_premium.jpg',
        'Bonnet Miki Premium',
        'Photo de Bonnet Miki Premium'
    ),
    (
        '/img/photo/caramels_de_carnac.jpg',
        'Caramels de Carnac',
        'Photo de Caramels de Carnac'
    ),
    (
        '/img/photo/marini_re_premium.jpg',
        'Marinière Premium',
        'Photo de Marinière Premium'
    ),
    (
        '/img/photo/pull_marin_de_quimper.jpg',
        'Pull Marin de Quimper',
        'Photo de Pull Marin de Quimper'
    ),
    (
        '/img/photo/cir__jaune_de_vannes.jpg',
        'Ciré Jaune de Vannes',
        'Photo de Ciré Jaune de Vannes'
    ),
    (
        '/img/photo/lampe_temp_te_authentique.jpg',
        'Lampe Tempête Authentique',
        'Photo de Lampe Tempête Authentique'
    ),
    (
        '/img/photo/bonnet_miki_de_concarneau.jpg',
        'Bonnet Miki de Concarneau',
        'Photo de Bonnet Miki de Concarneau'
    ),
    (
        '/img/photo/marini_re_authentique.jpg',
        'Marinière Authentique',
        'Photo de Marinière Authentique'
    ),
    (
        '/img/photo/bracelet_ancre_artisanal.jpg',
        'Bracelet Ancre Artisanal',
        'Photo de Bracelet Ancre Artisanal'
    ),
    (
        '/img/photo/lampe_temp_te_de_vannes.jpg',
        'Lampe Tempête de Vannes',
        'Photo de Lampe Tempête de Vannes'
    ),
    (
        '/img/photo/pull_marin_de_carnac.jpg',
        'Pull Marin de Carnac',
        'Photo de Pull Marin de Carnac'
    ),
    (
        '/img/photo/coussin_triskell_fait_main.jpg',
        'Coussin Triskell Fait main',
        'Photo de Coussin Triskell Fait main'
    ),
    (
        '/img/photo/galettes_artisanal.jpg',
        'Galettes Artisanal',
        'Photo de Galettes Artisanal'
    ),
    (
        '/img/photo/bol_breton_bio.jpg',
        'Bol Breton Bio',
        'Photo de Bol Breton Bio'
    );

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO
    _represente_produit (id_image, id_produit)
VALUES (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 6),
    (10, 8),
    (11, 7),
    (12, 9),
    (13, 10),
    (14, 11),
    (15, 12),
    (16, 13),
    (17, 14),
    (18, 15),
    (19, 16),
    (20, 17),
    (21, 18),
    (22, 19),
    (23, 20),
    (24, 21),
    (25, 22),
    (26, 23),
    (27, 24),
    (28, 25),
    (29, 26),
    (30, 27),
    (31, 28),
    (32, 29),
    (33, 30),
    (34, 31),
    (35, 32),
    (36, 33),
    (37, 34),
    (38, 35),
    (39, 36),
    (40, 37),
    (41, 38),
    (42, 39),
    (43, 40),
    (44, 41),
    (45, 42),
    (46, 43),
    (47, 44),
    (48, 45),
    (49, 46),
    (50, 47),
    (51, 48),
    (52, 49),
    (53, 50),
    (54, 51),
    (55, 52),
    (56, 53),
    (57, 54),
    (58, 55),
    (59, 56),
    (60, 57),
    (61, 58),
    (62, 59),
    (63, 60),
    (64, 61),
    (65, 62),
    (66, 63),
    (67, 64),
    (68, 65),
    (69, 66),
    (70, 67),
    (71, 68),
    (72, 69),
    (73, 70),
    (74, 71),
    (75, 72),
    (76, 73),
    (77, 74),
    (78, 75),
    (79, 76),
    (80, 77),
    (81, 78),
    (82, 79),
    (83, 80),
    (84, 81),
    (85, 82),
    (86, 83),
    (87, 84),
    (88, 85),
    (89, 86),
    (90, 87),
    (91, 88),
    (92, 89),
    (93, 90),
    (94, 91),
    (95, 92),
    (96, 93),
    (97, 94),
    (98, 95),
    (99, 96),
    (100, 97),
    (101, 98),
    (102, 99),
    (103, 100),
    (104, 101),
    (105, 102),
    (106, 103),
    (107, 104),
    (108, 105);

-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO
    _represente_compte (id_image, id_compte)
VALUES (6, 4),
    (7, 5),
    (8, 2),
    (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO
    _fait_partie_de (id_produit, id_categorie)
VALUES (1, 1),
    (1, 7),
    (2, 1),
    (2, 7),
    (3, 2),
    (3, 8),
    (4, 2),
    (4, 8),
    (5, 2),
    (5, 9),
    (6, 1),
    (6, 3),
    (7, 3),
    (8, 1),
    (8, 3),
    (8, 5),
    (9, 5),
    (9, 10),
    (10, 1),
    (10, 7),
    (11, 5),
    (12, 2),
    (12, 8),
    (13, 6),
    (14, 5),
    (15, 1),
    (15, 7),
    (16, 1),
    (16, 7),
    (17, 2),
    (17, 8),
    (18, 5),
    (19, 1),
    (19, 7),
    (20, 10),
    (21, 5),
    (22, 1),
    (22, 3),
    (23, 2),
    (23, 8),
    (24, 4),
    (24, 5),
    (25, 1),
    (25, 3),
    (26, 2),
    (26, 8),
    (27, 2),
    (27, 3),
    (27, 8),
    (28, 4),
    (29, 2),
    (29, 3),
    (30, 2),
    (30, 3),
    (31, 2),
    (31, 8),
    (31, 9),
    (32, 3),
    (33, 2),
    (33, 8),
    (33, 9),
    (34, 3),
    (35, 3),
    (36, 3),
    (37, 2),
    (37, 3),
    (38, 4),
    (39, 2),
    (39, 3),
    (40, 2),
    (40, 3),
    (41, 2),
    (41, 3),
    (41, 8),
    (42, 2),
    (42, 8),
    (42, 9),
    (43, 4),
    (44, 4),
    (45, 2),
    (45, 8),
    (46, 4),
    (47, 2),
    (47, 8),
    (48, 2),
    (48, 8),
    (49, 2),
    (49, 8),
    (49, 9),
    (50, 4),
    (51, 4),
    (52, 3),
    (53, 4),
    (54, 4),
    (55, 2),
    (55, 3),
    (56, 2),
    (56, 8),
    (57, 3),
    (58, 4),
    (59, 3),
    (60, 4),
    (61, 3),
    (62, 2),
    (62, 8),
    (62, 9),
    (63, 2),
    (63, 8),
    (64, 3),
    (65, 4),
    (66, 3),
    (67, 2),
    (67, 8),
    (67, 9),
    (68, 3),
    (69, 3),
    (70, 3),
    (71, 2),
    (71, 8),
    (72, 3),
    (73, 3),
    (74, 2),
    (74, 8),
    (74, 9),
    (75, 2),
    (75, 8),
    (76, 4),
    (77, 4),
    (78, 4),
    (79, 4),
    (80, 2),
    (80, 8),
    (81, 4),
    (82, 3),
    (83, 4),
    (84, 4),
    (85, 4),
    (86, 4),
    (87, 4),
    (88, 4),
    (89, 4),
    (90, 4),
    (91, 2),
    (91, 3),
    (91, 8),
    (92, 2),
    (92, 3),
    (92, 8),
    (93, 4),
    (94, 2),
    (94, 8),
    (94, 9),
    (95, 2),
    (95, 8),
    (96, 2),
    (96, 8),
    (96, 9),
    (97, 4),
    (98, 2),
    (98, 3),
    (98, 8),
    (99, 2),
    (99, 8),
    (99, 9),
    (100, 3),
    (101, 4),
    (102, 2),
    (102, 8),
    (103, 4),
    (104, 4),
    (105, 4);

-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO
    _est_dote_de (id_produit, code_hexa)
VALUES (1, '#000000'),
    (1, '#FFFFFF'),
    (2, '#808080'),
    (3, '#0000FF'),
    (3, '#FF0000'),
    (3, '#00FF00'),
    (4, '#0000FF'),
    (4, '#000000'),
    (5, '#FF0000'),
    (5, '#FFFFFF'),
    (6, '#000000'),
    (7, '#808080'),
    (8, '#000000'),
    (9, '#0000FF'),
    (9, '#FF0000'),
    (10, '#808080'),
    (11, '#FFFFFF'),
    (12, '#000000'),
    (12, '#8B4513'),
    (14, '#EE82EE'),
    (14, '#87CEEB'),
    (15, '#000000'),
    (16, '#000000'),
    (16, '#FFFFFF'),
    (17, '#808080'),
    (17, '#000000'),
    (18, '#FFFFFF'),
    (18, '#000000'),
    (19, '#000000'),
    (20, '#FFFFFF'),
    (20, '#000000'),
    (21, '#0000FF'),
    (21, '#FF0000'),
    (22, '#808080'),
    (23, '#000000'),
    (23, '#8B4513'),
    (24, '#87CEEB'),
    (24, '#32CD32'),
    (25, '#000000'),
    (25, '#FF0000'),
    (26, '#8B4513'),
    (27, '#0000FF'),
    (28, '#FF0000'),
    (29, '#8B4513'),
    (30, '#00FF00'),
    (31, '#000000'),
    (32, '#8B4513'),
    (33, '#87CEEB'),
    (34, '#FFFFFF'),
    (35, '#FFFFFF'),
    (36, '#EE82EE'),
    (37, '#FFFFFF'),
    (38, '#0000FF'),
    (39, '#0000FF'),
    (40, '#000000'),
    (41, '#000000'),
    (42, '#FFFFFF'),
    (43, '#8B4513'),
    (44, '#87CEEB'),
    (45, '#87CEEB'),
    (46, '#32CD32'),
    (47, '#87CEEB'),
    (48, '#00FF00'),
    (49, '#FFA500'),
    (50, '#EE82EE'),
    (51, '#FF0000'),
    (52, '#FFFF00'),
    (53, '#FFFFFF'),
    (54, '#0000FF'),
    (55, '#FFFFFF'),
    (56, '#808080'),
    (57, '#00FF00'),
    (58, '#FFFF00'),
    (59, '#00FF00'),
    (60, '#FFA500'),
    (61, '#00FF00'),
    (62, '#FFFFFF'),
    (63, '#00FF00'),
    (64, '#87CEEB'),
    (65, '#EE82EE'),
    (66, '#FFFF00'),
    (67, '#808080'),
    (68, '#FFA500'),
    (69, '#00FF00'),
    (70, '#32CD32'),
    (71, '#0000FF'),
    (72, '#00FF00'),
    (73, '#8B4513'),
    (74, '#FFA500'),
    (75, '#32CD32'),
    (76, '#87CEEB'),
    (77, '#FFFF00'),
    (78, '#0000FF'),
    (79, '#8B4513'),
    (80, '#0000FF'),
    (81, '#EE82EE'),
    (82, '#8B4513'),
    (83, '#FFFF00'),
    (84, '#8B4513'),
    (85, '#FFFF00'),
    (86, '#32CD32'),
    (87, '#EE82EE'),
    (88, '#0000FF'),
    (89, '#EE82EE'),
    (90, '#FFFFFF'),
    (91, '#000000'),
    (92, '#FFFFFF'),
    (93, '#808080'),
    (94, '#808080'),
    (95, '#00FF00'),
    (96, '#0000FF'),
    (97, '#EE82EE'),
    (98, '#000000'),
    (99, '#808080'),
    (100, '#808080'),
    (101, '#0000FF'),
    (102, '#87CEEB'),
    (103, '#FFA500'),
    (104, '#0000FF'),
    (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO
    _seuil_alerte (nb_seuil, message_seuil)
VALUES (
        10,
        'Stock faible - Envisager un réapprovisionnement'
    ),
    (
        5,
        'Stock critique - Réapprovisionnement urgent'
    ),
    (
        3,
        'Rupture imminente - Commander immédiatement'
    ),
    (
        20,
        'Stock normal - Surveillance recommandée'
    ),
    (
        1,
        'Rupture de stock - Produit indisponible'
    );

INSERT INTO
    _adresse (
        id_compte,
        a_numero,
        a_adresse,
        a_ville,
        a_code_postal,
        a_pays
    )
VALUES (
        4,
        13,
        'rue du Pillard',
        'Rennes',
        35590,
        'France'
    );

-- 18. PANIERS/COMMANDES
INSERT INTO
    _panier_commande (id_client, timestamp_commande)
VALUES (1, '2025-11-01 10:30:00'),
    (2, '2025-11-02 14:45:00'),
    (3, '2025-11-03 09:15:00'),
    (1, NULL),
    (4, '2025-11-04 16:20:00'),
    (6, '2025-11-05 11:00:00'),
    (2, NULL),
    (5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO
    _contient (
        id_panier,
        id_produit,
        quantite,
        prix_unitaire,
        remise_unitaire,
        frais_de_port,
        TVA
    )
VALUES (
        1,
        1,
        1,
        599.99,
        0.0,
        5.99,
        20.0
    ),
    (
        1,
        6,
        1,
        149.99,
        0.0,
        5.99,
        20.0
    ),
    (
        2,
        3,
        2,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        2,
        4,
        1,
        49.99,
        0.0,
        4.99,
        20.0
    ),
    (
        3,
        2,
        1,
        899.99,
        0.0,
        9.99,
        20.0
    ),
    (
        4,
        7,
        1,
        69.99,
        0.0,
        6.99,
        20.0
    ),
    (
        5,
        5,
        1,
        39.99,
        0.0,
        4.99,
        20.0
    ),
    (
        5,
        8,
        1,
        199.99,
        0.0,
        3.99,
        20.0
    ),
    (
        6,
        9,
        2,
        89.99,
        0.0,
        5.99,
        20.0
    ),
    (
        7,
        10,
        1,
        299.99,
        0.0,
        7.99,
        20.0
    ),
    (
        8,
        11,
        1,
        29.99,
        0.0,
        4.99,
        20.0
    ),
    (
        8,
        13,
        1,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        8,
        14,
        1,
        34.99,
        0.0,
        5.99,
        20.0
    );

-- 20. FACTURES
INSERT INTO
    _facture (
        id_panier,
        id_adresse,
        f_total_ht,
        f_total_remise,
        f_total_ttc
    )
VALUES (1, 1, 755.98, 0.0, 907.18),
    (2, 1, 103.96, 0.0, 124.75),
    (3, 1, 909.98, 0.0, 1091.98),
    (5, 1, 248.97, 0.0, 298.76),
    (6, 1, 185.97, 0.0, 223.16),
    (8, 1, 95.96, 0.0, 115.15);

-- 21. PAIEMENTS
INSERT INTO
    _paiement (
        id_facture,
        mode_paiement,
        numero_carte,
        mois_annee_expiration,
        cryptogramme_carte,
        timestamp_paiement
    )
VALUES (
        1,
        'CB',
        '1234567890123456',
        '12/27',
        '123',
        '2025-11-01 10:35:00'
    ),
    (
        2,
        'CB',
        '6543210987654321',
        '06/26',
        '456',
        '2025-11-02 14:50:00'
    ),
    (
        3,
        'CB',
        '1111222233334444',
        '03/28',
        '789',
        '2025-11-03 09:20:00'
    ),
    (
        4,
        'CB',
        '9999888877776666',
        '09/27',
        '321',
        '2025-11-04 16:25:00'
    ),
    (
        5,
        'CB',
        '5555666677778888',
        '11/26',
        '654',
        '2025-11-05 11:05:00'
    ),
    (
        6,
        'CB',
        '4444333322221111',
        '08/27',
        '987',
        '2025-11-06 13:35:00'
    );

-- 22. LIVRAISONS
INSERT INTO
    _livraison (
        id_facture,
        date_livraison,
        etat_livraison
    )
VALUES (1, '2025-11-05', 'Livré'),
    (2, '2025-11-06', 'Livré'),
    (3, '2025-11-08', 'En transit'),
    (4, NULL, 'En préparation'),
    (5, '2025-11-09', 'Livré'),
    (6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO
    _definie_pour (id_seuil, id_compte)
VALUES (1, 2),
    (2, 2),
    (3, 2),
    (4, 2),
    (5, 2),
    (1, 3),
    (2, 3),
    (3, 3),
    (5, 3),
    (1, 10),
    (2, 10),
    (3, 10),
    (4, 10),
    (5, 10),
    (5, 1);

-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;

UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;

UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;

UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;

UPDATE cobrec1._commentaire SET a_note = 0.0;
----------- WbStatement -----------
##sqlwb.pos=97361
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;

CREATE SCHEMA cobrec1;

SET SCHEMA 'cobrec1';

-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (
        civilite IN (
            'M.',
            'Mme',
            'Inconnu',
            'Ne souhaite pas s''exprimer',
            'Autre'
        )
    ),
    CONSTRAINT verif_compte_email CHECK (
        email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'
    ),
    CONSTRAINT verif_compte_num_telephone CHECK (
        num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$'
    )
);

ALTER TABLE ONLY cobrec1._compte
ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11, 2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (
        type_couleur IN (
            'Vert',
            'Jaune',
            'Rouge',
            'Noir',
            'Blanc',
            'Bleu',
            'Violet',
            'Orange',
            'Gris',
            'Marron'
        )
    )
);

ALTER TABLE ONLY cobrec1._couleur
ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4, 1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (
        montant_TVA >= 0.00
        AND montant_TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11, 2) DEFAULT 0.0,
    p_volume numeric(11, 2) DEFAULT 0.0,
    p_frais_de_port numeric(11, 2) DEFAULT 0.0,
    p_prix numeric(11, 2) NOT NULL,
    p_note numeric(2, 1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (
        p_note >= 0
        AND p_note <= 5
    ),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (
        p_statut IN (
            'Ébauche',
            'En ligne',
            'Hors ligne',
            'Supprimé'
        )
    ),
    CONSTRAINT verif_produit_origine CHECK (
        p_origine IN (
            'Inconnu',
            'Bretagne',
            'France',
            'UE',
            'Hors UE'
        )
    )
);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) REFERENCES cobrec1._vendeur (id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) REFERENCES cobrec1._TVA (id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5, 2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (
        reduction_pourcentage >= 0.00
        AND reduction_pourcentage <= 100.00
    ),
    /*CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_reduction_fin CHECK (
        reduction_fin > reduction_debut
    )
);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    /*CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_promotion_fin CHECK (
        promotion_fin > promotion_debut
    )
);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11, 2) DEFAULT 0.0,
    f_total_remise numeric(11, 2) DEFAULT 0.0,
    f_total_ttc numeric(11, 2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) REFERENCES cobrec1._adresse (id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2, 1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (
        vote_type IN ('like', 'dislike')
    )
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2, 1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (
        a_note IN (
            NULL,
            0.0,
            0.5,
            1.0,
            1.5,
            2.0,
            2.5,
            3.0,
            3.5,
            4.0,
            4.5,
            5.0
        )
    )
);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) REFERENCES cobrec1._livraison (id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison, id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (
        type_signalement IN (
            'signale_avis',
            'signale_compte',
            'signale_produit'
        )
    )
);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11, 2) NOT NULL,
    remise_unitaire numeric(11, 2) DEFAULT 0.0,
    frais_de_port numeric(11, 2) DEFAULT 0.0,
    TVA numeric(4, 1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (
        TVA >= 0.00
        AND TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
-- CREATE TABLE cobrec1._represente_promotion (
--     id_image integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image)
--             REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) REFERENCES cobrec1._categorie_produit (id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) REFERENCES cobrec1._couleur (code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction)
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) REFERENCES cobrec1._seuil_alerte (id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();

CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

CREATE FUNCTION mise_sur_marche_produit_insert()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche_insert
AFTER INSERT on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit_insert();

CREATE FUNCTION update_p_modif_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_modif = OLD.p_modif) THEN
        NEW.p_modif = CURRENT_TIMESTAMP;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_update_p_modif_produit
BEFORE UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE update_p_modif_produit();

CREATE FUNCTION produit_deja_en_reduction_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_insert
BEFORE INSERT on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_insert();

CREATE FUNCTION produit_deja_en_reduction_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_update
BEFORE UPDATE on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_update();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO
    _compte (
        nom,
        prenom,
        email,
        num_telephone,
        mdp,
        etat_A2F,
        nb_fois_signale,
        nb_signalements_avis,
        nb_cpts_signales,
        nb_avis_signales
    )
VALUES (
        'Maeleau',
        'Le Hyver',
        'admin@cobrec.fr',
        '0601020304',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Lopicier',
        'Mallo',
        'vendeur1@example.com',
        '0612345678',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Elouard',
        'Jean-Jacques',
        'vendeur2@shop.fr',
        '0623456789',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        1,
        0,
        0,
        0
    ),
    (
        'Jean',
        'Dupont',
        'client1@gmail.com',
        '0634567890',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        1,
        0,
        0
    ),
    (
        'Marie',
        'Martin',
        'client2@yahoo.fr',
        '0645678901',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        1,
        0
    ),
    (
        'Pierre',
        'Durand',
        'client3@outlook.com',
        '0656789012',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Sophie',
        'Bernard',
        'client4@free.fr',
        '0667890123',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Lucas',
        'Petit',
        'client5@orange.fr',
        '0678901234',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Emma',
        'Lefebvre',
        'client6@wanadoo.fr',
        '0689012345',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Martinière',
        'Yvili',
        'vendeur3@boutique.fr',
        '0690123456',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    );

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO
    _vendeur (
        id_compte,
        SIREN,
        raison_sociale,
        denomination,
        nb_produits_crees
    )
VALUES (
        2,
        '123456789',
        'TechStore SARL',
        'TechStore',
        5
    ),
    (
        3,
        '987654321',
        'FashionHub SAS',
        'FashionHub',
        3
    ),
    (
        10,
        '456789123',
        'SportPro EURL',
        'SportPro',
        2
    );

-- 4. CLIENTS
INSERT INTO
    _client (
        id_compte,
        c_pseudo,
        c_nb_produits_achetes,
        c_depense_totale,
        c_cloture,
        c_datenaissance
    )
VALUES (
        4,
        'jdupont',
        2,
        907.18,
        FALSE,
        '1985-03-15'
    ),
    (
        5,
        'mmartin',
        3,
        124.75,
        FALSE,
        '1990-07-22'
    ),
    (
        6,
        'pdurand',
        1,
        1091.98,
        FALSE,
        '1988-11-10'
    ),
    (
        7,
        'sbernard',
        2,
        298.76,
        FALSE,
        '1995-05-30'
    ),
    (
        8,
        'lpetit',
        0,
        0.0,
        FALSE,
        '2000-01-18'
    ),
    (
        9,
        'elefebvre',
        1,
        179.98,
        FALSE,
        '1992-09-25'
    );

-- 5. ADRESSES
INSERT INTO
    _adresse (
        id_compte,
        a_adresse,
        a_ville,
        a_code_postal,
        a_complement
    )
VALUES (
        4,
        '15 rue de la Paix',
        'Paris',
        '75001',
        'Apt 5'
    ),
    (
        5,
        '23 avenue des Champs',
        'Lyon',
        '69001',
        NULL
    ),
    (
        6,
        '8 boulevard Victor Hugo',
        'Marseille',
        '13001',
        'Bâtiment B'
    ),
    (
        7,
        '42 rue du Commerce',
        'Toulouse',
        '31000',
        NULL
    ),
    (
        8,
        '67 place de la République',
        'Nice',
        '06000',
        '3ème étage'
    ),
    (
        9,
        '91 rue Principale',
        'Bordeaux',
        '33000',
        NULL
    ),
    (
        2,
        '12 avenue du Commerce',
        'Paris',
        '75015',
        'Entrepôt A'
    ),
    (
        3,
        '55 rue de la Mode',
        'Lyon',
        '69002',
        NULL
    ),
    (
        10,
        '78 boulevard du Sport',
        'Marseille',
        '13008',
        'Zone industrielle'
    );

-- 6. COULEURS
INSERT INTO
    _couleur (code_hexa, nom, type_couleur)
VALUES (
        '#FF0000',
        'Rouge vif',
        'Rouge'
    ),
    (
        '#0000FF',
        'Bleu marine',
        'Bleu'
    ),
    ('#000000', 'Noir', 'Noir'),
    (
        '#FFFFFF',
        'Blanc pur',
        'Blanc'
    ),
    (
        '#00FF00',
        'Vert émeraude',
        'Vert'
    ),
    (
        '#FFFF00',
        'Jaune citron',
        'Jaune'
    ),
    ('#FFA500', 'Orange', 'Orange'),
    ('#808080', 'Gris', 'Gris'),
    (
        '#8B4513',
        'Marron chocolat',
        'Marron'
    ),
    ('#EE82EE', 'Violet', 'Violet'),
    (
        '#87CEEB',
        'Bleu ciel',
        'Bleu'
    ),
    (
        '#32CD32',
        'Vert lime',
        'Vert'
    );

-- 7. CATÉGORIES
INSERT INTO
    _categorie_produit (nom_categorie)
VALUES ('Électronique'),
    ('Vêtements'),
    ('Accessoires'),
    ('Maison'),
    ('Sport'),
    ('Livres'),
    ('Informatique'),
    ('Mode homme'),
    ('Mode femme'),
    ('Chaussures');

-- 8. TVA
INSERT INTO
    _TVA (montant_TVA, libelle_TVA)
VALUES (20.0, 'TVA normale'),
    (10.0, 'TVA intermédiaire'),
    (5.5, 'TVA réduite'),
    (2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO
    _produit (
        id_TVA,
        id_vendeur,
        p_nom,
        p_description,
        p_prix,
        p_stock,
        p_statut,
        p_origine,
        p_poids,
        p_volume,
        p_frais_de_port,
        p_note,
        p_nb_ventes
    )
VALUES (
        1,
        1,
        'Smartphone XPro',
        'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G',
        599.99,
        35,
        'En ligne',
        'Bretagne',
        0.180,
        0.01,
        5.99,
        4.3,
        15
    ),
    (
        1,
        1,
        'Ordinateur portable Ultra',
        'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7',
        899.99,
        22,
        'En ligne',
        'Bretagne',
        2.5,
        0.03,
        9.99,
        4.0,
        8
    ),
    (
        1,
        2,
        'T-shirt coton bio',
        'T-shirt 100% coton biologique, coupe regular, diverses couleurs',
        24.99,
        58,
        'En ligne',
        'Bretagne',
        0.15,
        0.5,
        3.99,
        5.0,
        42
    ),
    (
        1,
        2,
        'Jean slim',
        'Jean coupe slim stretch, denim premium',
        49.99,
        62,
        'En ligne',
        'Bretagne',
        1.00,
        0.01,
        4.99,
        NULL,
        18
    ),
    (
        1,
        2,
        'Robe d été',
        'Robe légère et fluide pour l été, motifs floraux',
        39.99,
        48,
        'En ligne',
        'Bretagne',
        0.30,
        0.08,
        4.99,
        NULL,
        12
    ),
    (
        2,
        1,
        'Casque audio Bluetooth',
        'Casque sans fil avec réduction de bruit active, autonomie 30h',
        149.99,
        15,
        'En ligne',
        'Bretagne',
        0.25,
        0.02,
        5.99,
        4.5,
        25
    ),
    (
        1,
        2,
        'Sac à dos urbain',
        'Sac à dos pour ordinateur portable, compartiments multiples, imperméable',
        69.99,
        35,
        'En ligne',
        'Bretagne',
        0.60,
        0.15,
        6.99,
        NULL,
        10
    ),
    (
        1,
        1,
        'Montre connectée',
        'Montre sport avec GPS, cardiofréquencemètre, étanche 50m',
        199.99,
        15,
        'En ligne',
        'Bretagne',
        0.05,
        0.01,
        3.99,
        4.7,
        20
    ),
    (
        1,
        3,
        'Chaussures running',
        'Chaussures de course avec amorti premium, semelle respirante',
        89.99,
        54,
        'En ligne',
        'Bretagne',
        0.40,
        0.08,
        5.99,
        4.2,
        16
    ),
    (
        1,
        1,
        'Tablette 10 pouces',
        'Tablette Android, écran Full HD, 64Go, stylet inclus',
        299.99,
        16,
        'En ligne',
        'Bretagne',
        0.50,
        0.02,
        7.99,
        3.8,
        9
    ),
    (
        1,
        3,
        'Ballon de football',
        'Ballon officiel en cuir synthétique, taille 5',
        29.99,
        85,
        'En ligne',
        'Bretagne',
        0.45,
        0.06,
        4.99,
        4.6,
        35
    ),
    (
        1,
        2,
        'Veste en cuir',
        'Veste en cuir véritable, coupe motard, doublure intérieure',
        189.99,
        15,
        'En ligne',
        'Bretagne',
        1.20,
        0.01,
        8.99,
        NULL,
        5
    ),
    (
        3,
        1,
        'Livre cuisine française',
        'Recettes traditionnelles de cuisine française, 300 pages',
        24.99,
        28,
        'En ligne',
        'Bretagne',
        0.80,
        0.03,
        3.99,
        4.8,
        22
    ),
    (
        1,
        3,
        'Tapis de yoga',
        'Tapis antidérapant, épaisseur 6mm, avec sac de transport',
        34.99,
        52,
        'En ligne',
        'Bretagne',
        1.10,
        0.02,
        5.99,
        4.4,
        28
    ),
    (
        1,
        1,
        'Clavier mécanique RGB',
        'Clavier gamer avec rétroéclairage RGB, switches mécaniques',
        79.99,
        29,
        'En ligne',
        'Bretagne',
        0.90,
        0.04,
        5.99,
        4.1,
        11
    ),
    (
        1,
        1,
        'Console NextGen',
        'Console de jeu dernière génération, 1To SSD, 4K HDR',
        499.99,
        0,
        'Hors ligne',
        'France',
        3.5,
        0.02,
        14.99,
        4.8,
        25
    ),
    (
        1,
        2,
        'Sweat à capuche premium',
        'Sweat-shirt en coton bio, coupe oversize, poche kangourou',
        59.99,
        0,
        'Hors ligne',
        'France',
        0.70,
        0.03,
        5.99,
        4.4,
        18
    ),
    (
        1,
        3,
        'Raquette de tennis pro',
        'Raquette carbone, tension 25kg, grip confort',
        129.99,
        0,
        'Hors ligne',
        'France',
        0.35,
        0.02,
        6.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Écran gaming 4K 27"',
        'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms',
        349.99,
        0,
        'Hors ligne',
        'France',
        5.2,
        0.35,
        19.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Baskets limited edition',
        'Baskets cuir véritable, édition limitée, semelle comfort',
        179.99,
        0,
        'Hors ligne',
        'France',
        0.80,
        0.06,
        7.99,
        4.9,
        65
    ),
    (
        1,
        3,
        'Vélo de route carbone',
        'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses',
        1299.99,
        0,
        'Hors ligne',
        'UE',
        8.5,
        0.15,
        29.99,
        4.8,
        25
    ),
    (
        1,
        1,
        'Drone professionnel 4K',
        'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min',
        899.99,
        0,
        'Hors ligne',
        'UE',
        1.2,
        0.02,
        12.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Manteau d hiver imperméable',
        'Manteau longueur genoux, doublure polaire, coupe-vent',
        179.99,
        0,
        'Hors ligne',
        'UE',
        1.5,
        0.01,
        8.99,
        4.4,
        65
    ),
    (
        1,
        3,
        'Tente 4 places',
        'Tente familiale, double toit, arceaux aluminium, imperméable',
        249.99,
        0,
        'Hors ligne',
        'Hors UE',
        4.8,
        0.08,
        19.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Enceinte Bluetooth waterproof',
        'Enceinte portable, autonomie 24h, résistance IP67',
        129.99,
        0,
        'Hors ligne',
        'Hors UE',
        0.9,
        0.05,
        6.99,
        4.9,
        95
    ),
    (
        2,
        1,
        'Pull Marin de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.',
        36.37,
        31,
        'En ligne',
        'Bretagne',
        2.06,
        0.45,
        5.78,
        4.4,
        12
    ),
    (
        1,
        1,
        'Bonnet Miki de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.',
        121.37,
        6,
        'Hors ligne',
        'Bretagne',
        2.3,
        0.09,
        8.8,
        4.3,
        60
    ),
    (
        2,
        3,
        'Galettes Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        147.92,
        142,
        'En ligne',
        'Bretagne',
        0.46,
        0.46,
        5.71,
        4.3,
        97
    ),
    (
        1,
        3,
        'Écharpe Rayée Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        173.77,
        102,
        'En ligne',
        'Bretagne',
        0.91,
        0.32,
        8.28,
        4.4,
        58
    ),
    (
        1,
        2,
        'Écharpe Rayée de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.',
        197.02,
        168,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.12,
        7.92,
        4.8,
        19
    ),
    (
        4,
        2,
        'Ciré Navy de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        104.35,
        169,
        'En ligne',
        'Bretagne',
        1.43,
        0.14,
        7.22,
        4.6,
        72
    ),
    (
        4,
        3,
        'Bracelet Ancre Fait main',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        172.75,
        44,
        'Hors ligne',
        'Bretagne',
        1.92,
        0.4,
        8.8,
        4.1,
        102
    ),
    (
        1,
        3,
        'Marinière Local',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        74.29,
        80,
        'Hors ligne',
        'Bretagne',
        1.36,
        0.23,
        13.58,
        4.9,
        72
    ),
    (
        3,
        1,
        'Bracelet Ancre de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.',
        40.53,
        140,
        'En ligne',
        'Bretagne',
        2.76,
        0.3,
        9.4,
        4.1,
        97
    ),
    (
        3,
        3,
        'Pendentif Hermine Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        164.23,
        199,
        'Hors ligne',
        'Bretagne',
        1.64,
        0.07,
        10.94,
        4.9,
        47
    ),
    (
        1,
        3,
        'Sac Voile de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.',
        136.95,
        100,
        'En ligne',
        'Bretagne',
        1.37,
        0.26,
        6.09,
        4.2,
        91
    ),
    (
        2,
        3,
        'Écharpe Rayée de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        21.13,
        22,
        'Hors ligne',
        'Bretagne',
        2.73,
        0.43,
        5.64,
        4.2,
        129
    ),
    (
        1,
        2,
        'Coussin Triskell de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        134.55,
        95,
        'Hors ligne',
        'Bretagne',
        1.33,
        0.24,
        11.56,
        4.7,
        30
    ),
    (
        1,
        3,
        'Écharpe Rayée Authentique',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.',
        36.49,
        51,
        'En ligne',
        'Bretagne',
        0.91,
        0.13,
        13.31,
        4.4,
        145
    ),
    (
        4,
        3,
        'Écharpe Rayée Bio',
        'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.',
        50.4,
        107,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.09,
        5.02,
        4.4,
        121
    ),
    (
        1,
        3,
        'Bonnet Miki Authentique',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        119.47,
        143,
        'En ligne',
        'Bretagne',
        0.28,
        0.16,
        5.45,
        4.5,
        140
    ),
    (
        3,
        1,
        'Ciré Navy de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        187.96,
        150,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.3,
        10.57,
        4.4,
        149
    ),
    (
        1,
        1,
        'Bol Breton Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.',
        66.7,
        85,
        'En ligne',
        'Bretagne',
        2.79,
        0.47,
        5.08,
        4.6,
        149
    ),
    (
        1,
        3,
        'Bol Breton Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        176.18,
        99,
        'Hors ligne',
        'Bretagne',
        0.93,
        0.22,
        9.89,
        4.3,
        140
    ),
    (
        3,
        1,
        'Pull Marin de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.',
        30.23,
        146,
        'En ligne',
        'Bretagne',
        0.55,
        0.15,
        6.9,
        4.3,
        72
    ),
    (
        1,
        1,
        'Affiche Vintage de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        155.74,
        168,
        'En ligne',
        'Bretagne',
        2.94,
        0.09,
        8.98,
        4.7,
        148
    ),
    (
        2,
        3,
        'Vareuse Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        120.09,
        42,
        'En ligne',
        'Bretagne',
        1.35,
        0.03,
        8.28,
        4.9,
        15
    ),
    (
        3,
        2,
        'Pull Marin Bio',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.',
        151.65,
        65,
        'En ligne',
        'Bretagne',
        2.61,
        0.49,
        12.3,
        4.9,
        11
    ),
    (
        1,
        3,
        'Kabig Bio',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.',
        172.27,
        61,
        'En ligne',
        'Bretagne',
        0.68,
        0.46,
        8.15,
        4.8,
        63
    ),
    (
        1,
        2,
        'Phare Miniature Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        62.75,
        169,
        'En ligne',
        'Bretagne',
        1.58,
        0.34,
        12.59,
        4.3,
        12
    ),
    (
        3,
        1,
        'Bol Breton Fait main',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        75.33,
        85,
        'Hors ligne',
        'Bretagne',
        1.37,
        0.49,
        6.04,
        4.9,
        53
    ),
    (
        3,
        3,
        'Bracelet Ancre de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        23.23,
        175,
        'Hors ligne',
        'Bretagne',
        2.77,
        0.32,
        10.97,
        4.1,
        81
    ),
    (
        1,
        2,
        'Caramels de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        135.67,
        102,
        'Hors ligne',
        'Bretagne',
        2.06,
        0.45,
        10.54,
        4.3,
        145
    ),
    (
        3,
        3,
        'Affiche Vintage de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.',
        137.69,
        135,
        'Hors ligne',
        'Bretagne',
        1.47,
        0.45,
        12.16,
        4.2,
        26
    ),
    (
        4,
        2,
        'Écharpe Rayée de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        37.85,
        16,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.24,
        12.65,
        4.1,
        111
    ),
    (
        4,
        3,
        'Vareuse de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        51.36,
        183,
        'Hors ligne',
        'Bretagne',
        1.6,
        0.03,
        7.24,
        4.8,
        121
    ),
    (
        4,
        3,
        'Bracelet Ancre Durable',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.',
        150.55,
        126,
        'En ligne',
        'Bretagne',
        1.41,
        0.38,
        12.56,
        4.3,
        138
    ),
    (
        1,
        2,
        'Lampe Tempête de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        73.48,
        143,
        'Hors ligne',
        'Bretagne',
        0.33,
        0.08,
        8.45,
        4.2,
        59
    ),
    (
        4,
        1,
        'Sac Voile de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.',
        167.42,
        104,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.3,
        11.26,
        4.9,
        102
    ),
    (
        4,
        1,
        'Caramels de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        61.58,
        129,
        'En ligne',
        'Bretagne',
        0.18,
        0.17,
        11.11,
        4.4,
        47
    ),
    (
        4,
        2,
        'Pendentif Hermine de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        35.65,
        123,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.14,
        7.95,
        4.5,
        91
    ),
    (
        2,
        1,
        'Ciré Navy Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.',
        19.84,
        94,
        'En ligne',
        'Bretagne',
        0.75,
        0.04,
        13.62,
        4.0,
        12
    ),
    (
        3,
        1,
        'Vareuse de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        51.2,
        184,
        'En ligne',
        'Bretagne',
        0.84,
        0.19,
        10.45,
        5.0,
        34
    ),
    (
        1,
        2,
        'Pendentif Hermine Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        47.48,
        156,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.32,
        5.92,
        4.8,
        35
    ),
    (
        4,
        1,
        'Galettes de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.',
        89.39,
        130,
        'Hors ligne',
        'Bretagne',
        0.41,
        0.48,
        10.72,
        4.8,
        44
    ),
    (
        2,
        2,
        'Sac Voile Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.',
        148.16,
        73,
        'Hors ligne',
        'Bretagne',
        1.03,
        0.13,
        13.41,
        4.3,
        120
    ),
    (
        1,
        1,
        'Marinière de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.',
        50.09,
        71,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.44,
        11.31,
        4.3,
        7
    ),
    (
        4,
        3,
        'Sac Voile Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        102.77,
        9,
        'Hors ligne',
        'Bretagne',
        0.37,
        0.12,
        11.23,
        4.3,
        99
    ),
    (
        2,
        1,
        'Sac Voile Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        61.2,
        69,
        'Hors ligne',
        'Bretagne',
        0.77,
        0.36,
        7.84,
        4.7,
        52
    ),
    (
        1,
        1,
        'Pendentif Hermine Local',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.',
        167.37,
        80,
        'Hors ligne',
        'Bretagne',
        0.76,
        0.1,
        5.13,
        4.5,
        75
    ),
    (
        1,
        2,
        'Vareuse Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        118.5,
        125,
        'Hors ligne',
        'Bretagne',
        1.49,
        0.18,
        13.69,
        4.3,
        127
    ),
    (
        4,
        2,
        'Pendentif Hermine Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        116.38,
        82,
        'Hors ligne',
        'Bretagne',
        0.35,
        0.13,
        10.02,
        4.4,
        62
    ),
    (
        2,
        1,
        'Pendentif Hermine de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        21.38,
        194,
        'En ligne',
        'Bretagne',
        0.39,
        0.38,
        10.63,
        4.3,
        25
    ),
    (
        2,
        2,
        'Ciré Navy de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.',
        140.29,
        125,
        'En ligne',
        'Bretagne',
        0.94,
        0.12,
        11.36,
        4.7,
        121
    ),
    (
        4,
        1,
        'Pull Marin Authentique',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        181.69,
        41,
        'Hors ligne',
        'Bretagne',
        0.31,
        0.09,
        7.77,
        4.7,
        150
    ),
    (
        1,
        1,
        'Bolée à Cidre Local',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        103.33,
        25,
        'En ligne',
        'Bretagne',
        1.83,
        0.45,
        11.61,
        4.6,
        11
    ),
    (
        4,
        2,
        'Bol Breton de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.14,
        76,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.3,
        10.71,
        4.5,
        28
    ),
    (
        3,
        2,
        'Phare Miniature de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        141.1,
        78,
        'Hors ligne',
        'Bretagne',
        2.02,
        0.21,
        11.84,
        4.0,
        27
    ),
    (
        1,
        1,
        'Caramels Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        112.55,
        110,
        'Hors ligne',
        'Bretagne',
        0.26,
        0.26,
        10.6,
        4.5,
        118
    ),
    (
        4,
        1,
        'Vareuse de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.',
        101.61,
        12,
        'En ligne',
        'Bretagne',
        2.92,
        0.31,
        7.15,
        4.2,
        146
    ),
    (
        2,
        2,
        'Lampe Tempête Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        145.44,
        135,
        'En ligne',
        'Bretagne',
        2.15,
        0.21,
        9.34,
        4.5,
        121
    ),
    (
        4,
        1,
        'Bracelet Ancre de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.',
        159.31,
        111,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.4,
        7.4,
        4.0,
        81
    ),
    (
        2,
        2,
        'Coussin Triskell Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        112.71,
        121,
        'En ligne',
        'Bretagne',
        2.81,
        0.44,
        13.83,
        4.2,
        103
    ),
    (
        1,
        2,
        'Coussin Triskell Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        159.76,
        171,
        'En ligne',
        'Bretagne',
        2.94,
        0.25,
        5.33,
        4.5,
        89
    ),
    (
        1,
        2,
        'Lampe Tempête de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.75,
        44,
        'Hors ligne',
        'Bretagne',
        0.32,
        0.39,
        7.39,
        4.6,
        106
    ),
    (
        1,
        2,
        'Coussin Triskell Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        54.37,
        180,
        'En ligne',
        'Bretagne',
        2.77,
        0.5,
        11.72,
        4.4,
        30
    ),
    (
        2,
        1,
        'Bolée à Cidre de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.',
        20.61,
        96,
        'En ligne',
        'Bretagne',
        1.19,
        0.08,
        9.78,
        4.6,
        51
    ),
    (
        3,
        3,
        'Caramels Durable',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        37.05,
        123,
        'En ligne',
        'Bretagne',
        1.95,
        0.24,
        11.0,
        4.9,
        124
    ),
    (
        2,
        2,
        'Lampe Tempête Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        90.19,
        69,
        'Hors ligne',
        'Bretagne',
        1.42,
        0.16,
        13.99,
        4.9,
        32
    ),
    (
        3,
        1,
        'Bolée à Cidre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        134.41,
        75,
        'Hors ligne',
        'Bretagne',
        0.12,
        0.43,
        12.0,
        5.0,
        132
    ),
    (
        3,
        2,
        'Bonnet Miki Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        180.74,
        170,
        'Hors ligne',
        'Bretagne',
        0.21,
        0.4,
        5.3,
        4.4,
        38
    ),
    (
        4,
        1,
        'Bonnet Miki Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        182.65,
        47,
        'En ligne',
        'Bretagne',
        0.85,
        0.41,
        9.34,
        4.8,
        91
    ),
    (
        3,
        1,
        'Caramels de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        84.57,
        72,
        'En ligne',
        'Bretagne',
        1.66,
        0.23,
        11.06,
        4.7,
        102
    ),
    (
        1,
        1,
        'Marinière Premium',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        51.84,
        21,
        'Hors ligne',
        'Bretagne',
        1.94,
        0.24,
        11.31,
        4.6,
        34
    ),
    (
        1,
        2,
        'Pull Marin de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        35.64,
        121,
        'Hors ligne',
        'Bretagne',
        1.18,
        0.48,
        11.27,
        4.5,
        44
    ),
    (
        4,
        2,
        'Ciré Jaune de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        189.65,
        97,
        'En ligne',
        'Bretagne',
        0.39,
        0.35,
        9.9,
        5.0,
        96
    ),
    (
        1,
        3,
        'Lampe Tempête Authentique',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        122.86,
        10,
        'En ligne',
        'Bretagne',
        0.25,
        0.17,
        13.9,
        4.8,
        57
    ),
    (
        1,
        3,
        'Bonnet Miki de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        159.05,
        157,
        'En ligne',
        'Bretagne',
        0.11,
        0.43,
        6.3,
        4.1,
        69
    ),
    (
        3,
        3,
        'Marinière Authentique',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        12.98,
        72,
        'En ligne',
        'Bretagne',
        0.25,
        0.37,
        9.73,
        4.7,
        126
    ),
    (
        4,
        2,
        'Bracelet Ancre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.',
        181.75,
        173,
        'En ligne',
        'Bretagne',
        1.61,
        0.23,
        13.68,
        4.1,
        127
    ),
    (
        3,
        2,
        'Lampe Tempête de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        38.04,
        37,
        'Hors ligne',
        'Bretagne',
        0.9,
        0.32,
        9.94,
        4.3,
        140
    ),
    (
        3,
        2,
        'Pull Marin de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        177.85,
        110,
        'En ligne',
        'Bretagne',
        1.08,
        0.23,
        8.74,
        4.1,
        114
    ),
    (
        3,
        3,
        'Coussin Triskell Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        27.62,
        29,
        'En ligne',
        'Bretagne',
        2.26,
        0.19,
        6.17,
        4.1,
        148
    ),
    (
        3,
        3,
        'Galettes Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.',
        123.48,
        95,
        'Hors ligne',
        'Bretagne',
        0.4,
        0.26,
        6.39,
        4.5,
        32
    ),
    (
        1,
        1,
        'Bol Breton Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.',
        194.19,
        164,
        'Hors ligne',
        'Bretagne',
        1.88,
        0.32,
        5.24,
        4.9,
        73
    );

-- 10. PROMOTIONS (futures)
INSERT INTO
    _promotion (
        id_produit,
        promotion_debut,
        promotion_fin
    )
VALUES (
        1,
        '2027-12-20 00:00:00',
        '2027-12-25 23:59:00'
    ),
    (
        2,
        '2026-02-01 00:00:00',
        '2026-02-07 23:59:00'
    ),
    (
        3,
        '2026-02-16 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        4,
        '2026-04-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        5,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        6,
        '2026-06-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        7,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 9. RÉDUCTIONS (futures)
INSERT INTO
    _reduction (
        id_produit,
        reduction_pourcentage,
        reduction_debut,
        reduction_fin
    )
VALUES (
        1,
        10.00,
        '2026-01-05 00:00:00',
        '2026-09-19 23:59:00'
    ),
    (
        2,
        15.00,
        '2026-02-15 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        3,
        20.00,
        '2026-01-01 00:00:00',
        '2026-05-15 23:59:00'
    ),
    (
        4,
        25.00,
        '2026-01-20 00:00:00',
        '2026-02-26 23:59:00'
    ),
    (
        5,
        30.00,
        '2026-06-01 00:00:00',
        '2026-06-30 23:59:00'
    ),
    (
        6,
        60.00,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        7,
        55.00,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        8,
        70.00,
        '2026-01-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        9,
        65.00,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 12. IMAGES
INSERT INTO
    _image (i_lien, i_title, i_alt)
VALUES (
        '/img/photo/smartphone_xpro.jpg',
        'Smartphone XPro.jpg',
        'Image du smartphone'
    ),
    (
        '/img/photo/ordinateur_portable_ultra.jpg',
        'Ordinateur portable.jpeg',
        'Image de l ordinateur'
    ),
    (
        '/img/photo/t_shirt_coton_bio.jpg',
        'T-shirt.png',
        'Image du t-shirt'
    ),
    (
        '/img/photo/jean_slim.jpg',
        'Jean.jpg',
        'Image du jean'
    ),
    (
        '/img/photo/casque_audio_bluetooth.jpg',
        'Casque audio.jpg',
        'Image du casque'
    ),
    (
        '/img/photo/avatar_jean.jpg',
        'Avatar Jean.jpeg',
        'Photo de profil Jean'
    ),
    (
        '/img/photo/avatar_marie.jpg',
        'Avatar Marie.jpg',
        'Photo de profil Marie'
    ),
    (
        '/img/photo/logo_techstore.jpg',
        'Logo TechStore.jpg',
        'Logo entreprise TechStore'
    ),
    (
        '/img/photo/logo_fashionhub.jpg',
        'Logo FashionHub.jpg',
        'Logo entreprise FashionHub'
    ),
    (
        '/img/photo/montre_connect_e.jpg',
        'Montre connectée.jpg',
        'Image de la montre'
    ),
    (
        '/img/photo/sac___dos_urbain.jpg',
        'Sac à dos.jpeg',
        'Image du sac'
    ),
    (
        '/img/photo/chaussures_running.jpg',
        'Chaussures running.jpeg',
        'Image des chaussures'
    ),
    (
        '/img/photo/tablette_10_pouces.jpg',
        'Tablette.jpg',
        'Image de la tablette'
    ),
    (
        '/img/photo/ballon_de_football.jpg',
        'Ballon football.jpg',
        'Image du ballon'
    ),
    (
        '/img/photo/veste_en_cuir.jpg',
        'Veste cuir.jpg',
        'Image de la veste'
    ),
    (
        '/img/photo/livre_cuisine_fran_aise.jpg',
        'Livre cuisine.jpeg',
        'Image du livre'
    ),
    (
        '/img/photo/tapis_de_yoga.jpg',
        'Tapis yoga.jpeg',
        'Image du tapis'
    ),
    (
        '/img/photo/clavier_m_canique_rgb.jpg',
        'Clavier.jpg',
        'Image du clavier'
    ),
    (
        '/img/photo/console_nextgen.jpg',
        'Console NextGen.jpg',
        'Image de la console'
    ),
    (
        '/img/photo/sweat___capuche_premium.jpg',
        'Sweat à capuche.jpeg',
        'Image du sweat'
    ),
    (
        '/img/photo/raquette_de_tennis_pro.jpg',
        'Raquette tennis.jpg',
        'Image de la raquette'
    ),
    (
        '/img/photo/_cran_gaming_4k_27_.jpg',
        'Écran 4K.jpeg',
        'Image de l écran'
    ),
    (
        '/img/photo/baskets_limited_edition.jpg',
        'Baskets limited.jpeg',
        'Image des baskets'
    ),
    (
        '/img/photo/v_lo_de_route_carbone.jpg',
        'Vélo route.jpeg',
        'Image du vélo'
    ),
    (
        '/img/photo/drone_professionnel_4k.jpg',
        'Drone 4K.jpg',
        'Image du drone'
    ),
    (
        '/img/photo/manteau_d_hiver_imperm_able.jpg',
        'Manteau hiver.jpeg',
        'Image du manteau'
    ),
    (
        '/img/photo/tente_4_places.jpg',
        'Tente 4 places.jpg',
        'Image de la tente'
    ),
    (
        '/img/photo/enceinte_bluetooth_waterproof.jpg',
        'Enceinte Bluetooth.jpg',
        'Image de l enceinte'
    ),
    (
        '/img/photo/pull_marin_de_saint_malo.jpg',
        'Pull Marin de Saint-Malo',
        'Photo de Pull Marin de Saint-Malo'
    ),
    (
        '/img/photo/bonnet_miki_de_carnac.jpg',
        'Bonnet Miki de Carnac',
        'Photo de Bonnet Miki de Carnac'
    ),
    (
        '/img/photo/galettes_local.jpg',
        'Galettes Local',
        'Photo de Galettes Local'
    ),
    (
        '/img/photo/_charpe_ray_e_fait_main.jpg',
        'Écharpe Rayée Fait main',
        'Photo de Écharpe Rayée Fait main'
    ),
    (
        '/img/photo/_charpe_ray_e_de_brest.jpg',
        'Écharpe Rayée de Brest',
        'Photo de Écharpe Rayée de Brest'
    ),
    (
        '/img/photo/cir__navy_de_concarneau.jpg',
        'Ciré Navy de Concarneau',
        'Photo de Ciré Navy de Concarneau'
    ),
    (
        '/img/photo/bracelet_ancre_fait_main.jpg',
        'Bracelet Ancre Fait main',
        'Photo de Bracelet Ancre Fait main'
    ),
    (
        '/img/photo/marini_re_local.jpg',
        'Marinière Local',
        'Photo de Marinière Local'
    ),
    (
        '/img/photo/bracelet_ancre_de_concarneau.jpg',
        'Bracelet Ancre de Concarneau',
        'Photo de Bracelet Ancre de Concarneau'
    ),
    (
        '/img/photo/pendentif_hermine_fait_main.jpg',
        'Pendentif Hermine Fait main',
        'Photo de Pendentif Hermine Fait main'
    ),
    (
        '/img/photo/sac_voile_de_concarneau.jpg',
        'Sac Voile de Concarneau',
        'Photo de Sac Voile de Concarneau'
    ),
    (
        '/img/photo/_charpe_ray_e_de_saint_malo.jpg',
        'Écharpe Rayée de Saint-Malo',
        'Photo de Écharpe Rayée de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_de_roscoff.jpg',
        'Coussin Triskell de Roscoff',
        'Photo de Coussin Triskell de Roscoff'
    ),
    (
        '/img/photo/_charpe_ray_e_authentique.jpg',
        'Écharpe Rayée Authentique',
        'Photo de Écharpe Rayée Authentique'
    ),
    (
        '/img/photo/_charpe_ray_e_bio.jpg',
        'Écharpe Rayée Bio',
        'Photo de Écharpe Rayée Bio'
    ),
    (
        '/img/photo/bonnet_miki_authentique.jpg',
        'Bonnet Miki Authentique',
        'Photo de Bonnet Miki Authentique'
    ),
    (
        '/img/photo/cir__navy_de_quimper.jpg',
        'Ciré Navy de Quimper',
        'Photo de Ciré Navy de Quimper'
    ),
    (
        '/img/photo/bol_breton_traditionnel.jpg',
        'Bol Breton Traditionnel',
        'Photo de Bol Breton Traditionnel'
    ),
    (
        '/img/photo/bol_breton_premium.jpg',
        'Bol Breton Premium',
        'Photo de Bol Breton Premium'
    ),
    (
        '/img/photo/pull_marin_de_brest.jpg',
        'Pull Marin de Brest',
        'Photo de Pull Marin de Brest'
    ),
    (
        '/img/photo/affiche_vintage_de_dinard.jpg',
        'Affiche Vintage de Dinard',
        'Photo de Affiche Vintage de Dinard'
    ),
    (
        '/img/photo/vareuse_artisanal.jpg',
        'Vareuse Artisanal',
        'Photo de Vareuse Artisanal'
    ),
    (
        '/img/photo/pull_marin_bio.jpg',
        'Pull Marin Bio',
        'Photo de Pull Marin Bio'
    ),
    (
        '/img/photo/kabig_bio.jpg',
        'Kabig Bio',
        'Photo de Kabig Bio'
    ),
    (
        '/img/photo/phare_miniature_fait_main.jpg',
        'Phare Miniature Fait main',
        'Photo de Phare Miniature Fait main'
    ),
    (
        '/img/photo/bol_breton_fait_main.jpg',
        'Bol Breton Fait main',
        'Photo de Bol Breton Fait main'
    ),
    (
        '/img/photo/bracelet_ancre_de_carnac.jpg',
        'Bracelet Ancre de Carnac',
        'Photo de Bracelet Ancre de Carnac'
    ),
    (
        '/img/photo/caramels_de_dinard.jpg',
        'Caramels de Dinard',
        'Photo de Caramels de Dinard'
    ),
    (
        '/img/photo/affiche_vintage_de_vannes.jpg',
        'Affiche Vintage de Vannes',
        'Photo de Affiche Vintage de Vannes'
    ),
    (
        '/img/photo/_charpe_ray_e_de_dinard.jpg',
        'Écharpe Rayée de Dinard',
        'Photo de Écharpe Rayée de Dinard'
    ),
    (
        '/img/photo/vareuse_de_saint_malo.jpg',
        'Vareuse de Saint-Malo',
        'Photo de Vareuse de Saint-Malo'
    ),
    (
        '/img/photo/bracelet_ancre_durable.jpg',
        'Bracelet Ancre Durable',
        'Photo de Bracelet Ancre Durable'
    ),
    (
        '/img/photo/lampe_temp_te_de_quimper.jpg',
        'Lampe Tempête de Quimper',
        'Photo de Lampe Tempête de Quimper'
    ),
    (
        '/img/photo/sac_voile_de_pont_aven.jpg',
        'Sac Voile de Pont-Aven',
        'Photo de Sac Voile de Pont-Aven'
    ),
    (
        '/img/photo/caramels_de_roscoff.jpg',
        'Caramels de Roscoff',
        'Photo de Caramels de Roscoff'
    ),
    (
        '/img/photo/pendentif_hermine_de_saint_malo.jpg',
        'Pendentif Hermine de Saint-Malo',
        'Photo de Pendentif Hermine de Saint-Malo'
    ),
    (
        '/img/photo/cir__navy_artisanal.jpg',
        'Ciré Navy Artisanal',
        'Photo de Ciré Navy Artisanal'
    ),
    (
        '/img/photo/vareuse_de_pont_aven.jpg',
        'Vareuse de Pont-Aven',
        'Photo de Vareuse de Pont-Aven'
    ),
    (
        '/img/photo/pendentif_hermine_bio.jpg',
        'Pendentif Hermine Bio',
        'Photo de Pendentif Hermine Bio'
    ),
    (
        '/img/photo/galettes_de_quimper.jpg',
        'Galettes de Quimper',
        'Photo de Galettes de Quimper'
    ),
    (
        '/img/photo/sac_voile_durable.jpg',
        'Sac Voile Durable',
        'Photo de Sac Voile Durable'
    ),
    (
        '/img/photo/marini_re_de_pont_aven.jpg',
        'Marinière de Pont-Aven',
        'Photo de Marinière de Pont-Aven'
    ),
    (
        '/img/photo/sac_voile_bio.jpg',
        'Sac Voile Bio',
        'Photo de Sac Voile Bio'
    ),
    (
        '/img/photo/sac_voile_premium.jpg',
        'Sac Voile Premium',
        'Photo de Sac Voile Premium'
    ),
    (
        '/img/photo/pendentif_hermine_local.jpg',
        'Pendentif Hermine Local',
        'Photo de Pendentif Hermine Local'
    ),
    (
        '/img/photo/vareuse_durable.jpg',
        'Vareuse Durable',
        'Photo de Vareuse Durable'
    ),
    (
        '/img/photo/pendentif_hermine_traditionnel.jpg',
        'Pendentif Hermine Traditionnel',
        'Photo de Pendentif Hermine Traditionnel'
    ),
    (
        '/img/photo/pendentif_hermine_de_roscoff.jpg',
        'Pendentif Hermine de Roscoff',
        'Photo de Pendentif Hermine de Roscoff'
    ),
    (
        '/img/photo/cir__navy_de_brest.jpg',
        'Ciré Navy de Brest',
        'Photo de Ciré Navy de Brest'
    ),
    (
        '/img/photo/pull_marin_authentique.jpg',
        'Pull Marin Authentique',
        'Photo de Pull Marin Authentique'
    ),
    (
        '/img/photo/bol_e___cidre_local.jpg',
        'Bolée à Cidre Local',
        'Photo de Bolée à Cidre Local'
    ),
    (
        '/img/photo/bol_breton_de_saint_malo.jpg',
        'Bol Breton de Saint-Malo',
        'Photo de Bol Breton de Saint-Malo'
    ),
    (
        '/img/photo/phare_miniature_de_quimper.jpg',
        'Phare Miniature de Quimper',
        'Photo de Phare Miniature de Quimper'
    ),
    (
        '/img/photo/caramels_artisanal.jpg',
        'Caramels Artisanal',
        'Photo de Caramels Artisanal'
    ),
    (
        '/img/photo/vareuse_de_dinard.jpg',
        'Vareuse de Dinard',
        'Photo de Vareuse de Dinard'
    ),
    (
        '/img/photo/lampe_temp_te_traditionnel.jpg',
        'Lampe Tempête Traditionnel',
        'Photo de Lampe Tempête Traditionnel'
    ),
    (
        '/img/photo/bracelet_ancre_de_brest.jpg',
        'Bracelet Ancre de Brest',
        'Photo de Bracelet Ancre de Brest'
    ),
    (
        '/img/photo/coussin_triskell_premium.jpg',
        'Coussin Triskell Premium',
        'Photo de Coussin Triskell Premium'
    ),
    (
        '/img/photo/coussin_triskell_bio.jpg',
        'Coussin Triskell Bio',
        'Photo de Coussin Triskell Bio'
    ),
    (
        '/img/photo/lampe_temp_te_de_saint_malo.jpg',
        'Lampe Tempête de Saint-Malo',
        'Photo de Lampe Tempête de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_artisanal.jpg',
        'Coussin Triskell Artisanal',
        'Photo de Coussin Triskell Artisanal'
    ),
    (
        '/img/photo/bol_e___cidre_de_saint_malo.jpg',
        'Bolée à Cidre de Saint-Malo',
        'Photo de Bolée à Cidre de Saint-Malo'
    ),
    (
        '/img/photo/caramels_durable.jpg',
        'Caramels Durable',
        'Photo de Caramels Durable'
    ),
    (
        '/img/photo/lampe_temp_te_local.jpg',
        'Lampe Tempête Local',
        'Photo de Lampe Tempête Local'
    ),
    (
        '/img/photo/bol_e___cidre_artisanal.jpg',
        'Bolée à Cidre Artisanal',
        'Photo de Bolée à Cidre Artisanal'
    ),
    (
        '/img/photo/bonnet_miki_traditionnel.jpg',
        'Bonnet Miki Traditionnel',
        'Photo de Bonnet Miki Traditionnel'
    ),
    (
        '/img/photo/bonnet_miki_premium.jpg',
        'Bonnet Miki Premium',
        'Photo de Bonnet Miki Premium'
    ),
    (
        '/img/photo/caramels_de_carnac.jpg',
        'Caramels de Carnac',
        'Photo de Caramels de Carnac'
    ),
    (
        '/img/photo/marini_re_premium.jpg',
        'Marinière Premium',
        'Photo de Marinière Premium'
    ),
    (
        '/img/photo/pull_marin_de_quimper.jpg',
        'Pull Marin de Quimper',
        'Photo de Pull Marin de Quimper'
    ),
    (
        '/img/photo/cir__jaune_de_vannes.jpg',
        'Ciré Jaune de Vannes',
        'Photo de Ciré Jaune de Vannes'
    ),
    (
        '/img/photo/lampe_temp_te_authentique.jpg',
        'Lampe Tempête Authentique',
        'Photo de Lampe Tempête Authentique'
    ),
    (
        '/img/photo/bonnet_miki_de_concarneau.jpg',
        'Bonnet Miki de Concarneau',
        'Photo de Bonnet Miki de Concarneau'
    ),
    (
        '/img/photo/marini_re_authentique.jpg',
        'Marinière Authentique',
        'Photo de Marinière Authentique'
    ),
    (
        '/img/photo/bracelet_ancre_artisanal.jpg',
        'Bracelet Ancre Artisanal',
        'Photo de Bracelet Ancre Artisanal'
    ),
    (
        '/img/photo/lampe_temp_te_de_vannes.jpg',
        'Lampe Tempête de Vannes',
        'Photo de Lampe Tempête de Vannes'
    ),
    (
        '/img/photo/pull_marin_de_carnac.jpg',
        'Pull Marin de Carnac',
        'Photo de Pull Marin de Carnac'
    ),
    (
        '/img/photo/coussin_triskell_fait_main.jpg',
        'Coussin Triskell Fait main',
        'Photo de Coussin Triskell Fait main'
    ),
    (
        '/img/photo/galettes_artisanal.jpg',
        'Galettes Artisanal',
        'Photo de Galettes Artisanal'
    ),
    (
        '/img/photo/bol_breton_bio.jpg',
        'Bol Breton Bio',
        'Photo de Bol Breton Bio'
    );

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO
    _represente_produit (id_image, id_produit)
VALUES (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 6),
    (10, 8),
    (11, 7),
    (12, 9),
    (13, 10),
    (14, 11),
    (15, 12),
    (16, 13),
    (17, 14),
    (18, 15),
    (19, 16),
    (20, 17),
    (21, 18),
    (22, 19),
    (23, 20),
    (24, 21),
    (25, 22),
    (26, 23),
    (27, 24),
    (28, 25),
    (29, 26),
    (30, 27),
    (31, 28),
    (32, 29),
    (33, 30),
    (34, 31),
    (35, 32),
    (36, 33),
    (37, 34),
    (38, 35),
    (39, 36),
    (40, 37),
    (41, 38),
    (42, 39),
    (43, 40),
    (44, 41),
    (45, 42),
    (46, 43),
    (47, 44),
    (48, 45),
    (49, 46),
    (50, 47),
    (51, 48),
    (52, 49),
    (53, 50),
    (54, 51),
    (55, 52),
    (56, 53),
    (57, 54),
    (58, 55),
    (59, 56),
    (60, 57),
    (61, 58),
    (62, 59),
    (63, 60),
    (64, 61),
    (65, 62),
    (66, 63),
    (67, 64),
    (68, 65),
    (69, 66),
    (70, 67),
    (71, 68),
    (72, 69),
    (73, 70),
    (74, 71),
    (75, 72),
    (76, 73),
    (77, 74),
    (78, 75),
    (79, 76),
    (80, 77),
    (81, 78),
    (82, 79),
    (83, 80),
    (84, 81),
    (85, 82),
    (86, 83),
    (87, 84),
    (88, 85),
    (89, 86),
    (90, 87),
    (91, 88),
    (92, 89),
    (93, 90),
    (94, 91),
    (95, 92),
    (96, 93),
    (97, 94),
    (98, 95),
    (99, 96),
    (100, 97),
    (101, 98),
    (102, 99),
    (103, 100),
    (104, 101),
    (105, 102),
    (106, 103),
    (107, 104),
    (108, 105);

-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO
    _represente_compte (id_image, id_compte)
VALUES (6, 4),
    (7, 5),
    (8, 2),
    (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO
    _fait_partie_de (id_produit, id_categorie)
VALUES (1, 1),
    (1, 7),
    (2, 1),
    (2, 7),
    (3, 2),
    (3, 8),
    (4, 2),
    (4, 8),
    (5, 2),
    (5, 9),
    (6, 1),
    (6, 3),
    (7, 3),
    (8, 1),
    (8, 3),
    (8, 5),
    (9, 5),
    (9, 10),
    (10, 1),
    (10, 7),
    (11, 5),
    (12, 2),
    (12, 8),
    (13, 6),
    (14, 5),
    (15, 1),
    (15, 7),
    (16, 1),
    (16, 7),
    (17, 2),
    (17, 8),
    (18, 5),
    (19, 1),
    (19, 7),
    (20, 10),
    (21, 5),
    (22, 1),
    (22, 3),
    (23, 2),
    (23, 8),
    (24, 4),
    (24, 5),
    (25, 1),
    (25, 3),
    (26, 2),
    (26, 8),
    (27, 2),
    (27, 3),
    (27, 8),
    (28, 4),
    (29, 2),
    (29, 3),
    (30, 2),
    (30, 3),
    (31, 2),
    (31, 8),
    (31, 9),
    (32, 3),
    (33, 2),
    (33, 8),
    (33, 9),
    (34, 3),
    (35, 3),
    (36, 3),
    (37, 2),
    (37, 3),
    (38, 4),
    (39, 2),
    (39, 3),
    (40, 2),
    (40, 3),
    (41, 2),
    (41, 3),
    (41, 8),
    (42, 2),
    (42, 8),
    (42, 9),
    (43, 4),
    (44, 4),
    (45, 2),
    (45, 8),
    (46, 4),
    (47, 2),
    (47, 8),
    (48, 2),
    (48, 8),
    (49, 2),
    (49, 8),
    (49, 9),
    (50, 4),
    (51, 4),
    (52, 3),
    (53, 4),
    (54, 4),
    (55, 2),
    (55, 3),
    (56, 2),
    (56, 8),
    (57, 3),
    (58, 4),
    (59, 3),
    (60, 4),
    (61, 3),
    (62, 2),
    (62, 8),
    (62, 9),
    (63, 2),
    (63, 8),
    (64, 3),
    (65, 4),
    (66, 3),
    (67, 2),
    (67, 8),
    (67, 9),
    (68, 3),
    (69, 3),
    (70, 3),
    (71, 2),
    (71, 8),
    (72, 3),
    (73, 3),
    (74, 2),
    (74, 8),
    (74, 9),
    (75, 2),
    (75, 8),
    (76, 4),
    (77, 4),
    (78, 4),
    (79, 4),
    (80, 2),
    (80, 8),
    (81, 4),
    (82, 3),
    (83, 4),
    (84, 4),
    (85, 4),
    (86, 4),
    (87, 4),
    (88, 4),
    (89, 4),
    (90, 4),
    (91, 2),
    (91, 3),
    (91, 8),
    (92, 2),
    (92, 3),
    (92, 8),
    (93, 4),
    (94, 2),
    (94, 8),
    (94, 9),
    (95, 2),
    (95, 8),
    (96, 2),
    (96, 8),
    (96, 9),
    (97, 4),
    (98, 2),
    (98, 3),
    (98, 8),
    (99, 2),
    (99, 8),
    (99, 9),
    (100, 3),
    (101, 4),
    (102, 2),
    (102, 8),
    (103, 4),
    (104, 4),
    (105, 4);

-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO
    _est_dote_de (id_produit, code_hexa)
VALUES (1, '#000000'),
    (1, '#FFFFFF'),
    (2, '#808080'),
    (3, '#0000FF'),
    (3, '#FF0000'),
    (3, '#00FF00'),
    (4, '#0000FF'),
    (4, '#000000'),
    (5, '#FF0000'),
    (5, '#FFFFFF'),
    (6, '#000000'),
    (7, '#808080'),
    (8, '#000000'),
    (9, '#0000FF'),
    (9, '#FF0000'),
    (10, '#808080'),
    (11, '#FFFFFF'),
    (12, '#000000'),
    (12, '#8B4513'),
    (14, '#EE82EE'),
    (14, '#87CEEB'),
    (15, '#000000'),
    (16, '#000000'),
    (16, '#FFFFFF'),
    (17, '#808080'),
    (17, '#000000'),
    (18, '#FFFFFF'),
    (18, '#000000'),
    (19, '#000000'),
    (20, '#FFFFFF'),
    (20, '#000000'),
    (21, '#0000FF'),
    (21, '#FF0000'),
    (22, '#808080'),
    (23, '#000000'),
    (23, '#8B4513'),
    (24, '#87CEEB'),
    (24, '#32CD32'),
    (25, '#000000'),
    (25, '#FF0000'),
    (26, '#8B4513'),
    (27, '#0000FF'),
    (28, '#FF0000'),
    (29, '#8B4513'),
    (30, '#00FF00'),
    (31, '#000000'),
    (32, '#8B4513'),
    (33, '#87CEEB'),
    (34, '#FFFFFF'),
    (35, '#FFFFFF'),
    (36, '#EE82EE'),
    (37, '#FFFFFF'),
    (38, '#0000FF'),
    (39, '#0000FF'),
    (40, '#000000'),
    (41, '#000000'),
    (42, '#FFFFFF'),
    (43, '#8B4513'),
    (44, '#87CEEB'),
    (45, '#87CEEB'),
    (46, '#32CD32'),
    (47, '#87CEEB'),
    (48, '#00FF00'),
    (49, '#FFA500'),
    (50, '#EE82EE'),
    (51, '#FF0000'),
    (52, '#FFFF00'),
    (53, '#FFFFFF'),
    (54, '#0000FF'),
    (55, '#FFFFFF'),
    (56, '#808080'),
    (57, '#00FF00'),
    (58, '#FFFF00'),
    (59, '#00FF00'),
    (60, '#FFA500'),
    (61, '#00FF00'),
    (62, '#FFFFFF'),
    (63, '#00FF00'),
    (64, '#87CEEB'),
    (65, '#EE82EE'),
    (66, '#FFFF00'),
    (67, '#808080'),
    (68, '#FFA500'),
    (69, '#00FF00'),
    (70, '#32CD32'),
    (71, '#0000FF'),
    (72, '#00FF00'),
    (73, '#8B4513'),
    (74, '#FFA500'),
    (75, '#32CD32'),
    (76, '#87CEEB'),
    (77, '#FFFF00'),
    (78, '#0000FF'),
    (79, '#8B4513'),
    (80, '#0000FF'),
    (81, '#EE82EE'),
    (82, '#8B4513'),
    (83, '#FFFF00'),
    (84, '#8B4513'),
    (85, '#FFFF00'),
    (86, '#32CD32'),
    (87, '#EE82EE'),
    (88, '#0000FF'),
    (89, '#EE82EE'),
    (90, '#FFFFFF'),
    (91, '#000000'),
    (92, '#FFFFFF'),
    (93, '#808080'),
    (94, '#808080'),
    (95, '#00FF00'),
    (96, '#0000FF'),
    (97, '#EE82EE'),
    (98, '#000000'),
    (99, '#808080'),
    (100, '#808080'),
    (101, '#0000FF'),
    (102, '#87CEEB'),
    (103, '#FFA500'),
    (104, '#0000FF'),
    (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO
    _seuil_alerte (nb_seuil, message_seuil)
VALUES (
        10,
        'Stock faible - Envisager un réapprovisionnement'
    ),
    (
        5,
        'Stock critique - Réapprovisionnement urgent'
    ),
    (
        3,
        'Rupture imminente - Commander immédiatement'
    ),
    (
        20,
        'Stock normal - Surveillance recommandée'
    ),
    (
        1,
        'Rupture de stock - Produit indisponible'
    );

INSERT INTO
    _adresse (
        id_compte,
        a_numero,
        a_adresse,
        a_ville,
        a_code_postal,
        a_pays
    )
VALUES (
        4,
        13,
        'rue du Pillard',
        'Rennes',
        35590,
        'France'
    );

-- 18. PANIERS/COMMANDES
INSERT INTO
    _panier_commande (id_client, timestamp_commande)
VALUES (1, '2025-11-01 10:30:00'),
    (2, '2025-11-02 14:45:00'),
    (3, '2025-11-03 09:15:00'),
    (1, NULL),
    (4, '2025-11-04 16:20:00'),
    (6, '2025-11-05 11:00:00'),
    (2, NULL),
    (5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO
    _contient (
        id_panier,
        id_produit,
        quantite,
        prix_unitaire,
        remise_unitaire,
        frais_de_port,
        TVA
    )
VALUES (
        1,
        1,
        1,
        599.99,
        0.0,
        5.99,
        20.0
    ),
    (
        1,
        6,
        1,
        149.99,
        0.0,
        5.99,
        20.0
    ),
    (
        2,
        3,
        2,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        2,
        4,
        1,
        49.99,
        0.0,
        4.99,
        20.0
    ),
    (
        3,
        2,
        1,
        899.99,
        0.0,
        9.99,
        20.0
    ),
    (
        4,
        7,
        1,
        69.99,
        0.0,
        6.99,
        20.0
    ),
    (
        5,
        5,
        1,
        39.99,
        0.0,
        4.99,
        20.0
    ),
    (
        5,
        8,
        1,
        199.99,
        0.0,
        3.99,
        20.0
    ),
    (
        6,
        9,
        2,
        89.99,
        0.0,
        5.99,
        20.0
    ),
    (
        7,
        10,
        1,
        299.99,
        0.0,
        7.99,
        20.0
    ),
    (
        8,
        11,
        1,
        29.99,
        0.0,
        4.99,
        20.0
    ),
    (
        8,
        13,
        1,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        8,
        14,
        1,
        34.99,
        0.0,
        5.99,
        20.0
    );

-- 20. FACTURES
INSERT INTO
    _facture (
        id_panier,
        id_adresse,
        f_total_ht,
        f_total_remise,
        f_total_ttc
    )
VALUES (1, 1, 755.98, 0.0, 907.18),
    (2, 1, 103.96, 0.0, 124.75),
    (3, 1, 909.98, 0.0, 1091.98),
    (5, 1, 248.97, 0.0, 298.76),
    (6, 1, 185.97, 0.0, 223.16),
    (8, 1, 95.96, 0.0, 115.15);

-- 21. PAIEMENTS
INSERT INTO
    _paiement (
        id_facture,
        mode_paiement,
        numero_carte,
        mois_annee_expiration,
        cryptogramme_carte,
        timestamp_paiement
    )
VALUES (
        1,
        'CB',
        '1234567890123456',
        '12/27',
        '123',
        '2025-11-01 10:35:00'
    ),
    (
        2,
        'CB',
        '6543210987654321',
        '06/26',
        '456',
        '2025-11-02 14:50:00'
    ),
    (
        3,
        'CB',
        '1111222233334444',
        '03/28',
        '789',
        '2025-11-03 09:20:00'
    ),
    (
        4,
        'CB',
        '9999888877776666',
        '09/27',
        '321',
        '2025-11-04 16:25:00'
    ),
    (
        5,
        'CB',
        '5555666677778888',
        '11/26',
        '654',
        '2025-11-05 11:05:00'
    ),
    (
        6,
        'CB',
        '4444333322221111',
        '08/27',
        '987',
        '2025-11-06 13:35:00'
    );

-- 22. LIVRAISONS
INSERT INTO
    _livraison (
        id_facture,
        date_livraison,
        etat_livraison
    )
VALUES (1, '2025-11-05', 'Livré'),
    (2, '2025-11-06', 'Livré'),
    (3, '2025-11-08', 'En transit'),
    (4, NULL, 'En préparation'),
    (5, '2025-11-09', 'Livré'),
    (6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO
    _definie_pour (id_seuil, id_compte)
VALUES (1, 2),
    (2, 2),
    (3, 2),
    (4, 2),
    (5, 2),
    (1, 3),
    (2, 3),
    (3, 3),
    (5, 3),
    (1, 10),
    (2, 10),
    (3, 10),
    (4, 10),
    (5, 10),
    (5, 1);

-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;

UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;
  
-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;

UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;

UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

--UPDATE cobrec1._produit SET p_note = 0;

UPDATE cobrec1._commentaire SET a_note = 0.0;
----------- WbStatement -----------
##sqlwb.pos=97404
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;

CREATE SCHEMA cobrec1;

SET SCHEMA 'cobrec1';

-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (
        civilite IN (
            'M.',
            'Mme',
            'Inconnu',
            'Ne souhaite pas s''exprimer',
            'Autre'
        )
    ),
    CONSTRAINT verif_compte_email CHECK (
        email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'
    ),
    CONSTRAINT verif_compte_num_telephone CHECK (
        num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$'
    )
);

ALTER TABLE ONLY cobrec1._compte
ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11, 2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (
        type_couleur IN (
            'Vert',
            'Jaune',
            'Rouge',
            'Noir',
            'Blanc',
            'Bleu',
            'Violet',
            'Orange',
            'Gris',
            'Marron'
        )
    )
);

ALTER TABLE ONLY cobrec1._couleur
ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4, 1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (
        montant_TVA >= 0.00
        AND montant_TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11, 2) DEFAULT 0.0,
    p_volume numeric(11, 2) DEFAULT 0.0,
    p_frais_de_port numeric(11, 2) DEFAULT 0.0,
    p_prix numeric(11, 2) NOT NULL,
    p_note numeric(2, 1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (
        p_note >= 0
        AND p_note <= 5
    ),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (
        p_statut IN (
            'Ébauche',
            'En ligne',
            'Hors ligne',
            'Supprimé'
        )
    ),
    CONSTRAINT verif_produit_origine CHECK (
        p_origine IN (
            'Inconnu',
            'Bretagne',
            'France',
            'UE',
            'Hors UE'
        )
    )
);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) REFERENCES cobrec1._vendeur (id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) REFERENCES cobrec1._TVA (id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5, 2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (
        reduction_pourcentage >= 0.00
        AND reduction_pourcentage <= 100.00
    ),
    /*CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_reduction_fin CHECK (
        reduction_fin > reduction_debut
    )
);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    /*CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_promotion_fin CHECK (
        promotion_fin > promotion_debut
    )
);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11, 2) DEFAULT 0.0,
    f_total_remise numeric(11, 2) DEFAULT 0.0,
    f_total_ttc numeric(11, 2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) REFERENCES cobrec1._adresse (id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2, 1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (
        vote_type IN ('like', 'dislike')
    )
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2, 1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (
        a_note IN (
            NULL,
            0.0,
            0.5,
            1.0,
            1.5,
            2.0,
            2.5,
            3.0,
            3.5,
            4.0,
            4.5,
            5.0
        )
    )
);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) REFERENCES cobrec1._livraison (id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison, id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (
        type_signalement IN (
            'signale_avis',
            'signale_compte',
            'signale_produit'
        )
    )
);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11, 2) NOT NULL,
    remise_unitaire numeric(11, 2) DEFAULT 0.0,
    frais_de_port numeric(11, 2) DEFAULT 0.0,
    TVA numeric(4, 1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (
        TVA >= 0.00
        AND TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
-- CREATE TABLE cobrec1._represente_promotion (
--     id_image integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image)
--             REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) REFERENCES cobrec1._categorie_produit (id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) REFERENCES cobrec1._couleur (code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction)
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) REFERENCES cobrec1._seuil_alerte (id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();

CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

CREATE FUNCTION mise_sur_marche_produit_insert()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche_insert
AFTER INSERT on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit_insert();

CREATE FUNCTION update_p_modif_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_modif = OLD.p_modif) THEN
        NEW.p_modif = CURRENT_TIMESTAMP;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_update_p_modif_produit
BEFORE UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE update_p_modif_produit();

CREATE FUNCTION produit_deja_en_reduction_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_insert
BEFORE INSERT on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_insert();

CREATE FUNCTION produit_deja_en_reduction_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_update
BEFORE UPDATE on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_update();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO
    _compte (
        nom,
        prenom,
        email,
        num_telephone,
        mdp,
        etat_A2F,
        nb_fois_signale,
        nb_signalements_avis,
        nb_cpts_signales,
        nb_avis_signales
    )
VALUES (
        'Maeleau',
        'Le Hyver',
        'admin@cobrec.fr',
        '0601020304',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Lopicier',
        'Mallo',
        'vendeur1@example.com',
        '0612345678',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Elouard',
        'Jean-Jacques',
        'vendeur2@shop.fr',
        '0623456789',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        1,
        0,
        0,
        0
    ),
    (
        'Jean',
        'Dupont',
        'client1@gmail.com',
        '0634567890',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        1,
        0,
        0
    ),
    (
        'Marie',
        'Martin',
        'client2@yahoo.fr',
        '0645678901',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        1,
        0
    ),
    (
        'Pierre',
        'Durand',
        'client3@outlook.com',
        '0656789012',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Sophie',
        'Bernard',
        'client4@free.fr',
        '0667890123',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Lucas',
        'Petit',
        'client5@orange.fr',
        '0678901234',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Emma',
        'Lefebvre',
        'client6@wanadoo.fr',
        '0689012345',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Martinière',
        'Yvili',
        'vendeur3@boutique.fr',
        '0690123456',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    );

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO
    _vendeur (
        id_compte,
        SIREN,
        raison_sociale,
        denomination,
        nb_produits_crees
    )
VALUES (
        2,
        '123456789',
        'TechStore SARL',
        'TechStore',
        5
    ),
    (
        3,
        '987654321',
        'FashionHub SAS',
        'FashionHub',
        3
    ),
    (
        10,
        '456789123',
        'SportPro EURL',
        'SportPro',
        2
    );

-- 4. CLIENTS
INSERT INTO
    _client (
        id_compte,
        c_pseudo,
        c_nb_produits_achetes,
        c_depense_totale,
        c_cloture,
        c_datenaissance
    )
VALUES (
        4,
        'jdupont',
        2,
        907.18,
        FALSE,
        '1985-03-15'
    ),
    (
        5,
        'mmartin',
        3,
        124.75,
        FALSE,
        '1990-07-22'
    ),
    (
        6,
        'pdurand',
        1,
        1091.98,
        FALSE,
        '1988-11-10'
    ),
    (
        7,
        'sbernard',
        2,
        298.76,
        FALSE,
        '1995-05-30'
    ),
    (
        8,
        'lpetit',
        0,
        0.0,
        FALSE,
        '2000-01-18'
    ),
    (
        9,
        'elefebvre',
        1,
        179.98,
        FALSE,
        '1992-09-25'
    );

-- 5. ADRESSES
INSERT INTO
    _adresse (
        id_compte,
        a_adresse,
        a_ville,
        a_code_postal,
        a_complement
    )
VALUES (
        4,
        '15 rue de la Paix',
        'Paris',
        '75001',
        'Apt 5'
    ),
    (
        5,
        '23 avenue des Champs',
        'Lyon',
        '69001',
        NULL
    ),
    (
        6,
        '8 boulevard Victor Hugo',
        'Marseille',
        '13001',
        'Bâtiment B'
    ),
    (
        7,
        '42 rue du Commerce',
        'Toulouse',
        '31000',
        NULL
    ),
    (
        8,
        '67 place de la République',
        'Nice',
        '06000',
        '3ème étage'
    ),
    (
        9,
        '91 rue Principale',
        'Bordeaux',
        '33000',
        NULL
    ),
    (
        2,
        '12 avenue du Commerce',
        'Paris',
        '75015',
        'Entrepôt A'
    ),
    (
        3,
        '55 rue de la Mode',
        'Lyon',
        '69002',
        NULL
    ),
    (
        10,
        '78 boulevard du Sport',
        'Marseille',
        '13008',
        'Zone industrielle'
    );

-- 6. COULEURS
INSERT INTO
    _couleur (code_hexa, nom, type_couleur)
VALUES (
        '#FF0000',
        'Rouge vif',
        'Rouge'
    ),
    (
        '#0000FF',
        'Bleu marine',
        'Bleu'
    ),
    ('#000000', 'Noir', 'Noir'),
    (
        '#FFFFFF',
        'Blanc pur',
        'Blanc'
    ),
    (
        '#00FF00',
        'Vert émeraude',
        'Vert'
    ),
    (
        '#FFFF00',
        'Jaune citron',
        'Jaune'
    ),
    ('#FFA500', 'Orange', 'Orange'),
    ('#808080', 'Gris', 'Gris'),
    (
        '#8B4513',
        'Marron chocolat',
        'Marron'
    ),
    ('#EE82EE', 'Violet', 'Violet'),
    (
        '#87CEEB',
        'Bleu ciel',
        'Bleu'
    ),
    (
        '#32CD32',
        'Vert lime',
        'Vert'
    );

-- 7. CATÉGORIES
INSERT INTO
    _categorie_produit (nom_categorie)
VALUES ('Électronique'),
    ('Vêtements'),
    ('Accessoires'),
    ('Maison'),
    ('Sport'),
    ('Livres'),
    ('Informatique'),
    ('Mode homme'),
    ('Mode femme'),
    ('Chaussures');

-- 8. TVA
INSERT INTO
    _TVA (montant_TVA, libelle_TVA)
VALUES (20.0, 'TVA normale'),
    (10.0, 'TVA intermédiaire'),
    (5.5, 'TVA réduite'),
    (2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO
    _produit (
        id_TVA,
        id_vendeur,
        p_nom,
        p_description,
        p_prix,
        p_stock,
        p_statut,
        p_origine,
        p_poids,
        p_volume,
        p_frais_de_port,
        p_note,
        p_nb_ventes
    )
VALUES (
        1,
        1,
        'Smartphone XPro',
        'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G',
        599.99,
        35,
        'En ligne',
        'Bretagne',
        0.180,
        0.01,
        5.99,
        4.3,
        15
    ),
    (
        1,
        1,
        'Ordinateur portable Ultra',
        'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7',
        899.99,
        22,
        'En ligne',
        'Bretagne',
        2.5,
        0.03,
        9.99,
        4.0,
        8
    ),
    (
        1,
        2,
        'T-shirt coton bio',
        'T-shirt 100% coton biologique, coupe regular, diverses couleurs',
        24.99,
        58,
        'En ligne',
        'Bretagne',
        0.15,
        0.5,
        3.99,
        5.0,
        42
    ),
    (
        1,
        2,
        'Jean slim',
        'Jean coupe slim stretch, denim premium',
        49.99,
        62,
        'En ligne',
        'Bretagne',
        1.00,
        0.01,
        4.99,
        NULL,
        18
    ),
    (
        1,
        2,
        'Robe d été',
        'Robe légère et fluide pour l été, motifs floraux',
        39.99,
        48,
        'En ligne',
        'Bretagne',
        0.30,
        0.08,
        4.99,
        NULL,
        12
    ),
    (
        2,
        1,
        'Casque audio Bluetooth',
        'Casque sans fil avec réduction de bruit active, autonomie 30h',
        149.99,
        15,
        'En ligne',
        'Bretagne',
        0.25,
        0.02,
        5.99,
        4.5,
        25
    ),
    (
        1,
        2,
        'Sac à dos urbain',
        'Sac à dos pour ordinateur portable, compartiments multiples, imperméable',
        69.99,
        35,
        'En ligne',
        'Bretagne',
        0.60,
        0.15,
        6.99,
        NULL,
        10
    ),
    (
        1,
        1,
        'Montre connectée',
        'Montre sport avec GPS, cardiofréquencemètre, étanche 50m',
        199.99,
        15,
        'En ligne',
        'Bretagne',
        0.05,
        0.01,
        3.99,
        4.7,
        20
    ),
    (
        1,
        3,
        'Chaussures running',
        'Chaussures de course avec amorti premium, semelle respirante',
        89.99,
        54,
        'En ligne',
        'Bretagne',
        0.40,
        0.08,
        5.99,
        4.2,
        16
    ),
    (
        1,
        1,
        'Tablette 10 pouces',
        'Tablette Android, écran Full HD, 64Go, stylet inclus',
        299.99,
        16,
        'En ligne',
        'Bretagne',
        0.50,
        0.02,
        7.99,
        3.8,
        9
    ),
    (
        1,
        3,
        'Ballon de football',
        'Ballon officiel en cuir synthétique, taille 5',
        29.99,
        85,
        'En ligne',
        'Bretagne',
        0.45,
        0.06,
        4.99,
        4.6,
        35
    ),
    (
        1,
        2,
        'Veste en cuir',
        'Veste en cuir véritable, coupe motard, doublure intérieure',
        189.99,
        15,
        'En ligne',
        'Bretagne',
        1.20,
        0.01,
        8.99,
        NULL,
        5
    ),
    (
        3,
        1,
        'Livre cuisine française',
        'Recettes traditionnelles de cuisine française, 300 pages',
        24.99,
        28,
        'En ligne',
        'Bretagne',
        0.80,
        0.03,
        3.99,
        4.8,
        22
    ),
    (
        1,
        3,
        'Tapis de yoga',
        'Tapis antidérapant, épaisseur 6mm, avec sac de transport',
        34.99,
        52,
        'En ligne',
        'Bretagne',
        1.10,
        0.02,
        5.99,
        4.4,
        28
    ),
    (
        1,
        1,
        'Clavier mécanique RGB',
        'Clavier gamer avec rétroéclairage RGB, switches mécaniques',
        79.99,
        29,
        'En ligne',
        'Bretagne',
        0.90,
        0.04,
        5.99,
        4.1,
        11
    ),
    (
        1,
        1,
        'Console NextGen',
        'Console de jeu dernière génération, 1To SSD, 4K HDR',
        499.99,
        0,
        'Hors ligne',
        'France',
        3.5,
        0.02,
        14.99,
        4.8,
        25
    ),
    (
        1,
        2,
        'Sweat à capuche premium',
        'Sweat-shirt en coton bio, coupe oversize, poche kangourou',
        59.99,
        0,
        'Hors ligne',
        'France',
        0.70,
        0.03,
        5.99,
        4.4,
        18
    ),
    (
        1,
        3,
        'Raquette de tennis pro',
        'Raquette carbone, tension 25kg, grip confort',
        129.99,
        0,
        'Hors ligne',
        'France',
        0.35,
        0.02,
        6.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Écran gaming 4K 27"',
        'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms',
        349.99,
        0,
        'Hors ligne',
        'France',
        5.2,
        0.35,
        19.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Baskets limited edition',
        'Baskets cuir véritable, édition limitée, semelle comfort',
        179.99,
        0,
        'Hors ligne',
        'France',
        0.80,
        0.06,
        7.99,
        4.9,
        65
    ),
    (
        1,
        3,
        'Vélo de route carbone',
        'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses',
        1299.99,
        0,
        'Hors ligne',
        'UE',
        8.5,
        0.15,
        29.99,
        4.8,
        25
    ),
    (
        1,
        1,
        'Drone professionnel 4K',
        'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min',
        899.99,
        0,
        'Hors ligne',
        'UE',
        1.2,
        0.02,
        12.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Manteau d hiver imperméable',
        'Manteau longueur genoux, doublure polaire, coupe-vent',
        179.99,
        0,
        'Hors ligne',
        'UE',
        1.5,
        0.01,
        8.99,
        4.4,
        65
    ),
    (
        1,
        3,
        'Tente 4 places',
        'Tente familiale, double toit, arceaux aluminium, imperméable',
        249.99,
        0,
        'Hors ligne',
        'Hors UE',
        4.8,
        0.08,
        19.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Enceinte Bluetooth waterproof',
        'Enceinte portable, autonomie 24h, résistance IP67',
        129.99,
        0,
        'Hors ligne',
        'Hors UE',
        0.9,
        0.05,
        6.99,
        4.9,
        95
    ),
    (
        2,
        1,
        'Pull Marin de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.',
        36.37,
        31,
        'En ligne',
        'Bretagne',
        2.06,
        0.45,
        5.78,
        4.4,
        12
    ),
    (
        1,
        1,
        'Bonnet Miki de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.',
        121.37,
        6,
        'Hors ligne',
        'Bretagne',
        2.3,
        0.09,
        8.8,
        4.3,
        60
    ),
    (
        2,
        3,
        'Galettes Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        147.92,
        142,
        'En ligne',
        'Bretagne',
        0.46,
        0.46,
        5.71,
        4.3,
        97
    ),
    (
        1,
        3,
        'Écharpe Rayée Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        173.77,
        102,
        'En ligne',
        'Bretagne',
        0.91,
        0.32,
        8.28,
        4.4,
        58
    ),
    (
        1,
        2,
        'Écharpe Rayée de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.',
        197.02,
        168,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.12,
        7.92,
        4.8,
        19
    ),
    (
        4,
        2,
        'Ciré Navy de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        104.35,
        169,
        'En ligne',
        'Bretagne',
        1.43,
        0.14,
        7.22,
        4.6,
        72
    ),
    (
        4,
        3,
        'Bracelet Ancre Fait main',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        172.75,
        44,
        'Hors ligne',
        'Bretagne',
        1.92,
        0.4,
        8.8,
        4.1,
        102
    ),
    (
        1,
        3,
        'Marinière Local',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        74.29,
        80,
        'Hors ligne',
        'Bretagne',
        1.36,
        0.23,
        13.58,
        4.9,
        72
    ),
    (
        3,
        1,
        'Bracelet Ancre de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.',
        40.53,
        140,
        'En ligne',
        'Bretagne',
        2.76,
        0.3,
        9.4,
        4.1,
        97
    ),
    (
        3,
        3,
        'Pendentif Hermine Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        164.23,
        199,
        'Hors ligne',
        'Bretagne',
        1.64,
        0.07,
        10.94,
        4.9,
        47
    ),
    (
        1,
        3,
        'Sac Voile de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.',
        136.95,
        100,
        'En ligne',
        'Bretagne',
        1.37,
        0.26,
        6.09,
        4.2,
        91
    ),
    (
        2,
        3,
        'Écharpe Rayée de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        21.13,
        22,
        'Hors ligne',
        'Bretagne',
        2.73,
        0.43,
        5.64,
        4.2,
        129
    ),
    (
        1,
        2,
        'Coussin Triskell de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        134.55,
        95,
        'Hors ligne',
        'Bretagne',
        1.33,
        0.24,
        11.56,
        4.7,
        30
    ),
    (
        1,
        3,
        'Écharpe Rayée Authentique',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.',
        36.49,
        51,
        'En ligne',
        'Bretagne',
        0.91,
        0.13,
        13.31,
        4.4,
        145
    ),
    (
        4,
        3,
        'Écharpe Rayée Bio',
        'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.',
        50.4,
        107,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.09,
        5.02,
        4.4,
        121
    ),
    (
        1,
        3,
        'Bonnet Miki Authentique',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        119.47,
        143,
        'En ligne',
        'Bretagne',
        0.28,
        0.16,
        5.45,
        4.5,
        140
    ),
    (
        3,
        1,
        'Ciré Navy de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        187.96,
        150,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.3,
        10.57,
        4.4,
        149
    ),
    (
        1,
        1,
        'Bol Breton Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.',
        66.7,
        85,
        'En ligne',
        'Bretagne',
        2.79,
        0.47,
        5.08,
        4.6,
        149
    ),
    (
        1,
        3,
        'Bol Breton Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        176.18,
        99,
        'Hors ligne',
        'Bretagne',
        0.93,
        0.22,
        9.89,
        4.3,
        140
    ),
    (
        3,
        1,
        'Pull Marin de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.',
        30.23,
        146,
        'En ligne',
        'Bretagne',
        0.55,
        0.15,
        6.9,
        4.3,
        72
    ),
    (
        1,
        1,
        'Affiche Vintage de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        155.74,
        168,
        'En ligne',
        'Bretagne',
        2.94,
        0.09,
        8.98,
        4.7,
        148
    ),
    (
        2,
        3,
        'Vareuse Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        120.09,
        42,
        'En ligne',
        'Bretagne',
        1.35,
        0.03,
        8.28,
        4.9,
        15
    ),
    (
        3,
        2,
        'Pull Marin Bio',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.',
        151.65,
        65,
        'En ligne',
        'Bretagne',
        2.61,
        0.49,
        12.3,
        4.9,
        11
    ),
    (
        1,
        3,
        'Kabig Bio',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.',
        172.27,
        61,
        'En ligne',
        'Bretagne',
        0.68,
        0.46,
        8.15,
        4.8,
        63
    ),
    (
        1,
        2,
        'Phare Miniature Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        62.75,
        169,
        'En ligne',
        'Bretagne',
        1.58,
        0.34,
        12.59,
        4.3,
        12
    ),
    (
        3,
        1,
        'Bol Breton Fait main',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        75.33,
        85,
        'Hors ligne',
        'Bretagne',
        1.37,
        0.49,
        6.04,
        4.9,
        53
    ),
    (
        3,
        3,
        'Bracelet Ancre de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        23.23,
        175,
        'Hors ligne',
        'Bretagne',
        2.77,
        0.32,
        10.97,
        4.1,
        81
    ),
    (
        1,
        2,
        'Caramels de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        135.67,
        102,
        'Hors ligne',
        'Bretagne',
        2.06,
        0.45,
        10.54,
        4.3,
        145
    ),
    (
        3,
        3,
        'Affiche Vintage de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.',
        137.69,
        135,
        'Hors ligne',
        'Bretagne',
        1.47,
        0.45,
        12.16,
        4.2,
        26
    ),
    (
        4,
        2,
        'Écharpe Rayée de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        37.85,
        16,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.24,
        12.65,
        4.1,
        111
    ),
    (
        4,
        3,
        'Vareuse de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        51.36,
        183,
        'Hors ligne',
        'Bretagne',
        1.6,
        0.03,
        7.24,
        4.8,
        121
    ),
    (
        4,
        3,
        'Bracelet Ancre Durable',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.',
        150.55,
        126,
        'En ligne',
        'Bretagne',
        1.41,
        0.38,
        12.56,
        4.3,
        138
    ),
    (
        1,
        2,
        'Lampe Tempête de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        73.48,
        143,
        'Hors ligne',
        'Bretagne',
        0.33,
        0.08,
        8.45,
        4.2,
        59
    ),
    (
        4,
        1,
        'Sac Voile de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.',
        167.42,
        104,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.3,
        11.26,
        4.9,
        102
    ),
    (
        4,
        1,
        'Caramels de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        61.58,
        129,
        'En ligne',
        'Bretagne',
        0.18,
        0.17,
        11.11,
        4.4,
        47
    ),
    (
        4,
        2,
        'Pendentif Hermine de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        35.65,
        123,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.14,
        7.95,
        4.5,
        91
    ),
    (
        2,
        1,
        'Ciré Navy Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.',
        19.84,
        94,
        'En ligne',
        'Bretagne',
        0.75,
        0.04,
        13.62,
        4.0,
        12
    ),
    (
        3,
        1,
        'Vareuse de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        51.2,
        184,
        'En ligne',
        'Bretagne',
        0.84,
        0.19,
        10.45,
        5.0,
        34
    ),
    (
        1,
        2,
        'Pendentif Hermine Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        47.48,
        156,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.32,
        5.92,
        4.8,
        35
    ),
    (
        4,
        1,
        'Galettes de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.',
        89.39,
        130,
        'Hors ligne',
        'Bretagne',
        0.41,
        0.48,
        10.72,
        4.8,
        44
    ),
    (
        2,
        2,
        'Sac Voile Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.',
        148.16,
        73,
        'Hors ligne',
        'Bretagne',
        1.03,
        0.13,
        13.41,
        4.3,
        120
    ),
    (
        1,
        1,
        'Marinière de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.',
        50.09,
        71,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.44,
        11.31,
        4.3,
        7
    ),
    (
        4,
        3,
        'Sac Voile Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        102.77,
        9,
        'Hors ligne',
        'Bretagne',
        0.37,
        0.12,
        11.23,
        4.3,
        99
    ),
    (
        2,
        1,
        'Sac Voile Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        61.2,
        69,
        'Hors ligne',
        'Bretagne',
        0.77,
        0.36,
        7.84,
        4.7,
        52
    ),
    (
        1,
        1,
        'Pendentif Hermine Local',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.',
        167.37,
        80,
        'Hors ligne',
        'Bretagne',
        0.76,
        0.1,
        5.13,
        4.5,
        75
    ),
    (
        1,
        2,
        'Vareuse Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        118.5,
        125,
        'Hors ligne',
        'Bretagne',
        1.49,
        0.18,
        13.69,
        4.3,
        127
    ),
    (
        4,
        2,
        'Pendentif Hermine Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        116.38,
        82,
        'Hors ligne',
        'Bretagne',
        0.35,
        0.13,
        10.02,
        4.4,
        62
    ),
    (
        2,
        1,
        'Pendentif Hermine de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        21.38,
        194,
        'En ligne',
        'Bretagne',
        0.39,
        0.38,
        10.63,
        4.3,
        25
    ),
    (
        2,
        2,
        'Ciré Navy de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.',
        140.29,
        125,
        'En ligne',
        'Bretagne',
        0.94,
        0.12,
        11.36,
        4.7,
        121
    ),
    (
        4,
        1,
        'Pull Marin Authentique',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        181.69,
        41,
        'Hors ligne',
        'Bretagne',
        0.31,
        0.09,
        7.77,
        4.7,
        150
    ),
    (
        1,
        1,
        'Bolée à Cidre Local',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        103.33,
        25,
        'En ligne',
        'Bretagne',
        1.83,
        0.45,
        11.61,
        4.6,
        11
    ),
    (
        4,
        2,
        'Bol Breton de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.14,
        76,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.3,
        10.71,
        4.5,
        28
    ),
    (
        3,
        2,
        'Phare Miniature de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        141.1,
        78,
        'Hors ligne',
        'Bretagne',
        2.02,
        0.21,
        11.84,
        4.0,
        27
    ),
    (
        1,
        1,
        'Caramels Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        112.55,
        110,
        'Hors ligne',
        'Bretagne',
        0.26,
        0.26,
        10.6,
        4.5,
        118
    ),
    (
        4,
        1,
        'Vareuse de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.',
        101.61,
        12,
        'En ligne',
        'Bretagne',
        2.92,
        0.31,
        7.15,
        4.2,
        146
    ),
    (
        2,
        2,
        'Lampe Tempête Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        145.44,
        135,
        'En ligne',
        'Bretagne',
        2.15,
        0.21,
        9.34,
        4.5,
        121
    ),
    (
        4,
        1,
        'Bracelet Ancre de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.',
        159.31,
        111,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.4,
        7.4,
        4.0,
        81
    ),
    (
        2,
        2,
        'Coussin Triskell Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        112.71,
        121,
        'En ligne',
        'Bretagne',
        2.81,
        0.44,
        13.83,
        4.2,
        103
    ),
    (
        1,
        2,
        'Coussin Triskell Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        159.76,
        171,
        'En ligne',
        'Bretagne',
        2.94,
        0.25,
        5.33,
        4.5,
        89
    ),
    (
        1,
        2,
        'Lampe Tempête de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.75,
        44,
        'Hors ligne',
        'Bretagne',
        0.32,
        0.39,
        7.39,
        4.6,
        106
    ),
    (
        1,
        2,
        'Coussin Triskell Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        54.37,
        180,
        'En ligne',
        'Bretagne',
        2.77,
        0.5,
        11.72,
        4.4,
        30
    ),
    (
        2,
        1,
        'Bolée à Cidre de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.',
        20.61,
        96,
        'En ligne',
        'Bretagne',
        1.19,
        0.08,
        9.78,
        4.6,
        51
    ),
    (
        3,
        3,
        'Caramels Durable',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        37.05,
        123,
        'En ligne',
        'Bretagne',
        1.95,
        0.24,
        11.0,
        4.9,
        124
    ),
    (
        2,
        2,
        'Lampe Tempête Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        90.19,
        69,
        'Hors ligne',
        'Bretagne',
        1.42,
        0.16,
        13.99,
        4.9,
        32
    ),
    (
        3,
        1,
        'Bolée à Cidre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        134.41,
        75,
        'Hors ligne',
        'Bretagne',
        0.12,
        0.43,
        12.0,
        5.0,
        132
    ),
    (
        3,
        2,
        'Bonnet Miki Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        180.74,
        170,
        'Hors ligne',
        'Bretagne',
        0.21,
        0.4,
        5.3,
        4.4,
        38
    ),
    (
        4,
        1,
        'Bonnet Miki Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        182.65,
        47,
        'En ligne',
        'Bretagne',
        0.85,
        0.41,
        9.34,
        4.8,
        91
    ),
    (
        3,
        1,
        'Caramels de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        84.57,
        72,
        'En ligne',
        'Bretagne',
        1.66,
        0.23,
        11.06,
        4.7,
        102
    ),
    (
        1,
        1,
        'Marinière Premium',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        51.84,
        21,
        'Hors ligne',
        'Bretagne',
        1.94,
        0.24,
        11.31,
        4.6,
        34
    ),
    (
        1,
        2,
        'Pull Marin de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        35.64,
        121,
        'Hors ligne',
        'Bretagne',
        1.18,
        0.48,
        11.27,
        4.5,
        44
    ),
    (
        4,
        2,
        'Ciré Jaune de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        189.65,
        97,
        'En ligne',
        'Bretagne',
        0.39,
        0.35,
        9.9,
        5.0,
        96
    ),
    (
        1,
        3,
        'Lampe Tempête Authentique',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        122.86,
        10,
        'En ligne',
        'Bretagne',
        0.25,
        0.17,
        13.9,
        4.8,
        57
    ),
    (
        1,
        3,
        'Bonnet Miki de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        159.05,
        157,
        'En ligne',
        'Bretagne',
        0.11,
        0.43,
        6.3,
        4.1,
        69
    ),
    (
        3,
        3,
        'Marinière Authentique',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        12.98,
        72,
        'En ligne',
        'Bretagne',
        0.25,
        0.37,
        9.73,
        4.7,
        126
    ),
    (
        4,
        2,
        'Bracelet Ancre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.',
        181.75,
        173,
        'En ligne',
        'Bretagne',
        1.61,
        0.23,
        13.68,
        4.1,
        127
    ),
    (
        3,
        2,
        'Lampe Tempête de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        38.04,
        37,
        'Hors ligne',
        'Bretagne',
        0.9,
        0.32,
        9.94,
        4.3,
        140
    ),
    (
        3,
        2,
        'Pull Marin de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        177.85,
        110,
        'En ligne',
        'Bretagne',
        1.08,
        0.23,
        8.74,
        4.1,
        114
    ),
    (
        3,
        3,
        'Coussin Triskell Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        27.62,
        29,
        'En ligne',
        'Bretagne',
        2.26,
        0.19,
        6.17,
        4.1,
        148
    ),
    (
        3,
        3,
        'Galettes Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.',
        123.48,
        95,
        'Hors ligne',
        'Bretagne',
        0.4,
        0.26,
        6.39,
        4.5,
        32
    ),
    (
        1,
        1,
        'Bol Breton Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.',
        194.19,
        164,
        'Hors ligne',
        'Bretagne',
        1.88,
        0.32,
        5.24,
        4.9,
        73
    );

-- 10. PROMOTIONS (futures)
INSERT INTO
    _promotion (
        id_produit,
        promotion_debut,
        promotion_fin
    )
VALUES (
        1,
        '2027-12-20 00:00:00',
        '2027-12-25 23:59:00'
    ),
    (
        2,
        '2026-02-01 00:00:00',
        '2026-02-07 23:59:00'
    ),
    (
        3,
        '2026-02-16 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        4,
        '2026-04-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        5,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        6,
        '2026-06-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        7,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 9. RÉDUCTIONS (futures)
INSERT INTO
    _reduction (
        id_produit,
        reduction_pourcentage,
        reduction_debut,
        reduction_fin
    )
VALUES (
        1,
        10.00,
        '2026-01-05 00:00:00',
        '2026-09-19 23:59:00'
    ),
    (
        2,
        15.00,
        '2026-02-15 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        3,
        20.00,
        '2026-01-01 00:00:00',
        '2026-05-15 23:59:00'
    ),
    (
        4,
        25.00,
        '2026-01-20 00:00:00',
        '2026-02-26 23:59:00'
    ),
    (
        5,
        30.00,
        '2026-06-01 00:00:00',
        '2026-06-30 23:59:00'
    ),
    (
        6,
        60.00,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        7,
        55.00,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        8,
        70.00,
        '2026-01-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        9,
        65.00,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 12. IMAGES
INSERT INTO
    _image (i_lien, i_title, i_alt)
VALUES (
        '/img/photo/smartphone_xpro.jpg',
        'Smartphone XPro.jpg',
        'Image du smartphone'
    ),
    (
        '/img/photo/ordinateur_portable_ultra.jpg',
        'Ordinateur portable.jpeg',
        'Image de l ordinateur'
    ),
    (
        '/img/photo/t_shirt_coton_bio.jpg',
        'T-shirt.png',
        'Image du t-shirt'
    ),
    (
        '/img/photo/jean_slim.jpg',
        'Jean.jpg',
        'Image du jean'
    ),
    (
        '/img/photo/casque_audio_bluetooth.jpg',
        'Casque audio.jpg',
        'Image du casque'
    ),
    (
        '/img/photo/avatar_jean.jpg',
        'Avatar Jean.jpeg',
        'Photo de profil Jean'
    ),
    (
        '/img/photo/avatar_marie.jpg',
        'Avatar Marie.jpg',
        'Photo de profil Marie'
    ),
    (
        '/img/photo/logo_techstore.jpg',
        'Logo TechStore.jpg',
        'Logo entreprise TechStore'
    ),
    (
        '/img/photo/logo_fashionhub.jpg',
        'Logo FashionHub.jpg',
        'Logo entreprise FashionHub'
    ),
    (
        '/img/photo/montre_connect_e.jpg',
        'Montre connectée.jpg',
        'Image de la montre'
    ),
    (
        '/img/photo/sac___dos_urbain.jpg',
        'Sac à dos.jpeg',
        'Image du sac'
    ),
    (
        '/img/photo/chaussures_running.jpg',
        'Chaussures running.jpeg',
        'Image des chaussures'
    ),
    (
        '/img/photo/tablette_10_pouces.jpg',
        'Tablette.jpg',
        'Image de la tablette'
    ),
    (
        '/img/photo/ballon_de_football.jpg',
        'Ballon football.jpg',
        'Image du ballon'
    ),
    (
        '/img/photo/veste_en_cuir.jpg',
        'Veste cuir.jpg',
        'Image de la veste'
    ),
    (
        '/img/photo/livre_cuisine_fran_aise.jpg',
        'Livre cuisine.jpeg',
        'Image du livre'
    ),
    (
        '/img/photo/tapis_de_yoga.jpg',
        'Tapis yoga.jpeg',
        'Image du tapis'
    ),
    (
        '/img/photo/clavier_m_canique_rgb.jpg',
        'Clavier.jpg',
        'Image du clavier'
    ),
    (
        '/img/photo/console_nextgen.jpg',
        'Console NextGen.jpg',
        'Image de la console'
    ),
    (
        '/img/photo/sweat___capuche_premium.jpg',
        'Sweat à capuche.jpeg',
        'Image du sweat'
    ),
    (
        '/img/photo/raquette_de_tennis_pro.jpg',
        'Raquette tennis.jpg',
        'Image de la raquette'
    ),
    (
        '/img/photo/_cran_gaming_4k_27_.jpg',
        'Écran 4K.jpeg',
        'Image de l écran'
    ),
    (
        '/img/photo/baskets_limited_edition.jpg',
        'Baskets limited.jpeg',
        'Image des baskets'
    ),
    (
        '/img/photo/v_lo_de_route_carbone.jpg',
        'Vélo route.jpeg',
        'Image du vélo'
    ),
    (
        '/img/photo/drone_professionnel_4k.jpg',
        'Drone 4K.jpg',
        'Image du drone'
    ),
    (
        '/img/photo/manteau_d_hiver_imperm_able.jpg',
        'Manteau hiver.jpeg',
        'Image du manteau'
    ),
    (
        '/img/photo/tente_4_places.jpg',
        'Tente 4 places.jpg',
        'Image de la tente'
    ),
    (
        '/img/photo/enceinte_bluetooth_waterproof.jpg',
        'Enceinte Bluetooth.jpg',
        'Image de l enceinte'
    ),
    (
        '/img/photo/pull_marin_de_saint_malo.jpg',
        'Pull Marin de Saint-Malo',
        'Photo de Pull Marin de Saint-Malo'
    ),
    (
        '/img/photo/bonnet_miki_de_carnac.jpg',
        'Bonnet Miki de Carnac',
        'Photo de Bonnet Miki de Carnac'
    ),
    (
        '/img/photo/galettes_local.jpg',
        'Galettes Local',
        'Photo de Galettes Local'
    ),
    (
        '/img/photo/_charpe_ray_e_fait_main.jpg',
        'Écharpe Rayée Fait main',
        'Photo de Écharpe Rayée Fait main'
    ),
    (
        '/img/photo/_charpe_ray_e_de_brest.jpg',
        'Écharpe Rayée de Brest',
        'Photo de Écharpe Rayée de Brest'
    ),
    (
        '/img/photo/cir__navy_de_concarneau.jpg',
        'Ciré Navy de Concarneau',
        'Photo de Ciré Navy de Concarneau'
    ),
    (
        '/img/photo/bracelet_ancre_fait_main.jpg',
        'Bracelet Ancre Fait main',
        'Photo de Bracelet Ancre Fait main'
    ),
    (
        '/img/photo/marini_re_local.jpg',
        'Marinière Local',
        'Photo de Marinière Local'
    ),
    (
        '/img/photo/bracelet_ancre_de_concarneau.jpg',
        'Bracelet Ancre de Concarneau',
        'Photo de Bracelet Ancre de Concarneau'
    ),
    (
        '/img/photo/pendentif_hermine_fait_main.jpg',
        'Pendentif Hermine Fait main',
        'Photo de Pendentif Hermine Fait main'
    ),
    (
        '/img/photo/sac_voile_de_concarneau.jpg',
        'Sac Voile de Concarneau',
        'Photo de Sac Voile de Concarneau'
    ),
    (
        '/img/photo/_charpe_ray_e_de_saint_malo.jpg',
        'Écharpe Rayée de Saint-Malo',
        'Photo de Écharpe Rayée de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_de_roscoff.jpg',
        'Coussin Triskell de Roscoff',
        'Photo de Coussin Triskell de Roscoff'
    ),
    (
        '/img/photo/_charpe_ray_e_authentique.jpg',
        'Écharpe Rayée Authentique',
        'Photo de Écharpe Rayée Authentique'
    ),
    (
        '/img/photo/_charpe_ray_e_bio.jpg',
        'Écharpe Rayée Bio',
        'Photo de Écharpe Rayée Bio'
    ),
    (
        '/img/photo/bonnet_miki_authentique.jpg',
        'Bonnet Miki Authentique',
        'Photo de Bonnet Miki Authentique'
    ),
    (
        '/img/photo/cir__navy_de_quimper.jpg',
        'Ciré Navy de Quimper',
        'Photo de Ciré Navy de Quimper'
    ),
    (
        '/img/photo/bol_breton_traditionnel.jpg',
        'Bol Breton Traditionnel',
        'Photo de Bol Breton Traditionnel'
    ),
    (
        '/img/photo/bol_breton_premium.jpg',
        'Bol Breton Premium',
        'Photo de Bol Breton Premium'
    ),
    (
        '/img/photo/pull_marin_de_brest.jpg',
        'Pull Marin de Brest',
        'Photo de Pull Marin de Brest'
    ),
    (
        '/img/photo/affiche_vintage_de_dinard.jpg',
        'Affiche Vintage de Dinard',
        'Photo de Affiche Vintage de Dinard'
    ),
    (
        '/img/photo/vareuse_artisanal.jpg',
        'Vareuse Artisanal',
        'Photo de Vareuse Artisanal'
    ),
    (
        '/img/photo/pull_marin_bio.jpg',
        'Pull Marin Bio',
        'Photo de Pull Marin Bio'
    ),
    (
        '/img/photo/kabig_bio.jpg',
        'Kabig Bio',
        'Photo de Kabig Bio'
    ),
    (
        '/img/photo/phare_miniature_fait_main.jpg',
        'Phare Miniature Fait main',
        'Photo de Phare Miniature Fait main'
    ),
    (
        '/img/photo/bol_breton_fait_main.jpg',
        'Bol Breton Fait main',
        'Photo de Bol Breton Fait main'
    ),
    (
        '/img/photo/bracelet_ancre_de_carnac.jpg',
        'Bracelet Ancre de Carnac',
        'Photo de Bracelet Ancre de Carnac'
    ),
    (
        '/img/photo/caramels_de_dinard.jpg',
        'Caramels de Dinard',
        'Photo de Caramels de Dinard'
    ),
    (
        '/img/photo/affiche_vintage_de_vannes.jpg',
        'Affiche Vintage de Vannes',
        'Photo de Affiche Vintage de Vannes'
    ),
    (
        '/img/photo/_charpe_ray_e_de_dinard.jpg',
        'Écharpe Rayée de Dinard',
        'Photo de Écharpe Rayée de Dinard'
    ),
    (
        '/img/photo/vareuse_de_saint_malo.jpg',
        'Vareuse de Saint-Malo',
        'Photo de Vareuse de Saint-Malo'
    ),
    (
        '/img/photo/bracelet_ancre_durable.jpg',
        'Bracelet Ancre Durable',
        'Photo de Bracelet Ancre Durable'
    ),
    (
        '/img/photo/lampe_temp_te_de_quimper.jpg',
        'Lampe Tempête de Quimper',
        'Photo de Lampe Tempête de Quimper'
    ),
    (
        '/img/photo/sac_voile_de_pont_aven.jpg',
        'Sac Voile de Pont-Aven',
        'Photo de Sac Voile de Pont-Aven'
    ),
    (
        '/img/photo/caramels_de_roscoff.jpg',
        'Caramels de Roscoff',
        'Photo de Caramels de Roscoff'
    ),
    (
        '/img/photo/pendentif_hermine_de_saint_malo.jpg',
        'Pendentif Hermine de Saint-Malo',
        'Photo de Pendentif Hermine de Saint-Malo'
    ),
    (
        '/img/photo/cir__navy_artisanal.jpg',
        'Ciré Navy Artisanal',
        'Photo de Ciré Navy Artisanal'
    ),
    (
        '/img/photo/vareuse_de_pont_aven.jpg',
        'Vareuse de Pont-Aven',
        'Photo de Vareuse de Pont-Aven'
    ),
    (
        '/img/photo/pendentif_hermine_bio.jpg',
        'Pendentif Hermine Bio',
        'Photo de Pendentif Hermine Bio'
    ),
    (
        '/img/photo/galettes_de_quimper.jpg',
        'Galettes de Quimper',
        'Photo de Galettes de Quimper'
    ),
    (
        '/img/photo/sac_voile_durable.jpg',
        'Sac Voile Durable',
        'Photo de Sac Voile Durable'
    ),
    (
        '/img/photo/marini_re_de_pont_aven.jpg',
        'Marinière de Pont-Aven',
        'Photo de Marinière de Pont-Aven'
    ),
    (
        '/img/photo/sac_voile_bio.jpg',
        'Sac Voile Bio',
        'Photo de Sac Voile Bio'
    ),
    (
        '/img/photo/sac_voile_premium.jpg',
        'Sac Voile Premium',
        'Photo de Sac Voile Premium'
    ),
    (
        '/img/photo/pendentif_hermine_local.jpg',
        'Pendentif Hermine Local',
        'Photo de Pendentif Hermine Local'
    ),
    (
        '/img/photo/vareuse_durable.jpg',
        'Vareuse Durable',
        'Photo de Vareuse Durable'
    ),
    (
        '/img/photo/pendentif_hermine_traditionnel.jpg',
        'Pendentif Hermine Traditionnel',
        'Photo de Pendentif Hermine Traditionnel'
    ),
    (
        '/img/photo/pendentif_hermine_de_roscoff.jpg',
        'Pendentif Hermine de Roscoff',
        'Photo de Pendentif Hermine de Roscoff'
    ),
    (
        '/img/photo/cir__navy_de_brest.jpg',
        'Ciré Navy de Brest',
        'Photo de Ciré Navy de Brest'
    ),
    (
        '/img/photo/pull_marin_authentique.jpg',
        'Pull Marin Authentique',
        'Photo de Pull Marin Authentique'
    ),
    (
        '/img/photo/bol_e___cidre_local.jpg',
        'Bolée à Cidre Local',
        'Photo de Bolée à Cidre Local'
    ),
    (
        '/img/photo/bol_breton_de_saint_malo.jpg',
        'Bol Breton de Saint-Malo',
        'Photo de Bol Breton de Saint-Malo'
    ),
    (
        '/img/photo/phare_miniature_de_quimper.jpg',
        'Phare Miniature de Quimper',
        'Photo de Phare Miniature de Quimper'
    ),
    (
        '/img/photo/caramels_artisanal.jpg',
        'Caramels Artisanal',
        'Photo de Caramels Artisanal'
    ),
    (
        '/img/photo/vareuse_de_dinard.jpg',
        'Vareuse de Dinard',
        'Photo de Vareuse de Dinard'
    ),
    (
        '/img/photo/lampe_temp_te_traditionnel.jpg',
        'Lampe Tempête Traditionnel',
        'Photo de Lampe Tempête Traditionnel'
    ),
    (
        '/img/photo/bracelet_ancre_de_brest.jpg',
        'Bracelet Ancre de Brest',
        'Photo de Bracelet Ancre de Brest'
    ),
    (
        '/img/photo/coussin_triskell_premium.jpg',
        'Coussin Triskell Premium',
        'Photo de Coussin Triskell Premium'
    ),
    (
        '/img/photo/coussin_triskell_bio.jpg',
        'Coussin Triskell Bio',
        'Photo de Coussin Triskell Bio'
    ),
    (
        '/img/photo/lampe_temp_te_de_saint_malo.jpg',
        'Lampe Tempête de Saint-Malo',
        'Photo de Lampe Tempête de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_artisanal.jpg',
        'Coussin Triskell Artisanal',
        'Photo de Coussin Triskell Artisanal'
    ),
    (
        '/img/photo/bol_e___cidre_de_saint_malo.jpg',
        'Bolée à Cidre de Saint-Malo',
        'Photo de Bolée à Cidre de Saint-Malo'
    ),
    (
        '/img/photo/caramels_durable.jpg',
        'Caramels Durable',
        'Photo de Caramels Durable'
    ),
    (
        '/img/photo/lampe_temp_te_local.jpg',
        'Lampe Tempête Local',
        'Photo de Lampe Tempête Local'
    ),
    (
        '/img/photo/bol_e___cidre_artisanal.jpg',
        'Bolée à Cidre Artisanal',
        'Photo de Bolée à Cidre Artisanal'
    ),
    (
        '/img/photo/bonnet_miki_traditionnel.jpg',
        'Bonnet Miki Traditionnel',
        'Photo de Bonnet Miki Traditionnel'
    ),
    (
        '/img/photo/bonnet_miki_premium.jpg',
        'Bonnet Miki Premium',
        'Photo de Bonnet Miki Premium'
    ),
    (
        '/img/photo/caramels_de_carnac.jpg',
        'Caramels de Carnac',
        'Photo de Caramels de Carnac'
    ),
    (
        '/img/photo/marini_re_premium.jpg',
        'Marinière Premium',
        'Photo de Marinière Premium'
    ),
    (
        '/img/photo/pull_marin_de_quimper.jpg',
        'Pull Marin de Quimper',
        'Photo de Pull Marin de Quimper'
    ),
    (
        '/img/photo/cir__jaune_de_vannes.jpg',
        'Ciré Jaune de Vannes',
        'Photo de Ciré Jaune de Vannes'
    ),
    (
        '/img/photo/lampe_temp_te_authentique.jpg',
        'Lampe Tempête Authentique',
        'Photo de Lampe Tempête Authentique'
    ),
    (
        '/img/photo/bonnet_miki_de_concarneau.jpg',
        'Bonnet Miki de Concarneau',
        'Photo de Bonnet Miki de Concarneau'
    ),
    (
        '/img/photo/marini_re_authentique.jpg',
        'Marinière Authentique',
        'Photo de Marinière Authentique'
    ),
    (
        '/img/photo/bracelet_ancre_artisanal.jpg',
        'Bracelet Ancre Artisanal',
        'Photo de Bracelet Ancre Artisanal'
    ),
    (
        '/img/photo/lampe_temp_te_de_vannes.jpg',
        'Lampe Tempête de Vannes',
        'Photo de Lampe Tempête de Vannes'
    ),
    (
        '/img/photo/pull_marin_de_carnac.jpg',
        'Pull Marin de Carnac',
        'Photo de Pull Marin de Carnac'
    ),
    (
        '/img/photo/coussin_triskell_fait_main.jpg',
        'Coussin Triskell Fait main',
        'Photo de Coussin Triskell Fait main'
    ),
    (
        '/img/photo/galettes_artisanal.jpg',
        'Galettes Artisanal',
        'Photo de Galettes Artisanal'
    ),
    (
        '/img/photo/bol_breton_bio.jpg',
        'Bol Breton Bio',
        'Photo de Bol Breton Bio'
    );

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO
    _represente_produit (id_image, id_produit)
VALUES (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 6),
    (10, 8),
    (11, 7),
    (12, 9),
    (13, 10),
    (14, 11),
    (15, 12),
    (16, 13),
    (17, 14),
    (18, 15),
    (19, 16),
    (20, 17),
    (21, 18),
    (22, 19),
    (23, 20),
    (24, 21),
    (25, 22),
    (26, 23),
    (27, 24),
    (28, 25),
    (29, 26),
    (30, 27),
    (31, 28),
    (32, 29),
    (33, 30),
    (34, 31),
    (35, 32),
    (36, 33),
    (37, 34),
    (38, 35),
    (39, 36),
    (40, 37),
    (41, 38),
    (42, 39),
    (43, 40),
    (44, 41),
    (45, 42),
    (46, 43),
    (47, 44),
    (48, 45),
    (49, 46),
    (50, 47),
    (51, 48),
    (52, 49),
    (53, 50),
    (54, 51),
    (55, 52),
    (56, 53),
    (57, 54),
    (58, 55),
    (59, 56),
    (60, 57),
    (61, 58),
    (62, 59),
    (63, 60),
    (64, 61),
    (65, 62),
    (66, 63),
    (67, 64),
    (68, 65),
    (69, 66),
    (70, 67),
    (71, 68),
    (72, 69),
    (73, 70),
    (74, 71),
    (75, 72),
    (76, 73),
    (77, 74),
    (78, 75),
    (79, 76),
    (80, 77),
    (81, 78),
    (82, 79),
    (83, 80),
    (84, 81),
    (85, 82),
    (86, 83),
    (87, 84),
    (88, 85),
    (89, 86),
    (90, 87),
    (91, 88),
    (92, 89),
    (93, 90),
    (94, 91),
    (95, 92),
    (96, 93),
    (97, 94),
    (98, 95),
    (99, 96),
    (100, 97),
    (101, 98),
    (102, 99),
    (103, 100),
    (104, 101),
    (105, 102),
    (106, 103),
    (107, 104),
    (108, 105);

-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO
    _represente_compte (id_image, id_compte)
VALUES (6, 4),
    (7, 5),
    (8, 2),
    (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO
    _fait_partie_de (id_produit, id_categorie)
VALUES (1, 1),
    (1, 7),
    (2, 1),
    (2, 7),
    (3, 2),
    (3, 8),
    (4, 2),
    (4, 8),
    (5, 2),
    (5, 9),
    (6, 1),
    (6, 3),
    (7, 3),
    (8, 1),
    (8, 3),
    (8, 5),
    (9, 5),
    (9, 10),
    (10, 1),
    (10, 7),
    (11, 5),
    (12, 2),
    (12, 8),
    (13, 6),
    (14, 5),
    (15, 1),
    (15, 7),
    (16, 1),
    (16, 7),
    (17, 2),
    (17, 8),
    (18, 5),
    (19, 1),
    (19, 7),
    (20, 10),
    (21, 5),
    (22, 1),
    (22, 3),
    (23, 2),
    (23, 8),
    (24, 4),
    (24, 5),
    (25, 1),
    (25, 3),
    (26, 2),
    (26, 8),
    (27, 2),
    (27, 3),
    (27, 8),
    (28, 4),
    (29, 2),
    (29, 3),
    (30, 2),
    (30, 3),
    (31, 2),
    (31, 8),
    (31, 9),
    (32, 3),
    (33, 2),
    (33, 8),
    (33, 9),
    (34, 3),
    (35, 3),
    (36, 3),
    (37, 2),
    (37, 3),
    (38, 4),
    (39, 2),
    (39, 3),
    (40, 2),
    (40, 3),
    (41, 2),
    (41, 3),
    (41, 8),
    (42, 2),
    (42, 8),
    (42, 9),
    (43, 4),
    (44, 4),
    (45, 2),
    (45, 8),
    (46, 4),
    (47, 2),
    (47, 8),
    (48, 2),
    (48, 8),
    (49, 2),
    (49, 8),
    (49, 9),
    (50, 4),
    (51, 4),
    (52, 3),
    (53, 4),
    (54, 4),
    (55, 2),
    (55, 3),
    (56, 2),
    (56, 8),
    (57, 3),
    (58, 4),
    (59, 3),
    (60, 4),
    (61, 3),
    (62, 2),
    (62, 8),
    (62, 9),
    (63, 2),
    (63, 8),
    (64, 3),
    (65, 4),
    (66, 3),
    (67, 2),
    (67, 8),
    (67, 9),
    (68, 3),
    (69, 3),
    (70, 3),
    (71, 2),
    (71, 8),
    (72, 3),
    (73, 3),
    (74, 2),
    (74, 8),
    (74, 9),
    (75, 2),
    (75, 8),
    (76, 4),
    (77, 4),
    (78, 4),
    (79, 4),
    (80, 2),
    (80, 8),
    (81, 4),
    (82, 3),
    (83, 4),
    (84, 4),
    (85, 4),
    (86, 4),
    (87, 4),
    (88, 4),
    (89, 4),
    (90, 4),
    (91, 2),
    (91, 3),
    (91, 8),
    (92, 2),
    (92, 3),
    (92, 8),
    (93, 4),
    (94, 2),
    (94, 8),
    (94, 9),
    (95, 2),
    (95, 8),
    (96, 2),
    (96, 8),
    (96, 9),
    (97, 4),
    (98, 2),
    (98, 3),
    (98, 8),
    (99, 2),
    (99, 8),
    (99, 9),
    (100, 3),
    (101, 4),
    (102, 2),
    (102, 8),
    (103, 4),
    (104, 4),
    (105, 4);

-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO
    _est_dote_de (id_produit, code_hexa)
VALUES (1, '#000000'),
    (1, '#FFFFFF'),
    (2, '#808080'),
    (3, '#0000FF'),
    (3, '#FF0000'),
    (3, '#00FF00'),
    (4, '#0000FF'),
    (4, '#000000'),
    (5, '#FF0000'),
    (5, '#FFFFFF'),
    (6, '#000000'),
    (7, '#808080'),
    (8, '#000000'),
    (9, '#0000FF'),
    (9, '#FF0000'),
    (10, '#808080'),
    (11, '#FFFFFF'),
    (12, '#000000'),
    (12, '#8B4513'),
    (14, '#EE82EE'),
    (14, '#87CEEB'),
    (15, '#000000'),
    (16, '#000000'),
    (16, '#FFFFFF'),
    (17, '#808080'),
    (17, '#000000'),
    (18, '#FFFFFF'),
    (18, '#000000'),
    (19, '#000000'),
    (20, '#FFFFFF'),
    (20, '#000000'),
    (21, '#0000FF'),
    (21, '#FF0000'),
    (22, '#808080'),
    (23, '#000000'),
    (23, '#8B4513'),
    (24, '#87CEEB'),
    (24, '#32CD32'),
    (25, '#000000'),
    (25, '#FF0000'),
    (26, '#8B4513'),
    (27, '#0000FF'),
    (28, '#FF0000'),
    (29, '#8B4513'),
    (30, '#00FF00'),
    (31, '#000000'),
    (32, '#8B4513'),
    (33, '#87CEEB'),
    (34, '#FFFFFF'),
    (35, '#FFFFFF'),
    (36, '#EE82EE'),
    (37, '#FFFFFF'),
    (38, '#0000FF'),
    (39, '#0000FF'),
    (40, '#000000'),
    (41, '#000000'),
    (42, '#FFFFFF'),
    (43, '#8B4513'),
    (44, '#87CEEB'),
    (45, '#87CEEB'),
    (46, '#32CD32'),
    (47, '#87CEEB'),
    (48, '#00FF00'),
    (49, '#FFA500'),
    (50, '#EE82EE'),
    (51, '#FF0000'),
    (52, '#FFFF00'),
    (53, '#FFFFFF'),
    (54, '#0000FF'),
    (55, '#FFFFFF'),
    (56, '#808080'),
    (57, '#00FF00'),
    (58, '#FFFF00'),
    (59, '#00FF00'),
    (60, '#FFA500'),
    (61, '#00FF00'),
    (62, '#FFFFFF'),
    (63, '#00FF00'),
    (64, '#87CEEB'),
    (65, '#EE82EE'),
    (66, '#FFFF00'),
    (67, '#808080'),
    (68, '#FFA500'),
    (69, '#00FF00'),
    (70, '#32CD32'),
    (71, '#0000FF'),
    (72, '#00FF00'),
    (73, '#8B4513'),
    (74, '#FFA500'),
    (75, '#32CD32'),
    (76, '#87CEEB'),
    (77, '#FFFF00'),
    (78, '#0000FF'),
    (79, '#8B4513'),
    (80, '#0000FF'),
    (81, '#EE82EE'),
    (82, '#8B4513'),
    (83, '#FFFF00'),
    (84, '#8B4513'),
    (85, '#FFFF00'),
    (86, '#32CD32'),
    (87, '#EE82EE'),
    (88, '#0000FF'),
    (89, '#EE82EE'),
    (90, '#FFFFFF'),
    (91, '#000000'),
    (92, '#FFFFFF'),
    (93, '#808080'),
    (94, '#808080'),
    (95, '#00FF00'),
    (96, '#0000FF'),
    (97, '#EE82EE'),
    (98, '#000000'),
    (99, '#808080'),
    (100, '#808080'),
    (101, '#0000FF'),
    (102, '#87CEEB'),
    (103, '#FFA500'),
    (104, '#0000FF'),
    (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO
    _seuil_alerte (nb_seuil, message_seuil)
VALUES (
        10,
        'Stock faible - Envisager un réapprovisionnement'
    ),
    (
        5,
        'Stock critique - Réapprovisionnement urgent'
    ),
    (
        3,
        'Rupture imminente - Commander immédiatement'
    ),
    (
        20,
        'Stock normal - Surveillance recommandée'
    ),
    (
        1,
        'Rupture de stock - Produit indisponible'
    );

INSERT INTO
    _adresse (
        id_compte,
        a_numero,
        a_adresse,
        a_ville,
        a_code_postal,
        a_pays
    )
VALUES (
        4,
        13,
        'rue du Pillard',
        'Rennes',
        35590,
        'France'
    );

-- 18. PANIERS/COMMANDES
INSERT INTO
    _panier_commande (id_client, timestamp_commande)
VALUES (1, '2025-11-01 10:30:00'),
    (2, '2025-11-02 14:45:00'),
    (3, '2025-11-03 09:15:00'),
    (1, NULL),
    (4, '2025-11-04 16:20:00'),
    (6, '2025-11-05 11:00:00'),
    (2, NULL),
    (5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO
    _contient (
        id_panier,
        id_produit,
        quantite,
        prix_unitaire,
        remise_unitaire,
        frais_de_port,
        TVA
    )
VALUES (
        1,
        1,
        1,
        599.99,
        0.0,
        5.99,
        20.0
    ),
    (
        1,
        6,
        1,
        149.99,
        0.0,
        5.99,
        20.0
    ),
    (
        2,
        3,
        2,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        2,
        4,
        1,
        49.99,
        0.0,
        4.99,
        20.0
    ),
    (
        3,
        2,
        1,
        899.99,
        0.0,
        9.99,
        20.0
    ),
    (
        4,
        7,
        1,
        69.99,
        0.0,
        6.99,
        20.0
    ),
    (
        5,
        5,
        1,
        39.99,
        0.0,
        4.99,
        20.0
    ),
    (
        5,
        8,
        1,
        199.99,
        0.0,
        3.99,
        20.0
    ),
    (
        6,
        9,
        2,
        89.99,
        0.0,
        5.99,
        20.0
    ),
    (
        7,
        10,
        1,
        299.99,
        0.0,
        7.99,
        20.0
    ),
    (
        8,
        11,
        1,
        29.99,
        0.0,
        4.99,
        20.0
    ),
    (
        8,
        13,
        1,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        8,
        14,
        1,
        34.99,
        0.0,
        5.99,
        20.0
    );

-- 20. FACTURES
INSERT INTO
    _facture (
        id_panier,
        id_adresse,
        f_total_ht,
        f_total_remise,
        f_total_ttc
    )
VALUES (1, 1, 755.98, 0.0, 907.18),
    (2, 1, 103.96, 0.0, 124.75),
    (3, 1, 909.98, 0.0, 1091.98),
    (5, 1, 248.97, 0.0, 298.76),
    (6, 1, 185.97, 0.0, 223.16),
    (8, 1, 95.96, 0.0, 115.15);

-- 21. PAIEMENTS
INSERT INTO
    _paiement (
        id_facture,
        mode_paiement,
        numero_carte,
        mois_annee_expiration,
        cryptogramme_carte,
        timestamp_paiement
    )
VALUES (
        1,
        'CB',
        '1234567890123456',
        '12/27',
        '123',
        '2025-11-01 10:35:00'
    ),
    (
        2,
        'CB',
        '6543210987654321',
        '06/26',
        '456',
        '2025-11-02 14:50:00'
    ),
    (
        3,
        'CB',
        '1111222233334444',
        '03/28',
        '789',
        '2025-11-03 09:20:00'
    ),
    (
        4,
        'CB',
        '9999888877776666',
        '09/27',
        '321',
        '2025-11-04 16:25:00'
    ),
    (
        5,
        'CB',
        '5555666677778888',
        '11/26',
        '654',
        '2025-11-05 11:05:00'
    ),
    (
        6,
        'CB',
        '4444333322221111',
        '08/27',
        '987',
        '2025-11-06 13:35:00'
    );

-- 22. LIVRAISONS
INSERT INTO
    _livraison (
        id_facture,
        date_livraison,
        etat_livraison
    )
VALUES (1, '2025-11-05', 'Livré'),
    (2, '2025-11-06', 'Livré'),
    (3, '2025-11-08', 'En transit'),
    (4, NULL, 'En préparation'),
    (5, '2025-11-09', 'Livré'),
    (6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO
    _definie_pour (id_seuil, id_compte)
VALUES (1, 2),
    (2, 2),
    (3, 2),
    (4, 2),
    (5, 2),
    (1, 3),
    (2, 3),
    (3, 3),
    (5, 3),
    (1, 10),
    (2, 10),
    (3, 10),
    (4, 10),
    (5, 10),
    (5, 1);

-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;

UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;
  
-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;

UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;

UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

--UPDATE cobrec1._produit SET p_note = 0;

--UPDATE cobrec1._commentaire SET a_note = 0.0;
----------- WbStatement -----------
##sqlwb.pos=97401
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;

CREATE SCHEMA cobrec1;

SET SCHEMA 'cobrec1';

-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (
        civilite IN (
            'M.',
            'Mme',
            'Inconnu',
            'Ne souhaite pas s''exprimer',
            'Autre'
        )
    ),
    CONSTRAINT verif_compte_email CHECK (
        email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'
    ),
    CONSTRAINT verif_compte_num_telephone CHECK (
        num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$'
    )
);

ALTER TABLE ONLY cobrec1._compte
ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11, 2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (
        type_couleur IN (
            'Vert',
            'Jaune',
            'Rouge',
            'Noir',
            'Blanc',
            'Bleu',
            'Violet',
            'Orange',
            'Gris',
            'Marron'
        )
    )
);

ALTER TABLE ONLY cobrec1._couleur
ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4, 1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (
        montant_TVA >= 0.00
        AND montant_TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11, 2) DEFAULT 0.0,
    p_volume numeric(11, 2) DEFAULT 0.0,
    p_frais_de_port numeric(11, 2) DEFAULT 0.0,
    p_prix numeric(11, 2) NOT NULL,
    p_note numeric(2, 1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (
        p_note >= 0
        AND p_note <= 5
    ),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (
        p_statut IN (
            'Ébauche',
            'En ligne',
            'Hors ligne',
            'Supprimé'
        )
    ),
    CONSTRAINT verif_produit_origine CHECK (
        p_origine IN (
            'Inconnu',
            'Bretagne',
            'France',
            'UE',
            'Hors UE'
        )
    )
);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) REFERENCES cobrec1._vendeur (id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) REFERENCES cobrec1._TVA (id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5, 2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (
        reduction_pourcentage >= 0.00
        AND reduction_pourcentage <= 100.00
    ),
    /*CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_reduction_fin CHECK (
        reduction_fin > reduction_debut
    )
);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    /*CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_promotion_fin CHECK (
        promotion_fin > promotion_debut
    )
);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11, 2) DEFAULT 0.0,
    f_total_remise numeric(11, 2) DEFAULT 0.0,
    f_total_ttc numeric(11, 2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) REFERENCES cobrec1._adresse (id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2, 1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (
        vote_type IN ('like', 'dislike')
    )
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2, 1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (
        a_note IN (
            NULL,
            0.0,
            0.5,
            1.0,
            1.5,
            2.0,
            2.5,
            3.0,
            3.5,
            4.0,
            4.5,
            5.0
        )
    )
);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) REFERENCES cobrec1._livraison (id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison, id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (
        type_signalement IN (
            'signale_avis',
            'signale_compte',
            'signale_produit'
        )
    )
);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11, 2) NOT NULL,
    remise_unitaire numeric(11, 2) DEFAULT 0.0,
    frais_de_port numeric(11, 2) DEFAULT 0.0,
    TVA numeric(4, 1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (
        TVA >= 0.00
        AND TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
-- CREATE TABLE cobrec1._represente_promotion (
--     id_image integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image)
--             REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) REFERENCES cobrec1._categorie_produit (id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) REFERENCES cobrec1._couleur (code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction)
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) REFERENCES cobrec1._seuil_alerte (id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();

CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

CREATE FUNCTION mise_sur_marche_produit_insert()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche_insert
AFTER INSERT on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit_insert();

CREATE FUNCTION update_p_modif_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_modif = OLD.p_modif) THEN
        NEW.p_modif = CURRENT_TIMESTAMP;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_update_p_modif_produit
BEFORE UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE update_p_modif_produit();

CREATE FUNCTION produit_deja_en_reduction_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_insert
BEFORE INSERT on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_insert();

CREATE FUNCTION produit_deja_en_reduction_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_update
BEFORE UPDATE on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_update();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO
    _compte (
        nom,
        prenom,
        email,
        num_telephone,
        mdp,
        etat_A2F,
        nb_fois_signale,
        nb_signalements_avis,
        nb_cpts_signales,
        nb_avis_signales
    )
VALUES (
        'Maeleau',
        'Le Hyver',
        'admin@cobrec.fr',
        '0601020304',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Lopicier',
        'Mallo',
        'vendeur1@example.com',
        '0612345678',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Elouard',
        'Jean-Jacques',
        'vendeur2@shop.fr',
        '0623456789',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        1,
        0,
        0,
        0
    ),
    (
        'Jean',
        'Dupont',
        'client1@gmail.com',
        '0634567890',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        1,
        0,
        0
    ),
    (
        'Marie',
        'Martin',
        'client2@yahoo.fr',
        '0645678901',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        1,
        0
    ),
    (
        'Pierre',
        'Durand',
        'client3@outlook.com',
        '0656789012',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Sophie',
        'Bernard',
        'client4@free.fr',
        '0667890123',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Lucas',
        'Petit',
        'client5@orange.fr',
        '0678901234',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Emma',
        'Lefebvre',
        'client6@wanadoo.fr',
        '0689012345',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Martinière',
        'Yvili',
        'vendeur3@boutique.fr',
        '0690123456',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    );

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO
    _vendeur (
        id_compte,
        SIREN,
        raison_sociale,
        denomination,
        nb_produits_crees
    )
VALUES (
        2,
        '123456789',
        'TechStore SARL',
        'TechStore',
        5
    ),
    (
        3,
        '987654321',
        'FashionHub SAS',
        'FashionHub',
        3
    ),
    (
        10,
        '456789123',
        'SportPro EURL',
        'SportPro',
        2
    );

-- 4. CLIENTS
INSERT INTO
    _client (
        id_compte,
        c_pseudo,
        c_nb_produits_achetes,
        c_depense_totale,
        c_cloture,
        c_datenaissance
    )
VALUES (
        4,
        'jdupont',
        2,
        907.18,
        FALSE,
        '1985-03-15'
    ),
    (
        5,
        'mmartin',
        3,
        124.75,
        FALSE,
        '1990-07-22'
    ),
    (
        6,
        'pdurand',
        1,
        1091.98,
        FALSE,
        '1988-11-10'
    ),
    (
        7,
        'sbernard',
        2,
        298.76,
        FALSE,
        '1995-05-30'
    ),
    (
        8,
        'lpetit',
        0,
        0.0,
        FALSE,
        '2000-01-18'
    ),
    (
        9,
        'elefebvre',
        1,
        179.98,
        FALSE,
        '1992-09-25'
    );

-- 5. ADRESSES
INSERT INTO
    _adresse (
        id_compte,
        a_adresse,
        a_ville,
        a_code_postal,
        a_complement
    )
VALUES (
        4,
        '15 rue de la Paix',
        'Paris',
        '75001',
        'Apt 5'
    ),
    (
        5,
        '23 avenue des Champs',
        'Lyon',
        '69001',
        NULL
    ),
    (
        6,
        '8 boulevard Victor Hugo',
        'Marseille',
        '13001',
        'Bâtiment B'
    ),
    (
        7,
        '42 rue du Commerce',
        'Toulouse',
        '31000',
        NULL
    ),
    (
        8,
        '67 place de la République',
        'Nice',
        '06000',
        '3ème étage'
    ),
    (
        9,
        '91 rue Principale',
        'Bordeaux',
        '33000',
        NULL
    ),
    (
        2,
        '12 avenue du Commerce',
        'Paris',
        '75015',
        'Entrepôt A'
    ),
    (
        3,
        '55 rue de la Mode',
        'Lyon',
        '69002',
        NULL
    ),
    (
        10,
        '78 boulevard du Sport',
        'Marseille',
        '13008',
        'Zone industrielle'
    );

-- 6. COULEURS
INSERT INTO
    _couleur (code_hexa, nom, type_couleur)
VALUES (
        '#FF0000',
        'Rouge vif',
        'Rouge'
    ),
    (
        '#0000FF',
        'Bleu marine',
        'Bleu'
    ),
    ('#000000', 'Noir', 'Noir'),
    (
        '#FFFFFF',
        'Blanc pur',
        'Blanc'
    ),
    (
        '#00FF00',
        'Vert émeraude',
        'Vert'
    ),
    (
        '#FFFF00',
        'Jaune citron',
        'Jaune'
    ),
    ('#FFA500', 'Orange', 'Orange'),
    ('#808080', 'Gris', 'Gris'),
    (
        '#8B4513',
        'Marron chocolat',
        'Marron'
    ),
    ('#EE82EE', 'Violet', 'Violet'),
    (
        '#87CEEB',
        'Bleu ciel',
        'Bleu'
    ),
    (
        '#32CD32',
        'Vert lime',
        'Vert'
    );

-- 7. CATÉGORIES
INSERT INTO
    _categorie_produit (nom_categorie)
VALUES ('Électronique'),
    ('Vêtements'),
    ('Accessoires'),
    ('Maison'),
    ('Sport'),
    ('Livres'),
    ('Informatique'),
    ('Mode homme'),
    ('Mode femme'),
    ('Chaussures');

-- 8. TVA
INSERT INTO
    _TVA (montant_TVA, libelle_TVA)
VALUES (20.0, 'TVA normale'),
    (10.0, 'TVA intermédiaire'),
    (5.5, 'TVA réduite'),
    (2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO
    _produit (
        id_TVA,
        id_vendeur,
        p_nom,
        p_description,
        p_prix,
        p_stock,
        p_statut,
        p_origine,
        p_poids,
        p_volume,
        p_frais_de_port,
        p_note,
        p_nb_ventes
    )
VALUES (
        1,
        1,
        'Smartphone XPro',
        'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G',
        599.99,
        35,
        'En ligne',
        'Bretagne',
        0.180,
        0.01,
        5.99,
        4.3,
        15
    ),
    (
        1,
        1,
        'Ordinateur portable Ultra',
        'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7',
        899.99,
        22,
        'En ligne',
        'Bretagne',
        2.5,
        0.03,
        9.99,
        4.0,
        8
    ),
    (
        1,
        2,
        'T-shirt coton bio',
        'T-shirt 100% coton biologique, coupe regular, diverses couleurs',
        24.99,
        58,
        'En ligne',
        'Bretagne',
        0.15,
        0.5,
        3.99,
        5.0,
        42
    ),
    (
        1,
        2,
        'Jean slim',
        'Jean coupe slim stretch, denim premium',
        49.99,
        62,
        'En ligne',
        'Bretagne',
        1.00,
        0.01,
        4.99,
        NULL,
        18
    ),
    (
        1,
        2,
        'Robe d été',
        'Robe légère et fluide pour l été, motifs floraux',
        39.99,
        48,
        'En ligne',
        'Bretagne',
        0.30,
        0.08,
        4.99,
        NULL,
        12
    ),
    (
        2,
        1,
        'Casque audio Bluetooth',
        'Casque sans fil avec réduction de bruit active, autonomie 30h',
        149.99,
        15,
        'En ligne',
        'Bretagne',
        0.25,
        0.02,
        5.99,
        4.5,
        25
    ),
    (
        1,
        2,
        'Sac à dos urbain',
        'Sac à dos pour ordinateur portable, compartiments multiples, imperméable',
        69.99,
        35,
        'En ligne',
        'Bretagne',
        0.60,
        0.15,
        6.99,
        NULL,
        10
    ),
    (
        1,
        1,
        'Montre connectée',
        'Montre sport avec GPS, cardiofréquencemètre, étanche 50m',
        199.99,
        15,
        'En ligne',
        'Bretagne',
        0.05,
        0.01,
        3.99,
        4.7,
        20
    ),
    (
        1,
        3,
        'Chaussures running',
        'Chaussures de course avec amorti premium, semelle respirante',
        89.99,
        54,
        'En ligne',
        'Bretagne',
        0.40,
        0.08,
        5.99,
        4.2,
        16
    ),
    (
        1,
        1,
        'Tablette 10 pouces',
        'Tablette Android, écran Full HD, 64Go, stylet inclus',
        299.99,
        16,
        'En ligne',
        'Bretagne',
        0.50,
        0.02,
        7.99,
        3.8,
        9
    ),
    (
        1,
        3,
        'Ballon de football',
        'Ballon officiel en cuir synthétique, taille 5',
        29.99,
        85,
        'En ligne',
        'Bretagne',
        0.45,
        0.06,
        4.99,
        4.6,
        35
    ),
    (
        1,
        2,
        'Veste en cuir',
        'Veste en cuir véritable, coupe motard, doublure intérieure',
        189.99,
        15,
        'En ligne',
        'Bretagne',
        1.20,
        0.01,
        8.99,
        NULL,
        5
    ),
    (
        3,
        1,
        'Livre cuisine française',
        'Recettes traditionnelles de cuisine française, 300 pages',
        24.99,
        28,
        'En ligne',
        'Bretagne',
        0.80,
        0.03,
        3.99,
        4.8,
        22
    ),
    (
        1,
        3,
        'Tapis de yoga',
        'Tapis antidérapant, épaisseur 6mm, avec sac de transport',
        34.99,
        52,
        'En ligne',
        'Bretagne',
        1.10,
        0.02,
        5.99,
        4.4,
        28
    ),
    (
        1,
        1,
        'Clavier mécanique RGB',
        'Clavier gamer avec rétroéclairage RGB, switches mécaniques',
        79.99,
        29,
        'En ligne',
        'Bretagne',
        0.90,
        0.04,
        5.99,
        4.1,
        11
    ),
    (
        1,
        1,
        'Console NextGen',
        'Console de jeu dernière génération, 1To SSD, 4K HDR',
        499.99,
        0,
        'Hors ligne',
        'France',
        3.5,
        0.02,
        14.99,
        4.8,
        25
    ),
    (
        1,
        2,
        'Sweat à capuche premium',
        'Sweat-shirt en coton bio, coupe oversize, poche kangourou',
        59.99,
        0,
        'Hors ligne',
        'France',
        0.70,
        0.03,
        5.99,
        4.4,
        18
    ),
    (
        1,
        3,
        'Raquette de tennis pro',
        'Raquette carbone, tension 25kg, grip confort',
        129.99,
        0,
        'Hors ligne',
        'France',
        0.35,
        0.02,
        6.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Écran gaming 4K 27"',
        'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms',
        349.99,
        0,
        'Hors ligne',
        'France',
        5.2,
        0.35,
        19.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Baskets limited edition',
        'Baskets cuir véritable, édition limitée, semelle comfort',
        179.99,
        0,
        'Hors ligne',
        'France',
        0.80,
        0.06,
        7.99,
        4.9,
        65
    ),
    (
        1,
        3,
        'Vélo de route carbone',
        'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses',
        1299.99,
        0,
        'Hors ligne',
        'UE',
        8.5,
        0.15,
        29.99,
        4.8,
        25
    ),
    (
        1,
        1,
        'Drone professionnel 4K',
        'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min',
        899.99,
        0,
        'Hors ligne',
        'UE',
        1.2,
        0.02,
        12.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Manteau d hiver imperméable',
        'Manteau longueur genoux, doublure polaire, coupe-vent',
        179.99,
        0,
        'Hors ligne',
        'UE',
        1.5,
        0.01,
        8.99,
        4.4,
        65
    ),
    (
        1,
        3,
        'Tente 4 places',
        'Tente familiale, double toit, arceaux aluminium, imperméable',
        249.99,
        0,
        'Hors ligne',
        'Hors UE',
        4.8,
        0.08,
        19.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Enceinte Bluetooth waterproof',
        'Enceinte portable, autonomie 24h, résistance IP67',
        129.99,
        0,
        'Hors ligne',
        'Hors UE',
        0.9,
        0.05,
        6.99,
        4.9,
        95
    ),
    (
        2,
        1,
        'Pull Marin de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.',
        36.37,
        31,
        'En ligne',
        'Bretagne',
        2.06,
        0.45,
        5.78,
        4.4,
        12
    ),
    (
        1,
        1,
        'Bonnet Miki de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.',
        121.37,
        6,
        'Hors ligne',
        'Bretagne',
        2.3,
        0.09,
        8.8,
        4.3,
        60
    ),
    (
        2,
        3,
        'Galettes Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        147.92,
        142,
        'En ligne',
        'Bretagne',
        0.46,
        0.46,
        5.71,
        4.3,
        97
    ),
    (
        1,
        3,
        'Écharpe Rayée Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        173.77,
        102,
        'En ligne',
        'Bretagne',
        0.91,
        0.32,
        8.28,
        4.4,
        58
    ),
    (
        1,
        2,
        'Écharpe Rayée de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.',
        197.02,
        168,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.12,
        7.92,
        4.8,
        19
    ),
    (
        4,
        2,
        'Ciré Navy de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        104.35,
        169,
        'En ligne',
        'Bretagne',
        1.43,
        0.14,
        7.22,
        4.6,
        72
    ),
    (
        4,
        3,
        'Bracelet Ancre Fait main',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        172.75,
        44,
        'Hors ligne',
        'Bretagne',
        1.92,
        0.4,
        8.8,
        4.1,
        102
    ),
    (
        1,
        3,
        'Marinière Local',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        74.29,
        80,
        'Hors ligne',
        'Bretagne',
        1.36,
        0.23,
        13.58,
        4.9,
        72
    ),
    (
        3,
        1,
        'Bracelet Ancre de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.',
        40.53,
        140,
        'En ligne',
        'Bretagne',
        2.76,
        0.3,
        9.4,
        4.1,
        97
    ),
    (
        3,
        3,
        'Pendentif Hermine Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        164.23,
        199,
        'Hors ligne',
        'Bretagne',
        1.64,
        0.07,
        10.94,
        4.9,
        47
    ),
    (
        1,
        3,
        'Sac Voile de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.',
        136.95,
        100,
        'En ligne',
        'Bretagne',
        1.37,
        0.26,
        6.09,
        4.2,
        91
    ),
    (
        2,
        3,
        'Écharpe Rayée de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        21.13,
        22,
        'Hors ligne',
        'Bretagne',
        2.73,
        0.43,
        5.64,
        4.2,
        129
    ),
    (
        1,
        2,
        'Coussin Triskell de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        134.55,
        95,
        'Hors ligne',
        'Bretagne',
        1.33,
        0.24,
        11.56,
        4.7,
        30
    ),
    (
        1,
        3,
        'Écharpe Rayée Authentique',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.',
        36.49,
        51,
        'En ligne',
        'Bretagne',
        0.91,
        0.13,
        13.31,
        4.4,
        145
    ),
    (
        4,
        3,
        'Écharpe Rayée Bio',
        'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.',
        50.4,
        107,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.09,
        5.02,
        4.4,
        121
    ),
    (
        1,
        3,
        'Bonnet Miki Authentique',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        119.47,
        143,
        'En ligne',
        'Bretagne',
        0.28,
        0.16,
        5.45,
        4.5,
        140
    ),
    (
        3,
        1,
        'Ciré Navy de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        187.96,
        150,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.3,
        10.57,
        4.4,
        149
    ),
    (
        1,
        1,
        'Bol Breton Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.',
        66.7,
        85,
        'En ligne',
        'Bretagne',
        2.79,
        0.47,
        5.08,
        4.6,
        149
    ),
    (
        1,
        3,
        'Bol Breton Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        176.18,
        99,
        'Hors ligne',
        'Bretagne',
        0.93,
        0.22,
        9.89,
        4.3,
        140
    ),
    (
        3,
        1,
        'Pull Marin de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.',
        30.23,
        146,
        'En ligne',
        'Bretagne',
        0.55,
        0.15,
        6.9,
        4.3,
        72
    ),
    (
        1,
        1,
        'Affiche Vintage de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        155.74,
        168,
        'En ligne',
        'Bretagne',
        2.94,
        0.09,
        8.98,
        4.7,
        148
    ),
    (
        2,
        3,
        'Vareuse Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        120.09,
        42,
        'En ligne',
        'Bretagne',
        1.35,
        0.03,
        8.28,
        4.9,
        15
    ),
    (
        3,
        2,
        'Pull Marin Bio',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.',
        151.65,
        65,
        'En ligne',
        'Bretagne',
        2.61,
        0.49,
        12.3,
        4.9,
        11
    ),
    (
        1,
        3,
        'Kabig Bio',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.',
        172.27,
        61,
        'En ligne',
        'Bretagne',
        0.68,
        0.46,
        8.15,
        4.8,
        63
    ),
    (
        1,
        2,
        'Phare Miniature Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        62.75,
        169,
        'En ligne',
        'Bretagne',
        1.58,
        0.34,
        12.59,
        4.3,
        12
    ),
    (
        3,
        1,
        'Bol Breton Fait main',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        75.33,
        85,
        'Hors ligne',
        'Bretagne',
        1.37,
        0.49,
        6.04,
        4.9,
        53
    ),
    (
        3,
        3,
        'Bracelet Ancre de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        23.23,
        175,
        'Hors ligne',
        'Bretagne',
        2.77,
        0.32,
        10.97,
        4.1,
        81
    ),
    (
        1,
        2,
        'Caramels de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        135.67,
        102,
        'Hors ligne',
        'Bretagne',
        2.06,
        0.45,
        10.54,
        4.3,
        145
    ),
    (
        3,
        3,
        'Affiche Vintage de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.',
        137.69,
        135,
        'Hors ligne',
        'Bretagne',
        1.47,
        0.45,
        12.16,
        4.2,
        26
    ),
    (
        4,
        2,
        'Écharpe Rayée de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        37.85,
        16,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.24,
        12.65,
        4.1,
        111
    ),
    (
        4,
        3,
        'Vareuse de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        51.36,
        183,
        'Hors ligne',
        'Bretagne',
        1.6,
        0.03,
        7.24,
        4.8,
        121
    ),
    (
        4,
        3,
        'Bracelet Ancre Durable',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.',
        150.55,
        126,
        'En ligne',
        'Bretagne',
        1.41,
        0.38,
        12.56,
        4.3,
        138
    ),
    (
        1,
        2,
        'Lampe Tempête de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        73.48,
        143,
        'Hors ligne',
        'Bretagne',
        0.33,
        0.08,
        8.45,
        4.2,
        59
    ),
    (
        4,
        1,
        'Sac Voile de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.',
        167.42,
        104,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.3,
        11.26,
        4.9,
        102
    ),
    (
        4,
        1,
        'Caramels de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        61.58,
        129,
        'En ligne',
        'Bretagne',
        0.18,
        0.17,
        11.11,
        4.4,
        47
    ),
    (
        4,
        2,
        'Pendentif Hermine de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        35.65,
        123,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.14,
        7.95,
        4.5,
        91
    ),
    (
        2,
        1,
        'Ciré Navy Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.',
        19.84,
        94,
        'En ligne',
        'Bretagne',
        0.75,
        0.04,
        13.62,
        4.0,
        12
    ),
    (
        3,
        1,
        'Vareuse de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        51.2,
        184,
        'En ligne',
        'Bretagne',
        0.84,
        0.19,
        10.45,
        5.0,
        34
    ),
    (
        1,
        2,
        'Pendentif Hermine Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        47.48,
        156,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.32,
        5.92,
        4.8,
        35
    ),
    (
        4,
        1,
        'Galettes de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.',
        89.39,
        130,
        'Hors ligne',
        'Bretagne',
        0.41,
        0.48,
        10.72,
        4.8,
        44
    ),
    (
        2,
        2,
        'Sac Voile Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.',
        148.16,
        73,
        'Hors ligne',
        'Bretagne',
        1.03,
        0.13,
        13.41,
        4.3,
        120
    ),
    (
        1,
        1,
        'Marinière de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.',
        50.09,
        71,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.44,
        11.31,
        4.3,
        7
    ),
    (
        4,
        3,
        'Sac Voile Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        102.77,
        9,
        'Hors ligne',
        'Bretagne',
        0.37,
        0.12,
        11.23,
        4.3,
        99
    ),
    (
        2,
        1,
        'Sac Voile Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        61.2,
        69,
        'Hors ligne',
        'Bretagne',
        0.77,
        0.36,
        7.84,
        4.7,
        52
    ),
    (
        1,
        1,
        'Pendentif Hermine Local',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.',
        167.37,
        80,
        'Hors ligne',
        'Bretagne',
        0.76,
        0.1,
        5.13,
        4.5,
        75
    ),
    (
        1,
        2,
        'Vareuse Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        118.5,
        125,
        'Hors ligne',
        'Bretagne',
        1.49,
        0.18,
        13.69,
        4.3,
        127
    ),
    (
        4,
        2,
        'Pendentif Hermine Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        116.38,
        82,
        'Hors ligne',
        'Bretagne',
        0.35,
        0.13,
        10.02,
        4.4,
        62
    ),
    (
        2,
        1,
        'Pendentif Hermine de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        21.38,
        194,
        'En ligne',
        'Bretagne',
        0.39,
        0.38,
        10.63,
        4.3,
        25
    ),
    (
        2,
        2,
        'Ciré Navy de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.',
        140.29,
        125,
        'En ligne',
        'Bretagne',
        0.94,
        0.12,
        11.36,
        4.7,
        121
    ),
    (
        4,
        1,
        'Pull Marin Authentique',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        181.69,
        41,
        'Hors ligne',
        'Bretagne',
        0.31,
        0.09,
        7.77,
        4.7,
        150
    ),
    (
        1,
        1,
        'Bolée à Cidre Local',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        103.33,
        25,
        'En ligne',
        'Bretagne',
        1.83,
        0.45,
        11.61,
        4.6,
        11
    ),
    (
        4,
        2,
        'Bol Breton de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.14,
        76,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.3,
        10.71,
        4.5,
        28
    ),
    (
        3,
        2,
        'Phare Miniature de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        141.1,
        78,
        'Hors ligne',
        'Bretagne',
        2.02,
        0.21,
        11.84,
        4.0,
        27
    ),
    (
        1,
        1,
        'Caramels Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        112.55,
        110,
        'Hors ligne',
        'Bretagne',
        0.26,
        0.26,
        10.6,
        4.5,
        118
    ),
    (
        4,
        1,
        'Vareuse de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.',
        101.61,
        12,
        'En ligne',
        'Bretagne',
        2.92,
        0.31,
        7.15,
        4.2,
        146
    ),
    (
        2,
        2,
        'Lampe Tempête Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        145.44,
        135,
        'En ligne',
        'Bretagne',
        2.15,
        0.21,
        9.34,
        4.5,
        121
    ),
    (
        4,
        1,
        'Bracelet Ancre de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.',
        159.31,
        111,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.4,
        7.4,
        4.0,
        81
    ),
    (
        2,
        2,
        'Coussin Triskell Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        112.71,
        121,
        'En ligne',
        'Bretagne',
        2.81,
        0.44,
        13.83,
        4.2,
        103
    ),
    (
        1,
        2,
        'Coussin Triskell Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        159.76,
        171,
        'En ligne',
        'Bretagne',
        2.94,
        0.25,
        5.33,
        4.5,
        89
    ),
    (
        1,
        2,
        'Lampe Tempête de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.75,
        44,
        'Hors ligne',
        'Bretagne',
        0.32,
        0.39,
        7.39,
        4.6,
        106
    ),
    (
        1,
        2,
        'Coussin Triskell Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        54.37,
        180,
        'En ligne',
        'Bretagne',
        2.77,
        0.5,
        11.72,
        4.4,
        30
    ),
    (
        2,
        1,
        'Bolée à Cidre de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.',
        20.61,
        96,
        'En ligne',
        'Bretagne',
        1.19,
        0.08,
        9.78,
        4.6,
        51
    ),
    (
        3,
        3,
        'Caramels Durable',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        37.05,
        123,
        'En ligne',
        'Bretagne',
        1.95,
        0.24,
        11.0,
        4.9,
        124
    ),
    (
        2,
        2,
        'Lampe Tempête Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        90.19,
        69,
        'Hors ligne',
        'Bretagne',
        1.42,
        0.16,
        13.99,
        4.9,
        32
    ),
    (
        3,
        1,
        'Bolée à Cidre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        134.41,
        75,
        'Hors ligne',
        'Bretagne',
        0.12,
        0.43,
        12.0,
        5.0,
        132
    ),
    (
        3,
        2,
        'Bonnet Miki Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        180.74,
        170,
        'Hors ligne',
        'Bretagne',
        0.21,
        0.4,
        5.3,
        4.4,
        38
    ),
    (
        4,
        1,
        'Bonnet Miki Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        182.65,
        47,
        'En ligne',
        'Bretagne',
        0.85,
        0.41,
        9.34,
        4.8,
        91
    ),
    (
        3,
        1,
        'Caramels de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        84.57,
        72,
        'En ligne',
        'Bretagne',
        1.66,
        0.23,
        11.06,
        4.7,
        102
    ),
    (
        1,
        1,
        'Marinière Premium',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        51.84,
        21,
        'Hors ligne',
        'Bretagne',
        1.94,
        0.24,
        11.31,
        4.6,
        34
    ),
    (
        1,
        2,
        'Pull Marin de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        35.64,
        121,
        'Hors ligne',
        'Bretagne',
        1.18,
        0.48,
        11.27,
        4.5,
        44
    ),
    (
        4,
        2,
        'Ciré Jaune de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        189.65,
        97,
        'En ligne',
        'Bretagne',
        0.39,
        0.35,
        9.9,
        5.0,
        96
    ),
    (
        1,
        3,
        'Lampe Tempête Authentique',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        122.86,
        10,
        'En ligne',
        'Bretagne',
        0.25,
        0.17,
        13.9,
        4.8,
        57
    ),
    (
        1,
        3,
        'Bonnet Miki de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        159.05,
        157,
        'En ligne',
        'Bretagne',
        0.11,
        0.43,
        6.3,
        4.1,
        69
    ),
    (
        3,
        3,
        'Marinière Authentique',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        12.98,
        72,
        'En ligne',
        'Bretagne',
        0.25,
        0.37,
        9.73,
        4.7,
        126
    ),
    (
        4,
        2,
        'Bracelet Ancre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.',
        181.75,
        173,
        'En ligne',
        'Bretagne',
        1.61,
        0.23,
        13.68,
        4.1,
        127
    ),
    (
        3,
        2,
        'Lampe Tempête de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        38.04,
        37,
        'Hors ligne',
        'Bretagne',
        0.9,
        0.32,
        9.94,
        4.3,
        140
    ),
    (
        3,
        2,
        'Pull Marin de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        177.85,
        110,
        'En ligne',
        'Bretagne',
        1.08,
        0.23,
        8.74,
        4.1,
        114
    ),
    (
        3,
        3,
        'Coussin Triskell Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        27.62,
        29,
        'En ligne',
        'Bretagne',
        2.26,
        0.19,
        6.17,
        4.1,
        148
    ),
    (
        3,
        3,
        'Galettes Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.',
        123.48,
        95,
        'Hors ligne',
        'Bretagne',
        0.4,
        0.26,
        6.39,
        4.5,
        32
    ),
    (
        1,
        1,
        'Bol Breton Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.',
        194.19,
        164,
        'Hors ligne',
        'Bretagne',
        1.88,
        0.32,
        5.24,
        4.9,
        73
    );

-- 10. PROMOTIONS (futures)
INSERT INTO
    _promotion (
        id_produit,
        promotion_debut,
        promotion_fin
    )
VALUES (
        1,
        '2027-12-20 00:00:00',
        '2027-12-25 23:59:00'
    ),
    (
        2,
        '2026-02-01 00:00:00',
        '2026-02-07 23:59:00'
    ),
    (
        3,
        '2026-02-16 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        4,
        '2026-04-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        5,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        6,
        '2026-06-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        7,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 9. RÉDUCTIONS (futures)
INSERT INTO
    _reduction (
        id_produit,
        reduction_pourcentage,
        reduction_debut,
        reduction_fin
    )
VALUES (
        1,
        10.00,
        '2026-01-05 00:00:00',
        '2026-09-19 23:59:00'
    ),
    (
        2,
        15.00,
        '2026-02-15 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        3,
        20.00,
        '2026-01-01 00:00:00',
        '2026-05-15 23:59:00'
    ),
    (
        4,
        25.00,
        '2026-01-20 00:00:00',
        '2026-02-26 23:59:00'
    ),
    (
        5,
        30.00,
        '2026-06-01 00:00:00',
        '2026-06-30 23:59:00'
    ),
    (
        6,
        60.00,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        7,
        55.00,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        8,
        70.00,
        '2026-01-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        9,
        65.00,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 12. IMAGES
INSERT INTO
    _image (i_lien, i_title, i_alt)
VALUES (
        '/img/photo/smartphone_xpro.jpg',
        'Smartphone XPro.jpg',
        'Image du smartphone'
    ),
    (
        '/img/photo/ordinateur_portable_ultra.jpg',
        'Ordinateur portable.jpeg',
        'Image de l ordinateur'
    ),
    (
        '/img/photo/t_shirt_coton_bio.jpg',
        'T-shirt.png',
        'Image du t-shirt'
    ),
    (
        '/img/photo/jean_slim.jpg',
        'Jean.jpg',
        'Image du jean'
    ),
    (
        '/img/photo/casque_audio_bluetooth.jpg',
        'Casque audio.jpg',
        'Image du casque'
    ),
    (
        '/img/photo/avatar_jean.jpg',
        'Avatar Jean.jpeg',
        'Photo de profil Jean'
    ),
    (
        '/img/photo/avatar_marie.jpg',
        'Avatar Marie.jpg',
        'Photo de profil Marie'
    ),
    (
        '/img/photo/logo_techstore.jpg',
        'Logo TechStore.jpg',
        'Logo entreprise TechStore'
    ),
    (
        '/img/photo/logo_fashionhub.jpg',
        'Logo FashionHub.jpg',
        'Logo entreprise FashionHub'
    ),
    (
        '/img/photo/montre_connect_e.jpg',
        'Montre connectée.jpg',
        'Image de la montre'
    ),
    (
        '/img/photo/sac___dos_urbain.jpg',
        'Sac à dos.jpeg',
        'Image du sac'
    ),
    (
        '/img/photo/chaussures_running.jpg',
        'Chaussures running.jpeg',
        'Image des chaussures'
    ),
    (
        '/img/photo/tablette_10_pouces.jpg',
        'Tablette.jpg',
        'Image de la tablette'
    ),
    (
        '/img/photo/ballon_de_football.jpg',
        'Ballon football.jpg',
        'Image du ballon'
    ),
    (
        '/img/photo/veste_en_cuir.jpg',
        'Veste cuir.jpg',
        'Image de la veste'
    ),
    (
        '/img/photo/livre_cuisine_fran_aise.jpg',
        'Livre cuisine.jpeg',
        'Image du livre'
    ),
    (
        '/img/photo/tapis_de_yoga.jpg',
        'Tapis yoga.jpeg',
        'Image du tapis'
    ),
    (
        '/img/photo/clavier_m_canique_rgb.jpg',
        'Clavier.jpg',
        'Image du clavier'
    ),
    (
        '/img/photo/console_nextgen.jpg',
        'Console NextGen.jpg',
        'Image de la console'
    ),
    (
        '/img/photo/sweat___capuche_premium.jpg',
        'Sweat à capuche.jpeg',
        'Image du sweat'
    ),
    (
        '/img/photo/raquette_de_tennis_pro.jpg',
        'Raquette tennis.jpg',
        'Image de la raquette'
    ),
    (
        '/img/photo/_cran_gaming_4k_27_.jpg',
        'Écran 4K.jpeg',
        'Image de l écran'
    ),
    (
        '/img/photo/baskets_limited_edition.jpg',
        'Baskets limited.jpeg',
        'Image des baskets'
    ),
    (
        '/img/photo/v_lo_de_route_carbone.jpg',
        'Vélo route.jpeg',
        'Image du vélo'
    ),
    (
        '/img/photo/drone_professionnel_4k.jpg',
        'Drone 4K.jpg',
        'Image du drone'
    ),
    (
        '/img/photo/manteau_d_hiver_imperm_able.jpg',
        'Manteau hiver.jpeg',
        'Image du manteau'
    ),
    (
        '/img/photo/tente_4_places.jpg',
        'Tente 4 places.jpg',
        'Image de la tente'
    ),
    (
        '/img/photo/enceinte_bluetooth_waterproof.jpg',
        'Enceinte Bluetooth.jpg',
        'Image de l enceinte'
    ),
    (
        '/img/photo/pull_marin_de_saint_malo.jpg',
        'Pull Marin de Saint-Malo',
        'Photo de Pull Marin de Saint-Malo'
    ),
    (
        '/img/photo/bonnet_miki_de_carnac.jpg',
        'Bonnet Miki de Carnac',
        'Photo de Bonnet Miki de Carnac'
    ),
    (
        '/img/photo/galettes_local.jpg',
        'Galettes Local',
        'Photo de Galettes Local'
    ),
    (
        '/img/photo/_charpe_ray_e_fait_main.jpg',
        'Écharpe Rayée Fait main',
        'Photo de Écharpe Rayée Fait main'
    ),
    (
        '/img/photo/_charpe_ray_e_de_brest.jpg',
        'Écharpe Rayée de Brest',
        'Photo de Écharpe Rayée de Brest'
    ),
    (
        '/img/photo/cir__navy_de_concarneau.jpg',
        'Ciré Navy de Concarneau',
        'Photo de Ciré Navy de Concarneau'
    ),
    (
        '/img/photo/bracelet_ancre_fait_main.jpg',
        'Bracelet Ancre Fait main',
        'Photo de Bracelet Ancre Fait main'
    ),
    (
        '/img/photo/marini_re_local.jpg',
        'Marinière Local',
        'Photo de Marinière Local'
    ),
    (
        '/img/photo/bracelet_ancre_de_concarneau.jpg',
        'Bracelet Ancre de Concarneau',
        'Photo de Bracelet Ancre de Concarneau'
    ),
    (
        '/img/photo/pendentif_hermine_fait_main.jpg',
        'Pendentif Hermine Fait main',
        'Photo de Pendentif Hermine Fait main'
    ),
    (
        '/img/photo/sac_voile_de_concarneau.jpg',
        'Sac Voile de Concarneau',
        'Photo de Sac Voile de Concarneau'
    ),
    (
        '/img/photo/_charpe_ray_e_de_saint_malo.jpg',
        'Écharpe Rayée de Saint-Malo',
        'Photo de Écharpe Rayée de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_de_roscoff.jpg',
        'Coussin Triskell de Roscoff',
        'Photo de Coussin Triskell de Roscoff'
    ),
    (
        '/img/photo/_charpe_ray_e_authentique.jpg',
        'Écharpe Rayée Authentique',
        'Photo de Écharpe Rayée Authentique'
    ),
    (
        '/img/photo/_charpe_ray_e_bio.jpg',
        'Écharpe Rayée Bio',
        'Photo de Écharpe Rayée Bio'
    ),
    (
        '/img/photo/bonnet_miki_authentique.jpg',
        'Bonnet Miki Authentique',
        'Photo de Bonnet Miki Authentique'
    ),
    (
        '/img/photo/cir__navy_de_quimper.jpg',
        'Ciré Navy de Quimper',
        'Photo de Ciré Navy de Quimper'
    ),
    (
        '/img/photo/bol_breton_traditionnel.jpg',
        'Bol Breton Traditionnel',
        'Photo de Bol Breton Traditionnel'
    ),
    (
        '/img/photo/bol_breton_premium.jpg',
        'Bol Breton Premium',
        'Photo de Bol Breton Premium'
    ),
    (
        '/img/photo/pull_marin_de_brest.jpg',
        'Pull Marin de Brest',
        'Photo de Pull Marin de Brest'
    ),
    (
        '/img/photo/affiche_vintage_de_dinard.jpg',
        'Affiche Vintage de Dinard',
        'Photo de Affiche Vintage de Dinard'
    ),
    (
        '/img/photo/vareuse_artisanal.jpg',
        'Vareuse Artisanal',
        'Photo de Vareuse Artisanal'
    ),
    (
        '/img/photo/pull_marin_bio.jpg',
        'Pull Marin Bio',
        'Photo de Pull Marin Bio'
    ),
    (
        '/img/photo/kabig_bio.jpg',
        'Kabig Bio',
        'Photo de Kabig Bio'
    ),
    (
        '/img/photo/phare_miniature_fait_main.jpg',
        'Phare Miniature Fait main',
        'Photo de Phare Miniature Fait main'
    ),
    (
        '/img/photo/bol_breton_fait_main.jpg',
        'Bol Breton Fait main',
        'Photo de Bol Breton Fait main'
    ),
    (
        '/img/photo/bracelet_ancre_de_carnac.jpg',
        'Bracelet Ancre de Carnac',
        'Photo de Bracelet Ancre de Carnac'
    ),
    (
        '/img/photo/caramels_de_dinard.jpg',
        'Caramels de Dinard',
        'Photo de Caramels de Dinard'
    ),
    (
        '/img/photo/affiche_vintage_de_vannes.jpg',
        'Affiche Vintage de Vannes',
        'Photo de Affiche Vintage de Vannes'
    ),
    (
        '/img/photo/_charpe_ray_e_de_dinard.jpg',
        'Écharpe Rayée de Dinard',
        'Photo de Écharpe Rayée de Dinard'
    ),
    (
        '/img/photo/vareuse_de_saint_malo.jpg',
        'Vareuse de Saint-Malo',
        'Photo de Vareuse de Saint-Malo'
    ),
    (
        '/img/photo/bracelet_ancre_durable.jpg',
        'Bracelet Ancre Durable',
        'Photo de Bracelet Ancre Durable'
    ),
    (
        '/img/photo/lampe_temp_te_de_quimper.jpg',
        'Lampe Tempête de Quimper',
        'Photo de Lampe Tempête de Quimper'
    ),
    (
        '/img/photo/sac_voile_de_pont_aven.jpg',
        'Sac Voile de Pont-Aven',
        'Photo de Sac Voile de Pont-Aven'
    ),
    (
        '/img/photo/caramels_de_roscoff.jpg',
        'Caramels de Roscoff',
        'Photo de Caramels de Roscoff'
    ),
    (
        '/img/photo/pendentif_hermine_de_saint_malo.jpg',
        'Pendentif Hermine de Saint-Malo',
        'Photo de Pendentif Hermine de Saint-Malo'
    ),
    (
        '/img/photo/cir__navy_artisanal.jpg',
        'Ciré Navy Artisanal',
        'Photo de Ciré Navy Artisanal'
    ),
    (
        '/img/photo/vareuse_de_pont_aven.jpg',
        'Vareuse de Pont-Aven',
        'Photo de Vareuse de Pont-Aven'
    ),
    (
        '/img/photo/pendentif_hermine_bio.jpg',
        'Pendentif Hermine Bio',
        'Photo de Pendentif Hermine Bio'
    ),
    (
        '/img/photo/galettes_de_quimper.jpg',
        'Galettes de Quimper',
        'Photo de Galettes de Quimper'
    ),
    (
        '/img/photo/sac_voile_durable.jpg',
        'Sac Voile Durable',
        'Photo de Sac Voile Durable'
    ),
    (
        '/img/photo/marini_re_de_pont_aven.jpg',
        'Marinière de Pont-Aven',
        'Photo de Marinière de Pont-Aven'
    ),
    (
        '/img/photo/sac_voile_bio.jpg',
        'Sac Voile Bio',
        'Photo de Sac Voile Bio'
    ),
    (
        '/img/photo/sac_voile_premium.jpg',
        'Sac Voile Premium',
        'Photo de Sac Voile Premium'
    ),
    (
        '/img/photo/pendentif_hermine_local.jpg',
        'Pendentif Hermine Local',
        'Photo de Pendentif Hermine Local'
    ),
    (
        '/img/photo/vareuse_durable.jpg',
        'Vareuse Durable',
        'Photo de Vareuse Durable'
    ),
    (
        '/img/photo/pendentif_hermine_traditionnel.jpg',
        'Pendentif Hermine Traditionnel',
        'Photo de Pendentif Hermine Traditionnel'
    ),
    (
        '/img/photo/pendentif_hermine_de_roscoff.jpg',
        'Pendentif Hermine de Roscoff',
        'Photo de Pendentif Hermine de Roscoff'
    ),
    (
        '/img/photo/cir__navy_de_brest.jpg',
        'Ciré Navy de Brest',
        'Photo de Ciré Navy de Brest'
    ),
    (
        '/img/photo/pull_marin_authentique.jpg',
        'Pull Marin Authentique',
        'Photo de Pull Marin Authentique'
    ),
    (
        '/img/photo/bol_e___cidre_local.jpg',
        'Bolée à Cidre Local',
        'Photo de Bolée à Cidre Local'
    ),
    (
        '/img/photo/bol_breton_de_saint_malo.jpg',
        'Bol Breton de Saint-Malo',
        'Photo de Bol Breton de Saint-Malo'
    ),
    (
        '/img/photo/phare_miniature_de_quimper.jpg',
        'Phare Miniature de Quimper',
        'Photo de Phare Miniature de Quimper'
    ),
    (
        '/img/photo/caramels_artisanal.jpg',
        'Caramels Artisanal',
        'Photo de Caramels Artisanal'
    ),
    (
        '/img/photo/vareuse_de_dinard.jpg',
        'Vareuse de Dinard',
        'Photo de Vareuse de Dinard'
    ),
    (
        '/img/photo/lampe_temp_te_traditionnel.jpg',
        'Lampe Tempête Traditionnel',
        'Photo de Lampe Tempête Traditionnel'
    ),
    (
        '/img/photo/bracelet_ancre_de_brest.jpg',
        'Bracelet Ancre de Brest',
        'Photo de Bracelet Ancre de Brest'
    ),
    (
        '/img/photo/coussin_triskell_premium.jpg',
        'Coussin Triskell Premium',
        'Photo de Coussin Triskell Premium'
    ),
    (
        '/img/photo/coussin_triskell_bio.jpg',
        'Coussin Triskell Bio',
        'Photo de Coussin Triskell Bio'
    ),
    (
        '/img/photo/lampe_temp_te_de_saint_malo.jpg',
        'Lampe Tempête de Saint-Malo',
        'Photo de Lampe Tempête de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_artisanal.jpg',
        'Coussin Triskell Artisanal',
        'Photo de Coussin Triskell Artisanal'
    ),
    (
        '/img/photo/bol_e___cidre_de_saint_malo.jpg',
        'Bolée à Cidre de Saint-Malo',
        'Photo de Bolée à Cidre de Saint-Malo'
    ),
    (
        '/img/photo/caramels_durable.jpg',
        'Caramels Durable',
        'Photo de Caramels Durable'
    ),
    (
        '/img/photo/lampe_temp_te_local.jpg',
        'Lampe Tempête Local',
        'Photo de Lampe Tempête Local'
    ),
    (
        '/img/photo/bol_e___cidre_artisanal.jpg',
        'Bolée à Cidre Artisanal',
        'Photo de Bolée à Cidre Artisanal'
    ),
    (
        '/img/photo/bonnet_miki_traditionnel.jpg',
        'Bonnet Miki Traditionnel',
        'Photo de Bonnet Miki Traditionnel'
    ),
    (
        '/img/photo/bonnet_miki_premium.jpg',
        'Bonnet Miki Premium',
        'Photo de Bonnet Miki Premium'
    ),
    (
        '/img/photo/caramels_de_carnac.jpg',
        'Caramels de Carnac',
        'Photo de Caramels de Carnac'
    ),
    (
        '/img/photo/marini_re_premium.jpg',
        'Marinière Premium',
        'Photo de Marinière Premium'
    ),
    (
        '/img/photo/pull_marin_de_quimper.jpg',
        'Pull Marin de Quimper',
        'Photo de Pull Marin de Quimper'
    ),
    (
        '/img/photo/cir__jaune_de_vannes.jpg',
        'Ciré Jaune de Vannes',
        'Photo de Ciré Jaune de Vannes'
    ),
    (
        '/img/photo/lampe_temp_te_authentique.jpg',
        'Lampe Tempête Authentique',
        'Photo de Lampe Tempête Authentique'
    ),
    (
        '/img/photo/bonnet_miki_de_concarneau.jpg',
        'Bonnet Miki de Concarneau',
        'Photo de Bonnet Miki de Concarneau'
    ),
    (
        '/img/photo/marini_re_authentique.jpg',
        'Marinière Authentique',
        'Photo de Marinière Authentique'
    ),
    (
        '/img/photo/bracelet_ancre_artisanal.jpg',
        'Bracelet Ancre Artisanal',
        'Photo de Bracelet Ancre Artisanal'
    ),
    (
        '/img/photo/lampe_temp_te_de_vannes.jpg',
        'Lampe Tempête de Vannes',
        'Photo de Lampe Tempête de Vannes'
    ),
    (
        '/img/photo/pull_marin_de_carnac.jpg',
        'Pull Marin de Carnac',
        'Photo de Pull Marin de Carnac'
    ),
    (
        '/img/photo/coussin_triskell_fait_main.jpg',
        'Coussin Triskell Fait main',
        'Photo de Coussin Triskell Fait main'
    ),
    (
        '/img/photo/galettes_artisanal.jpg',
        'Galettes Artisanal',
        'Photo de Galettes Artisanal'
    ),
    (
        '/img/photo/bol_breton_bio.jpg',
        'Bol Breton Bio',
        'Photo de Bol Breton Bio'
    );

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO
    _represente_produit (id_image, id_produit)
VALUES (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 6),
    (10, 8),
    (11, 7),
    (12, 9),
    (13, 10),
    (14, 11),
    (15, 12),
    (16, 13),
    (17, 14),
    (18, 15),
    (19, 16),
    (20, 17),
    (21, 18),
    (22, 19),
    (23, 20),
    (24, 21),
    (25, 22),
    (26, 23),
    (27, 24),
    (28, 25),
    (29, 26),
    (30, 27),
    (31, 28),
    (32, 29),
    (33, 30),
    (34, 31),
    (35, 32),
    (36, 33),
    (37, 34),
    (38, 35),
    (39, 36),
    (40, 37),
    (41, 38),
    (42, 39),
    (43, 40),
    (44, 41),
    (45, 42),
    (46, 43),
    (47, 44),
    (48, 45),
    (49, 46),
    (50, 47),
    (51, 48),
    (52, 49),
    (53, 50),
    (54, 51),
    (55, 52),
    (56, 53),
    (57, 54),
    (58, 55),
    (59, 56),
    (60, 57),
    (61, 58),
    (62, 59),
    (63, 60),
    (64, 61),
    (65, 62),
    (66, 63),
    (67, 64),
    (68, 65),
    (69, 66),
    (70, 67),
    (71, 68),
    (72, 69),
    (73, 70),
    (74, 71),
    (75, 72),
    (76, 73),
    (77, 74),
    (78, 75),
    (79, 76),
    (80, 77),
    (81, 78),
    (82, 79),
    (83, 80),
    (84, 81),
    (85, 82),
    (86, 83),
    (87, 84),
    (88, 85),
    (89, 86),
    (90, 87),
    (91, 88),
    (92, 89),
    (93, 90),
    (94, 91),
    (95, 92),
    (96, 93),
    (97, 94),
    (98, 95),
    (99, 96),
    (100, 97),
    (101, 98),
    (102, 99),
    (103, 100),
    (104, 101),
    (105, 102),
    (106, 103),
    (107, 104),
    (108, 105);

-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO
    _represente_compte (id_image, id_compte)
VALUES (6, 4),
    (7, 5),
    (8, 2),
    (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO
    _fait_partie_de (id_produit, id_categorie)
VALUES (1, 1),
    (1, 7),
    (2, 1),
    (2, 7),
    (3, 2),
    (3, 8),
    (4, 2),
    (4, 8),
    (5, 2),
    (5, 9),
    (6, 1),
    (6, 3),
    (7, 3),
    (8, 1),
    (8, 3),
    (8, 5),
    (9, 5),
    (9, 10),
    (10, 1),
    (10, 7),
    (11, 5),
    (12, 2),
    (12, 8),
    (13, 6),
    (14, 5),
    (15, 1),
    (15, 7),
    (16, 1),
    (16, 7),
    (17, 2),
    (17, 8),
    (18, 5),
    (19, 1),
    (19, 7),
    (20, 10),
    (21, 5),
    (22, 1),
    (22, 3),
    (23, 2),
    (23, 8),
    (24, 4),
    (24, 5),
    (25, 1),
    (25, 3),
    (26, 2),
    (26, 8),
    (27, 2),
    (27, 3),
    (27, 8),
    (28, 4),
    (29, 2),
    (29, 3),
    (30, 2),
    (30, 3),
    (31, 2),
    (31, 8),
    (31, 9),
    (32, 3),
    (33, 2),
    (33, 8),
    (33, 9),
    (34, 3),
    (35, 3),
    (36, 3),
    (37, 2),
    (37, 3),
    (38, 4),
    (39, 2),
    (39, 3),
    (40, 2),
    (40, 3),
    (41, 2),
    (41, 3),
    (41, 8),
    (42, 2),
    (42, 8),
    (42, 9),
    (43, 4),
    (44, 4),
    (45, 2),
    (45, 8),
    (46, 4),
    (47, 2),
    (47, 8),
    (48, 2),
    (48, 8),
    (49, 2),
    (49, 8),
    (49, 9),
    (50, 4),
    (51, 4),
    (52, 3),
    (53, 4),
    (54, 4),
    (55, 2),
    (55, 3),
    (56, 2),
    (56, 8),
    (57, 3),
    (58, 4),
    (59, 3),
    (60, 4),
    (61, 3),
    (62, 2),
    (62, 8),
    (62, 9),
    (63, 2),
    (63, 8),
    (64, 3),
    (65, 4),
    (66, 3),
    (67, 2),
    (67, 8),
    (67, 9),
    (68, 3),
    (69, 3),
    (70, 3),
    (71, 2),
    (71, 8),
    (72, 3),
    (73, 3),
    (74, 2),
    (74, 8),
    (74, 9),
    (75, 2),
    (75, 8),
    (76, 4),
    (77, 4),
    (78, 4),
    (79, 4),
    (80, 2),
    (80, 8),
    (81, 4),
    (82, 3),
    (83, 4),
    (84, 4),
    (85, 4),
    (86, 4),
    (87, 4),
    (88, 4),
    (89, 4),
    (90, 4),
    (91, 2),
    (91, 3),
    (91, 8),
    (92, 2),
    (92, 3),
    (92, 8),
    (93, 4),
    (94, 2),
    (94, 8),
    (94, 9),
    (95, 2),
    (95, 8),
    (96, 2),
    (96, 8),
    (96, 9),
    (97, 4),
    (98, 2),
    (98, 3),
    (98, 8),
    (99, 2),
    (99, 8),
    (99, 9),
    (100, 3),
    (101, 4),
    (102, 2),
    (102, 8),
    (103, 4),
    (104, 4),
    (105, 4);

-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO
    _est_dote_de (id_produit, code_hexa)
VALUES (1, '#000000'),
    (1, '#FFFFFF'),
    (2, '#808080'),
    (3, '#0000FF'),
    (3, '#FF0000'),
    (3, '#00FF00'),
    (4, '#0000FF'),
    (4, '#000000'),
    (5, '#FF0000'),
    (5, '#FFFFFF'),
    (6, '#000000'),
    (7, '#808080'),
    (8, '#000000'),
    (9, '#0000FF'),
    (9, '#FF0000'),
    (10, '#808080'),
    (11, '#FFFFFF'),
    (12, '#000000'),
    (12, '#8B4513'),
    (14, '#EE82EE'),
    (14, '#87CEEB'),
    (15, '#000000'),
    (16, '#000000'),
    (16, '#FFFFFF'),
    (17, '#808080'),
    (17, '#000000'),
    (18, '#FFFFFF'),
    (18, '#000000'),
    (19, '#000000'),
    (20, '#FFFFFF'),
    (20, '#000000'),
    (21, '#0000FF'),
    (21, '#FF0000'),
    (22, '#808080'),
    (23, '#000000'),
    (23, '#8B4513'),
    (24, '#87CEEB'),
    (24, '#32CD32'),
    (25, '#000000'),
    (25, '#FF0000'),
    (26, '#8B4513'),
    (27, '#0000FF'),
    (28, '#FF0000'),
    (29, '#8B4513'),
    (30, '#00FF00'),
    (31, '#000000'),
    (32, '#8B4513'),
    (33, '#87CEEB'),
    (34, '#FFFFFF'),
    (35, '#FFFFFF'),
    (36, '#EE82EE'),
    (37, '#FFFFFF'),
    (38, '#0000FF'),
    (39, '#0000FF'),
    (40, '#000000'),
    (41, '#000000'),
    (42, '#FFFFFF'),
    (43, '#8B4513'),
    (44, '#87CEEB'),
    (45, '#87CEEB'),
    (46, '#32CD32'),
    (47, '#87CEEB'),
    (48, '#00FF00'),
    (49, '#FFA500'),
    (50, '#EE82EE'),
    (51, '#FF0000'),
    (52, '#FFFF00'),
    (53, '#FFFFFF'),
    (54, '#0000FF'),
    (55, '#FFFFFF'),
    (56, '#808080'),
    (57, '#00FF00'),
    (58, '#FFFF00'),
    (59, '#00FF00'),
    (60, '#FFA500'),
    (61, '#00FF00'),
    (62, '#FFFFFF'),
    (63, '#00FF00'),
    (64, '#87CEEB'),
    (65, '#EE82EE'),
    (66, '#FFFF00'),
    (67, '#808080'),
    (68, '#FFA500'),
    (69, '#00FF00'),
    (70, '#32CD32'),
    (71, '#0000FF'),
    (72, '#00FF00'),
    (73, '#8B4513'),
    (74, '#FFA500'),
    (75, '#32CD32'),
    (76, '#87CEEB'),
    (77, '#FFFF00'),
    (78, '#0000FF'),
    (79, '#8B4513'),
    (80, '#0000FF'),
    (81, '#EE82EE'),
    (82, '#8B4513'),
    (83, '#FFFF00'),
    (84, '#8B4513'),
    (85, '#FFFF00'),
    (86, '#32CD32'),
    (87, '#EE82EE'),
    (88, '#0000FF'),
    (89, '#EE82EE'),
    (90, '#FFFFFF'),
    (91, '#000000'),
    (92, '#FFFFFF'),
    (93, '#808080'),
    (94, '#808080'),
    (95, '#00FF00'),
    (96, '#0000FF'),
    (97, '#EE82EE'),
    (98, '#000000'),
    (99, '#808080'),
    (100, '#808080'),
    (101, '#0000FF'),
    (102, '#87CEEB'),
    (103, '#FFA500'),
    (104, '#0000FF'),
    (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO
    _seuil_alerte (nb_seuil, message_seuil)
VALUES (
        10,
        'Stock faible - Envisager un réapprovisionnement'
    ),
    (
        5,
        'Stock critique - Réapprovisionnement urgent'
    ),
    (
        3,
        'Rupture imminente - Commander immédiatement'
    ),
    (
        20,
        'Stock normal - Surveillance recommandée'
    ),
    (
        1,
        'Rupture de stock - Produit indisponible'
    );

INSERT INTO
    _adresse (
        id_compte,
        a_numero,
        a_adresse,
        a_ville,
        a_code_postal,
        a_pays
    )
VALUES (
        4,
        13,
        'rue du Pillard',
        'Rennes',
        35590,
        'France'
    );

-- 18. PANIERS/COMMANDES
INSERT INTO
    _panier_commande (id_client, timestamp_commande)
VALUES (1, '2025-11-01 10:30:00'),
    (2, '2025-11-02 14:45:00'),
    (3, '2025-11-03 09:15:00'),
    (1, NULL),
    (4, '2025-11-04 16:20:00'),
    (6, '2025-11-05 11:00:00'),
    (2, NULL),
    (5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO
    _contient (
        id_panier,
        id_produit,
        quantite,
        prix_unitaire,
        remise_unitaire,
        frais_de_port,
        TVA
    )
VALUES (
        1,
        1,
        1,
        599.99,
        0.0,
        5.99,
        20.0
    ),
    (
        1,
        6,
        1,
        149.99,
        0.0,
        5.99,
        20.0
    ),
    (
        2,
        3,
        2,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        2,
        4,
        1,
        49.99,
        0.0,
        4.99,
        20.0
    ),
    (
        3,
        2,
        1,
        899.99,
        0.0,
        9.99,
        20.0
    ),
    (
        4,
        7,
        1,
        69.99,
        0.0,
        6.99,
        20.0
    ),
    (
        5,
        5,
        1,
        39.99,
        0.0,
        4.99,
        20.0
    ),
    (
        5,
        8,
        1,
        199.99,
        0.0,
        3.99,
        20.0
    ),
    (
        6,
        9,
        2,
        89.99,
        0.0,
        5.99,
        20.0
    ),
    (
        7,
        10,
        1,
        299.99,
        0.0,
        7.99,
        20.0
    ),
    (
        8,
        11,
        1,
        29.99,
        0.0,
        4.99,
        20.0
    ),
    (
        8,
        13,
        1,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        8,
        14,
        1,
        34.99,
        0.0,
        5.99,
        20.0
    );

-- 20. FACTURES
INSERT INTO
    _facture (
        id_panier,
        id_adresse,
        f_total_ht,
        f_total_remise,
        f_total_ttc
    )
VALUES (1, 1, 755.98, 0.0, 907.18),
    (2, 1, 103.96, 0.0, 124.75),
    (3, 1, 909.98, 0.0, 1091.98),
    (5, 1, 248.97, 0.0, 298.76),
    (6, 1, 185.97, 0.0, 223.16),
    (8, 1, 95.96, 0.0, 115.15);

-- 21. PAIEMENTS
INSERT INTO
    _paiement (
        id_facture,
        mode_paiement,
        numero_carte,
        mois_annee_expiration,
        cryptogramme_carte,
        timestamp_paiement
    )
VALUES (
        1,
        'CB',
        '1234567890123456',
        '12/27',
        '123',
        '2025-11-01 10:35:00'
    ),
    (
        2,
        'CB',
        '6543210987654321',
        '06/26',
        '456',
        '2025-11-02 14:50:00'
    ),
    (
        3,
        'CB',
        '1111222233334444',
        '03/28',
        '789',
        '2025-11-03 09:20:00'
    ),
    (
        4,
        'CB',
        '9999888877776666',
        '09/27',
        '321',
        '2025-11-04 16:25:00'
    ),
    (
        5,
        'CB',
        '5555666677778888',
        '11/26',
        '654',
        '2025-11-05 11:05:00'
    ),
    (
        6,
        'CB',
        '4444333322221111',
        '08/27',
        '987',
        '2025-11-06 13:35:00'
    );

-- 22. LIVRAISONS
INSERT INTO
    _livraison (
        id_facture,
        date_livraison,
        etat_livraison
    )
VALUES (1, '2025-11-05', 'Livré'),
    (2, '2025-11-06', 'Livré'),
    (3, '2025-11-08', 'En transit'),
    (4, NULL, 'En préparation'),
    (5, '2025-11-09', 'Livré'),
    (6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO
    _definie_pour (id_seuil, id_compte)
VALUES (1, 2),
    (2, 2),
    (3, 2),
    (4, 2),
    (5, 2),
    (1, 3),
    (2, 3),
    (3, 3),
    (5, 3),
    (1, 10),
    (2, 10),
    (3, 10),
    (4, 10),
    (5, 10),
    (5, 1);

-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;

UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;
  
-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;

UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;

UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;

UPDATE cobrec1._commentaire SET a_note = 0.0;
----------- WbStatement -----------
##sqlwb.pos=97611
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;

CREATE SCHEMA cobrec1;

SET SCHEMA 'cobrec1';

-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (
        civilite IN (
            'M.',
            'Mme',
            'Inconnu',
            'Ne souhaite pas s''exprimer',
            'Autre'
        )
    ),
    CONSTRAINT verif_compte_email CHECK (
        email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'
    ),
    CONSTRAINT verif_compte_num_telephone CHECK (
        num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$'
    )
);

ALTER TABLE ONLY cobrec1._compte
ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11, 2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (
        type_couleur IN (
            'Vert',
            'Jaune',
            'Rouge',
            'Noir',
            'Blanc',
            'Bleu',
            'Violet',
            'Orange',
            'Gris',
            'Marron'
        )
    )
);

ALTER TABLE ONLY cobrec1._couleur
ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4, 1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (
        montant_TVA >= 0.00
        AND montant_TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11, 2) DEFAULT 0.0,
    p_volume numeric(11, 2) DEFAULT 0.0,
    p_frais_de_port numeric(11, 2) DEFAULT 0.0,
    p_prix numeric(11, 2) NOT NULL,
    p_note numeric(2, 1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (
        p_note >= 0
        AND p_note <= 5
    ),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (
        p_statut IN (
            'Ébauche',
            'En ligne',
            'Hors ligne',
            'Supprimé'
        )
    ),
    CONSTRAINT verif_produit_origine CHECK (
        p_origine IN (
            'Inconnu',
            'Bretagne',
            'France',
            'UE',
            'Hors UE'
        )
    )
);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) REFERENCES cobrec1._vendeur (id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) REFERENCES cobrec1._TVA (id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5, 2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (
        reduction_pourcentage >= 0.00
        AND reduction_pourcentage <= 100.00
    ),
    /*CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_reduction_fin CHECK (
        reduction_fin > reduction_debut
    )
);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    /*CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_promotion_fin CHECK (
        promotion_fin > promotion_debut
    )
);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11, 2) DEFAULT 0.0,
    f_total_remise numeric(11, 2) DEFAULT 0.0,
    f_total_ttc numeric(11, 2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) REFERENCES cobrec1._adresse (id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2, 1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (
        vote_type IN ('like', 'dislike')
    )
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2, 1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (
        a_note IN (
            NULL,
            0.0,
            0.5,
            1.0,
            1.5,
            2.0,
            2.5,
            3.0,
            3.5,
            4.0,
            4.5,
            5.0
        )
    )
);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) REFERENCES cobrec1._livraison (id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison, id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (
        type_signalement IN (
            'signale_avis',
            'signale_compte',
            'signale_produit'
        )
    )
);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11, 2) NOT NULL,
    remise_unitaire numeric(11, 2) DEFAULT 0.0,
    frais_de_port numeric(11, 2) DEFAULT 0.0,
    TVA numeric(4, 1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (
        TVA >= 0.00
        AND TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
-- CREATE TABLE cobrec1._represente_promotion (
--     id_image integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image)
--             REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) REFERENCES cobrec1._categorie_produit (id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) REFERENCES cobrec1._couleur (code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction)
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) REFERENCES cobrec1._seuil_alerte (id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();

CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

CREATE FUNCTION mise_sur_marche_produit_insert()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche_insert
AFTER INSERT on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit_insert();

CREATE FUNCTION update_p_modif_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_modif = OLD.p_modif) THEN
        NEW.p_modif = CURRENT_TIMESTAMP;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_update_p_modif_produit
BEFORE UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE update_p_modif_produit();

CREATE FUNCTION produit_deja_en_reduction_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_insert
BEFORE INSERT on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_insert();

CREATE FUNCTION produit_deja_en_reduction_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_update
BEFORE UPDATE on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_update();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO
    _compte (
        nom,
        prenom,
        email,
        num_telephone,
        mdp,
        etat_A2F,
        nb_fois_signale,
        nb_signalements_avis,
        nb_cpts_signales,
        nb_avis_signales
    )
VALUES (
        'Maeleau',
        'Le Hyver',
        'admin@cobrec.fr',
        '0601020304',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Lopicier',
        'Mallo',
        'vendeur1@example.com',
        '0612345678',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Elouard',
        'Jean-Jacques',
        'vendeur2@shop.fr',
        '0623456789',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        1,
        0,
        0,
        0
    ),
    (
        'Jean',
        'Dupont',
        'client1@gmail.com',
        '0634567890',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        1,
        0,
        0
    ),
    (
        'Marie',
        'Martin',
        'client2@yahoo.fr',
        '0645678901',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        1,
        0
    ),
    (
        'Pierre',
        'Durand',
        'client3@outlook.com',
        '0656789012',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Sophie',
        'Bernard',
        'client4@free.fr',
        '0667890123',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Lucas',
        'Petit',
        'client5@orange.fr',
        '0678901234',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Emma',
        'Lefebvre',
        'client6@wanadoo.fr',
        '0689012345',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Martinière',
        'Yvili',
        'vendeur3@boutique.fr',
        '0690123456',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    );

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO
    _vendeur (
        id_compte,
        SIREN,
        raison_sociale,
        denomination,
        nb_produits_crees
    )
VALUES (
        2,
        '123456789',
        'TechStore SARL',
        'TechStore',
        5
    ),
    (
        3,
        '987654321',
        'FashionHub SAS',
        'FashionHub',
        3
    ),
    (
        10,
        '456789123',
        'SportPro EURL',
        'SportPro',
        2
    );

-- 4. CLIENTS
INSERT INTO
    _client (
        id_compte,
        c_pseudo,
        c_nb_produits_achetes,
        c_depense_totale,
        c_cloture,
        c_datenaissance
    )
VALUES (
        4,
        'jdupont',
        2,
        907.18,
        FALSE,
        '1985-03-15'
    ),
    (
        5,
        'mmartin',
        3,
        124.75,
        FALSE,
        '1990-07-22'
    ),
    (
        6,
        'pdurand',
        1,
        1091.98,
        FALSE,
        '1988-11-10'
    ),
    (
        7,
        'sbernard',
        2,
        298.76,
        FALSE,
        '1995-05-30'
    ),
    (
        8,
        'lpetit',
        0,
        0.0,
        FALSE,
        '2000-01-18'
    ),
    (
        9,
        'elefebvre',
        1,
        179.98,
        FALSE,
        '1992-09-25'
    );

-- 5. ADRESSES
INSERT INTO
    _adresse (
        id_compte,
        a_adresse,
        a_ville,
        a_code_postal,
        a_complement
    )
VALUES (
        4,
        '15 rue de la Paix',
        'Paris',
        '75001',
        'Apt 5'
    ),
    (
        5,
        '23 avenue des Champs',
        'Lyon',
        '69001',
        NULL
    ),
    (
        6,
        '8 boulevard Victor Hugo',
        'Marseille',
        '13001',
        'Bâtiment B'
    ),
    (
        7,
        '42 rue du Commerce',
        'Toulouse',
        '31000',
        NULL
    ),
    (
        8,
        '67 place de la République',
        'Nice',
        '06000',
        '3ème étage'
    ),
    (
        9,
        '91 rue Principale',
        'Bordeaux',
        '33000',
        NULL
    ),
    (
        2,
        '12 avenue du Commerce',
        'Paris',
        '75015',
        'Entrepôt A'
    ),
    (
        3,
        '55 rue de la Mode',
        'Lyon',
        '69002',
        NULL
    ),
    (
        10,
        '78 boulevard du Sport',
        'Marseille',
        '13008',
        'Zone industrielle'
    );

-- 6. COULEURS
INSERT INTO
    _couleur (code_hexa, nom, type_couleur)
VALUES (
        '#FF0000',
        'Rouge vif',
        'Rouge'
    ),
    (
        '#0000FF',
        'Bleu marine',
        'Bleu'
    ),
    ('#000000', 'Noir', 'Noir'),
    (
        '#FFFFFF',
        'Blanc pur',
        'Blanc'
    ),
    (
        '#00FF00',
        'Vert émeraude',
        'Vert'
    ),
    (
        '#FFFF00',
        'Jaune citron',
        'Jaune'
    ),
    ('#FFA500', 'Orange', 'Orange'),
    ('#808080', 'Gris', 'Gris'),
    (
        '#8B4513',
        'Marron chocolat',
        'Marron'
    ),
    ('#EE82EE', 'Violet', 'Violet'),
    (
        '#87CEEB',
        'Bleu ciel',
        'Bleu'
    ),
    (
        '#32CD32',
        'Vert lime',
        'Vert'
    );

-- 7. CATÉGORIES
INSERT INTO
    _categorie_produit (nom_categorie)
VALUES ('Électronique'),
    ('Vêtements'),
    ('Accessoires'),
    ('Maison'),
    ('Sport'),
    ('Livres'),
    ('Informatique'),
    ('Mode homme'),
    ('Mode femme'),
    ('Chaussures');

-- 8. TVA
INSERT INTO
    _TVA (montant_TVA, libelle_TVA)
VALUES (20.0, 'TVA normale'),
    (10.0, 'TVA intermédiaire'),
    (5.5, 'TVA réduite'),
    (2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO
    _produit (
        id_TVA,
        id_vendeur,
        p_nom,
        p_description,
        p_prix,
        p_stock,
        p_statut,
        p_origine,
        p_poids,
        p_volume,
        p_frais_de_port,
        p_note,
        p_nb_ventes
    )
VALUES (
        1,
        1,
        'Smartphone XPro',
        'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G',
        599.99,
        35,
        'En ligne',
        'Bretagne',
        0.180,
        0.01,
        5.99,
        4.3,
        15
    ),
    (
        1,
        1,
        'Ordinateur portable Ultra',
        'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7',
        899.99,
        22,
        'En ligne',
        'Bretagne',
        2.5,
        0.03,
        9.99,
        4.0,
        8
    ),
    (
        1,
        2,
        'T-shirt coton bio',
        'T-shirt 100% coton biologique, coupe regular, diverses couleurs',
        24.99,
        58,
        'En ligne',
        'Bretagne',
        0.15,
        0.5,
        3.99,
        5.0,
        42
    ),
    (
        1,
        2,
        'Jean slim',
        'Jean coupe slim stretch, denim premium',
        49.99,
        62,
        'En ligne',
        'Bretagne',
        1.00,
        0.01,
        4.99,
        NULL,
        18
    ),
    (
        1,
        2,
        'Robe d été',
        'Robe légère et fluide pour l été, motifs floraux',
        39.99,
        48,
        'En ligne',
        'Bretagne',
        0.30,
        0.08,
        4.99,
        NULL,
        12
    ),
    (
        2,
        1,
        'Casque audio Bluetooth',
        'Casque sans fil avec réduction de bruit active, autonomie 30h',
        149.99,
        15,
        'En ligne',
        'Bretagne',
        0.25,
        0.02,
        5.99,
        4.5,
        25
    ),
    (
        1,
        2,
        'Sac à dos urbain',
        'Sac à dos pour ordinateur portable, compartiments multiples, imperméable',
        69.99,
        35,
        'En ligne',
        'Bretagne',
        0.60,
        0.15,
        6.99,
        NULL,
        10
    ),
    (
        1,
        1,
        'Montre connectée',
        'Montre sport avec GPS, cardiofréquencemètre, étanche 50m',
        199.99,
        15,
        'En ligne',
        'Bretagne',
        0.05,
        0.01,
        3.99,
        4.7,
        20
    ),
    (
        1,
        3,
        'Chaussures running',
        'Chaussures de course avec amorti premium, semelle respirante',
        89.99,
        54,
        'En ligne',
        'Bretagne',
        0.40,
        0.08,
        5.99,
        4.2,
        16
    ),
    (
        1,
        1,
        'Tablette 10 pouces',
        'Tablette Android, écran Full HD, 64Go, stylet inclus',
        299.99,
        16,
        'En ligne',
        'Bretagne',
        0.50,
        0.02,
        7.99,
        3.8,
        9
    ),
    (
        1,
        3,
        'Ballon de football',
        'Ballon officiel en cuir synthétique, taille 5',
        29.99,
        85,
        'En ligne',
        'Bretagne',
        0.45,
        0.06,
        4.99,
        4.6,
        35
    ),
    (
        1,
        2,
        'Veste en cuir',
        'Veste en cuir véritable, coupe motard, doublure intérieure',
        189.99,
        15,
        'En ligne',
        'Bretagne',
        1.20,
        0.01,
        8.99,
        NULL,
        5
    ),
    (
        3,
        1,
        'Livre cuisine française',
        'Recettes traditionnelles de cuisine française, 300 pages',
        24.99,
        28,
        'En ligne',
        'Bretagne',
        0.80,
        0.03,
        3.99,
        4.8,
        22
    ),
    (
        1,
        3,
        'Tapis de yoga',
        'Tapis antidérapant, épaisseur 6mm, avec sac de transport',
        34.99,
        52,
        'En ligne',
        'Bretagne',
        1.10,
        0.02,
        5.99,
        4.4,
        28
    ),
    (
        1,
        1,
        'Clavier mécanique RGB',
        'Clavier gamer avec rétroéclairage RGB, switches mécaniques',
        79.99,
        29,
        'En ligne',
        'Bretagne',
        0.90,
        0.04,
        5.99,
        4.1,
        11
    ),
    (
        1,
        1,
        'Console NextGen',
        'Console de jeu dernière génération, 1To SSD, 4K HDR',
        499.99,
        0,
        'Hors ligne',
        'France',
        3.5,
        0.02,
        14.99,
        4.8,
        25
    ),
    (
        1,
        2,
        'Sweat à capuche premium',
        'Sweat-shirt en coton bio, coupe oversize, poche kangourou',
        59.99,
        0,
        'Hors ligne',
        'France',
        0.70,
        0.03,
        5.99,
        4.4,
        18
    ),
    (
        1,
        3,
        'Raquette de tennis pro',
        'Raquette carbone, tension 25kg, grip confort',
        129.99,
        0,
        'Hors ligne',
        'France',
        0.35,
        0.02,
        6.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Écran gaming 4K 27"',
        'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms',
        349.99,
        0,
        'Hors ligne',
        'France',
        5.2,
        0.35,
        19.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Baskets limited edition',
        'Baskets cuir véritable, édition limitée, semelle comfort',
        179.99,
        0,
        'Hors ligne',
        'France',
        0.80,
        0.06,
        7.99,
        4.9,
        65
    ),
    (
        1,
        3,
        'Vélo de route carbone',
        'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses',
        1299.99,
        0,
        'Hors ligne',
        'UE',
        8.5,
        0.15,
        29.99,
        4.8,
        25
    ),
    (
        1,
        1,
        'Drone professionnel 4K',
        'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min',
        899.99,
        0,
        'Hors ligne',
        'UE',
        1.2,
        0.02,
        12.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Manteau d hiver imperméable',
        'Manteau longueur genoux, doublure polaire, coupe-vent',
        179.99,
        0,
        'Hors ligne',
        'UE',
        1.5,
        0.01,
        8.99,
        4.4,
        65
    ),
    (
        1,
        3,
        'Tente 4 places',
        'Tente familiale, double toit, arceaux aluminium, imperméable',
        249.99,
        0,
        'Hors ligne',
        'Hors UE',
        4.8,
        0.08,
        19.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Enceinte Bluetooth waterproof',
        'Enceinte portable, autonomie 24h, résistance IP67',
        129.99,
        0,
        'Hors ligne',
        'Hors UE',
        0.9,
        0.05,
        6.99,
        4.9,
        95
    ),
    (
        2,
        1,
        'Pull Marin de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.',
        36.37,
        31,
        'En ligne',
        'Bretagne',
        2.06,
        0.45,
        5.78,
        4.4,
        12
    ),
    (
        1,
        1,
        'Bonnet Miki de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.',
        121.37,
        6,
        'Hors ligne',
        'Bretagne',
        2.3,
        0.09,
        8.8,
        4.3,
        60
    ),
    (
        2,
        3,
        'Galettes Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        147.92,
        142,
        'En ligne',
        'Bretagne',
        0.46,
        0.46,
        5.71,
        4.3,
        97
    ),
    (
        1,
        3,
        'Écharpe Rayée Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        173.77,
        102,
        'En ligne',
        'Bretagne',
        0.91,
        0.32,
        8.28,
        4.4,
        58
    ),
    (
        1,
        2,
        'Écharpe Rayée de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.',
        197.02,
        168,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.12,
        7.92,
        4.8,
        19
    ),
    (
        4,
        2,
        'Ciré Navy de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        104.35,
        169,
        'En ligne',
        'Bretagne',
        1.43,
        0.14,
        7.22,
        4.6,
        72
    ),
    (
        4,
        3,
        'Bracelet Ancre Fait main',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        172.75,
        44,
        'Hors ligne',
        'Bretagne',
        1.92,
        0.4,
        8.8,
        4.1,
        102
    ),
    (
        1,
        3,
        'Marinière Local',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        74.29,
        80,
        'Hors ligne',
        'Bretagne',
        1.36,
        0.23,
        13.58,
        4.9,
        72
    ),
    (
        3,
        1,
        'Bracelet Ancre de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.',
        40.53,
        140,
        'En ligne',
        'Bretagne',
        2.76,
        0.3,
        9.4,
        4.1,
        97
    ),
    (
        3,
        3,
        'Pendentif Hermine Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        164.23,
        199,
        'Hors ligne',
        'Bretagne',
        1.64,
        0.07,
        10.94,
        4.9,
        47
    ),
    (
        1,
        3,
        'Sac Voile de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.',
        136.95,
        100,
        'En ligne',
        'Bretagne',
        1.37,
        0.26,
        6.09,
        4.2,
        91
    ),
    (
        2,
        3,
        'Écharpe Rayée de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        21.13,
        22,
        'Hors ligne',
        'Bretagne',
        2.73,
        0.43,
        5.64,
        4.2,
        129
    ),
    (
        1,
        2,
        'Coussin Triskell de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        134.55,
        95,
        'Hors ligne',
        'Bretagne',
        1.33,
        0.24,
        11.56,
        4.7,
        30
    ),
    (
        1,
        3,
        'Écharpe Rayée Authentique',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.',
        36.49,
        51,
        'En ligne',
        'Bretagne',
        0.91,
        0.13,
        13.31,
        4.4,
        145
    ),
    (
        4,
        3,
        'Écharpe Rayée Bio',
        'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.',
        50.4,
        107,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.09,
        5.02,
        4.4,
        121
    ),
    (
        1,
        3,
        'Bonnet Miki Authentique',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        119.47,
        143,
        'En ligne',
        'Bretagne',
        0.28,
        0.16,
        5.45,
        4.5,
        140
    ),
    (
        3,
        1,
        'Ciré Navy de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        187.96,
        150,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.3,
        10.57,
        4.4,
        149
    ),
    (
        1,
        1,
        'Bol Breton Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.',
        66.7,
        85,
        'En ligne',
        'Bretagne',
        2.79,
        0.47,
        5.08,
        4.6,
        149
    ),
    (
        1,
        3,
        'Bol Breton Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        176.18,
        99,
        'Hors ligne',
        'Bretagne',
        0.93,
        0.22,
        9.89,
        4.3,
        140
    ),
    (
        3,
        1,
        'Pull Marin de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.',
        30.23,
        146,
        'En ligne',
        'Bretagne',
        0.55,
        0.15,
        6.9,
        4.3,
        72
    ),
    (
        1,
        1,
        'Affiche Vintage de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        155.74,
        168,
        'En ligne',
        'Bretagne',
        2.94,
        0.09,
        8.98,
        4.7,
        148
    ),
    (
        2,
        3,
        'Vareuse Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        120.09,
        42,
        'En ligne',
        'Bretagne',
        1.35,
        0.03,
        8.28,
        4.9,
        15
    ),
    (
        3,
        2,
        'Pull Marin Bio',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.',
        151.65,
        65,
        'En ligne',
        'Bretagne',
        2.61,
        0.49,
        12.3,
        4.9,
        11
    ),
    (
        1,
        3,
        'Kabig Bio',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.',
        172.27,
        61,
        'En ligne',
        'Bretagne',
        0.68,
        0.46,
        8.15,
        4.8,
        63
    ),
    (
        1,
        2,
        'Phare Miniature Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        62.75,
        169,
        'En ligne',
        'Bretagne',
        1.58,
        0.34,
        12.59,
        4.3,
        12
    ),
    (
        3,
        1,
        'Bol Breton Fait main',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        75.33,
        85,
        'Hors ligne',
        'Bretagne',
        1.37,
        0.49,
        6.04,
        4.9,
        53
    ),
    (
        3,
        3,
        'Bracelet Ancre de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        23.23,
        175,
        'Hors ligne',
        'Bretagne',
        2.77,
        0.32,
        10.97,
        4.1,
        81
    ),
    (
        1,
        2,
        'Caramels de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        135.67,
        102,
        'Hors ligne',
        'Bretagne',
        2.06,
        0.45,
        10.54,
        4.3,
        145
    ),
    (
        3,
        3,
        'Affiche Vintage de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.',
        137.69,
        135,
        'Hors ligne',
        'Bretagne',
        1.47,
        0.45,
        12.16,
        4.2,
        26
    ),
    (
        4,
        2,
        'Écharpe Rayée de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        37.85,
        16,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.24,
        12.65,
        4.1,
        111
    ),
    (
        4,
        3,
        'Vareuse de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        51.36,
        183,
        'Hors ligne',
        'Bretagne',
        1.6,
        0.03,
        7.24,
        4.8,
        121
    ),
    (
        4,
        3,
        'Bracelet Ancre Durable',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.',
        150.55,
        126,
        'En ligne',
        'Bretagne',
        1.41,
        0.38,
        12.56,
        4.3,
        138
    ),
    (
        1,
        2,
        'Lampe Tempête de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        73.48,
        143,
        'Hors ligne',
        'Bretagne',
        0.33,
        0.08,
        8.45,
        4.2,
        59
    ),
    (
        4,
        1,
        'Sac Voile de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.',
        167.42,
        104,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.3,
        11.26,
        4.9,
        102
    ),
    (
        4,
        1,
        'Caramels de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        61.58,
        129,
        'En ligne',
        'Bretagne',
        0.18,
        0.17,
        11.11,
        4.4,
        47
    ),
    (
        4,
        2,
        'Pendentif Hermine de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        35.65,
        123,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.14,
        7.95,
        4.5,
        91
    ),
    (
        2,
        1,
        'Ciré Navy Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.',
        19.84,
        94,
        'En ligne',
        'Bretagne',
        0.75,
        0.04,
        13.62,
        4.0,
        12
    ),
    (
        3,
        1,
        'Vareuse de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        51.2,
        184,
        'En ligne',
        'Bretagne',
        0.84,
        0.19,
        10.45,
        5.0,
        34
    ),
    (
        1,
        2,
        'Pendentif Hermine Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        47.48,
        156,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.32,
        5.92,
        4.8,
        35
    ),
    (
        4,
        1,
        'Galettes de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.',
        89.39,
        130,
        'Hors ligne',
        'Bretagne',
        0.41,
        0.48,
        10.72,
        4.8,
        44
    ),
    (
        2,
        2,
        'Sac Voile Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.',
        148.16,
        73,
        'Hors ligne',
        'Bretagne',
        1.03,
        0.13,
        13.41,
        4.3,
        120
    ),
    (
        1,
        1,
        'Marinière de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.',
        50.09,
        71,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.44,
        11.31,
        4.3,
        7
    ),
    (
        4,
        3,
        'Sac Voile Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        102.77,
        9,
        'Hors ligne',
        'Bretagne',
        0.37,
        0.12,
        11.23,
        4.3,
        99
    ),
    (
        2,
        1,
        'Sac Voile Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        61.2,
        69,
        'Hors ligne',
        'Bretagne',
        0.77,
        0.36,
        7.84,
        4.7,
        52
    ),
    (
        1,
        1,
        'Pendentif Hermine Local',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.',
        167.37,
        80,
        'Hors ligne',
        'Bretagne',
        0.76,
        0.1,
        5.13,
        4.5,
        75
    ),
    (
        1,
        2,
        'Vareuse Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        118.5,
        125,
        'Hors ligne',
        'Bretagne',
        1.49,
        0.18,
        13.69,
        4.3,
        127
    ),
    (
        4,
        2,
        'Pendentif Hermine Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        116.38,
        82,
        'Hors ligne',
        'Bretagne',
        0.35,
        0.13,
        10.02,
        4.4,
        62
    ),
    (
        2,
        1,
        'Pendentif Hermine de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        21.38,
        194,
        'En ligne',
        'Bretagne',
        0.39,
        0.38,
        10.63,
        4.3,
        25
    ),
    (
        2,
        2,
        'Ciré Navy de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.',
        140.29,
        125,
        'En ligne',
        'Bretagne',
        0.94,
        0.12,
        11.36,
        4.7,
        121
    ),
    (
        4,
        1,
        'Pull Marin Authentique',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        181.69,
        41,
        'Hors ligne',
        'Bretagne',
        0.31,
        0.09,
        7.77,
        4.7,
        150
    ),
    (
        1,
        1,
        'Bolée à Cidre Local',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        103.33,
        25,
        'En ligne',
        'Bretagne',
        1.83,
        0.45,
        11.61,
        4.6,
        11
    ),
    (
        4,
        2,
        'Bol Breton de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.14,
        76,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.3,
        10.71,
        4.5,
        28
    ),
    (
        3,
        2,
        'Phare Miniature de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        141.1,
        78,
        'Hors ligne',
        'Bretagne',
        2.02,
        0.21,
        11.84,
        4.0,
        27
    ),
    (
        1,
        1,
        'Caramels Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        112.55,
        110,
        'Hors ligne',
        'Bretagne',
        0.26,
        0.26,
        10.6,
        4.5,
        118
    ),
    (
        4,
        1,
        'Vareuse de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.',
        101.61,
        12,
        'En ligne',
        'Bretagne',
        2.92,
        0.31,
        7.15,
        4.2,
        146
    ),
    (
        2,
        2,
        'Lampe Tempête Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        145.44,
        135,
        'En ligne',
        'Bretagne',
        2.15,
        0.21,
        9.34,
        4.5,
        121
    ),
    (
        4,
        1,
        'Bracelet Ancre de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.',
        159.31,
        111,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.4,
        7.4,
        4.0,
        81
    ),
    (
        2,
        2,
        'Coussin Triskell Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        112.71,
        121,
        'En ligne',
        'Bretagne',
        2.81,
        0.44,
        13.83,
        4.2,
        103
    ),
    (
        1,
        2,
        'Coussin Triskell Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        159.76,
        171,
        'En ligne',
        'Bretagne',
        2.94,
        0.25,
        5.33,
        4.5,
        89
    ),
    (
        1,
        2,
        'Lampe Tempête de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.75,
        44,
        'Hors ligne',
        'Bretagne',
        0.32,
        0.39,
        7.39,
        4.6,
        106
    ),
    (
        1,
        2,
        'Coussin Triskell Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        54.37,
        180,
        'En ligne',
        'Bretagne',
        2.77,
        0.5,
        11.72,
        4.4,
        30
    ),
    (
        2,
        1,
        'Bolée à Cidre de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.',
        20.61,
        96,
        'En ligne',
        'Bretagne',
        1.19,
        0.08,
        9.78,
        4.6,
        51
    ),
    (
        3,
        3,
        'Caramels Durable',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        37.05,
        123,
        'En ligne',
        'Bretagne',
        1.95,
        0.24,
        11.0,
        4.9,
        124
    ),
    (
        2,
        2,
        'Lampe Tempête Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        90.19,
        69,
        'Hors ligne',
        'Bretagne',
        1.42,
        0.16,
        13.99,
        4.9,
        32
    ),
    (
        3,
        1,
        'Bolée à Cidre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        134.41,
        75,
        'Hors ligne',
        'Bretagne',
        0.12,
        0.43,
        12.0,
        5.0,
        132
    ),
    (
        3,
        2,
        'Bonnet Miki Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        180.74,
        170,
        'Hors ligne',
        'Bretagne',
        0.21,
        0.4,
        5.3,
        4.4,
        38
    ),
    (
        4,
        1,
        'Bonnet Miki Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        182.65,
        47,
        'En ligne',
        'Bretagne',
        0.85,
        0.41,
        9.34,
        4.8,
        91
    ),
    (
        3,
        1,
        'Caramels de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        84.57,
        72,
        'En ligne',
        'Bretagne',
        1.66,
        0.23,
        11.06,
        4.7,
        102
    ),
    (
        1,
        1,
        'Marinière Premium',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        51.84,
        21,
        'Hors ligne',
        'Bretagne',
        1.94,
        0.24,
        11.31,
        4.6,
        34
    ),
    (
        1,
        2,
        'Pull Marin de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        35.64,
        121,
        'Hors ligne',
        'Bretagne',
        1.18,
        0.48,
        11.27,
        4.5,
        44
    ),
    (
        4,
        2,
        'Ciré Jaune de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        189.65,
        97,
        'En ligne',
        'Bretagne',
        0.39,
        0.35,
        9.9,
        5.0,
        96
    ),
    (
        1,
        3,
        'Lampe Tempête Authentique',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        122.86,
        10,
        'En ligne',
        'Bretagne',
        0.25,
        0.17,
        13.9,
        4.8,
        57
    ),
    (
        1,
        3,
        'Bonnet Miki de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        159.05,
        157,
        'En ligne',
        'Bretagne',
        0.11,
        0.43,
        6.3,
        4.1,
        69
    ),
    (
        3,
        3,
        'Marinière Authentique',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        12.98,
        72,
        'En ligne',
        'Bretagne',
        0.25,
        0.37,
        9.73,
        4.7,
        126
    ),
    (
        4,
        2,
        'Bracelet Ancre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.',
        181.75,
        173,
        'En ligne',
        'Bretagne',
        1.61,
        0.23,
        13.68,
        4.1,
        127
    ),
    (
        3,
        2,
        'Lampe Tempête de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        38.04,
        37,
        'Hors ligne',
        'Bretagne',
        0.9,
        0.32,
        9.94,
        4.3,
        140
    ),
    (
        3,
        2,
        'Pull Marin de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        177.85,
        110,
        'En ligne',
        'Bretagne',
        1.08,
        0.23,
        8.74,
        4.1,
        114
    ),
    (
        3,
        3,
        'Coussin Triskell Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        27.62,
        29,
        'En ligne',
        'Bretagne',
        2.26,
        0.19,
        6.17,
        4.1,
        148
    ),
    (
        3,
        3,
        'Galettes Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.',
        123.48,
        95,
        'Hors ligne',
        'Bretagne',
        0.4,
        0.26,
        6.39,
        4.5,
        32
    ),
    (
        1,
        1,
        'Bol Breton Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.',
        194.19,
        164,
        'Hors ligne',
        'Bretagne',
        1.88,
        0.32,
        5.24,
        4.9,
        73
    );

-- 10. PROMOTIONS (futures)
INSERT INTO
    _promotion (
        id_produit,
        promotion_debut,
        promotion_fin
    )
VALUES (
        1,
        '2025-12-20 00:00:00',
        '2027-12-25 23:59:00'
    ),
    (
        2,
        '2026-01-01 00:00:00',
        '2026-02-07 23:59:00'
    ),
    (
        3,
        '2026-02-16 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        4,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        5,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        6,
        '2026-06-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        7,
        '2026-01-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 9. RÉDUCTIONS (futures)
INSERT INTO
    _reduction (
        id_produit,
        reduction_pourcentage,
        reduction_debut,
        reduction_fin
    )
VALUES (
        1,
        10.00,
        '2026-01-05 00:00:00',
        '2026-09-19 23:59:00'
    ),
    (
        2,
        15.00,
        '2026-02-15 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        3,
        20.00,
        '2026-01-01 00:00:00',
        '2026-05-15 23:59:00'
    ),
    (
        4,
        25.00,
        '2026-01-20 00:00:00',
        '2026-02-26 23:59:00'
    ),
    (
        5,
        30.00,
        '2026-06-01 00:00:00',
        '2026-06-30 23:59:00'
    ),
    (
        6,
        60.00,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        7,
        55.00,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        8,
        70.00,
        '2026-01-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        9,
        65.00,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 12. IMAGES
INSERT INTO
    _image (i_lien, i_title, i_alt)
VALUES (
        '/img/photo/enceinte_bluetooth_waterproof.jpg',
        'Enceinte Bluetooth.jpg',
        'Image de l enceinte'
    ),
    (
        '/img/photo/ordinateur_portable_ultra.jpg',
        'Ordinateur portable.jpeg',
        'Image de l ordinateur'
    ),
    (
        '/img/photo/_cran_gaming_4k_27_.jpg',
        'Écran 4K.jpeg',
        'Image de l écran'
    ),
    (
        '/img/photo/console_nextgen.jpg',
        'Console NextGen.jpg',
        'Image de la console'
    ),
    (
        '/img/photo/montre_connect_e.jpg',
        'Montre connectée.jpg',
        'Image de la montre'
    ),
    (
        '/img/photo/raquette_de_tennis_pro.jpg',
        'Raquette tennis.jpg',
        'Image de la raquette'
    ),
    (
        '/img/photo/tablette_10_pouces.jpg',
        'Tablette.jpg',
        'Image de la tablette'
    ),
    (
        '/img/photo/tente_4_places.jpg',
        'Tente 4 places.jpg',
        'Image de la tente'
    ),
    (
        '/img/photo/veste_en_cuir.jpg',
        'Veste cuir.jpg',
        'Image de la veste'
    ),
    (
        '/img/photo/baskets_limited_edition.jpg',
        'Baskets limited.jpeg',
        'Image des baskets'
    ),
    (
        '/img/photo/chaussures_running.jpg',
        'Chaussures running.jpeg',
        'Image des chaussures'
    ),
    (
        '/img/photo/ballon_de_football.jpg',
        'Ballon football.jpg',
        'Image du ballon'
    ),
    (
        '/img/photo/casque_audio_bluetooth.jpg',
        'Casque audio.jpg',
        'Image du casque'
    ),
    (
        '/img/photo/clavier_m_canique_rgb.jpg',
        'Clavier.jpg',
        'Image du clavier'
    ),
    (
        '/img/photo/drone_professionnel_4k.jpg',
        'Drone 4K.jpg',
        'Image du drone'
    ),
    (
        '/img/photo/jean_slim.jpg',
        'Jean.jpg',
        'Image du jean'
    ),
    (
        '/img/photo/livre_cuisine_fran_aise.jpg',
        'Livre cuisine.jpeg',
        'Image du livre'
    ),
    (
        '/img/photo/manteau_d_hiver_imperm_able.jpg',
        'Manteau hiver.jpeg',
        'Image du manteau'
    ),
    (
        '/img/photo/sac___dos_urbain.jpg',
        'Sac à dos.jpeg',
        'Image du sac'
    ),
    (
        '/img/photo/smartphone_xpro.jpg',
        'Smartphone XPro.jpg',
        'Image du smartphone'
    ),
    (
        '/img/photo/sweat___capuche_premium.jpg',
        'Sweat à capuche.jpeg',
        'Image du sweat'
    ),
    (
        '/img/photo/t_shirt_coton_bio.jpg',
        'T-shirt.png',
        'Image du t-shirt'
    ),
    (
        '/img/photo/tapis_de_yoga.jpg',
        'Tapis yoga.jpeg',
        'Image du tapis'
    ),
    (
        '/img/photo/v_lo_de_route_carbone.jpg',
        'Vélo route.jpeg',
        'Image du vélo'
    ),
    (
        '/img/photo/logo_fashionhub.jpg',
        'Logo FashionHub.jpg',
        'Logo entreprise FashionHub'
    ),
    (
        '/img/photo/logo_techstore.jpg',
        'Logo TechStore.jpg',
        'Logo entreprise TechStore'
    ),
    (
        '/img/photo/affiche_vintage_de_dinard.jpg',
        'Affiche Vintage de Dinard',
        'Photo de Affiche Vintage de Dinard'
    ),
    (
        '/img/photo/affiche_vintage_de_vannes.jpg',
        'Affiche Vintage de Vannes',
        'Photo de Affiche Vintage de Vannes'
    ),
    (
        '/img/photo/bol_breton_bio.jpg',
        'Bol Breton Bio',
        'Photo de Bol Breton Bio'
    ),
    (
        '/img/photo/bol_breton_fait_main.jpg',
        'Bol Breton Fait main',
        'Photo de Bol Breton Fait main'
    ),
    (
        '/img/photo/bol_breton_premium.jpg',
        'Bol Breton Premium',
        'Photo de Bol Breton Premium'
    ),
    (
        '/img/photo/bol_breton_traditionnel.jpg',
        'Bol Breton Traditionnel',
        'Photo de Bol Breton Traditionnel'
    ),
    (
        '/img/photo/bol_breton_de_saint_malo.jpg',
        'Bol Breton de Saint-Malo',
        'Photo de Bol Breton de Saint-Malo'
    ),
    (
        '/img/photo/bol_e___cidre_artisanal.jpg',
        'Bolée à Cidre Artisanal',
        'Photo de Bolée à Cidre Artisanal'
    ),
    (
        '/img/photo/bol_e___cidre_local.jpg',
        'Bolée à Cidre Local',
        'Photo de Bolée à Cidre Local'
    ),
    (
        '/img/photo/bol_e___cidre_de_saint_malo.jpg',
        'Bolée à Cidre de Saint-Malo',
        'Photo de Bolée à Cidre de Saint-Malo'
    ),
    (
        '/img/photo/bonnet_miki_authentique.jpg',
        'Bonnet Miki Authentique',
        'Photo de Bonnet Miki Authentique'
    ),
    (
        '/img/photo/bonnet_miki_premium.jpg',
        'Bonnet Miki Premium',
        'Photo de Bonnet Miki Premium'
    ),
    (
        '/img/photo/bonnet_miki_traditionnel.jpg',
        'Bonnet Miki Traditionnel',
        'Photo de Bonnet Miki Traditionnel'
    ),
    (
        '/img/photo/bonnet_miki_de_carnac.jpg',
        'Bonnet Miki de Carnac',
        'Photo de Bonnet Miki de Carnac'
    ),
    (
        '/img/photo/bonnet_miki_de_concarneau.jpg',
        'Bonnet Miki de Concarneau',
        'Photo de Bonnet Miki de Concarneau'
    ),
    (
        '/img/photo/bracelet_ancre_artisanal.jpg',
        'Bracelet Ancre Artisanal',
        'Photo de Bracelet Ancre Artisanal'
    ),
    (
        '/img/photo/bracelet_ancre_durable.jpg',
        'Bracelet Ancre Durable',
        'Photo de Bracelet Ancre Durable'
    ),
    (
        '/img/photo/bracelet_ancre_fait_main.jpg',
        'Bracelet Ancre Fait main',
        'Photo de Bracelet Ancre Fait main'
    ),
    (
        '/img/photo/bracelet_ancre_de_brest.jpg',
        'Bracelet Ancre de Brest',
        'Photo de Bracelet Ancre de Brest'
    ),
    (
        '/img/photo/bracelet_ancre_de_carnac.jpg',
        'Bracelet Ancre de Carnac',
        'Photo de Bracelet Ancre de Carnac'
    ),
    (
        '/img/photo/bracelet_ancre_de_concarneau.jpg',
        'Bracelet Ancre de Concarneau',
        'Photo de Bracelet Ancre de Concarneau'
    ),
    (
        '/img/photo/caramels_artisanal.jpg',
        'Caramels Artisanal',
        'Photo de Caramels Artisanal'
    ),
    (
        '/img/photo/caramels_durable.jpg',
        'Caramels Durable',
        'Photo de Caramels Durable'
    ),
    (
        '/img/photo/caramels_de_carnac.jpg',
        'Caramels de Carnac',
        'Photo de Caramels de Carnac'
    ),
    (
        '/img/photo/caramels_de_dinard.jpg',
        'Caramels de Dinard',
        'Photo de Caramels de Dinard'
    ),
    (
        '/img/photo/caramels_de_roscoff.jpg',
        'Caramels de Roscoff',
        'Photo de Caramels de Roscoff'
    ),
    (
        '/img/photo/cir__jaune_de_vannes.jpg',
        'Ciré Jaune de Vannes',
        'Photo de Ciré Jaune de Vannes'
    ),
    (
        '/img/photo/cir__navy_artisanal.jpg',
        'Ciré Navy Artisanal',
        'Photo de Ciré Navy Artisanal'
    ),
    (
        '/img/photo/cir__navy_de_brest.jpg',
        'Ciré Navy de Brest',
        'Photo de Ciré Navy de Brest'
    ),
    (
        '/img/photo/cir__navy_de_concarneau.jpg',
        'Ciré Navy de Concarneau',
        'Photo de Ciré Navy de Concarneau'
    ),
    (
        '/img/photo/cir__navy_de_quimper.jpg',
        'Ciré Navy de Quimper',
        'Photo de Ciré Navy de Quimper'
    ),
    (
        '/img/photo/coussin_triskell_artisanal.jpg',
        'Coussin Triskell Artisanal',
        'Photo de Coussin Triskell Artisanal'
    ),
    (
        '/img/photo/coussin_triskell_bio.jpg',
        'Coussin Triskell Bio',
        'Photo de Coussin Triskell Bio'
    ),
    (
        '/img/photo/coussin_triskell_fait_main.jpg',
        'Coussin Triskell Fait main',
        'Photo de Coussin Triskell Fait main'
    ),
    (
        '/img/photo/coussin_triskell_premium.jpg',
        'Coussin Triskell Premium',
        'Photo de Coussin Triskell Premium'
    ),
    (
        '/img/photo/coussin_triskell_de_roscoff.jpg',
        'Coussin Triskell de Roscoff',
        'Photo de Coussin Triskell de Roscoff'
    ),
    (
        '/img/photo/galettes_artisanal.jpg',
        'Galettes Artisanal',
        'Photo de Galettes Artisanal'
    ),
    (
        '/img/photo/galettes_local.jpg',
        'Galettes Local',
        'Photo de Galettes Local'
    ),
    (
        '/img/photo/galettes_de_quimper.jpg',
        'Galettes de Quimper',
        'Photo de Galettes de Quimper'
    ),
    (
        '/img/photo/kabig_bio.jpg',
        'Kabig Bio',
        'Photo de Kabig Bio'
    ),
    (
        '/img/photo/lampe_temp_te_authentique.jpg',
        'Lampe Tempête Authentique',
        'Photo de Lampe Tempête Authentique'
    ),
    (
        '/img/photo/lampe_temp_te_local.jpg',
        'Lampe Tempête Local',
        'Photo de Lampe Tempête Local'
    ),
    (
        '/img/photo/lampe_temp_te_traditionnel.jpg',
        'Lampe Tempête Traditionnel',
        'Photo de Lampe Tempête Traditionnel'
    ),
    (
        '/img/photo/lampe_temp_te_de_quimper.jpg',
        'Lampe Tempête de Quimper',
        'Photo de Lampe Tempête de Quimper'
    ),
    (
        '/img/photo/lampe_temp_te_de_saint_malo.jpg',
        'Lampe Tempête de Saint-Malo',
        'Photo de Lampe Tempête de Saint-Malo'
    ),
    (
        '/img/photo/lampe_temp_te_de_vannes.jpg',
        'Lampe Tempête de Vannes',
        'Photo de Lampe Tempête de Vannes'
    ),
    (
        '/img/photo/marini_re_authentique.jpg',
        'Marinière Authentique',
        'Photo de Marinière Authentique'
    ),
    (
        '/img/photo/marini_re_local.jpg',
        'Marinière Local',
        'Photo de Marinière Local'
    ),
    (
        '/img/photo/marini_re_premium.jpg',
        'Marinière Premium',
        'Photo de Marinière Premium'
    ),
    (
        '/img/photo/marini_re_de_pont_aven.jpg',
        'Marinière de Pont-Aven',
        'Photo de Marinière de Pont-Aven'
    ),
    (
        '/img/photo/pendentif_hermine_bio.jpg',
        'Pendentif Hermine Bio',
        'Photo de Pendentif Hermine Bio'
    ),
    (
        '/img/photo/pendentif_hermine_fait_main.jpg',
        'Pendentif Hermine Fait main',
        'Photo de Pendentif Hermine Fait main'
    ),
    (
        '/img/photo/pendentif_hermine_local.jpg',
        'Pendentif Hermine Local',
        'Photo de Pendentif Hermine Local'
    ),
    (
        '/img/photo/pendentif_hermine_traditionnel.jpg',
        'Pendentif Hermine Traditionnel',
        'Photo de Pendentif Hermine Traditionnel'
    ),
    (
        '/img/photo/pendentif_hermine_de_roscoff.jpg',
        'Pendentif Hermine de Roscoff',
        'Photo de Pendentif Hermine de Roscoff'
    ),
    (
        '/img/photo/pendentif_hermine_de_saint_malo.jpg',
        'Pendentif Hermine de Saint-Malo',
        'Photo de Pendentif Hermine de Saint-Malo'
    ),
    (
        '/img/photo/phare_miniature_fait_main.jpg',
        'Phare Miniature Fait main',
        'Photo de Phare Miniature Fait main'
    ),
    (
        '/img/photo/phare_miniature_de_quimper.jpg',
        'Phare Miniature de Quimper',
        'Photo de Phare Miniature de Quimper'
    ),
    (
        '/img/photo/pull_marin_authentique.jpg',
        'Pull Marin Authentique',
        'Photo de Pull Marin Authentique'
    ),
    (
        '/img/photo/pull_marin_bio.jpg',
        'Pull Marin Bio',
        'Photo de Pull Marin Bio'
    ),
    (
        '/img/photo/pull_marin_de_brest.jpg',
        'Pull Marin de Brest',
        'Photo de Pull Marin de Brest'
    ),
    (
        '/img/photo/pull_marin_de_carnac.jpg',
        'Pull Marin de Carnac',
        'Photo de Pull Marin de Carnac'
    ),
    (
        '/img/photo/pull_marin_de_quimper.jpg',
        'Pull Marin de Quimper',
        'Photo de Pull Marin de Quimper'
    ),
    (
        '/img/photo/pull_marin_de_saint_malo.jpg',
        'Pull Marin de Saint-Malo',
        'Photo de Pull Marin de Saint-Malo'
    ),
    (
        '/img/photo/sac_voile_bio.jpg',
        'Sac Voile Bio',
        'Photo de Sac Voile Bio'
    ),
    (
        '/img/photo/sac_voile_durable.jpg',
        'Sac Voile Durable',
        'Photo de Sac Voile Durable'
    ),
    (
        '/img/photo/sac_voile_premium.jpg',
        'Sac Voile Premium',
        'Photo de Sac Voile Premium'
    ),
    (
        '/img/photo/sac_voile_de_concarneau.jpg',
        'Sac Voile de Concarneau',
        'Photo de Sac Voile de Concarneau'
    ),
    (
        '/img/photo/sac_voile_de_pont_aven.jpg',
        'Sac Voile de Pont-Aven',
        'Photo de Sac Voile de Pont-Aven'
    ),
    (
        '/img/photo/vareuse_artisanal.jpg',
        'Vareuse Artisanal',
        'Photo de Vareuse Artisanal'
    ),
    (
        '/img/photo/vareuse_durable.jpg',
        'Vareuse Durable',
        'Photo de Vareuse Durable'
    ),
    (
        '/img/photo/vareuse_de_dinard.jpg',
        'Vareuse de Dinard',
        'Photo de Vareuse de Dinard'
    ),
    (
        '/img/photo/vareuse_de_pont_aven.jpg',
        'Vareuse de Pont-Aven',
        'Photo de Vareuse de Pont-Aven'
    ),
    (
        '/img/photo/vareuse_de_saint_malo.jpg',
        'Vareuse de Saint-Malo',
        'Photo de Vareuse de Saint-Malo'
    ),
    (
        '/img/photo/avatar_jean.jpg',
        'Avatar Jean.jpeg',
        'Photo de profil Jean'
    ),
    (
        '/img/photo/avatar_marie.jpg',
        'Avatar Marie.jpg',
        'Photo de profil Marie'
    ),
    (
        '/img/photo/_charpe_ray_e_authentique.jpg',
        'Écharpe Rayée Authentique',
        'Photo de Écharpe Rayée Authentique'
    ),
    (
        '/img/photo/_charpe_ray_e_bio.jpg',
        'Écharpe Rayée Bio',
        'Photo de Écharpe Rayée Bio'
    ),
    (
        '/img/photo/_charpe_ray_e_fait_main.jpg',
        'Écharpe Rayée Fait main',
        'Photo de Écharpe Rayée Fait main'
    ),
    (
        '/img/photo/_charpe_ray_e_de_brest.jpg',
        'Écharpe Rayée de Brest',
        'Photo de Écharpe Rayée de Brest'
    ),
    (
        '/img/photo/_charpe_ray_e_de_dinard.jpg',
        'Écharpe Rayée de Dinard',
        'Photo de Écharpe Rayée de Dinard'
    ),
    (
        '/img/photo/_charpe_ray_e_de_saint_malo.jpg',
        'Écharpe Rayée de Saint-Malo',
        'Photo de Écharpe Rayée de Saint-Malo'
    ),
    (
        '/img/photo/5_S01618f64dc714163846501cb2c2e0f0fN.webp',
        '5_S01618f64dc714163846501cb2c2e0f0fN.webp',
        'photo du produit Robe d été'
    );

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO
    _represente_produit (id_image, id_produit)
VALUES (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 6),
    (10, 8),
    (11, 7),
    (12, 9),
    (13, 10),
    (14, 11),
    (15, 12),
    (16, 13),
    (17, 14),
    (18, 15),
    (19, 16),
    (20, 17),
    (21, 18),
    (22, 19),
    (23, 20),
    (24, 21),
    (25, 22),
    (26, 23),
    (27, 24),
    (28, 25),
    (29, 26),
    (30, 27),
    (31, 28),
    (32, 29),
    (33, 30),
    (34, 31),
    (35, 32),
    (36, 33),
    (37, 34),
    (38, 35),
    (39, 36),
    (40, 37),
    (41, 38),
    (42, 39),
    (43, 40),
    (44, 41),
    (45, 42),
    (46, 43),
    (47, 44),
    (48, 45),
    (49, 46),
    (50, 47),
    (51, 48),
    (52, 49),
    (53, 50),
    (54, 51),
    (55, 52),
    (56, 53),
    (57, 54),
    (58, 55),
    (59, 56),
    (60, 57),
    (61, 58),
    (62, 59),
    (63, 60),
    (64, 61),
    (65, 62),
    (66, 63),
    (67, 64),
    (68, 65),
    (69, 66),
    (70, 67),
    (71, 68),
    (72, 69),
    (73, 70),
    (74, 71),
    (75, 72),
    (76, 73),
    (77, 74),
    (78, 75),
    (79, 76),
    (80, 77),
    (81, 78),
    (82, 79),
    (83, 80),
    (84, 81),
    (85, 82),
    (86, 83),
    (87, 84),
    (88, 85),
    (89, 86),
    (90, 87),
    (91, 88),
    (92, 89),
    (93, 90),
    (94, 91),
    (95, 92),
    (96, 93),
    (97, 94),
    (98, 95),
    (99, 96),
    (100, 97),
    (101, 98),
    (102, 99),
    (103, 100),
    (104, 101),
    (105, 102),
    (106, 103),
    (107, 104),
    (108, 105);

-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO
    _represente_compte (id_image, id_compte)
VALUES (6, 4),
    (7, 5),
    (8, 2),
    (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO
    _fait_partie_de (id_produit, id_categorie)
VALUES (1, 1),
    (1, 7),
    (2, 1),
    (2, 7),
    (3, 2),
    (3, 8),
    (4, 2),
    (4, 8),
    (5, 2),
    (5, 9),
    (6, 1),
    (6, 3),
    (7, 3),
    (8, 1),
    (8, 3),
    (8, 5),
    (9, 5),
    (9, 10),
    (10, 1),
    (10, 7),
    (11, 5),
    (12, 2),
    (12, 8),
    (13, 6),
    (14, 5),
    (15, 1),
    (15, 7),
    (16, 1),
    (16, 7),
    (17, 2),
    (17, 8),
    (18, 5),
    (19, 1),
    (19, 7),
    (20, 10),
    (21, 5),
    (22, 1),
    (22, 3),
    (23, 2),
    (23, 8),
    (24, 4),
    (24, 5),
    (25, 1),
    (25, 3),
    (26, 2),
    (26, 8),
    (27, 2),
    (27, 3),
    (27, 8),
    (28, 4),
    (29, 2),
    (29, 3),
    (30, 2),
    (30, 3),
    (31, 2),
    (31, 8),
    (31, 9),
    (32, 3),
    (33, 2),
    (33, 8),
    (33, 9),
    (34, 3),
    (35, 3),
    (36, 3),
    (37, 2),
    (37, 3),
    (38, 4),
    (39, 2),
    (39, 3),
    (40, 2),
    (40, 3),
    (41, 2),
    (41, 3),
    (41, 8),
    (42, 2),
    (42, 8),
    (42, 9),
    (43, 4),
    (44, 4),
    (45, 2),
    (45, 8),
    (46, 4),
    (47, 2),
    (47, 8),
    (48, 2),
    (48, 8),
    (49, 2),
    (49, 8),
    (49, 9),
    (50, 4),
    (51, 4),
    (52, 3),
    (53, 4),
    (54, 4),
    (55, 2),
    (55, 3),
    (56, 2),
    (56, 8),
    (57, 3),
    (58, 4),
    (59, 3),
    (60, 4),
    (61, 3),
    (62, 2),
    (62, 8),
    (62, 9),
    (63, 2),
    (63, 8),
    (64, 3),
    (65, 4),
    (66, 3),
    (67, 2),
    (67, 8),
    (67, 9),
    (68, 3),
    (69, 3),
    (70, 3),
    (71, 2),
    (71, 8),
    (72, 3),
    (73, 3),
    (74, 2),
    (74, 8),
    (74, 9),
    (75, 2),
    (75, 8),
    (76, 4),
    (77, 4),
    (78, 4),
    (79, 4),
    (80, 2),
    (80, 8),
    (81, 4),
    (82, 3),
    (83, 4),
    (84, 4),
    (85, 4),
    (86, 4),
    (87, 4),
    (88, 4),
    (89, 4),
    (90, 4),
    (91, 2),
    (91, 3),
    (91, 8),
    (92, 2),
    (92, 3),
    (92, 8),
    (93, 4),
    (94, 2),
    (94, 8),
    (94, 9),
    (95, 2),
    (95, 8),
    (96, 2),
    (96, 8),
    (96, 9),
    (97, 4),
    (98, 2),
    (98, 3),
    (98, 8),
    (99, 2),
    (99, 8),
    (99, 9),
    (100, 3),
    (101, 4),
    (102, 2),
    (102, 8),
    (103, 4),
    (104, 4),
    (105, 4);

-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO
    _est_dote_de (id_produit, code_hexa)
VALUES (1, '#000000'),
    (1, '#FFFFFF'),
    (2, '#808080'),
    (3, '#0000FF'),
    (3, '#FF0000'),
    (3, '#00FF00'),
    (4, '#0000FF'),
    (4, '#000000'),
    (5, '#FF0000'),
    (5, '#FFFFFF'),
    (6, '#000000'),
    (7, '#808080'),
    (8, '#000000'),
    (9, '#0000FF'),
    (9, '#FF0000'),
    (10, '#808080'),
    (11, '#FFFFFF'),
    (12, '#000000'),
    (12, '#8B4513'),
    (14, '#EE82EE'),
    (14, '#87CEEB'),
    (15, '#000000'),
    (16, '#000000'),
    (16, '#FFFFFF'),
    (17, '#808080'),
    (17, '#000000'),
    (18, '#FFFFFF'),
    (18, '#000000'),
    (19, '#000000'),
    (20, '#FFFFFF'),
    (20, '#000000'),
    (21, '#0000FF'),
    (21, '#FF0000'),
    (22, '#808080'),
    (23, '#000000'),
    (23, '#8B4513'),
    (24, '#87CEEB'),
    (24, '#32CD32'),
    (25, '#000000'),
    (25, '#FF0000'),
    (26, '#8B4513'),
    (27, '#0000FF'),
    (28, '#FF0000'),
    (29, '#8B4513'),
    (30, '#00FF00'),
    (31, '#000000'),
    (32, '#8B4513'),
    (33, '#87CEEB'),
    (34, '#FFFFFF'),
    (35, '#FFFFFF'),
    (36, '#EE82EE'),
    (37, '#FFFFFF'),
    (38, '#0000FF'),
    (39, '#0000FF'),
    (40, '#000000'),
    (41, '#000000'),
    (42, '#FFFFFF'),
    (43, '#8B4513'),
    (44, '#87CEEB'),
    (45, '#87CEEB'),
    (46, '#32CD32'),
    (47, '#87CEEB'),
    (48, '#00FF00'),
    (49, '#FFA500'),
    (50, '#EE82EE'),
    (51, '#FF0000'),
    (52, '#FFFF00'),
    (53, '#FFFFFF'),
    (54, '#0000FF'),
    (55, '#FFFFFF'),
    (56, '#808080'),
    (57, '#00FF00'),
    (58, '#FFFF00'),
    (59, '#00FF00'),
    (60, '#FFA500'),
    (61, '#00FF00'),
    (62, '#FFFFFF'),
    (63, '#00FF00'),
    (64, '#87CEEB'),
    (65, '#EE82EE'),
    (66, '#FFFF00'),
    (67, '#808080'),
    (68, '#FFA500'),
    (69, '#00FF00'),
    (70, '#32CD32'),
    (71, '#0000FF'),
    (72, '#00FF00'),
    (73, '#8B4513'),
    (74, '#FFA500'),
    (75, '#32CD32'),
    (76, '#87CEEB'),
    (77, '#FFFF00'),
    (78, '#0000FF'),
    (79, '#8B4513'),
    (80, '#0000FF'),
    (81, '#EE82EE'),
    (82, '#8B4513'),
    (83, '#FFFF00'),
    (84, '#8B4513'),
    (85, '#FFFF00'),
    (86, '#32CD32'),
    (87, '#EE82EE'),
    (88, '#0000FF'),
    (89, '#EE82EE'),
    (90, '#FFFFFF'),
    (91, '#000000'),
    (92, '#FFFFFF'),
    (93, '#808080'),
    (94, '#808080'),
    (95, '#00FF00'),
    (96, '#0000FF'),
    (97, '#EE82EE'),
    (98, '#000000'),
    (99, '#808080'),
    (100, '#808080'),
    (101, '#0000FF'),
    (102, '#87CEEB'),
    (103, '#FFA500'),
    (104, '#0000FF'),
    (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO
    _seuil_alerte (nb_seuil, message_seuil)
VALUES (
        10,
        'Stock faible - Envisager un réapprovisionnement'
    ),
    (
        5,
        'Stock critique - Réapprovisionnement urgent'
    ),
    (
        3,
        'Rupture imminente - Commander immédiatement'
    ),
    (
        20,
        'Stock normal - Surveillance recommandée'
    ),
    (
        1,
        'Rupture de stock - Produit indisponible'
    );

INSERT INTO
    _adresse (
        id_compte,
        a_numero,
        a_adresse,
        a_ville,
        a_code_postal,
        a_pays
    )
VALUES (
        4,
        13,
        'rue du Pillard',
        'Rennes',
        35590,
        'France'
    );

-- 18. PANIERS/COMMANDES
INSERT INTO
    _panier_commande (id_client, timestamp_commande)
VALUES (1, '2025-11-01 10:30:00'),
    (2, '2025-11-02 14:45:00'),
    (3, '2025-11-03 09:15:00'),
    (1, NULL),
    (4, '2025-11-04 16:20:00'),
    (6, '2025-11-05 11:00:00'),
    (2, NULL),
    (5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO
    _contient (
        id_panier,
        id_produit,
        quantite,
        prix_unitaire,
        remise_unitaire,
        frais_de_port,
        TVA
    )
VALUES (
        1,
        1,
        1,
        599.99,
        0.0,
        5.99,
        20.0
    ),
    (
        1,
        6,
        1,
        149.99,
        0.0,
        5.99,
        20.0
    ),
    (
        2,
        3,
        2,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        2,
        4,
        1,
        49.99,
        0.0,
        4.99,
        20.0
    ),
    (
        3,
        2,
        1,
        899.99,
        0.0,
        9.99,
        20.0
    ),
    (
        4,
        7,
        1,
        69.99,
        0.0,
        6.99,
        20.0
    ),
    (
        5,
        5,
        1,
        39.99,
        0.0,
        4.99,
        20.0
    ),
    (
        5,
        8,
        1,
        199.99,
        0.0,
        3.99,
        20.0
    ),
    (
        6,
        9,
        2,
        89.99,
        0.0,
        5.99,
        20.0
    ),
    (
        7,
        10,
        1,
        299.99,
        0.0,
        7.99,
        20.0
    ),
    (
        8,
        11,
        1,
        29.99,
        0.0,
        4.99,
        20.0
    ),
    (
        8,
        13,
        1,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        8,
        14,
        1,
        34.99,
        0.0,
        5.99,
        20.0
    );

-- 20. FACTURES
INSERT INTO
    _facture (
        id_panier,
        id_adresse,
        f_total_ht,
        f_total_remise,
        f_total_ttc
    )
VALUES (1, 1, 755.98, 0.0, 907.18),
    (2, 1, 103.96, 0.0, 124.75),
    (3, 1, 909.98, 0.0, 1091.98),
    (5, 1, 248.97, 0.0, 298.76),
    (6, 1, 185.97, 0.0, 223.16),
    (8, 1, 95.96, 0.0, 115.15);

-- 21. PAIEMENTS
INSERT INTO
    _paiement (
        id_facture,
        mode_paiement,
        numero_carte,
        mois_annee_expiration,
        cryptogramme_carte,
        timestamp_paiement
    )
VALUES (
        1,
        'CB',
        '1234567890123456',
        '12/27',
        '123',
        '2025-11-01 10:35:00'
    ),
    (
        2,
        'CB',
        '6543210987654321',
        '06/26',
        '456',
        '2025-11-02 14:50:00'
    ),
    (
        3,
        'CB',
        '1111222233334444',
        '03/28',
        '789',
        '2025-11-03 09:20:00'
    ),
    (
        4,
        'CB',
        '9999888877776666',
        '09/27',
        '321',
        '2025-11-04 16:25:00'
    ),
    (
        5,
        'CB',
        '5555666677778888',
        '11/26',
        '654',
        '2025-11-05 11:05:00'
    ),
    (
        6,
        'CB',
        '4444333322221111',
        '08/27',
        '987',
        '2025-11-06 13:35:00'
    );

-- 22. LIVRAISONS
INSERT INTO
    _livraison (
        id_facture,
        date_livraison,
        etat_livraison
    )
VALUES (1, '2025-11-05', 'Livré'),
    (2, '2025-11-06', 'Livré'),
    (3, '2025-11-08', 'En transit'),
    (4, NULL, 'En préparation'),
    (5, '2025-11-09', 'Livré'),
    (6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO
    _definie_pour (id_seuil, id_compte)
VALUES (1, 2),
    (2, 2),
    (3, 2),
    (4, 2),
    (5, 2),
    (1, 3),
    (2, 3),
    (3, 3),
    (5, 3),
    (1, 10),
    (2, 10),
    (3, 10),
    (4, 10),
    (5, 10),
    (5, 1);

-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;

UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;

UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;

UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;

UPDATE cobrec1._commentaire SET a_note = 0.0;
----------- WbStatement -----------
##sqlwb.pos=97443
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;

CREATE SCHEMA cobrec1;

SET SCHEMA 'cobrec1';

-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (
        civilite IN (
            'M.',
            'Mme',
            'Inconnu',
            'Ne souhaite pas s''exprimer',
            'Autre'
        )
    ),
    CONSTRAINT verif_compte_email CHECK (
        email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'
    ),
    CONSTRAINT verif_compte_num_telephone CHECK (
        num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$'
    )
);

ALTER TABLE ONLY cobrec1._compte
ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11, 2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (
        type_couleur IN (
            'Vert',
            'Jaune',
            'Rouge',
            'Noir',
            'Blanc',
            'Bleu',
            'Violet',
            'Orange',
            'Gris',
            'Marron'
        )
    )
);

ALTER TABLE ONLY cobrec1._couleur
ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4, 1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (
        montant_TVA >= 0.00
        AND montant_TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11, 2) DEFAULT 0.0,
    p_volume numeric(11, 2) DEFAULT 0.0,
    p_frais_de_port numeric(11, 2) DEFAULT 0.0,
    p_prix numeric(11, 2) NOT NULL,
    p_note numeric(2, 1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (
        p_note >= 0
        AND p_note <= 5
    ),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (
        p_statut IN (
            'Ébauche',
            'En ligne',
            'Hors ligne',
            'Supprimé'
        )
    ),
    CONSTRAINT verif_produit_origine CHECK (
        p_origine IN (
            'Inconnu',
            'Bretagne',
            'France',
            'UE',
            'Hors UE'
        )
    )
);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) REFERENCES cobrec1._vendeur (id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) REFERENCES cobrec1._TVA (id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5, 2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (
        reduction_pourcentage >= 0.00
        AND reduction_pourcentage <= 100.00
    ),
    /*CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_reduction_fin CHECK (
        reduction_fin > reduction_debut
    )
);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    /*CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_promotion_fin CHECK (
        promotion_fin > promotion_debut
    )
);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11, 2) DEFAULT 0.0,
    f_total_remise numeric(11, 2) DEFAULT 0.0,
    f_total_ttc numeric(11, 2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) REFERENCES cobrec1._adresse (id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2, 1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (
        vote_type IN ('like', 'dislike')
    )
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2, 1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (
        a_note IN (
            NULL,
            0.0,
            0.5,
            1.0,
            1.5,
            2.0,
            2.5,
            3.0,
            3.5,
            4.0,
            4.5,
            5.0
        )
    )
);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) REFERENCES cobrec1._livraison (id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison, id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (
        type_signalement IN (
            'signale_avis',
            'signale_compte',
            'signale_produit'
        )
    )
);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11, 2) NOT NULL,
    remise_unitaire numeric(11, 2) DEFAULT 0.0,
    frais_de_port numeric(11, 2) DEFAULT 0.0,
    TVA numeric(4, 1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (
        TVA >= 0.00
        AND TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
-- CREATE TABLE cobrec1._represente_promotion (
--     id_image integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image)
--             REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) REFERENCES cobrec1._categorie_produit (id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) REFERENCES cobrec1._couleur (code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction)
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) REFERENCES cobrec1._seuil_alerte (id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();

CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

CREATE FUNCTION mise_sur_marche_produit_insert()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche_insert
AFTER INSERT on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit_insert();

CREATE FUNCTION update_p_modif_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_modif = OLD.p_modif) THEN
        NEW.p_modif = CURRENT_TIMESTAMP;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_update_p_modif_produit
BEFORE UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE update_p_modif_produit();

CREATE FUNCTION produit_deja_en_reduction_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_insert
BEFORE INSERT on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_insert();

CREATE FUNCTION produit_deja_en_reduction_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_update
BEFORE UPDATE on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_update();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO
    _compte (
        nom,
        prenom,
        email,
        num_telephone,
        mdp,
        etat_A2F,
        nb_fois_signale,
        nb_signalements_avis,
        nb_cpts_signales,
        nb_avis_signales
    )
VALUES (
        'Maeleau',
        'Le Hyver',
        'admin@cobrec.fr',
        '0601020304',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Lopicier',
        'Mallo',
        'vendeur1@example.com',
        '0612345678',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Elouard',
        'Jean-Jacques',
        'vendeur2@shop.fr',
        '0623456789',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        1,
        0,
        0,
        0
    ),
    (
        'Jean',
        'Dupont',
        'client1@gmail.com',
        '0634567890',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        1,
        0,
        0
    ),
    (
        'Marie',
        'Martin',
        'client2@yahoo.fr',
        '0645678901',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        1,
        0
    ),
    (
        'Pierre',
        'Durand',
        'client3@outlook.com',
        '0656789012',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Sophie',
        'Bernard',
        'client4@free.fr',
        '0667890123',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Lucas',
        'Petit',
        'client5@orange.fr',
        '0678901234',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Emma',
        'Lefebvre',
        'client6@wanadoo.fr',
        '0689012345',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Martinière',
        'Yvili',
        'vendeur3@boutique.fr',
        '0690123456',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    );

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO
    _vendeur (
        id_compte,
        SIREN,
        raison_sociale,
        denomination,
        nb_produits_crees
    )
VALUES (
        2,
        '123456789',
        'TechStore SARL',
        'TechStore',
        5
    ),
    (
        3,
        '987654321',
        'FashionHub SAS',
        'FashionHub',
        3
    ),
    (
        10,
        '456789123',
        'SportPro EURL',
        'SportPro',
        2
    );

-- 4. CLIENTS
INSERT INTO
    _client (
        id_compte,
        c_pseudo,
        c_nb_produits_achetes,
        c_depense_totale,
        c_cloture,
        c_datenaissance
    )
VALUES (
        4,
        'jdupont',
        2,
        907.18,
        FALSE,
        '1985-03-15'
    ),
    (
        5,
        'mmartin',
        3,
        124.75,
        FALSE,
        '1990-07-22'
    ),
    (
        6,
        'pdurand',
        1,
        1091.98,
        FALSE,
        '1988-11-10'
    ),
    (
        7,
        'sbernard',
        2,
        298.76,
        FALSE,
        '1995-05-30'
    ),
    (
        8,
        'lpetit',
        0,
        0.0,
        FALSE,
        '2000-01-18'
    ),
    (
        9,
        'elefebvre',
        1,
        179.98,
        FALSE,
        '1992-09-25'
    );

-- 5. ADRESSES
INSERT INTO
    _adresse (
        id_compte,
        a_adresse,
        a_ville,
        a_code_postal,
        a_complement
    )
VALUES (
        4,
        '15 rue de la Paix',
        'Paris',
        '75001',
        'Apt 5'
    ),
    (
        5,
        '23 avenue des Champs',
        'Lyon',
        '69001',
        NULL
    ),
    (
        6,
        '8 boulevard Victor Hugo',
        'Marseille',
        '13001',
        'Bâtiment B'
    ),
    (
        7,
        '42 rue du Commerce',
        'Toulouse',
        '31000',
        NULL
    ),
    (
        8,
        '67 place de la République',
        'Nice',
        '06000',
        '3ème étage'
    ),
    (
        9,
        '91 rue Principale',
        'Bordeaux',
        '33000',
        NULL
    ),
    (
        2,
        '12 avenue du Commerce',
        'Paris',
        '75015',
        'Entrepôt A'
    ),
    (
        3,
        '55 rue de la Mode',
        'Lyon',
        '69002',
        NULL
    ),
    (
        10,
        '78 boulevard du Sport',
        'Marseille',
        '13008',
        'Zone industrielle'
    );

-- 6. COULEURS
INSERT INTO
    _couleur (code_hexa, nom, type_couleur)
VALUES (
        '#FF0000',
        'Rouge vif',
        'Rouge'
    ),
    (
        '#0000FF',
        'Bleu marine',
        'Bleu'
    ),
    ('#000000', 'Noir', 'Noir'),
    (
        '#FFFFFF',
        'Blanc pur',
        'Blanc'
    ),
    (
        '#00FF00',
        'Vert émeraude',
        'Vert'
    ),
    (
        '#FFFF00',
        'Jaune citron',
        'Jaune'
    ),
    ('#FFA500', 'Orange', 'Orange'),
    ('#808080', 'Gris', 'Gris'),
    (
        '#8B4513',
        'Marron chocolat',
        'Marron'
    ),
    ('#EE82EE', 'Violet', 'Violet'),
    (
        '#87CEEB',
        'Bleu ciel',
        'Bleu'
    ),
    (
        '#32CD32',
        'Vert lime',
        'Vert'
    );

-- 7. CATÉGORIES
INSERT INTO
    _categorie_produit (nom_categorie)
VALUES ('Électronique'),
    ('Vêtements'),
    ('Accessoires'),
    ('Maison'),
    ('Sport'),
    ('Livres'),
    ('Informatique'),
    ('Mode homme'),
    ('Mode femme'),
    ('Chaussures');

-- 8. TVA
INSERT INTO
    _TVA (montant_TVA, libelle_TVA)
VALUES (20.0, 'TVA normale'),
    (10.0, 'TVA intermédiaire'),
    (5.5, 'TVA réduite'),
    (2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO
    _produit (
        id_TVA,
        id_vendeur,
        p_nom,
        p_description,
        p_prix,
        p_stock,
        p_statut,
        p_origine,
        p_poids,
        p_volume,
        p_frais_de_port,
        p_note,
        p_nb_ventes
    )
VALUES (
        1,
        1,
        'Smartphone XPro',
        'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G',
        599.99,
        35,
        'En ligne',
        'Bretagne',
        0.180,
        0.01,
        5.99,
        4.3,
        15
    ),
    (
        1,
        1,
        'Ordinateur portable Ultra',
        'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7',
        899.99,
        22,
        'En ligne',
        'Bretagne',
        2.5,
        0.03,
        9.99,
        4.0,
        8
    ),
    (
        1,
        2,
        'T-shirt coton bio',
        'T-shirt 100% coton biologique, coupe regular, diverses couleurs',
        24.99,
        58,
        'En ligne',
        'Bretagne',
        0.15,
        0.5,
        3.99,
        5.0,
        42
    ),
    (
        1,
        2,
        'Jean slim',
        'Jean coupe slim stretch, denim premium',
        49.99,
        62,
        'En ligne',
        'Bretagne',
        1.00,
        0.01,
        4.99,
        NULL,
        18
    ),
    (
        1,
        2,
        'Robe d été',
        'Robe légère et fluide pour l été, motifs floraux',
        39.99,
        48,
        'En ligne',
        'Bretagne',
        0.30,
        0.08,
        4.99,
        NULL,
        12
    ),
    (
        2,
        1,
        'Casque audio Bluetooth',
        'Casque sans fil avec réduction de bruit active, autonomie 30h',
        149.99,
        15,
        'En ligne',
        'Bretagne',
        0.25,
        0.02,
        5.99,
        4.5,
        25
    ),
    (
        1,
        2,
        'Sac à dos urbain',
        'Sac à dos pour ordinateur portable, compartiments multiples, imperméable',
        69.99,
        35,
        'En ligne',
        'Bretagne',
        0.60,
        0.15,
        6.99,
        NULL,
        10
    ),
    (
        1,
        1,
        'Montre connectée',
        'Montre sport avec GPS, cardiofréquencemètre, étanche 50m',
        199.99,
        15,
        'En ligne',
        'Bretagne',
        0.05,
        0.01,
        3.99,
        4.7,
        20
    ),
    (
        1,
        3,
        'Chaussures running',
        'Chaussures de course avec amorti premium, semelle respirante',
        89.99,
        54,
        'En ligne',
        'Bretagne',
        0.40,
        0.08,
        5.99,
        4.2,
        16
    ),
    (
        1,
        1,
        'Tablette 10 pouces',
        'Tablette Android, écran Full HD, 64Go, stylet inclus',
        299.99,
        16,
        'En ligne',
        'Bretagne',
        0.50,
        0.02,
        7.99,
        3.8,
        9
    ),
    (
        1,
        3,
        'Ballon de football',
        'Ballon officiel en cuir synthétique, taille 5',
        29.99,
        85,
        'En ligne',
        'Bretagne',
        0.45,
        0.06,
        4.99,
        4.6,
        35
    ),
    (
        1,
        2,
        'Veste en cuir',
        'Veste en cuir véritable, coupe motard, doublure intérieure',
        189.99,
        15,
        'En ligne',
        'Bretagne',
        1.20,
        0.01,
        8.99,
        NULL,
        5
    ),
    (
        3,
        1,
        'Livre cuisine française',
        'Recettes traditionnelles de cuisine française, 300 pages',
        24.99,
        28,
        'En ligne',
        'Bretagne',
        0.80,
        0.03,
        3.99,
        4.8,
        22
    ),
    (
        1,
        3,
        'Tapis de yoga',
        'Tapis antidérapant, épaisseur 6mm, avec sac de transport',
        34.99,
        52,
        'En ligne',
        'Bretagne',
        1.10,
        0.02,
        5.99,
        4.4,
        28
    ),
    (
        1,
        1,
        'Clavier mécanique RGB',
        'Clavier gamer avec rétroéclairage RGB, switches mécaniques',
        79.99,
        29,
        'En ligne',
        'Bretagne',
        0.90,
        0.04,
        5.99,
        4.1,
        11
    ),
    (
        1,
        1,
        'Console NextGen',
        'Console de jeu dernière génération, 1To SSD, 4K HDR',
        499.99,
        0,
        'Hors ligne',
        'France',
        3.5,
        0.02,
        14.99,
        4.8,
        25
    ),
    (
        1,
        2,
        'Sweat à capuche premium',
        'Sweat-shirt en coton bio, coupe oversize, poche kangourou',
        59.99,
        0,
        'Hors ligne',
        'France',
        0.70,
        0.03,
        5.99,
        4.4,
        18
    ),
    (
        1,
        3,
        'Raquette de tennis pro',
        'Raquette carbone, tension 25kg, grip confort',
        129.99,
        0,
        'Hors ligne',
        'France',
        0.35,
        0.02,
        6.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Écran gaming 4K 27"',
        'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms',
        349.99,
        0,
        'Hors ligne',
        'France',
        5.2,
        0.35,
        19.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Baskets limited edition',
        'Baskets cuir véritable, édition limitée, semelle comfort',
        179.99,
        0,
        'Hors ligne',
        'France',
        0.80,
        0.06,
        7.99,
        4.9,
        65
    ),
    (
        1,
        3,
        'Vélo de route carbone',
        'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses',
        1299.99,
        0,
        'Hors ligne',
        'UE',
        8.5,
        0.15,
        29.99,
        4.8,
        25
    ),
    (
        1,
        1,
        'Drone professionnel 4K',
        'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min',
        899.99,
        0,
        'Hors ligne',
        'UE',
        1.2,
        0.02,
        12.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Manteau d hiver imperméable',
        'Manteau longueur genoux, doublure polaire, coupe-vent',
        179.99,
        0,
        'Hors ligne',
        'UE',
        1.5,
        0.01,
        8.99,
        4.4,
        65
    ),
    (
        1,
        3,
        'Tente 4 places',
        'Tente familiale, double toit, arceaux aluminium, imperméable',
        249.99,
        0,
        'Hors ligne',
        'Hors UE',
        4.8,
        0.08,
        19.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Enceinte Bluetooth waterproof',
        'Enceinte portable, autonomie 24h, résistance IP67',
        129.99,
        0,
        'Hors ligne',
        'Hors UE',
        0.9,
        0.05,
        6.99,
        4.9,
        95
    ),
    (
        2,
        1,
        'Pull Marin de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.',
        36.37,
        31,
        'En ligne',
        'Bretagne',
        2.06,
        0.45,
        5.78,
        4.4,
        12
    ),
    (
        1,
        1,
        'Bonnet Miki de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.',
        121.37,
        6,
        'Hors ligne',
        'Bretagne',
        2.3,
        0.09,
        8.8,
        4.3,
        60
    ),
    (
        2,
        3,
        'Galettes Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        147.92,
        142,
        'En ligne',
        'Bretagne',
        0.46,
        0.46,
        5.71,
        4.3,
        97
    ),
    (
        1,
        3,
        'Écharpe Rayée Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        173.77,
        102,
        'En ligne',
        'Bretagne',
        0.91,
        0.32,
        8.28,
        4.4,
        58
    ),
    (
        1,
        2,
        'Écharpe Rayée de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.',
        197.02,
        168,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.12,
        7.92,
        4.8,
        19
    ),
    (
        4,
        2,
        'Ciré Navy de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        104.35,
        169,
        'En ligne',
        'Bretagne',
        1.43,
        0.14,
        7.22,
        4.6,
        72
    ),
    (
        4,
        3,
        'Bracelet Ancre Fait main',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        172.75,
        44,
        'Hors ligne',
        'Bretagne',
        1.92,
        0.4,
        8.8,
        4.1,
        102
    ),
    (
        1,
        3,
        'Marinière Local',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        74.29,
        80,
        'Hors ligne',
        'Bretagne',
        1.36,
        0.23,
        13.58,
        4.9,
        72
    ),
    (
        3,
        1,
        'Bracelet Ancre de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.',
        40.53,
        140,
        'En ligne',
        'Bretagne',
        2.76,
        0.3,
        9.4,
        4.1,
        97
    ),
    (
        3,
        3,
        'Pendentif Hermine Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        164.23,
        199,
        'Hors ligne',
        'Bretagne',
        1.64,
        0.07,
        10.94,
        4.9,
        47
    ),
    (
        1,
        3,
        'Sac Voile de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.',
        136.95,
        100,
        'En ligne',
        'Bretagne',
        1.37,
        0.26,
        6.09,
        4.2,
        91
    ),
    (
        2,
        3,
        'Écharpe Rayée de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        21.13,
        22,
        'Hors ligne',
        'Bretagne',
        2.73,
        0.43,
        5.64,
        4.2,
        129
    ),
    (
        1,
        2,
        'Coussin Triskell de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        134.55,
        95,
        'Hors ligne',
        'Bretagne',
        1.33,
        0.24,
        11.56,
        4.7,
        30
    ),
    (
        1,
        3,
        'Écharpe Rayée Authentique',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.',
        36.49,
        51,
        'En ligne',
        'Bretagne',
        0.91,
        0.13,
        13.31,
        4.4,
        145
    ),
    (
        4,
        3,
        'Écharpe Rayée Bio',
        'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.',
        50.4,
        107,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.09,
        5.02,
        4.4,
        121
    ),
    (
        1,
        3,
        'Bonnet Miki Authentique',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        119.47,
        143,
        'En ligne',
        'Bretagne',
        0.28,
        0.16,
        5.45,
        4.5,
        140
    ),
    (
        3,
        1,
        'Ciré Navy de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        187.96,
        150,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.3,
        10.57,
        4.4,
        149
    ),
    (
        1,
        1,
        'Bol Breton Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.',
        66.7,
        85,
        'En ligne',
        'Bretagne',
        2.79,
        0.47,
        5.08,
        4.6,
        149
    ),
    (
        1,
        3,
        'Bol Breton Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        176.18,
        99,
        'Hors ligne',
        'Bretagne',
        0.93,
        0.22,
        9.89,
        4.3,
        140
    ),
    (
        3,
        1,
        'Pull Marin de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.',
        30.23,
        146,
        'En ligne',
        'Bretagne',
        0.55,
        0.15,
        6.9,
        4.3,
        72
    ),
    (
        1,
        1,
        'Affiche Vintage de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        155.74,
        168,
        'En ligne',
        'Bretagne',
        2.94,
        0.09,
        8.98,
        4.7,
        148
    ),
    (
        2,
        3,
        'Vareuse Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        120.09,
        42,
        'En ligne',
        'Bretagne',
        1.35,
        0.03,
        8.28,
        4.9,
        15
    ),
    (
        3,
        2,
        'Pull Marin Bio',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.',
        151.65,
        65,
        'En ligne',
        'Bretagne',
        2.61,
        0.49,
        12.3,
        4.9,
        11
    ),
    (
        1,
        3,
        'Kabig Bio',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.',
        172.27,
        61,
        'En ligne',
        'Bretagne',
        0.68,
        0.46,
        8.15,
        4.8,
        63
    ),
    (
        1,
        2,
        'Phare Miniature Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        62.75,
        169,
        'En ligne',
        'Bretagne',
        1.58,
        0.34,
        12.59,
        4.3,
        12
    ),
    (
        3,
        1,
        'Bol Breton Fait main',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        75.33,
        85,
        'Hors ligne',
        'Bretagne',
        1.37,
        0.49,
        6.04,
        4.9,
        53
    ),
    (
        3,
        3,
        'Bracelet Ancre de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        23.23,
        175,
        'Hors ligne',
        'Bretagne',
        2.77,
        0.32,
        10.97,
        4.1,
        81
    ),
    (
        1,
        2,
        'Caramels de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        135.67,
        102,
        'Hors ligne',
        'Bretagne',
        2.06,
        0.45,
        10.54,
        4.3,
        145
    ),
    (
        3,
        3,
        'Affiche Vintage de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.',
        137.69,
        135,
        'Hors ligne',
        'Bretagne',
        1.47,
        0.45,
        12.16,
        4.2,
        26
    ),
    (
        4,
        2,
        'Écharpe Rayée de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        37.85,
        16,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.24,
        12.65,
        4.1,
        111
    ),
    (
        4,
        3,
        'Vareuse de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        51.36,
        183,
        'Hors ligne',
        'Bretagne',
        1.6,
        0.03,
        7.24,
        4.8,
        121
    ),
    (
        4,
        3,
        'Bracelet Ancre Durable',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.',
        150.55,
        126,
        'En ligne',
        'Bretagne',
        1.41,
        0.38,
        12.56,
        4.3,
        138
    ),
    (
        1,
        2,
        'Lampe Tempête de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        73.48,
        143,
        'Hors ligne',
        'Bretagne',
        0.33,
        0.08,
        8.45,
        4.2,
        59
    ),
    (
        4,
        1,
        'Sac Voile de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.',
        167.42,
        104,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.3,
        11.26,
        4.9,
        102
    ),
    (
        4,
        1,
        'Caramels de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        61.58,
        129,
        'En ligne',
        'Bretagne',
        0.18,
        0.17,
        11.11,
        4.4,
        47
    ),
    (
        4,
        2,
        'Pendentif Hermine de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        35.65,
        123,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.14,
        7.95,
        4.5,
        91
    ),
    (
        2,
        1,
        'Ciré Navy Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.',
        19.84,
        94,
        'En ligne',
        'Bretagne',
        0.75,
        0.04,
        13.62,
        4.0,
        12
    ),
    (
        3,
        1,
        'Vareuse de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        51.2,
        184,
        'En ligne',
        'Bretagne',
        0.84,
        0.19,
        10.45,
        5.0,
        34
    ),
    (
        1,
        2,
        'Pendentif Hermine Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        47.48,
        156,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.32,
        5.92,
        4.8,
        35
    ),
    (
        4,
        1,
        'Galettes de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.',
        89.39,
        130,
        'Hors ligne',
        'Bretagne',
        0.41,
        0.48,
        10.72,
        4.8,
        44
    ),
    (
        2,
        2,
        'Sac Voile Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.',
        148.16,
        73,
        'Hors ligne',
        'Bretagne',
        1.03,
        0.13,
        13.41,
        4.3,
        120
    ),
    (
        1,
        1,
        'Marinière de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.',
        50.09,
        71,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.44,
        11.31,
        4.3,
        7
    ),
    (
        4,
        3,
        'Sac Voile Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        102.77,
        9,
        'Hors ligne',
        'Bretagne',
        0.37,
        0.12,
        11.23,
        4.3,
        99
    ),
    (
        2,
        1,
        'Sac Voile Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        61.2,
        69,
        'Hors ligne',
        'Bretagne',
        0.77,
        0.36,
        7.84,
        4.7,
        52
    ),
    (
        1,
        1,
        'Pendentif Hermine Local',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.',
        167.37,
        80,
        'Hors ligne',
        'Bretagne',
        0.76,
        0.1,
        5.13,
        4.5,
        75
    ),
    (
        1,
        2,
        'Vareuse Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        118.5,
        125,
        'Hors ligne',
        'Bretagne',
        1.49,
        0.18,
        13.69,
        4.3,
        127
    ),
    (
        4,
        2,
        'Pendentif Hermine Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        116.38,
        82,
        'Hors ligne',
        'Bretagne',
        0.35,
        0.13,
        10.02,
        4.4,
        62
    ),
    (
        2,
        1,
        'Pendentif Hermine de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        21.38,
        194,
        'En ligne',
        'Bretagne',
        0.39,
        0.38,
        10.63,
        4.3,
        25
    ),
    (
        2,
        2,
        'Ciré Navy de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.',
        140.29,
        125,
        'En ligne',
        'Bretagne',
        0.94,
        0.12,
        11.36,
        4.7,
        121
    ),
    (
        4,
        1,
        'Pull Marin Authentique',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        181.69,
        41,
        'Hors ligne',
        'Bretagne',
        0.31,
        0.09,
        7.77,
        4.7,
        150
    ),
    (
        1,
        1,
        'Bolée à Cidre Local',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        103.33,
        25,
        'En ligne',
        'Bretagne',
        1.83,
        0.45,
        11.61,
        4.6,
        11
    ),
    (
        4,
        2,
        'Bol Breton de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.14,
        76,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.3,
        10.71,
        4.5,
        28
    ),
    (
        3,
        2,
        'Phare Miniature de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        141.1,
        78,
        'Hors ligne',
        'Bretagne',
        2.02,
        0.21,
        11.84,
        4.0,
        27
    ),
    (
        1,
        1,
        'Caramels Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        112.55,
        110,
        'Hors ligne',
        'Bretagne',
        0.26,
        0.26,
        10.6,
        4.5,
        118
    ),
    (
        4,
        1,
        'Vareuse de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.',
        101.61,
        12,
        'En ligne',
        'Bretagne',
        2.92,
        0.31,
        7.15,
        4.2,
        146
    ),
    (
        2,
        2,
        'Lampe Tempête Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        145.44,
        135,
        'En ligne',
        'Bretagne',
        2.15,
        0.21,
        9.34,
        4.5,
        121
    ),
    (
        4,
        1,
        'Bracelet Ancre de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.',
        159.31,
        111,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.4,
        7.4,
        4.0,
        81
    ),
    (
        2,
        2,
        'Coussin Triskell Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        112.71,
        121,
        'En ligne',
        'Bretagne',
        2.81,
        0.44,
        13.83,
        4.2,
        103
    ),
    (
        1,
        2,
        'Coussin Triskell Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        159.76,
        171,
        'En ligne',
        'Bretagne',
        2.94,
        0.25,
        5.33,
        4.5,
        89
    ),
    (
        1,
        2,
        'Lampe Tempête de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.75,
        44,
        'Hors ligne',
        'Bretagne',
        0.32,
        0.39,
        7.39,
        4.6,
        106
    ),
    (
        1,
        2,
        'Coussin Triskell Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        54.37,
        180,
        'En ligne',
        'Bretagne',
        2.77,
        0.5,
        11.72,
        4.4,
        30
    ),
    (
        2,
        1,
        'Bolée à Cidre de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.',
        20.61,
        96,
        'En ligne',
        'Bretagne',
        1.19,
        0.08,
        9.78,
        4.6,
        51
    ),
    (
        3,
        3,
        'Caramels Durable',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        37.05,
        123,
        'En ligne',
        'Bretagne',
        1.95,
        0.24,
        11.0,
        4.9,
        124
    ),
    (
        2,
        2,
        'Lampe Tempête Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        90.19,
        69,
        'Hors ligne',
        'Bretagne',
        1.42,
        0.16,
        13.99,
        4.9,
        32
    ),
    (
        3,
        1,
        'Bolée à Cidre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        134.41,
        75,
        'Hors ligne',
        'Bretagne',
        0.12,
        0.43,
        12.0,
        5.0,
        132
    ),
    (
        3,
        2,
        'Bonnet Miki Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        180.74,
        170,
        'Hors ligne',
        'Bretagne',
        0.21,
        0.4,
        5.3,
        4.4,
        38
    ),
    (
        4,
        1,
        'Bonnet Miki Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        182.65,
        47,
        'En ligne',
        'Bretagne',
        0.85,
        0.41,
        9.34,
        4.8,
        91
    ),
    (
        3,
        1,
        'Caramels de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        84.57,
        72,
        'En ligne',
        'Bretagne',
        1.66,
        0.23,
        11.06,
        4.7,
        102
    ),
    (
        1,
        1,
        'Marinière Premium',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        51.84,
        21,
        'Hors ligne',
        'Bretagne',
        1.94,
        0.24,
        11.31,
        4.6,
        34
    ),
    (
        1,
        2,
        'Pull Marin de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        35.64,
        121,
        'Hors ligne',
        'Bretagne',
        1.18,
        0.48,
        11.27,
        4.5,
        44
    ),
    (
        4,
        2,
        'Ciré Jaune de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        189.65,
        97,
        'En ligne',
        'Bretagne',
        0.39,
        0.35,
        9.9,
        5.0,
        96
    ),
    (
        1,
        3,
        'Lampe Tempête Authentique',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        122.86,
        10,
        'En ligne',
        'Bretagne',
        0.25,
        0.17,
        13.9,
        4.8,
        57
    ),
    (
        1,
        3,
        'Bonnet Miki de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        159.05,
        157,
        'En ligne',
        'Bretagne',
        0.11,
        0.43,
        6.3,
        4.1,
        69
    ),
    (
        3,
        3,
        'Marinière Authentique',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        12.98,
        72,
        'En ligne',
        'Bretagne',
        0.25,
        0.37,
        9.73,
        4.7,
        126
    ),
    (
        4,
        2,
        'Bracelet Ancre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.',
        181.75,
        173,
        'En ligne',
        'Bretagne',
        1.61,
        0.23,
        13.68,
        4.1,
        127
    ),
    (
        3,
        2,
        'Lampe Tempête de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        38.04,
        37,
        'Hors ligne',
        'Bretagne',
        0.9,
        0.32,
        9.94,
        4.3,
        140
    ),
    (
        3,
        2,
        'Pull Marin de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        177.85,
        110,
        'En ligne',
        'Bretagne',
        1.08,
        0.23,
        8.74,
        4.1,
        114
    ),
    (
        3,
        3,
        'Coussin Triskell Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        27.62,
        29,
        'En ligne',
        'Bretagne',
        2.26,
        0.19,
        6.17,
        4.1,
        148
    ),
    (
        3,
        3,
        'Galettes Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.',
        123.48,
        95,
        'Hors ligne',
        'Bretagne',
        0.4,
        0.26,
        6.39,
        4.5,
        32
    ),
    (
        1,
        1,
        'Bol Breton Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.',
        194.19,
        164,
        'Hors ligne',
        'Bretagne',
        1.88,
        0.32,
        5.24,
        4.9,
        73
    );

-- 10. PROMOTIONS (futures)
INSERT INTO
    _promotion (
        id_produit,
        promotion_debut,
        promotion_fin
    )
VALUES (
        1,
        '2025-12-20 00:00:00',
        '2027-12-25 23:59:00'
    ),
    (
        2,
        '2026-01-01 00:00:00',
        '2026-02-07 23:59:00'
    ),
    (
        3,
        '2026-02-16 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        4,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        5,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        6,
        '2026-06-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        7,
        '2026-01-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 9. RÉDUCTIONS (futures)
INSERT INTO
    _reduction (
        id_produit,
        reduction_pourcentage,
        reduction_debut,
        reduction_fin
    )
VALUES (
        1,
        10.00,
        '2026-01-05 00:00:00',
        '2026-09-19 23:59:00'
    ),
    (
        2,
        15.00,
        '2026-02-15 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        3,
        20.00,
        '2026-01-01 00:00:00',
        '2026-05-15 23:59:00'
    ),
    (
        4,
        25.00,
        '2026-01-20 00:00:00',
        '2026-02-26 23:59:00'
    ),
    (
        5,
        30.00,
        '2026-06-01 00:00:00',
        '2026-06-30 23:59:00'
    ),
    (
        6,
        60.00,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        7,
        55.00,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        8,
        70.00,
        '2026-01-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        9,
        65.00,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 12. IMAGES
INSERT INTO
    _image (i_lien, i_title, i_alt)
VALUES (
        '/img/photo/smartphone_xpro.jpg',
        'Smartphone XPro.jpg',
        'Image du smartphone'
    ),
    (
        '/img/photo/ordinateur_portable_ultra.jpg',
        'Ordinateur portable.jpeg',
        'Image de l ordinateur'
    ),
    (
        '/img/photo/t_shirt_coton_bio.jpg',
        'T-shirt.png',
        'Image du t-shirt'
    ),
    (
        '/img/photo/jean_slim.jpg',
        'Jean.jpg',
        'Image du jean'
    ),
    (
        '/img/photo/casque_audio_bluetooth.jpg',
        'Casque audio.jpg',
        'Image du casque'
    ),
    (
        '/img/photo/avatar_jean.jpg',
        'Avatar Jean.jpeg',
        'Photo de profil Jean'
    ),
    (
        '/img/photo/avatar_marie.jpg',
        'Avatar Marie.jpg',
        'Photo de profil Marie'
    ),
    (
        '/img/photo/logo_techstore.jpg',
        'Logo TechStore.jpg',
        'Logo entreprise TechStore'
    ),
    (
        '/img/photo/logo_fashionhub.jpg',
        'Logo FashionHub.jpg',
        'Logo entreprise FashionHub'
    ),
    (
        '/img/photo/montre_connect_e.jpg',
        'Montre connectée.jpg',
        'Image de la montre'
    ),
    (
        '/img/photo/sac___dos_urbain.jpg',
        'Sac à dos.jpeg',
        'Image du sac'
    ),
    (
        '/img/photo/chaussures_running.jpg',
        'Chaussures running.jpeg',
        'Image des chaussures'
    ),
    (
        '/img/photo/tablette_10_pouces.jpg',
        'Tablette.jpg',
        'Image de la tablette'
    ),
    (
        '/img/photo/ballon_de_football.jpg',
        'Ballon football.jpg',
        'Image du ballon'
    ),
    (
        '/img/photo/veste_en_cuir.jpg',
        'Veste cuir.jpg',
        'Image de la veste'
    ),
    (
        '/img/photo/livre_cuisine_fran_aise.jpg',
        'Livre cuisine.jpeg',
        'Image du livre'
    ),
    (
        '/img/photo/tapis_de_yoga.jpg',
        'Tapis yoga.jpeg',
        'Image du tapis'
    ),
    (
        '/img/photo/clavier_m_canique_rgb.jpg',
        'Clavier.jpg',
        'Image du clavier'
    ),
    (
        '/img/photo/console_nextgen.jpg',
        'Console NextGen.jpg',
        'Image de la console'
    ),
    (
        '/img/photo/sweat___capuche_premium.jpg',
        'Sweat à capuche.jpeg',
        'Image du sweat'
    ),
    (
        '/img/photo/raquette_de_tennis_pro.jpg',
        'Raquette tennis.jpg',
        'Image de la raquette'
    ),
    (
        '/img/photo/_cran_gaming_4k_27_.jpg',
        'Écran 4K.jpeg',
        'Image de l écran'
    ),
    (
        '/img/photo/baskets_limited_edition.jpg',
        'Baskets limited.jpeg',
        'Image des baskets'
    ),
    (
        '/img/photo/v_lo_de_route_carbone.jpg',
        'Vélo route.jpeg',
        'Image du vélo'
    ),
    (
        '/img/photo/drone_professionnel_4k.jpg',
        'Drone 4K.jpg',
        'Image du drone'
    ),
    (
        '/img/photo/manteau_d_hiver_imperm_able.jpg',
        'Manteau hiver.jpeg',
        'Image du manteau'
    ),
    (
        '/img/photo/tente_4_places.jpg',
        'Tente 4 places.jpg',
        'Image de la tente'
    ),
    (
        '/img/photo/enceinte_bluetooth_waterproof.jpg',
        'Enceinte Bluetooth.jpg',
        'Image de l enceinte'
    ),
    (
        '/img/photo/pull_marin_de_saint_malo.jpg',
        'Pull Marin de Saint-Malo',
        'Photo de Pull Marin de Saint-Malo'
    ),
    (
        '/img/photo/bonnet_miki_de_carnac.jpg',
        'Bonnet Miki de Carnac',
        'Photo de Bonnet Miki de Carnac'
    ),
    (
        '/img/photo/galettes_local.jpg',
        'Galettes Local',
        'Photo de Galettes Local'
    ),
    (
        '/img/photo/_charpe_ray_e_fait_main.jpg',
        'Écharpe Rayée Fait main',
        'Photo de Écharpe Rayée Fait main'
    ),
    (
        '/img/photo/_charpe_ray_e_de_brest.jpg',
        'Écharpe Rayée de Brest',
        'Photo de Écharpe Rayée de Brest'
    ),
    (
        '/img/photo/cir__navy_de_concarneau.jpg',
        'Ciré Navy de Concarneau',
        'Photo de Ciré Navy de Concarneau'
    ),
    (
        '/img/photo/bracelet_ancre_fait_main.jpg',
        'Bracelet Ancre Fait main',
        'Photo de Bracelet Ancre Fait main'
    ),
    (
        '/img/photo/marini_re_local.jpg',
        'Marinière Local',
        'Photo de Marinière Local'
    ),
    (
        '/img/photo/bracelet_ancre_de_concarneau.jpg',
        'Bracelet Ancre de Concarneau',
        'Photo de Bracelet Ancre de Concarneau'
    ),
    (
        '/img/photo/pendentif_hermine_fait_main.jpg',
        'Pendentif Hermine Fait main',
        'Photo de Pendentif Hermine Fait main'
    ),
    (
        '/img/photo/sac_voile_de_concarneau.jpg',
        'Sac Voile de Concarneau',
        'Photo de Sac Voile de Concarneau'
    ),
    (
        '/img/photo/_charpe_ray_e_de_saint_malo.jpg',
        'Écharpe Rayée de Saint-Malo',
        'Photo de Écharpe Rayée de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_de_roscoff.jpg',
        'Coussin Triskell de Roscoff',
        'Photo de Coussin Triskell de Roscoff'
    ),
    (
        '/img/photo/_charpe_ray_e_authentique.jpg',
        'Écharpe Rayée Authentique',
        'Photo de Écharpe Rayée Authentique'
    ),
    (
        '/img/photo/_charpe_ray_e_bio.jpg',
        'Écharpe Rayée Bio',
        'Photo de Écharpe Rayée Bio'
    ),
    (
        '/img/photo/bonnet_miki_authentique.jpg',
        'Bonnet Miki Authentique',
        'Photo de Bonnet Miki Authentique'
    ),
    (
        '/img/photo/cir__navy_de_quimper.jpg',
        'Ciré Navy de Quimper',
        'Photo de Ciré Navy de Quimper'
    ),
    (
        '/img/photo/bol_breton_traditionnel.jpg',
        'Bol Breton Traditionnel',
        'Photo de Bol Breton Traditionnel'
    ),
    (
        '/img/photo/bol_breton_premium.jpg',
        'Bol Breton Premium',
        'Photo de Bol Breton Premium'
    ),
    (
        '/img/photo/pull_marin_de_brest.jpg',
        'Pull Marin de Brest',
        'Photo de Pull Marin de Brest'
    ),
    (
        '/img/photo/affiche_vintage_de_dinard.jpg',
        'Affiche Vintage de Dinard',
        'Photo de Affiche Vintage de Dinard'
    ),
    (
        '/img/photo/vareuse_artisanal.jpg',
        'Vareuse Artisanal',
        'Photo de Vareuse Artisanal'
    ),
    (
        '/img/photo/pull_marin_bio.jpg',
        'Pull Marin Bio',
        'Photo de Pull Marin Bio'
    ),
    (
        '/img/photo/kabig_bio.jpg',
        'Kabig Bio',
        'Photo de Kabig Bio'
    ),
    (
        '/img/photo/phare_miniature_fait_main.jpg',
        'Phare Miniature Fait main',
        'Photo de Phare Miniature Fait main'
    ),
    (
        '/img/photo/bol_breton_fait_main.jpg',
        'Bol Breton Fait main',
        'Photo de Bol Breton Fait main'
    ),
    (
        '/img/photo/bracelet_ancre_de_carnac.jpg',
        'Bracelet Ancre de Carnac',
        'Photo de Bracelet Ancre de Carnac'
    ),
    (
        '/img/photo/caramels_de_dinard.jpg',
        'Caramels de Dinard',
        'Photo de Caramels de Dinard'
    ),
    (
        '/img/photo/affiche_vintage_de_vannes.jpg',
        'Affiche Vintage de Vannes',
        'Photo de Affiche Vintage de Vannes'
    ),
    (
        '/img/photo/_charpe_ray_e_de_dinard.jpg',
        'Écharpe Rayée de Dinard',
        'Photo de Écharpe Rayée de Dinard'
    ),
    (
        '/img/photo/vareuse_de_saint_malo.jpg',
        'Vareuse de Saint-Malo',
        'Photo de Vareuse de Saint-Malo'
    ),
    (
        '/img/photo/bracelet_ancre_durable.jpg',
        'Bracelet Ancre Durable',
        'Photo de Bracelet Ancre Durable'
    ),
    (
        '/img/photo/lampe_temp_te_de_quimper.jpg',
        'Lampe Tempête de Quimper',
        'Photo de Lampe Tempête de Quimper'
    ),
    (
        '/img/photo/sac_voile_de_pont_aven.jpg',
        'Sac Voile de Pont-Aven',
        'Photo de Sac Voile de Pont-Aven'
    ),
    (
        '/img/photo/caramels_de_roscoff.jpg',
        'Caramels de Roscoff',
        'Photo de Caramels de Roscoff'
    ),
    (
        '/img/photo/pendentif_hermine_de_saint_malo.jpg',
        'Pendentif Hermine de Saint-Malo',
        'Photo de Pendentif Hermine de Saint-Malo'
    ),
    (
        '/img/photo/cir__navy_artisanal.jpg',
        'Ciré Navy Artisanal',
        'Photo de Ciré Navy Artisanal'
    ),
    (
        '/img/photo/vareuse_de_pont_aven.jpg',
        'Vareuse de Pont-Aven',
        'Photo de Vareuse de Pont-Aven'
    ),
    (
        '/img/photo/pendentif_hermine_bio.jpg',
        'Pendentif Hermine Bio',
        'Photo de Pendentif Hermine Bio'
    ),
    (
        '/img/photo/galettes_de_quimper.jpg',
        'Galettes de Quimper',
        'Photo de Galettes de Quimper'
    ),
    (
        '/img/photo/sac_voile_durable.jpg',
        'Sac Voile Durable',
        'Photo de Sac Voile Durable'
    ),
    (
        '/img/photo/marini_re_de_pont_aven.jpg',
        'Marinière de Pont-Aven',
        'Photo de Marinière de Pont-Aven'
    ),
    (
        '/img/photo/sac_voile_bio.jpg',
        'Sac Voile Bio',
        'Photo de Sac Voile Bio'
    ),
    (
        '/img/photo/sac_voile_premium.jpg',
        'Sac Voile Premium',
        'Photo de Sac Voile Premium'
    ),
    (
        '/img/photo/pendentif_hermine_local.jpg',
        'Pendentif Hermine Local',
        'Photo de Pendentif Hermine Local'
    ),
    (
        '/img/photo/vareuse_durable.jpg',
        'Vareuse Durable',
        'Photo de Vareuse Durable'
    ),
    (
        '/img/photo/pendentif_hermine_traditionnel.jpg',
        'Pendentif Hermine Traditionnel',
        'Photo de Pendentif Hermine Traditionnel'
    ),
    (
        '/img/photo/pendentif_hermine_de_roscoff.jpg',
        'Pendentif Hermine de Roscoff',
        'Photo de Pendentif Hermine de Roscoff'
    ),
    (
        '/img/photo/cir__navy_de_brest.jpg',
        'Ciré Navy de Brest',
        'Photo de Ciré Navy de Brest'
    ),
    (
        '/img/photo/pull_marin_authentique.jpg',
        'Pull Marin Authentique',
        'Photo de Pull Marin Authentique'
    ),
    (
        '/img/photo/bol_e___cidre_local.jpg',
        'Bolée à Cidre Local',
        'Photo de Bolée à Cidre Local'
    ),
    (
        '/img/photo/bol_breton_de_saint_malo.jpg',
        'Bol Breton de Saint-Malo',
        'Photo de Bol Breton de Saint-Malo'
    ),
    (
        '/img/photo/phare_miniature_de_quimper.jpg',
        'Phare Miniature de Quimper',
        'Photo de Phare Miniature de Quimper'
    ),
    (
        '/img/photo/caramels_artisanal.jpg',
        'Caramels Artisanal',
        'Photo de Caramels Artisanal'
    ),
    (
        '/img/photo/vareuse_de_dinard.jpg',
        'Vareuse de Dinard',
        'Photo de Vareuse de Dinard'
    ),
    (
        '/img/photo/lampe_temp_te_traditionnel.jpg',
        'Lampe Tempête Traditionnel',
        'Photo de Lampe Tempête Traditionnel'
    ),
    (
        '/img/photo/bracelet_ancre_de_brest.jpg',
        'Bracelet Ancre de Brest',
        'Photo de Bracelet Ancre de Brest'
    ),
    (
        '/img/photo/coussin_triskell_premium.jpg',
        'Coussin Triskell Premium',
        'Photo de Coussin Triskell Premium'
    ),
    (
        '/img/photo/coussin_triskell_bio.jpg',
        'Coussin Triskell Bio',
        'Photo de Coussin Triskell Bio'
    ),
    (
        '/img/photo/lampe_temp_te_de_saint_malo.jpg',
        'Lampe Tempête de Saint-Malo',
        'Photo de Lampe Tempête de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_artisanal.jpg',
        'Coussin Triskell Artisanal',
        'Photo de Coussin Triskell Artisanal'
    ),
    (
        '/img/photo/bol_e___cidre_de_saint_malo.jpg',
        'Bolée à Cidre de Saint-Malo',
        'Photo de Bolée à Cidre de Saint-Malo'
    ),
    (
        '/img/photo/caramels_durable.jpg',
        'Caramels Durable',
        'Photo de Caramels Durable'
    ),
    (
        '/img/photo/lampe_temp_te_local.jpg',
        'Lampe Tempête Local',
        'Photo de Lampe Tempête Local'
    ),
    (
        '/img/photo/bol_e___cidre_artisanal.jpg',
        'Bolée à Cidre Artisanal',
        'Photo de Bolée à Cidre Artisanal'
    ),
    (
        '/img/photo/bonnet_miki_traditionnel.jpg',
        'Bonnet Miki Traditionnel',
        'Photo de Bonnet Miki Traditionnel'
    ),
    (
        '/img/photo/bonnet_miki_premium.jpg',
        'Bonnet Miki Premium',
        'Photo de Bonnet Miki Premium'
    ),
    (
        '/img/photo/caramels_de_carnac.jpg',
        'Caramels de Carnac',
        'Photo de Caramels de Carnac'
    ),
    (
        '/img/photo/marini_re_premium.jpg',
        'Marinière Premium',
        'Photo de Marinière Premium'
    ),
    (
        '/img/photo/pull_marin_de_quimper.jpg',
        'Pull Marin de Quimper',
        'Photo de Pull Marin de Quimper'
    ),
    (
        '/img/photo/cir__jaune_de_vannes.jpg',
        'Ciré Jaune de Vannes',
        'Photo de Ciré Jaune de Vannes'
    ),
    (
        '/img/photo/lampe_temp_te_authentique.jpg',
        'Lampe Tempête Authentique',
        'Photo de Lampe Tempête Authentique'
    ),
    (
        '/img/photo/bonnet_miki_de_concarneau.jpg',
        'Bonnet Miki de Concarneau',
        'Photo de Bonnet Miki de Concarneau'
    ),
    (
        '/img/photo/marini_re_authentique.jpg',
        'Marinière Authentique',
        'Photo de Marinière Authentique'
    ),
    (
        '/img/photo/bracelet_ancre_artisanal.jpg',
        'Bracelet Ancre Artisanal',
        'Photo de Bracelet Ancre Artisanal'
    ),
    (
        '/img/photo/lampe_temp_te_de_vannes.jpg',
        'Lampe Tempête de Vannes',
        'Photo de Lampe Tempête de Vannes'
    ),
    (
        '/img/photo/pull_marin_de_carnac.jpg',
        'Pull Marin de Carnac',
        'Photo de Pull Marin de Carnac'
    ),
    (
        '/img/photo/coussin_triskell_fait_main.jpg',
        'Coussin Triskell Fait main',
        'Photo de Coussin Triskell Fait main'
    ),
    (
        '/img/photo/galettes_artisanal.jpg',
        'Galettes Artisanal',
        'Photo de Galettes Artisanal'
    ),
    (
        '/img/photo/bol_breton_bio.jpg',
        'Bol Breton Bio',
        'Photo de Bol Breton Bio'
    );

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO
    _represente_produit (id_image, id_produit)
VALUES (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 6),
    (10, 8),
    (11, 7),
    (12, 9),
    (13, 10),
    (14, 11),
    (15, 12),
    (16, 13),
    (17, 14),
    (18, 15),
    (19, 16),
    (20, 17),
    (21, 18),
    (22, 19),
    (23, 20),
    (24, 21),
    (25, 22),
    (26, 23),
    (27, 24),
    (28, 25),
    (29, 26),
    (30, 27),
    (31, 28),
    (32, 29),
    (33, 30),
    (34, 31),
    (35, 32),
    (36, 33),
    (37, 34),
    (38, 35),
    (39, 36),
    (40, 37),
    (41, 38),
    (42, 39),
    (43, 40),
    (44, 41),
    (45, 42),
    (46, 43),
    (47, 44),
    (48, 45),
    (49, 46),
    (50, 47),
    (51, 48),
    (52, 49),
    (53, 50),
    (54, 51),
    (55, 52),
    (56, 53),
    (57, 54),
    (58, 55),
    (59, 56),
    (60, 57),
    (61, 58),
    (62, 59),
    (63, 60),
    (64, 61),
    (65, 62),
    (66, 63),
    (67, 64),
    (68, 65),
    (69, 66),
    (70, 67),
    (71, 68),
    (72, 69),
    (73, 70),
    (74, 71),
    (75, 72),
    (76, 73),
    (77, 74),
    (78, 75),
    (79, 76),
    (80, 77),
    (81, 78),
    (82, 79),
    (83, 80),
    (84, 81),
    (85, 82),
    (86, 83),
    (87, 84),
    (88, 85),
    (89, 86),
    (90, 87),
    (91, 88),
    (92, 89),
    (93, 90),
    (94, 91),
    (95, 92),
    (96, 93),
    (97, 94),
    (98, 95),
    (99, 96),
    (100, 97),
    (101, 98),
    (102, 99),
    (103, 100),
    (104, 101),
    (105, 102),
    (106, 103),
    (107, 104),
    (108, 105);

-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO
    _represente_compte (id_image, id_compte)
VALUES (6, 4),
    (7, 5),
    (8, 2),
    (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO
    _fait_partie_de (id_produit, id_categorie)
VALUES (1, 1),
    (1, 7),
    (2, 1),
    (2, 7),
    (3, 2),
    (3, 8),
    (4, 2),
    (4, 8),
    (5, 2),
    (5, 9),
    (6, 1),
    (6, 3),
    (7, 3),
    (8, 1),
    (8, 3),
    (8, 5),
    (9, 5),
    (9, 10),
    (10, 1),
    (10, 7),
    (11, 5),
    (12, 2),
    (12, 8),
    (13, 6),
    (14, 5),
    (15, 1),
    (15, 7),
    (16, 1),
    (16, 7),
    (17, 2),
    (17, 8),
    (18, 5),
    (19, 1),
    (19, 7),
    (20, 10),
    (21, 5),
    (22, 1),
    (22, 3),
    (23, 2),
    (23, 8),
    (24, 4),
    (24, 5),
    (25, 1),
    (25, 3),
    (26, 2),
    (26, 8),
    (27, 2),
    (27, 3),
    (27, 8),
    (28, 4),
    (29, 2),
    (29, 3),
    (30, 2),
    (30, 3),
    (31, 2),
    (31, 8),
    (31, 9),
    (32, 3),
    (33, 2),
    (33, 8),
    (33, 9),
    (34, 3),
    (35, 3),
    (36, 3),
    (37, 2),
    (37, 3),
    (38, 4),
    (39, 2),
    (39, 3),
    (40, 2),
    (40, 3),
    (41, 2),
    (41, 3),
    (41, 8),
    (42, 2),
    (42, 8),
    (42, 9),
    (43, 4),
    (44, 4),
    (45, 2),
    (45, 8),
    (46, 4),
    (47, 2),
    (47, 8),
    (48, 2),
    (48, 8),
    (49, 2),
    (49, 8),
    (49, 9),
    (50, 4),
    (51, 4),
    (52, 3),
    (53, 4),
    (54, 4),
    (55, 2),
    (55, 3),
    (56, 2),
    (56, 8),
    (57, 3),
    (58, 4),
    (59, 3),
    (60, 4),
    (61, 3),
    (62, 2),
    (62, 8),
    (62, 9),
    (63, 2),
    (63, 8),
    (64, 3),
    (65, 4),
    (66, 3),
    (67, 2),
    (67, 8),
    (67, 9),
    (68, 3),
    (69, 3),
    (70, 3),
    (71, 2),
    (71, 8),
    (72, 3),
    (73, 3),
    (74, 2),
    (74, 8),
    (74, 9),
    (75, 2),
    (75, 8),
    (76, 4),
    (77, 4),
    (78, 4),
    (79, 4),
    (80, 2),
    (80, 8),
    (81, 4),
    (82, 3),
    (83, 4),
    (84, 4),
    (85, 4),
    (86, 4),
    (87, 4),
    (88, 4),
    (89, 4),
    (90, 4),
    (91, 2),
    (91, 3),
    (91, 8),
    (92, 2),
    (92, 3),
    (92, 8),
    (93, 4),
    (94, 2),
    (94, 8),
    (94, 9),
    (95, 2),
    (95, 8),
    (96, 2),
    (96, 8),
    (96, 9),
    (97, 4),
    (98, 2),
    (98, 3),
    (98, 8),
    (99, 2),
    (99, 8),
    (99, 9),
    (100, 3),
    (101, 4),
    (102, 2),
    (102, 8),
    (103, 4),
    (104, 4),
    (105, 4);

-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO
    _est_dote_de (id_produit, code_hexa)
VALUES (1, '#000000'),
    (1, '#FFFFFF'),
    (2, '#808080'),
    (3, '#0000FF'),
    (3, '#FF0000'),
    (3, '#00FF00'),
    (4, '#0000FF'),
    (4, '#000000'),
    (5, '#FF0000'),
    (5, '#FFFFFF'),
    (6, '#000000'),
    (7, '#808080'),
    (8, '#000000'),
    (9, '#0000FF'),
    (9, '#FF0000'),
    (10, '#808080'),
    (11, '#FFFFFF'),
    (12, '#000000'),
    (12, '#8B4513'),
    (14, '#EE82EE'),
    (14, '#87CEEB'),
    (15, '#000000'),
    (16, '#000000'),
    (16, '#FFFFFF'),
    (17, '#808080'),
    (17, '#000000'),
    (18, '#FFFFFF'),
    (18, '#000000'),
    (19, '#000000'),
    (20, '#FFFFFF'),
    (20, '#000000'),
    (21, '#0000FF'),
    (21, '#FF0000'),
    (22, '#808080'),
    (23, '#000000'),
    (23, '#8B4513'),
    (24, '#87CEEB'),
    (24, '#32CD32'),
    (25, '#000000'),
    (25, '#FF0000'),
    (26, '#8B4513'),
    (27, '#0000FF'),
    (28, '#FF0000'),
    (29, '#8B4513'),
    (30, '#00FF00'),
    (31, '#000000'),
    (32, '#8B4513'),
    (33, '#87CEEB'),
    (34, '#FFFFFF'),
    (35, '#FFFFFF'),
    (36, '#EE82EE'),
    (37, '#FFFFFF'),
    (38, '#0000FF'),
    (39, '#0000FF'),
    (40, '#000000'),
    (41, '#000000'),
    (42, '#FFFFFF'),
    (43, '#8B4513'),
    (44, '#87CEEB'),
    (45, '#87CEEB'),
    (46, '#32CD32'),
    (47, '#87CEEB'),
    (48, '#00FF00'),
    (49, '#FFA500'),
    (50, '#EE82EE'),
    (51, '#FF0000'),
    (52, '#FFFF00'),
    (53, '#FFFFFF'),
    (54, '#0000FF'),
    (55, '#FFFFFF'),
    (56, '#808080'),
    (57, '#00FF00'),
    (58, '#FFFF00'),
    (59, '#00FF00'),
    (60, '#FFA500'),
    (61, '#00FF00'),
    (62, '#FFFFFF'),
    (63, '#00FF00'),
    (64, '#87CEEB'),
    (65, '#EE82EE'),
    (66, '#FFFF00'),
    (67, '#808080'),
    (68, '#FFA500'),
    (69, '#00FF00'),
    (70, '#32CD32'),
    (71, '#0000FF'),
    (72, '#00FF00'),
    (73, '#8B4513'),
    (74, '#FFA500'),
    (75, '#32CD32'),
    (76, '#87CEEB'),
    (77, '#FFFF00'),
    (78, '#0000FF'),
    (79, '#8B4513'),
    (80, '#0000FF'),
    (81, '#EE82EE'),
    (82, '#8B4513'),
    (83, '#FFFF00'),
    (84, '#8B4513'),
    (85, '#FFFF00'),
    (86, '#32CD32'),
    (87, '#EE82EE'),
    (88, '#0000FF'),
    (89, '#EE82EE'),
    (90, '#FFFFFF'),
    (91, '#000000'),
    (92, '#FFFFFF'),
    (93, '#808080'),
    (94, '#808080'),
    (95, '#00FF00'),
    (96, '#0000FF'),
    (97, '#EE82EE'),
    (98, '#000000'),
    (99, '#808080'),
    (100, '#808080'),
    (101, '#0000FF'),
    (102, '#87CEEB'),
    (103, '#FFA500'),
    (104, '#0000FF'),
    (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO
    _seuil_alerte (nb_seuil, message_seuil)
VALUES (
        10,
        'Stock faible - Envisager un réapprovisionnement'
    ),
    (
        5,
        'Stock critique - Réapprovisionnement urgent'
    ),
    (
        3,
        'Rupture imminente - Commander immédiatement'
    ),
    (
        20,
        'Stock normal - Surveillance recommandée'
    ),
    (
        1,
        'Rupture de stock - Produit indisponible'
    );

INSERT INTO
    _adresse (
        id_compte,
        a_numero,
        a_adresse,
        a_ville,
        a_code_postal,
        a_pays
    )
VALUES (
        4,
        13,
        'rue du Pillard',
        'Rennes',
        35590,
        'France'
    );

-- 18. PANIERS/COMMANDES
INSERT INTO
    _panier_commande (id_client, timestamp_commande)
VALUES (1, '2025-11-01 10:30:00'),
    (2, '2025-11-02 14:45:00'),
    (3, '2025-11-03 09:15:00'),
    (1, NULL),
    (4, '2025-11-04 16:20:00'),
    (6, '2025-11-05 11:00:00'),
    (2, NULL),
    (5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO
    _contient (
        id_panier,
        id_produit,
        quantite,
        prix_unitaire,
        remise_unitaire,
        frais_de_port,
        TVA
    )
VALUES (
        1,
        1,
        1,
        599.99,
        0.0,
        5.99,
        20.0
    ),
    (
        1,
        6,
        1,
        149.99,
        0.0,
        5.99,
        20.0
    ),
    (
        2,
        3,
        2,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        2,
        4,
        1,
        49.99,
        0.0,
        4.99,
        20.0
    ),
    (
        3,
        2,
        1,
        899.99,
        0.0,
        9.99,
        20.0
    ),
    (
        4,
        7,
        1,
        69.99,
        0.0,
        6.99,
        20.0
    ),
    (
        5,
        5,
        1,
        39.99,
        0.0,
        4.99,
        20.0
    ),
    (
        5,
        8,
        1,
        199.99,
        0.0,
        3.99,
        20.0
    ),
    (
        6,
        9,
        2,
        89.99,
        0.0,
        5.99,
        20.0
    ),
    (
        7,
        10,
        1,
        299.99,
        0.0,
        7.99,
        20.0
    ),
    (
        8,
        11,
        1,
        29.99,
        0.0,
        4.99,
        20.0
    ),
    (
        8,
        13,
        1,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        8,
        14,
        1,
        34.99,
        0.0,
        5.99,
        20.0
    );

-- 20. FACTURES
INSERT INTO
    _facture (
        id_panier,
        id_adresse,
        f_total_ht,
        f_total_remise,
        f_total_ttc
    )
VALUES (1, 1, 755.98, 0.0, 907.18),
    (2, 1, 103.96, 0.0, 124.75),
    (3, 1, 909.98, 0.0, 1091.98),
    (5, 1, 248.97, 0.0, 298.76),
    (6, 1, 185.97, 0.0, 223.16),
    (8, 1, 95.96, 0.0, 115.15);

-- 21. PAIEMENTS
INSERT INTO
    _paiement (
        id_facture,
        mode_paiement,
        numero_carte,
        mois_annee_expiration,
        cryptogramme_carte,
        timestamp_paiement
    )
VALUES (
        1,
        'CB',
        '1234567890123456',
        '12/27',
        '123',
        '2025-11-01 10:35:00'
    ),
    (
        2,
        'CB',
        '6543210987654321',
        '06/26',
        '456',
        '2025-11-02 14:50:00'
    ),
    (
        3,
        'CB',
        '1111222233334444',
        '03/28',
        '789',
        '2025-11-03 09:20:00'
    ),
    (
        4,
        'CB',
        '9999888877776666',
        '09/27',
        '321',
        '2025-11-04 16:25:00'
    ),
    (
        5,
        'CB',
        '5555666677778888',
        '11/26',
        '654',
        '2025-11-05 11:05:00'
    ),
    (
        6,
        'CB',
        '4444333322221111',
        '08/27',
        '987',
        '2025-11-06 13:35:00'
    );

-- 22. LIVRAISONS
INSERT INTO
    _livraison (
        id_facture,
        date_livraison,
        etat_livraison
    )
VALUES (1, '2025-11-05', 'Livré'),
    (2, '2025-11-06', 'Livré'),
    (3, '2025-11-08', 'En transit'),
    (4, NULL, 'En préparation'),
    (5, '2025-11-09', 'Livré'),
    (6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO
    _definie_pour (id_seuil, id_compte)
VALUES (1, 2),
    (2, 2),
    (3, 2),
    (4, 2),
    (5, 2),
    (1, 3),
    (2, 3),
    (3, 3),
    (5, 3),
    (1, 10),
    (2, 10),
    (3, 10),
    (4, 10),
    (5, 10),
    (5, 1);

-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;

UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;

UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;

UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;

UPDATE cobrec1._commentaire SET a_note = 0.0;
----------- WbStatement -----------
##sqlwb.pos=98597
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;

CREATE SCHEMA cobrec1;

SET SCHEMA 'cobrec1';

-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (
        civilite IN (
            'M.',
            'Mme',
            'Inconnu',
            'Ne souhaite pas s''exprimer',
            'Autre'
        )
    ),
    CONSTRAINT verif_compte_email CHECK (
        email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'
    ),
    CONSTRAINT verif_compte_num_telephone CHECK (
        num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$'
    )
);

ALTER TABLE ONLY cobrec1._compte
ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11, 2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (
        type_couleur IN (
            'Vert',
            'Jaune',
            'Rouge',
            'Noir',
            'Blanc',
            'Bleu',
            'Violet',
            'Orange',
            'Gris',
            'Marron'
        )
    )
);

ALTER TABLE ONLY cobrec1._couleur
ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4, 1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (
        montant_TVA >= 0.00
        AND montant_TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11, 2) DEFAULT 0.0,
    p_volume numeric(11, 2) DEFAULT 0.0,
    p_frais_de_port numeric(11, 2) DEFAULT 0.0,
    p_prix numeric(11, 2) NOT NULL,
    p_note numeric(2, 1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (
        p_note >= 0
        AND p_note <= 5
    ),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (
        p_statut IN (
            'Ébauche',
            'En ligne',
            'Hors ligne',
            'Supprimé'
        )
    ),
    CONSTRAINT verif_produit_origine CHECK (
        p_origine IN (
            'Inconnu',
            'Bretagne',
            'France',
            'UE',
            'Hors UE'
        )
    )
);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) REFERENCES cobrec1._vendeur (id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) REFERENCES cobrec1._TVA (id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5, 2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (
        reduction_pourcentage >= 0.00
        AND reduction_pourcentage <= 100.00
    ),
    /*CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_reduction_fin CHECK (
        reduction_fin > reduction_debut
    )
);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    /*CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_promotion_fin CHECK (
        promotion_fin > promotion_debut
    )
);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11, 2) DEFAULT 0.0,
    f_total_remise numeric(11, 2) DEFAULT 0.0,
    f_total_ttc numeric(11, 2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) REFERENCES cobrec1._adresse (id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2, 1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (
        vote_type IN ('like', 'dislike')
    )
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2, 1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (
        a_note IN (
            NULL,
            0.0,
            0.5,
            1.0,
            1.5,
            2.0,
            2.5,
            3.0,
            3.5,
            4.0,
            4.5,
            5.0
        )
    )
);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) REFERENCES cobrec1._livraison (id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison, id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (
        type_signalement IN (
            'signale_avis',
            'signale_compte',
            'signale_produit'
        )
    )
);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11, 2) NOT NULL,
    remise_unitaire numeric(11, 2) DEFAULT 0.0,
    frais_de_port numeric(11, 2) DEFAULT 0.0,
    TVA numeric(4, 1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (
        TVA >= 0.00
        AND TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
-- CREATE TABLE cobrec1._represente_promotion (
--     id_image integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image)
--             REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) REFERENCES cobrec1._categorie_produit (id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) REFERENCES cobrec1._couleur (code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction)
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) REFERENCES cobrec1._seuil_alerte (id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();

CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

CREATE FUNCTION mise_sur_marche_produit_insert()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche_insert
AFTER INSERT on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit_insert();

CREATE FUNCTION update_p_modif_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_modif = OLD.p_modif) THEN
        NEW.p_modif = CURRENT_TIMESTAMP;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_update_p_modif_produit
BEFORE UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE update_p_modif_produit();

CREATE FUNCTION produit_deja_en_reduction_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_insert
BEFORE INSERT on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_insert();

CREATE FUNCTION produit_deja_en_reduction_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_update
BEFORE UPDATE on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_update();




CREATE FUNCTION produit_deja_en_promotion_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._promotion WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._promotion WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_promotion_insert
BEFORE INSERT on _promotion
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_promotion_insert();

CREATE FUNCTION produit_deja_en_promotion_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._promotion WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._promotion WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_promotion_update
BEFORE UPDATE on _promotion
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_promotion_update();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO
    _compte (
        nom,
        prenom,
        email,
        num_telephone,
        mdp,
        etat_A2F,
        nb_fois_signale,
        nb_signalements_avis,
        nb_cpts_signales,
        nb_avis_signales
    )
VALUES (
        'Maeleau',
        'Le Hyver',
        'admin@cobrec.fr',
        '0601020304',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Lopicier',
        'Mallo',
        'vendeur1@example.com',
        '0612345678',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Elouard',
        'Jean-Jacques',
        'vendeur2@shop.fr',
        '0623456789',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        1,
        0,
        0,
        0
    ),
    (
        'Jean',
        'Dupont',
        'client1@gmail.com',
        '0634567890',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        1,
        0,
        0
    ),
    (
        'Marie',
        'Martin',
        'client2@yahoo.fr',
        '0645678901',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        1,
        0
    ),
    (
        'Pierre',
        'Durand',
        'client3@outlook.com',
        '0656789012',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Sophie',
        'Bernard',
        'client4@free.fr',
        '0667890123',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Lucas',
        'Petit',
        'client5@orange.fr',
        '0678901234',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Emma',
        'Lefebvre',
        'client6@wanadoo.fr',
        '0689012345',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Martinière',
        'Yvili',
        'vendeur3@boutique.fr',
        '0690123456',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    );

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO
    _vendeur (
        id_compte,
        SIREN,
        raison_sociale,
        denomination,
        nb_produits_crees
    )
VALUES (
        2,
        '123456789',
        'TechStore SARL',
        'TechStore',
        5
    ),
    (
        3,
        '987654321',
        'FashionHub SAS',
        'FashionHub',
        3
    ),
    (
        10,
        '456789123',
        'SportPro EURL',
        'SportPro',
        2
    );

-- 4. CLIENTS
INSERT INTO
    _client (
        id_compte,
        c_pseudo,
        c_nb_produits_achetes,
        c_depense_totale,
        c_cloture,
        c_datenaissance
    )
VALUES (
        4,
        'jdupont',
        2,
        907.18,
        FALSE,
        '1985-03-15'
    ),
    (
        5,
        'mmartin',
        3,
        124.75,
        FALSE,
        '1990-07-22'
    ),
    (
        6,
        'pdurand',
        1,
        1091.98,
        FALSE,
        '1988-11-10'
    ),
    (
        7,
        'sbernard',
        2,
        298.76,
        FALSE,
        '1995-05-30'
    ),
    (
        8,
        'lpetit',
        0,
        0.0,
        FALSE,
        '2000-01-18'
    ),
    (
        9,
        'elefebvre',
        1,
        179.98,
        FALSE,
        '1992-09-25'
    );

-- 5. ADRESSES
INSERT INTO
    _adresse (
        id_compte,
        a_adresse,
        a_ville,
        a_code_postal,
        a_complement
    )
VALUES (
        4,
        '15 rue de la Paix',
        'Paris',
        '75001',
        'Apt 5'
    ),
    (
        5,
        '23 avenue des Champs',
        'Lyon',
        '69001',
        NULL
    ),
    (
        6,
        '8 boulevard Victor Hugo',
        'Marseille',
        '13001',
        'Bâtiment B'
    ),
    (
        7,
        '42 rue du Commerce',
        'Toulouse',
        '31000',
        NULL
    ),
    (
        8,
        '67 place de la République',
        'Nice',
        '06000',
        '3ème étage'
    ),
    (
        9,
        '91 rue Principale',
        'Bordeaux',
        '33000',
        NULL
    ),
    (
        2,
        '12 avenue du Commerce',
        'Paris',
        '75015',
        'Entrepôt A'
    ),
    (
        3,
        '55 rue de la Mode',
        'Lyon',
        '69002',
        NULL
    ),
    (
        10,
        '78 boulevard du Sport',
        'Marseille',
        '13008',
        'Zone industrielle'
    );

-- 6. COULEURS
INSERT INTO
    _couleur (code_hexa, nom, type_couleur)
VALUES (
        '#FF0000',
        'Rouge vif',
        'Rouge'
    ),
    (
        '#0000FF',
        'Bleu marine',
        'Bleu'
    ),
    ('#000000', 'Noir', 'Noir'),
    (
        '#FFFFFF',
        'Blanc pur',
        'Blanc'
    ),
    (
        '#00FF00',
        'Vert émeraude',
        'Vert'
    ),
    (
        '#FFFF00',
        'Jaune citron',
        'Jaune'
    ),
    ('#FFA500', 'Orange', 'Orange'),
    ('#808080', 'Gris', 'Gris'),
    (
        '#8B4513',
        'Marron chocolat',
        'Marron'
    ),
    ('#EE82EE', 'Violet', 'Violet'),
    (
        '#87CEEB',
        'Bleu ciel',
        'Bleu'
    ),
    (
        '#32CD32',
        'Vert lime',
        'Vert'
    );

-- 7. CATÉGORIES
INSERT INTO
    _categorie_produit (nom_categorie)
VALUES ('Électronique'),
    ('Vêtements'),
    ('Accessoires'),
    ('Maison'),
    ('Sport'),
    ('Livres'),
    ('Informatique'),
    ('Mode homme'),
    ('Mode femme'),
    ('Chaussures');

-- 8. TVA
INSERT INTO
    _TVA (montant_TVA, libelle_TVA)
VALUES (20.0, 'TVA normale'),
    (10.0, 'TVA intermédiaire'),
    (5.5, 'TVA réduite'),
    (2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO
    _produit (
        id_TVA,
        id_vendeur,
        p_nom,
        p_description,
        p_prix,
        p_stock,
        p_statut,
        p_origine,
        p_poids,
        p_volume,
        p_frais_de_port,
        p_note,
        p_nb_ventes
    )
VALUES (
        1,
        1,
        'Smartphone XPro',
        'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G',
        599.99,
        35,
        'En ligne',
        'Bretagne',
        0.180,
        0.01,
        5.99,
        4.3,
        15
    ),
    (
        1,
        1,
        'Ordinateur portable Ultra',
        'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7',
        899.99,
        22,
        'En ligne',
        'Bretagne',
        2.5,
        0.03,
        9.99,
        4.0,
        8
    ),
    (
        1,
        2,
        'T-shirt coton bio',
        'T-shirt 100% coton biologique, coupe regular, diverses couleurs',
        24.99,
        58,
        'En ligne',
        'Bretagne',
        0.15,
        0.5,
        3.99,
        5.0,
        42
    ),
    (
        1,
        2,
        'Jean slim',
        'Jean coupe slim stretch, denim premium',
        49.99,
        62,
        'En ligne',
        'Bretagne',
        1.00,
        0.01,
        4.99,
        NULL,
        18
    ),
    (
        1,
        2,
        'Robe d été',
        'Robe légère et fluide pour l été, motifs floraux',
        39.99,
        48,
        'En ligne',
        'Bretagne',
        0.30,
        0.08,
        4.99,
        NULL,
        12
    ),
    (
        2,
        1,
        'Casque audio Bluetooth',
        'Casque sans fil avec réduction de bruit active, autonomie 30h',
        149.99,
        15,
        'En ligne',
        'Bretagne',
        0.25,
        0.02,
        5.99,
        4.5,
        25
    ),
    (
        1,
        2,
        'Sac à dos urbain',
        'Sac à dos pour ordinateur portable, compartiments multiples, imperméable',
        69.99,
        35,
        'En ligne',
        'Bretagne',
        0.60,
        0.15,
        6.99,
        NULL,
        10
    ),
    (
        1,
        1,
        'Montre connectée',
        'Montre sport avec GPS, cardiofréquencemètre, étanche 50m',
        199.99,
        15,
        'En ligne',
        'Bretagne',
        0.05,
        0.01,
        3.99,
        4.7,
        20
    ),
    (
        1,
        3,
        'Chaussures running',
        'Chaussures de course avec amorti premium, semelle respirante',
        89.99,
        54,
        'En ligne',
        'Bretagne',
        0.40,
        0.08,
        5.99,
        4.2,
        16
    ),
    (
        1,
        1,
        'Tablette 10 pouces',
        'Tablette Android, écran Full HD, 64Go, stylet inclus',
        299.99,
        16,
        'En ligne',
        'Bretagne',
        0.50,
        0.02,
        7.99,
        3.8,
        9
    ),
    (
        1,
        3,
        'Ballon de football',
        'Ballon officiel en cuir synthétique, taille 5',
        29.99,
        85,
        'En ligne',
        'Bretagne',
        0.45,
        0.06,
        4.99,
        4.6,
        35
    ),
    (
        1,
        2,
        'Veste en cuir',
        'Veste en cuir véritable, coupe motard, doublure intérieure',
        189.99,
        15,
        'En ligne',
        'Bretagne',
        1.20,
        0.01,
        8.99,
        NULL,
        5
    ),
    (
        3,
        1,
        'Livre cuisine française',
        'Recettes traditionnelles de cuisine française, 300 pages',
        24.99,
        28,
        'En ligne',
        'Bretagne',
        0.80,
        0.03,
        3.99,
        4.8,
        22
    ),
    (
        1,
        3,
        'Tapis de yoga',
        'Tapis antidérapant, épaisseur 6mm, avec sac de transport',
        34.99,
        52,
        'En ligne',
        'Bretagne',
        1.10,
        0.02,
        5.99,
        4.4,
        28
    ),
    (
        1,
        1,
        'Clavier mécanique RGB',
        'Clavier gamer avec rétroéclairage RGB, switches mécaniques',
        79.99,
        29,
        'En ligne',
        'Bretagne',
        0.90,
        0.04,
        5.99,
        4.1,
        11
    ),
    (
        1,
        1,
        'Console NextGen',
        'Console de jeu dernière génération, 1To SSD, 4K HDR',
        499.99,
        0,
        'Hors ligne',
        'France',
        3.5,
        0.02,
        14.99,
        4.8,
        25
    ),
    (
        1,
        2,
        'Sweat à capuche premium',
        'Sweat-shirt en coton bio, coupe oversize, poche kangourou',
        59.99,
        0,
        'Hors ligne',
        'France',
        0.70,
        0.03,
        5.99,
        4.4,
        18
    ),
    (
        1,
        3,
        'Raquette de tennis pro',
        'Raquette carbone, tension 25kg, grip confort',
        129.99,
        0,
        'Hors ligne',
        'France',
        0.35,
        0.02,
        6.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Écran gaming 4K 27"',
        'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms',
        349.99,
        0,
        'Hors ligne',
        'France',
        5.2,
        0.35,
        19.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Baskets limited edition',
        'Baskets cuir véritable, édition limitée, semelle comfort',
        179.99,
        0,
        'Hors ligne',
        'France',
        0.80,
        0.06,
        7.99,
        4.9,
        65
    ),
    (
        1,
        3,
        'Vélo de route carbone',
        'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses',
        1299.99,
        0,
        'Hors ligne',
        'UE',
        8.5,
        0.15,
        29.99,
        4.8,
        25
    ),
    (
        1,
        1,
        'Drone professionnel 4K',
        'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min',
        899.99,
        0,
        'Hors ligne',
        'UE',
        1.2,
        0.02,
        12.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Manteau d hiver imperméable',
        'Manteau longueur genoux, doublure polaire, coupe-vent',
        179.99,
        0,
        'Hors ligne',
        'UE',
        1.5,
        0.01,
        8.99,
        4.4,
        65
    ),
    (
        1,
        3,
        'Tente 4 places',
        'Tente familiale, double toit, arceaux aluminium, imperméable',
        249.99,
        0,
        'Hors ligne',
        'Hors UE',
        4.8,
        0.08,
        19.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Enceinte Bluetooth waterproof',
        'Enceinte portable, autonomie 24h, résistance IP67',
        129.99,
        0,
        'Hors ligne',
        'Hors UE',
        0.9,
        0.05,
        6.99,
        4.9,
        95
    ),
    (
        2,
        1,
        'Pull Marin de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.',
        36.37,
        31,
        'En ligne',
        'Bretagne',
        2.06,
        0.45,
        5.78,
        4.4,
        12
    ),
    (
        1,
        1,
        'Bonnet Miki de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.',
        121.37,
        6,
        'Hors ligne',
        'Bretagne',
        2.3,
        0.09,
        8.8,
        4.3,
        60
    ),
    (
        2,
        3,
        'Galettes Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        147.92,
        142,
        'En ligne',
        'Bretagne',
        0.46,
        0.46,
        5.71,
        4.3,
        97
    ),
    (
        1,
        3,
        'Écharpe Rayée Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        173.77,
        102,
        'En ligne',
        'Bretagne',
        0.91,
        0.32,
        8.28,
        4.4,
        58
    ),
    (
        1,
        2,
        'Écharpe Rayée de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.',
        197.02,
        168,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.12,
        7.92,
        4.8,
        19
    ),
    (
        4,
        2,
        'Ciré Navy de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        104.35,
        169,
        'En ligne',
        'Bretagne',
        1.43,
        0.14,
        7.22,
        4.6,
        72
    ),
    (
        4,
        3,
        'Bracelet Ancre Fait main',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        172.75,
        44,
        'Hors ligne',
        'Bretagne',
        1.92,
        0.4,
        8.8,
        4.1,
        102
    ),
    (
        1,
        3,
        'Marinière Local',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        74.29,
        80,
        'Hors ligne',
        'Bretagne',
        1.36,
        0.23,
        13.58,
        4.9,
        72
    ),
    (
        3,
        1,
        'Bracelet Ancre de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.',
        40.53,
        140,
        'En ligne',
        'Bretagne',
        2.76,
        0.3,
        9.4,
        4.1,
        97
    ),
    (
        3,
        3,
        'Pendentif Hermine Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        164.23,
        199,
        'Hors ligne',
        'Bretagne',
        1.64,
        0.07,
        10.94,
        4.9,
        47
    ),
    (
        1,
        3,
        'Sac Voile de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.',
        136.95,
        100,
        'En ligne',
        'Bretagne',
        1.37,
        0.26,
        6.09,
        4.2,
        91
    ),
    (
        2,
        3,
        'Écharpe Rayée de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        21.13,
        22,
        'Hors ligne',
        'Bretagne',
        2.73,
        0.43,
        5.64,
        4.2,
        129
    ),
    (
        1,
        2,
        'Coussin Triskell de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        134.55,
        95,
        'Hors ligne',
        'Bretagne',
        1.33,
        0.24,
        11.56,
        4.7,
        30
    ),
    (
        1,
        3,
        'Écharpe Rayée Authentique',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.',
        36.49,
        51,
        'En ligne',
        'Bretagne',
        0.91,
        0.13,
        13.31,
        4.4,
        145
    ),
    (
        4,
        3,
        'Écharpe Rayée Bio',
        'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.',
        50.4,
        107,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.09,
        5.02,
        4.4,
        121
    ),
    (
        1,
        3,
        'Bonnet Miki Authentique',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        119.47,
        143,
        'En ligne',
        'Bretagne',
        0.28,
        0.16,
        5.45,
        4.5,
        140
    ),
    (
        3,
        1,
        'Ciré Navy de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        187.96,
        150,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.3,
        10.57,
        4.4,
        149
    ),
    (
        1,
        1,
        'Bol Breton Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.',
        66.7,
        85,
        'En ligne',
        'Bretagne',
        2.79,
        0.47,
        5.08,
        4.6,
        149
    ),
    (
        1,
        3,
        'Bol Breton Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        176.18,
        99,
        'Hors ligne',
        'Bretagne',
        0.93,
        0.22,
        9.89,
        4.3,
        140
    ),
    (
        3,
        1,
        'Pull Marin de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.',
        30.23,
        146,
        'En ligne',
        'Bretagne',
        0.55,
        0.15,
        6.9,
        4.3,
        72
    ),
    (
        1,
        1,
        'Affiche Vintage de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        155.74,
        168,
        'En ligne',
        'Bretagne',
        2.94,
        0.09,
        8.98,
        4.7,
        148
    ),
    (
        2,
        3,
        'Vareuse Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        120.09,
        42,
        'En ligne',
        'Bretagne',
        1.35,
        0.03,
        8.28,
        4.9,
        15
    ),
    (
        3,
        2,
        'Pull Marin Bio',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.',
        151.65,
        65,
        'En ligne',
        'Bretagne',
        2.61,
        0.49,
        12.3,
        4.9,
        11
    ),
    (
        1,
        3,
        'Kabig Bio',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.',
        172.27,
        61,
        'En ligne',
        'Bretagne',
        0.68,
        0.46,
        8.15,
        4.8,
        63
    ),
    (
        1,
        2,
        'Phare Miniature Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        62.75,
        169,
        'En ligne',
        'Bretagne',
        1.58,
        0.34,
        12.59,
        4.3,
        12
    ),
    (
        3,
        1,
        'Bol Breton Fait main',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        75.33,
        85,
        'Hors ligne',
        'Bretagne',
        1.37,
        0.49,
        6.04,
        4.9,
        53
    ),
    (
        3,
        3,
        'Bracelet Ancre de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        23.23,
        175,
        'Hors ligne',
        'Bretagne',
        2.77,
        0.32,
        10.97,
        4.1,
        81
    ),
    (
        1,
        2,
        'Caramels de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        135.67,
        102,
        'Hors ligne',
        'Bretagne',
        2.06,
        0.45,
        10.54,
        4.3,
        145
    ),
    (
        3,
        3,
        'Affiche Vintage de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.',
        137.69,
        135,
        'Hors ligne',
        'Bretagne',
        1.47,
        0.45,
        12.16,
        4.2,
        26
    ),
    (
        4,
        2,
        'Écharpe Rayée de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        37.85,
        16,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.24,
        12.65,
        4.1,
        111
    ),
    (
        4,
        3,
        'Vareuse de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        51.36,
        183,
        'Hors ligne',
        'Bretagne',
        1.6,
        0.03,
        7.24,
        4.8,
        121
    ),
    (
        4,
        3,
        'Bracelet Ancre Durable',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.',
        150.55,
        126,
        'En ligne',
        'Bretagne',
        1.41,
        0.38,
        12.56,
        4.3,
        138
    ),
    (
        1,
        2,
        'Lampe Tempête de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        73.48,
        143,
        'Hors ligne',
        'Bretagne',
        0.33,
        0.08,
        8.45,
        4.2,
        59
    ),
    (
        4,
        1,
        'Sac Voile de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.',
        167.42,
        104,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.3,
        11.26,
        4.9,
        102
    ),
    (
        4,
        1,
        'Caramels de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        61.58,
        129,
        'En ligne',
        'Bretagne',
        0.18,
        0.17,
        11.11,
        4.4,
        47
    ),
    (
        4,
        2,
        'Pendentif Hermine de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        35.65,
        123,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.14,
        7.95,
        4.5,
        91
    ),
    (
        2,
        1,
        'Ciré Navy Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.',
        19.84,
        94,
        'En ligne',
        'Bretagne',
        0.75,
        0.04,
        13.62,
        4.0,
        12
    ),
    (
        3,
        1,
        'Vareuse de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        51.2,
        184,
        'En ligne',
        'Bretagne',
        0.84,
        0.19,
        10.45,
        5.0,
        34
    ),
    (
        1,
        2,
        'Pendentif Hermine Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        47.48,
        156,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.32,
        5.92,
        4.8,
        35
    ),
    (
        4,
        1,
        'Galettes de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.',
        89.39,
        130,
        'Hors ligne',
        'Bretagne',
        0.41,
        0.48,
        10.72,
        4.8,
        44
    ),
    (
        2,
        2,
        'Sac Voile Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.',
        148.16,
        73,
        'Hors ligne',
        'Bretagne',
        1.03,
        0.13,
        13.41,
        4.3,
        120
    ),
    (
        1,
        1,
        'Marinière de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.',
        50.09,
        71,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.44,
        11.31,
        4.3,
        7
    ),
    (
        4,
        3,
        'Sac Voile Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        102.77,
        9,
        'Hors ligne',
        'Bretagne',
        0.37,
        0.12,
        11.23,
        4.3,
        99
    ),
    (
        2,
        1,
        'Sac Voile Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        61.2,
        69,
        'Hors ligne',
        'Bretagne',
        0.77,
        0.36,
        7.84,
        4.7,
        52
    ),
    (
        1,
        1,
        'Pendentif Hermine Local',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.',
        167.37,
        80,
        'Hors ligne',
        'Bretagne',
        0.76,
        0.1,
        5.13,
        4.5,
        75
    ),
    (
        1,
        2,
        'Vareuse Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        118.5,
        125,
        'Hors ligne',
        'Bretagne',
        1.49,
        0.18,
        13.69,
        4.3,
        127
    ),
    (
        4,
        2,
        'Pendentif Hermine Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        116.38,
        82,
        'Hors ligne',
        'Bretagne',
        0.35,
        0.13,
        10.02,
        4.4,
        62
    ),
    (
        2,
        1,
        'Pendentif Hermine de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        21.38,
        194,
        'En ligne',
        'Bretagne',
        0.39,
        0.38,
        10.63,
        4.3,
        25
    ),
    (
        2,
        2,
        'Ciré Navy de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.',
        140.29,
        125,
        'En ligne',
        'Bretagne',
        0.94,
        0.12,
        11.36,
        4.7,
        121
    ),
    (
        4,
        1,
        'Pull Marin Authentique',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        181.69,
        41,
        'Hors ligne',
        'Bretagne',
        0.31,
        0.09,
        7.77,
        4.7,
        150
    ),
    (
        1,
        1,
        'Bolée à Cidre Local',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        103.33,
        25,
        'En ligne',
        'Bretagne',
        1.83,
        0.45,
        11.61,
        4.6,
        11
    ),
    (
        4,
        2,
        'Bol Breton de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.14,
        76,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.3,
        10.71,
        4.5,
        28
    ),
    (
        3,
        2,
        'Phare Miniature de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        141.1,
        78,
        'Hors ligne',
        'Bretagne',
        2.02,
        0.21,
        11.84,
        4.0,
        27
    ),
    (
        1,
        1,
        'Caramels Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        112.55,
        110,
        'Hors ligne',
        'Bretagne',
        0.26,
        0.26,
        10.6,
        4.5,
        118
    ),
    (
        4,
        1,
        'Vareuse de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.',
        101.61,
        12,
        'En ligne',
        'Bretagne',
        2.92,
        0.31,
        7.15,
        4.2,
        146
    ),
    (
        2,
        2,
        'Lampe Tempête Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        145.44,
        135,
        'En ligne',
        'Bretagne',
        2.15,
        0.21,
        9.34,
        4.5,
        121
    ),
    (
        4,
        1,
        'Bracelet Ancre de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.',
        159.31,
        111,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.4,
        7.4,
        4.0,
        81
    ),
    (
        2,
        2,
        'Coussin Triskell Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        112.71,
        121,
        'En ligne',
        'Bretagne',
        2.81,
        0.44,
        13.83,
        4.2,
        103
    ),
    (
        1,
        2,
        'Coussin Triskell Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        159.76,
        171,
        'En ligne',
        'Bretagne',
        2.94,
        0.25,
        5.33,
        4.5,
        89
    ),
    (
        1,
        2,
        'Lampe Tempête de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.75,
        44,
        'Hors ligne',
        'Bretagne',
        0.32,
        0.39,
        7.39,
        4.6,
        106
    ),
    (
        1,
        2,
        'Coussin Triskell Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        54.37,
        180,
        'En ligne',
        'Bretagne',
        2.77,
        0.5,
        11.72,
        4.4,
        30
    ),
    (
        2,
        1,
        'Bolée à Cidre de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.',
        20.61,
        96,
        'En ligne',
        'Bretagne',
        1.19,
        0.08,
        9.78,
        4.6,
        51
    ),
    (
        3,
        3,
        'Caramels Durable',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        37.05,
        123,
        'En ligne',
        'Bretagne',
        1.95,
        0.24,
        11.0,
        4.9,
        124
    ),
    (
        2,
        2,
        'Lampe Tempête Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        90.19,
        69,
        'Hors ligne',
        'Bretagne',
        1.42,
        0.16,
        13.99,
        4.9,
        32
    ),
    (
        3,
        1,
        'Bolée à Cidre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        134.41,
        75,
        'Hors ligne',
        'Bretagne',
        0.12,
        0.43,
        12.0,
        5.0,
        132
    ),
    (
        3,
        2,
        'Bonnet Miki Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        180.74,
        170,
        'Hors ligne',
        'Bretagne',
        0.21,
        0.4,
        5.3,
        4.4,
        38
    ),
    (
        4,
        1,
        'Bonnet Miki Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        182.65,
        47,
        'En ligne',
        'Bretagne',
        0.85,
        0.41,
        9.34,
        4.8,
        91
    ),
    (
        3,
        1,
        'Caramels de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        84.57,
        72,
        'En ligne',
        'Bretagne',
        1.66,
        0.23,
        11.06,
        4.7,
        102
    ),
    (
        1,
        1,
        'Marinière Premium',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        51.84,
        21,
        'Hors ligne',
        'Bretagne',
        1.94,
        0.24,
        11.31,
        4.6,
        34
    ),
    (
        1,
        2,
        'Pull Marin de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        35.64,
        121,
        'Hors ligne',
        'Bretagne',
        1.18,
        0.48,
        11.27,
        4.5,
        44
    ),
    (
        4,
        2,
        'Ciré Jaune de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        189.65,
        97,
        'En ligne',
        'Bretagne',
        0.39,
        0.35,
        9.9,
        5.0,
        96
    ),
    (
        1,
        3,
        'Lampe Tempête Authentique',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        122.86,
        10,
        'En ligne',
        'Bretagne',
        0.25,
        0.17,
        13.9,
        4.8,
        57
    ),
    (
        1,
        3,
        'Bonnet Miki de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        159.05,
        157,
        'En ligne',
        'Bretagne',
        0.11,
        0.43,
        6.3,
        4.1,
        69
    ),
    (
        3,
        3,
        'Marinière Authentique',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        12.98,
        72,
        'En ligne',
        'Bretagne',
        0.25,
        0.37,
        9.73,
        4.7,
        126
    ),
    (
        4,
        2,
        'Bracelet Ancre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.',
        181.75,
        173,
        'En ligne',
        'Bretagne',
        1.61,
        0.23,
        13.68,
        4.1,
        127
    ),
    (
        3,
        2,
        'Lampe Tempête de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        38.04,
        37,
        'Hors ligne',
        'Bretagne',
        0.9,
        0.32,
        9.94,
        4.3,
        140
    ),
    (
        3,
        2,
        'Pull Marin de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        177.85,
        110,
        'En ligne',
        'Bretagne',
        1.08,
        0.23,
        8.74,
        4.1,
        114
    ),
    (
        3,
        3,
        'Coussin Triskell Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        27.62,
        29,
        'En ligne',
        'Bretagne',
        2.26,
        0.19,
        6.17,
        4.1,
        148
    ),
    (
        3,
        3,
        'Galettes Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.',
        123.48,
        95,
        'Hors ligne',
        'Bretagne',
        0.4,
        0.26,
        6.39,
        4.5,
        32
    ),
    (
        1,
        1,
        'Bol Breton Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.',
        194.19,
        164,
        'Hors ligne',
        'Bretagne',
        1.88,
        0.32,
        5.24,
        4.9,
        73
    );

-- 10. PROMOTIONS (futures)
INSERT INTO
    _promotion (
        id_produit,
        promotion_debut,
        promotion_fin
    )
VALUES (
        1,
        '2025-12-20 00:00:00',
        '2027-12-25 23:59:00'
    ),
    (
        2,
        '2026-01-01 00:00:00',
        '2026-02-07 23:59:00'
    ),
    (
        3,
        '2026-02-16 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        4,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        5,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        6,
        '2026-06-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        7,
        '2026-01-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 9. RÉDUCTIONS (futures)
INSERT INTO
    _reduction (
        id_produit,
        reduction_pourcentage,
        reduction_debut,
        reduction_fin
    )
VALUES (
        1,
        10.00,
        '2026-01-05 00:00:00',
        '2026-09-19 23:59:00'
    ),
    (
        2,
        15.00,
        '2026-02-15 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        3,
        20.00,
        '2026-01-01 00:00:00',
        '2026-05-15 23:59:00'
    ),
    (
        4,
        25.00,
        '2026-01-20 00:00:00',
        '2026-02-26 23:59:00'
    ),
    (
        5,
        30.00,
        '2026-06-01 00:00:00',
        '2026-06-30 23:59:00'
    ),
    (
        6,
        60.00,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        7,
        55.00,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        8,
        70.00,
        '2026-01-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        9,
        65.00,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 12. IMAGES
INSERT INTO
    _image (i_lien, i_title, i_alt)
VALUES (
        '/img/photo/enceinte_bluetooth_waterproof.jpg',
        'Enceinte Bluetooth.jpg',
        'Image de l enceinte'
    ),
    (
        '/img/photo/ordinateur_portable_ultra.jpg',
        'Ordinateur portable.jpeg',
        'Image de l ordinateur'
    ),
    (
        '/img/photo/_cran_gaming_4k_27_.jpg',
        'Écran 4K.jpeg',
        'Image de l écran'
    ),
    (
        '/img/photo/console_nextgen.jpg',
        'Console NextGen.jpg',
        'Image de la console'
    ),
    (
        '/img/photo/montre_connect_e.jpg',
        'Montre connectée.jpg',
        'Image de la montre'
    ),
    (
        '/img/photo/raquette_de_tennis_pro.jpg',
        'Raquette tennis.jpg',
        'Image de la raquette'
    ),
    (
        '/img/photo/tablette_10_pouces.jpg',
        'Tablette.jpg',
        'Image de la tablette'
    ),
    (
        '/img/photo/tente_4_places.jpg',
        'Tente 4 places.jpg',
        'Image de la tente'
    ),
    (
        '/img/photo/veste_en_cuir.jpg',
        'Veste cuir.jpg',
        'Image de la veste'
    ),
    (
        '/img/photo/baskets_limited_edition.jpg',
        'Baskets limited.jpeg',
        'Image des baskets'
    ),
    (
        '/img/photo/chaussures_running.jpg',
        'Chaussures running.jpeg',
        'Image des chaussures'
    ),
    (
        '/img/photo/ballon_de_football.jpg',
        'Ballon football.jpg',
        'Image du ballon'
    ),
    (
        '/img/photo/casque_audio_bluetooth.jpg',
        'Casque audio.jpg',
        'Image du casque'
    ),
    (
        '/img/photo/clavier_m_canique_rgb.jpg',
        'Clavier.jpg',
        'Image du clavier'
    ),
    (
        '/img/photo/drone_professionnel_4k.jpg',
        'Drone 4K.jpg',
        'Image du drone'
    ),
    (
        '/img/photo/jean_slim.jpg',
        'Jean.jpg',
        'Image du jean'
    ),
    (
        '/img/photo/livre_cuisine_fran_aise.jpg',
        'Livre cuisine.jpeg',
        'Image du livre'
    ),
    (
        '/img/photo/manteau_d_hiver_imperm_able.jpg',
        'Manteau hiver.jpeg',
        'Image du manteau'
    ),
    (
        '/img/photo/sac___dos_urbain.jpg',
        'Sac à dos.jpeg',
        'Image du sac'
    ),
    (
        '/img/photo/smartphone_xpro.jpg',
        'Smartphone XPro.jpg',
        'Image du smartphone'
    ),
    (
        '/img/photo/sweat___capuche_premium.jpg',
        'Sweat à capuche.jpeg',
        'Image du sweat'
    ),
    (
        '/img/photo/t_shirt_coton_bio.jpg',
        'T-shirt.png',
        'Image du t-shirt'
    ),
    (
        '/img/photo/tapis_de_yoga.jpg',
        'Tapis yoga.jpeg',
        'Image du tapis'
    ),
    (
        '/img/photo/v_lo_de_route_carbone.jpg',
        'Vélo route.jpeg',
        'Image du vélo'
    ),
    (
        '/img/photo/logo_fashionhub.jpg',
        'Logo FashionHub.jpg',
        'Logo entreprise FashionHub'
    ),
    (
        '/img/photo/logo_techstore.jpg',
        'Logo TechStore.jpg',
        'Logo entreprise TechStore'
    ),
    (
        '/img/photo/affiche_vintage_de_dinard.jpg',
        'Affiche Vintage de Dinard',
        'Photo de Affiche Vintage de Dinard'
    ),
    (
        '/img/photo/affiche_vintage_de_vannes.jpg',
        'Affiche Vintage de Vannes',
        'Photo de Affiche Vintage de Vannes'
    ),
    (
        '/img/photo/bol_breton_bio.jpg',
        'Bol Breton Bio',
        'Photo de Bol Breton Bio'
    ),
    (
        '/img/photo/bol_breton_fait_main.jpg',
        'Bol Breton Fait main',
        'Photo de Bol Breton Fait main'
    ),
    (
        '/img/photo/bol_breton_premium.jpg',
        'Bol Breton Premium',
        'Photo de Bol Breton Premium'
    ),
    (
        '/img/photo/bol_breton_traditionnel.jpg',
        'Bol Breton Traditionnel',
        'Photo de Bol Breton Traditionnel'
    ),
    (
        '/img/photo/bol_breton_de_saint_malo.jpg',
        'Bol Breton de Saint-Malo',
        'Photo de Bol Breton de Saint-Malo'
    ),
    (
        '/img/photo/bol_e___cidre_artisanal.jpg',
        'Bolée à Cidre Artisanal',
        'Photo de Bolée à Cidre Artisanal'
    ),
    (
        '/img/photo/bol_e___cidre_local.jpg',
        'Bolée à Cidre Local',
        'Photo de Bolée à Cidre Local'
    ),
    (
        '/img/photo/bol_e___cidre_de_saint_malo.jpg',
        'Bolée à Cidre de Saint-Malo',
        'Photo de Bolée à Cidre de Saint-Malo'
    ),
    (
        '/img/photo/bonnet_miki_authentique.jpg',
        'Bonnet Miki Authentique',
        'Photo de Bonnet Miki Authentique'
    ),
    (
        '/img/photo/bonnet_miki_premium.jpg',
        'Bonnet Miki Premium',
        'Photo de Bonnet Miki Premium'
    ),
    (
        '/img/photo/bonnet_miki_traditionnel.jpg',
        'Bonnet Miki Traditionnel',
        'Photo de Bonnet Miki Traditionnel'
    ),
    (
        '/img/photo/bonnet_miki_de_carnac.jpg',
        'Bonnet Miki de Carnac',
        'Photo de Bonnet Miki de Carnac'
    ),
    (
        '/img/photo/bonnet_miki_de_concarneau.jpg',
        'Bonnet Miki de Concarneau',
        'Photo de Bonnet Miki de Concarneau'
    ),
    (
        '/img/photo/bracelet_ancre_artisanal.jpg',
        'Bracelet Ancre Artisanal',
        'Photo de Bracelet Ancre Artisanal'
    ),
    (
        '/img/photo/bracelet_ancre_durable.jpg',
        'Bracelet Ancre Durable',
        'Photo de Bracelet Ancre Durable'
    ),
    (
        '/img/photo/bracelet_ancre_fait_main.jpg',
        'Bracelet Ancre Fait main',
        'Photo de Bracelet Ancre Fait main'
    ),
    (
        '/img/photo/bracelet_ancre_de_brest.jpg',
        'Bracelet Ancre de Brest',
        'Photo de Bracelet Ancre de Brest'
    ),
    (
        '/img/photo/bracelet_ancre_de_carnac.jpg',
        'Bracelet Ancre de Carnac',
        'Photo de Bracelet Ancre de Carnac'
    ),
    (
        '/img/photo/bracelet_ancre_de_concarneau.jpg',
        'Bracelet Ancre de Concarneau',
        'Photo de Bracelet Ancre de Concarneau'
    ),
    (
        '/img/photo/caramels_artisanal.jpg',
        'Caramels Artisanal',
        'Photo de Caramels Artisanal'
    ),
    (
        '/img/photo/caramels_durable.jpg',
        'Caramels Durable',
        'Photo de Caramels Durable'
    ),
    (
        '/img/photo/caramels_de_carnac.jpg',
        'Caramels de Carnac',
        'Photo de Caramels de Carnac'
    ),
    (
        '/img/photo/caramels_de_dinard.jpg',
        'Caramels de Dinard',
        'Photo de Caramels de Dinard'
    ),
    (
        '/img/photo/caramels_de_roscoff.jpg',
        'Caramels de Roscoff',
        'Photo de Caramels de Roscoff'
    ),
    (
        '/img/photo/cir__jaune_de_vannes.jpg',
        'Ciré Jaune de Vannes',
        'Photo de Ciré Jaune de Vannes'
    ),
    (
        '/img/photo/cir__navy_artisanal.jpg',
        'Ciré Navy Artisanal',
        'Photo de Ciré Navy Artisanal'
    ),
    (
        '/img/photo/cir__navy_de_brest.jpg',
        'Ciré Navy de Brest',
        'Photo de Ciré Navy de Brest'
    ),
    (
        '/img/photo/cir__navy_de_concarneau.jpg',
        'Ciré Navy de Concarneau',
        'Photo de Ciré Navy de Concarneau'
    ),
    (
        '/img/photo/cir__navy_de_quimper.jpg',
        'Ciré Navy de Quimper',
        'Photo de Ciré Navy de Quimper'
    ),
    (
        '/img/photo/coussin_triskell_artisanal.jpg',
        'Coussin Triskell Artisanal',
        'Photo de Coussin Triskell Artisanal'
    ),
    (
        '/img/photo/coussin_triskell_bio.jpg',
        'Coussin Triskell Bio',
        'Photo de Coussin Triskell Bio'
    ),
    (
        '/img/photo/coussin_triskell_fait_main.jpg',
        'Coussin Triskell Fait main',
        'Photo de Coussin Triskell Fait main'
    ),
    (
        '/img/photo/coussin_triskell_premium.jpg',
        'Coussin Triskell Premium',
        'Photo de Coussin Triskell Premium'
    ),
    (
        '/img/photo/coussin_triskell_de_roscoff.jpg',
        'Coussin Triskell de Roscoff',
        'Photo de Coussin Triskell de Roscoff'
    ),
    (
        '/img/photo/galettes_artisanal.jpg',
        'Galettes Artisanal',
        'Photo de Galettes Artisanal'
    ),
    (
        '/img/photo/galettes_local.jpg',
        'Galettes Local',
        'Photo de Galettes Local'
    ),
    (
        '/img/photo/galettes_de_quimper.jpg',
        'Galettes de Quimper',
        'Photo de Galettes de Quimper'
    ),
    (
        '/img/photo/kabig_bio.jpg',
        'Kabig Bio',
        'Photo de Kabig Bio'
    ),
    (
        '/img/photo/lampe_temp_te_authentique.jpg',
        'Lampe Tempête Authentique',
        'Photo de Lampe Tempête Authentique'
    ),
    (
        '/img/photo/lampe_temp_te_local.jpg',
        'Lampe Tempête Local',
        'Photo de Lampe Tempête Local'
    ),
    (
        '/img/photo/lampe_temp_te_traditionnel.jpg',
        'Lampe Tempête Traditionnel',
        'Photo de Lampe Tempête Traditionnel'
    ),
    (
        '/img/photo/lampe_temp_te_de_quimper.jpg',
        'Lampe Tempête de Quimper',
        'Photo de Lampe Tempête de Quimper'
    ),
    (
        '/img/photo/lampe_temp_te_de_saint_malo.jpg',
        'Lampe Tempête de Saint-Malo',
        'Photo de Lampe Tempête de Saint-Malo'
    ),
    (
        '/img/photo/lampe_temp_te_de_vannes.jpg',
        'Lampe Tempête de Vannes',
        'Photo de Lampe Tempête de Vannes'
    ),
    (
        '/img/photo/marini_re_authentique.jpg',
        'Marinière Authentique',
        'Photo de Marinière Authentique'
    ),
    (
        '/img/photo/marini_re_local.jpg',
        'Marinière Local',
        'Photo de Marinière Local'
    ),
    (
        '/img/photo/marini_re_premium.jpg',
        'Marinière Premium',
        'Photo de Marinière Premium'
    ),
    (
        '/img/photo/marini_re_de_pont_aven.jpg',
        'Marinière de Pont-Aven',
        'Photo de Marinière de Pont-Aven'
    ),
    (
        '/img/photo/pendentif_hermine_bio.jpg',
        'Pendentif Hermine Bio',
        'Photo de Pendentif Hermine Bio'
    ),
    (
        '/img/photo/pendentif_hermine_fait_main.jpg',
        'Pendentif Hermine Fait main',
        'Photo de Pendentif Hermine Fait main'
    ),
    (
        '/img/photo/pendentif_hermine_local.jpg',
        'Pendentif Hermine Local',
        'Photo de Pendentif Hermine Local'
    ),
    (
        '/img/photo/pendentif_hermine_traditionnel.jpg',
        'Pendentif Hermine Traditionnel',
        'Photo de Pendentif Hermine Traditionnel'
    ),
    (
        '/img/photo/pendentif_hermine_de_roscoff.jpg',
        'Pendentif Hermine de Roscoff',
        'Photo de Pendentif Hermine de Roscoff'
    ),
    (
        '/img/photo/pendentif_hermine_de_saint_malo.jpg',
        'Pendentif Hermine de Saint-Malo',
        'Photo de Pendentif Hermine de Saint-Malo'
    ),
    (
        '/img/photo/phare_miniature_fait_main.jpg',
        'Phare Miniature Fait main',
        'Photo de Phare Miniature Fait main'
    ),
    (
        '/img/photo/phare_miniature_de_quimper.jpg',
        'Phare Miniature de Quimper',
        'Photo de Phare Miniature de Quimper'
    ),
    (
        '/img/photo/pull_marin_authentique.jpg',
        'Pull Marin Authentique',
        'Photo de Pull Marin Authentique'
    ),
    (
        '/img/photo/pull_marin_bio.jpg',
        'Pull Marin Bio',
        'Photo de Pull Marin Bio'
    ),
    (
        '/img/photo/pull_marin_de_brest.jpg',
        'Pull Marin de Brest',
        'Photo de Pull Marin de Brest'
    ),
    (
        '/img/photo/pull_marin_de_carnac.jpg',
        'Pull Marin de Carnac',
        'Photo de Pull Marin de Carnac'
    ),
    (
        '/img/photo/pull_marin_de_quimper.jpg',
        'Pull Marin de Quimper',
        'Photo de Pull Marin de Quimper'
    ),
    (
        '/img/photo/pull_marin_de_saint_malo.jpg',
        'Pull Marin de Saint-Malo',
        'Photo de Pull Marin de Saint-Malo'
    ),
    (
        '/img/photo/sac_voile_bio.jpg',
        'Sac Voile Bio',
        'Photo de Sac Voile Bio'
    ),
    (
        '/img/photo/sac_voile_durable.jpg',
        'Sac Voile Durable',
        'Photo de Sac Voile Durable'
    ),
    (
        '/img/photo/sac_voile_premium.jpg',
        'Sac Voile Premium',
        'Photo de Sac Voile Premium'
    ),
    (
        '/img/photo/sac_voile_de_concarneau.jpg',
        'Sac Voile de Concarneau',
        'Photo de Sac Voile de Concarneau'
    ),
    (
        '/img/photo/sac_voile_de_pont_aven.jpg',
        'Sac Voile de Pont-Aven',
        'Photo de Sac Voile de Pont-Aven'
    ),
    (
        '/img/photo/vareuse_artisanal.jpg',
        'Vareuse Artisanal',
        'Photo de Vareuse Artisanal'
    ),
    (
        '/img/photo/vareuse_durable.jpg',
        'Vareuse Durable',
        'Photo de Vareuse Durable'
    ),
    (
        '/img/photo/vareuse_de_dinard.jpg',
        'Vareuse de Dinard',
        'Photo de Vareuse de Dinard'
    ),
    (
        '/img/photo/vareuse_de_pont_aven.jpg',
        'Vareuse de Pont-Aven',
        'Photo de Vareuse de Pont-Aven'
    ),
    (
        '/img/photo/vareuse_de_saint_malo.jpg',
        'Vareuse de Saint-Malo',
        'Photo de Vareuse de Saint-Malo'
    ),
    (
        '/img/photo/avatar_jean.jpg',
        'Avatar Jean.jpeg',
        'Photo de profil Jean'
    ),
    (
        '/img/photo/avatar_marie.jpg',
        'Avatar Marie.jpg',
        'Photo de profil Marie'
    ),
    (
        '/img/photo/_charpe_ray_e_authentique.jpg',
        'Écharpe Rayée Authentique',
        'Photo de Écharpe Rayée Authentique'
    ),
    (
        '/img/photo/_charpe_ray_e_bio.jpg',
        'Écharpe Rayée Bio',
        'Photo de Écharpe Rayée Bio'
    ),
    (
        '/img/photo/_charpe_ray_e_fait_main.jpg',
        'Écharpe Rayée Fait main',
        'Photo de Écharpe Rayée Fait main'
    ),
    (
        '/img/photo/_charpe_ray_e_de_brest.jpg',
        'Écharpe Rayée de Brest',
        'Photo de Écharpe Rayée de Brest'
    ),
    (
        '/img/photo/_charpe_ray_e_de_dinard.jpg',
        'Écharpe Rayée de Dinard',
        'Photo de Écharpe Rayée de Dinard'
    ),
    (
        '/img/photo/_charpe_ray_e_de_saint_malo.jpg',
        'Écharpe Rayée de Saint-Malo',
        'Photo de Écharpe Rayée de Saint-Malo'
    ),
    (
        '/img/photo/5_S01618f64dc714163846501cb2c2e0f0fN.webp',
        '5_S01618f64dc714163846501cb2c2e0f0fN.webp',
        'photo du produit Robe d été'
    );

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO
    _represente_produit (id_image, id_produit)
VALUES (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 6),
    (10, 8),
    (11, 7),
    (12, 9),
    (13, 10),
    (14, 11),
    (15, 12),
    (16, 13),
    (17, 14),
    (18, 15),
    (19, 16),
    (20, 17),
    (21, 18),
    (22, 19),
    (23, 20),
    (24, 21),
    (25, 22),
    (26, 23),
    (27, 24),
    (28, 25),
    (29, 26),
    (30, 27),
    (31, 28),
    (32, 29),
    (33, 30),
    (34, 31),
    (35, 32),
    (36, 33),
    (37, 34),
    (38, 35),
    (39, 36),
    (40, 37),
    (41, 38),
    (42, 39),
    (43, 40),
    (44, 41),
    (45, 42),
    (46, 43),
    (47, 44),
    (48, 45),
    (49, 46),
    (50, 47),
    (51, 48),
    (52, 49),
    (53, 50),
    (54, 51),
    (55, 52),
    (56, 53),
    (57, 54),
    (58, 55),
    (59, 56),
    (60, 57),
    (61, 58),
    (62, 59),
    (63, 60),
    (64, 61),
    (65, 62),
    (66, 63),
    (67, 64),
    (68, 65),
    (69, 66),
    (70, 67),
    (71, 68),
    (72, 69),
    (73, 70),
    (74, 71),
    (75, 72),
    (76, 73),
    (77, 74),
    (78, 75),
    (79, 76),
    (80, 77),
    (81, 78),
    (82, 79),
    (83, 80),
    (84, 81),
    (85, 82),
    (86, 83),
    (87, 84),
    (88, 85),
    (89, 86),
    (90, 87),
    (91, 88),
    (92, 89),
    (93, 90),
    (94, 91),
    (95, 92),
    (96, 93),
    (97, 94),
    (98, 95),
    (99, 96),
    (100, 97),
    (101, 98),
    (102, 99),
    (103, 100),
    (104, 101),
    (105, 102),
    (106, 103),
    (107, 104),
    (108, 105),
    (110, 5);

-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO
    _represente_compte (id_image, id_compte)
VALUES (6, 4),
    (7, 5),
    (8, 2),
    (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO
    _fait_partie_de (id_produit, id_categorie)
VALUES (1, 1),
    (1, 7),
    (2, 1),
    (2, 7),
    (3, 2),
    (3, 8),
    (4, 2),
    (4, 8),
    (5, 2),
    (5, 9),
    (6, 1),
    (6, 3),
    (7, 3),
    (8, 1),
    (8, 3),
    (8, 5),
    (9, 5),
    (9, 10),
    (10, 1),
    (10, 7),
    (11, 5),
    (12, 2),
    (12, 8),
    (13, 6),
    (14, 5),
    (15, 1),
    (15, 7),
    (16, 1),
    (16, 7),
    (17, 2),
    (17, 8),
    (18, 5),
    (19, 1),
    (19, 7),
    (20, 10),
    (21, 5),
    (22, 1),
    (22, 3),
    (23, 2),
    (23, 8),
    (24, 4),
    (24, 5),
    (25, 1),
    (25, 3),
    (26, 2),
    (26, 8),
    (27, 2),
    (27, 3),
    (27, 8),
    (28, 4),
    (29, 2),
    (29, 3),
    (30, 2),
    (30, 3),
    (31, 2),
    (31, 8),
    (31, 9),
    (32, 3),
    (33, 2),
    (33, 8),
    (33, 9),
    (34, 3),
    (35, 3),
    (36, 3),
    (37, 2),
    (37, 3),
    (38, 4),
    (39, 2),
    (39, 3),
    (40, 2),
    (40, 3),
    (41, 2),
    (41, 3),
    (41, 8),
    (42, 2),
    (42, 8),
    (42, 9),
    (43, 4),
    (44, 4),
    (45, 2),
    (45, 8),
    (46, 4),
    (47, 2),
    (47, 8),
    (48, 2),
    (48, 8),
    (49, 2),
    (49, 8),
    (49, 9),
    (50, 4),
    (51, 4),
    (52, 3),
    (53, 4),
    (54, 4),
    (55, 2),
    (55, 3),
    (56, 2),
    (56, 8),
    (57, 3),
    (58, 4),
    (59, 3),
    (60, 4),
    (61, 3),
    (62, 2),
    (62, 8),
    (62, 9),
    (63, 2),
    (63, 8),
    (64, 3),
    (65, 4),
    (66, 3),
    (67, 2),
    (67, 8),
    (67, 9),
    (68, 3),
    (69, 3),
    (70, 3),
    (71, 2),
    (71, 8),
    (72, 3),
    (73, 3),
    (74, 2),
    (74, 8),
    (74, 9),
    (75, 2),
    (75, 8),
    (76, 4),
    (77, 4),
    (78, 4),
    (79, 4),
    (80, 2),
    (80, 8),
    (81, 4),
    (82, 3),
    (83, 4),
    (84, 4),
    (85, 4),
    (86, 4),
    (87, 4),
    (88, 4),
    (89, 4),
    (90, 4),
    (91, 2),
    (91, 3),
    (91, 8),
    (92, 2),
    (92, 3),
    (92, 8),
    (93, 4),
    (94, 2),
    (94, 8),
    (94, 9),
    (95, 2),
    (95, 8),
    (96, 2),
    (96, 8),
    (96, 9),
    (97, 4),
    (98, 2),
    (98, 3),
    (98, 8),
    (99, 2),
    (99, 8),
    (99, 9),
    (100, 3),
    (101, 4),
    (102, 2),
    (102, 8),
    (103, 4),
    (104, 4),
    (105, 4);

-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO
    _est_dote_de (id_produit, code_hexa)
VALUES (1, '#000000'),
    (1, '#FFFFFF'),
    (2, '#808080'),
    (3, '#0000FF'),
    (3, '#FF0000'),
    (3, '#00FF00'),
    (4, '#0000FF'),
    (4, '#000000'),
    (5, '#FF0000'),
    (5, '#FFFFFF'),
    (6, '#000000'),
    (7, '#808080'),
    (8, '#000000'),
    (9, '#0000FF'),
    (9, '#FF0000'),
    (10, '#808080'),
    (11, '#FFFFFF'),
    (12, '#000000'),
    (12, '#8B4513'),
    (14, '#EE82EE'),
    (14, '#87CEEB'),
    (15, '#000000'),
    (16, '#000000'),
    (16, '#FFFFFF'),
    (17, '#808080'),
    (17, '#000000'),
    (18, '#FFFFFF'),
    (18, '#000000'),
    (19, '#000000'),
    (20, '#FFFFFF'),
    (20, '#000000'),
    (21, '#0000FF'),
    (21, '#FF0000'),
    (22, '#808080'),
    (23, '#000000'),
    (23, '#8B4513'),
    (24, '#87CEEB'),
    (24, '#32CD32'),
    (25, '#000000'),
    (25, '#FF0000'),
    (26, '#8B4513'),
    (27, '#0000FF'),
    (28, '#FF0000'),
    (29, '#8B4513'),
    (30, '#00FF00'),
    (31, '#000000'),
    (32, '#8B4513'),
    (33, '#87CEEB'),
    (34, '#FFFFFF'),
    (35, '#FFFFFF'),
    (36, '#EE82EE'),
    (37, '#FFFFFF'),
    (38, '#0000FF'),
    (39, '#0000FF'),
    (40, '#000000'),
    (41, '#000000'),
    (42, '#FFFFFF'),
    (43, '#8B4513'),
    (44, '#87CEEB'),
    (45, '#87CEEB'),
    (46, '#32CD32'),
    (47, '#87CEEB'),
    (48, '#00FF00'),
    (49, '#FFA500'),
    (50, '#EE82EE'),
    (51, '#FF0000'),
    (52, '#FFFF00'),
    (53, '#FFFFFF'),
    (54, '#0000FF'),
    (55, '#FFFFFF'),
    (56, '#808080'),
    (57, '#00FF00'),
    (58, '#FFFF00'),
    (59, '#00FF00'),
    (60, '#FFA500'),
    (61, '#00FF00'),
    (62, '#FFFFFF'),
    (63, '#00FF00'),
    (64, '#87CEEB'),
    (65, '#EE82EE'),
    (66, '#FFFF00'),
    (67, '#808080'),
    (68, '#FFA500'),
    (69, '#00FF00'),
    (70, '#32CD32'),
    (71, '#0000FF'),
    (72, '#00FF00'),
    (73, '#8B4513'),
    (74, '#FFA500'),
    (75, '#32CD32'),
    (76, '#87CEEB'),
    (77, '#FFFF00'),
    (78, '#0000FF'),
    (79, '#8B4513'),
    (80, '#0000FF'),
    (81, '#EE82EE'),
    (82, '#8B4513'),
    (83, '#FFFF00'),
    (84, '#8B4513'),
    (85, '#FFFF00'),
    (86, '#32CD32'),
    (87, '#EE82EE'),
    (88, '#0000FF'),
    (89, '#EE82EE'),
    (90, '#FFFFFF'),
    (91, '#000000'),
    (92, '#FFFFFF'),
    (93, '#808080'),
    (94, '#808080'),
    (95, '#00FF00'),
    (96, '#0000FF'),
    (97, '#EE82EE'),
    (98, '#000000'),
    (99, '#808080'),
    (100, '#808080'),
    (101, '#0000FF'),
    (102, '#87CEEB'),
    (103, '#FFA500'),
    (104, '#0000FF'),
    (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO
    _seuil_alerte (nb_seuil, message_seuil)
VALUES (
        10,
        'Stock faible - Envisager un réapprovisionnement'
    ),
    (
        5,
        'Stock critique - Réapprovisionnement urgent'
    ),
    (
        3,
        'Rupture imminente - Commander immédiatement'
    ),
    (
        20,
        'Stock normal - Surveillance recommandée'
    ),
    (
        1,
        'Rupture de stock - Produit indisponible'
    );

INSERT INTO
    _adresse (
        id_compte,
        a_numero,
        a_adresse,
        a_ville,
        a_code_postal,
        a_pays
    )
VALUES (
        4,
        13,
        'rue du Pillard',
        'Rennes',
        35590,
        'France'
    );

-- 18. PANIERS/COMMANDES
INSERT INTO
    _panier_commande (id_client, timestamp_commande)
VALUES (1, '2025-11-01 10:30:00'),
    (2, '2025-11-02 14:45:00'),
    (3, '2025-11-03 09:15:00'),
    (1, NULL),
    (4, '2025-11-04 16:20:00'),
    (6, '2025-11-05 11:00:00'),
    (2, NULL),
    (5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO
    _contient (
        id_panier,
        id_produit,
        quantite,
        prix_unitaire,
        remise_unitaire,
        frais_de_port,
        TVA
    )
VALUES (
        1,
        1,
        1,
        599.99,
        0.0,
        5.99,
        20.0
    ),
    (
        1,
        6,
        1,
        149.99,
        0.0,
        5.99,
        20.0
    ),
    (
        2,
        3,
        2,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        2,
        4,
        1,
        49.99,
        0.0,
        4.99,
        20.0
    ),
    (
        3,
        2,
        1,
        899.99,
        0.0,
        9.99,
        20.0
    ),
    (
        4,
        7,
        1,
        69.99,
        0.0,
        6.99,
        20.0
    ),
    (
        5,
        5,
        1,
        39.99,
        0.0,
        4.99,
        20.0
    ),
    (
        5,
        8,
        1,
        199.99,
        0.0,
        3.99,
        20.0
    ),
    (
        6,
        9,
        2,
        89.99,
        0.0,
        5.99,
        20.0
    ),
    (
        7,
        10,
        1,
        299.99,
        0.0,
        7.99,
        20.0
    ),
    (
        8,
        11,
        1,
        29.99,
        0.0,
        4.99,
        20.0
    ),
    (
        8,
        13,
        1,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        8,
        14,
        1,
        34.99,
        0.0,
        5.99,
        20.0
    );

-- 20. FACTURES
INSERT INTO
    _facture (
        id_panier,
        id_adresse,
        f_total_ht,
        f_total_remise,
        f_total_ttc
    )
VALUES (1, 1, 755.98, 0.0, 907.18),
    (2, 1, 103.96, 0.0, 124.75),
    (3, 1, 909.98, 0.0, 1091.98),
    (5, 1, 248.97, 0.0, 298.76),
    (6, 1, 185.97, 0.0, 223.16),
    (8, 1, 95.96, 0.0, 115.15);

-- 21. PAIEMENTS
INSERT INTO
    _paiement (
        id_facture,
        mode_paiement,
        numero_carte,
        mois_annee_expiration,
        cryptogramme_carte,
        timestamp_paiement
    )
VALUES (
        1,
        'CB',
        '1234567890123456',
        '12/27',
        '123',
        '2025-11-01 10:35:00'
    ),
    (
        2,
        'CB',
        '6543210987654321',
        '06/26',
        '456',
        '2025-11-02 14:50:00'
    ),
    (
        3,
        'CB',
        '1111222233334444',
        '03/28',
        '789',
        '2025-11-03 09:20:00'
    ),
    (
        4,
        'CB',
        '9999888877776666',
        '09/27',
        '321',
        '2025-11-04 16:25:00'
    ),
    (
        5,
        'CB',
        '5555666677778888',
        '11/26',
        '654',
        '2025-11-05 11:05:00'
    ),
    (
        6,
        'CB',
        '4444333322221111',
        '08/27',
        '987',
        '2025-11-06 13:35:00'
    );

-- 22. LIVRAISONS
INSERT INTO
    _livraison (
        id_facture,
        date_livraison,
        etat_livraison
    )
VALUES (1, '2025-11-05', 'Livré'),
    (2, '2025-11-06', 'Livré'),
    (3, '2025-11-08', 'En transit'),
    (4, NULL, 'En préparation'),
    (5, '2025-11-09', 'Livré'),
    (6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO
    _definie_pour (id_seuil, id_compte)
VALUES (1, 2),
    (2, 2),
    (3, 2),
    (4, 2),
    (5, 2),
    (1, 3),
    (2, 3),
    (3, 3),
    (5, 3),
    (1, 10),
    (2, 10),
    (3, 10),
    (4, 10),
    (5, 10),
    (5, 1);

-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;

UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;

UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;

UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;

UPDATE cobrec1._commentaire SET a_note = 0.0;
----------- WbStatement -----------
##sqlwb.pos=87577
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;

CREATE SCHEMA cobrec1;

SET SCHEMA 'cobrec1';

-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (
        civilite IN (
            'M.',
            'Mme',
            'Inconnu',
            'Ne souhaite pas s''exprimer',
            'Autre'
        )
    ),
    CONSTRAINT verif_compte_email CHECK (
        email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'
    ),
    CONSTRAINT verif_compte_num_telephone CHECK (
        num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$'
    )
);

ALTER TABLE ONLY cobrec1._compte
ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11, 2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (
        type_couleur IN (
            'Vert',
            'Jaune',
            'Rouge',
            'Noir',
            'Blanc',
            'Bleu',
            'Violet',
            'Orange',
            'Gris',
            'Marron'
        )
    )
);

ALTER TABLE ONLY cobrec1._couleur
ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4, 1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (
        montant_TVA >= 0.00
        AND montant_TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11, 2) DEFAULT 0.0,
    p_volume numeric(11, 2) DEFAULT 0.0,
    p_frais_de_port numeric(11, 2) DEFAULT 0.0,
    p_prix numeric(11, 2) NOT NULL,
    p_note numeric(2, 1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (
        p_note >= 0
        AND p_note <= 5
    ),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (
        p_statut IN (
            'Ébauche',
            'En ligne',
            'Hors ligne',
            'Supprimé'
        )
    ),
    CONSTRAINT verif_produit_origine CHECK (
        p_origine IN (
            'Inconnu',
            'Bretagne',
            'France',
            'UE',
            'Hors UE'
        )
    )
);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) REFERENCES cobrec1._vendeur (id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) REFERENCES cobrec1._TVA (id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5, 2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (
        reduction_pourcentage >= 0.00
        AND reduction_pourcentage <= 100.00
    ),
    /*CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_reduction_fin CHECK (
        reduction_fin > reduction_debut
    )
);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    /*CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_promotion_fin CHECK (
        promotion_fin > promotion_debut
    )
);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11, 2) DEFAULT 0.0,
    f_total_remise numeric(11, 2) DEFAULT 0.0,
    f_total_ttc numeric(11, 2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) REFERENCES cobrec1._adresse (id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2, 1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (
        vote_type IN ('like', 'dislike')
    )
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2, 1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (
        a_note IN (
            NULL,
            0.0,
            0.5,
            1.0,
            1.5,
            2.0,
            2.5,
            3.0,
            3.5,
            4.0,
            4.5,
            5.0
        )
    )
);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) REFERENCES cobrec1._livraison (id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison, id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (
        type_signalement IN (
            'signale_avis',
            'signale_compte',
            'signale_produit'
        )
    )
);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11, 2) NOT NULL,
    remise_unitaire numeric(11, 2) DEFAULT 0.0,
    frais_de_port numeric(11, 2) DEFAULT 0.0,
    TVA numeric(4, 1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (
        TVA >= 0.00
        AND TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
-- CREATE TABLE cobrec1._represente_promotion (
--     id_image integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image)
--             REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) REFERENCES cobrec1._categorie_produit (id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) REFERENCES cobrec1._couleur (code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction)
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) REFERENCES cobrec1._seuil_alerte (id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();

CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

CREATE FUNCTION mise_sur_marche_produit_insert()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche_insert
AFTER INSERT on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit_insert();

CREATE FUNCTION update_p_modif_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_modif = OLD.p_modif) THEN
        NEW.p_modif = CURRENT_TIMESTAMP;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_update_p_modif_produit
BEFORE UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE update_p_modif_produit();

CREATE FUNCTION produit_deja_en_reduction_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_insert
BEFORE INSERT on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_insert();

CREATE FUNCTION produit_deja_en_reduction_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_update
BEFORE UPDATE on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_update();




CREATE FUNCTION produit_deja_en_promotion_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._promotion WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._promotion WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_promotion_insert
BEFORE INSERT on _promotion
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_promotion_insert();

CREATE FUNCTION produit_deja_en_promotion_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._promotion WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._promotion WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_promotion_update
BEFORE UPDATE on _promotion
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_promotion_update();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO
    _compte (
        nom,
        prenom,
        email,
        num_telephone,
        mdp,
        etat_A2F,
        nb_fois_signale,
        nb_signalements_avis,
        nb_cpts_signales,
        nb_avis_signales
    )
VALUES (
        'Maeleau',
        'Le Hyver',
        'admin@cobrec.fr',
        '0601020304',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Lopicier',
        'Mallo',
        'vendeur1@example.com',
        '0612345678',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Elouard',
        'Jean-Jacques',
        'vendeur2@shop.fr',
        '0623456789',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        1,
        0,
        0,
        0
    ),
    (
        'Jean',
        'Dupont',
        'client1@gmail.com',
        '0634567890',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        1,
        0,
        0
    ),
    (
        'Marie',
        'Martin',
        'client2@yahoo.fr',
        '0645678901',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        1,
        0
    ),
    (
        'Pierre',
        'Durand',
        'client3@outlook.com',
        '0656789012',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Sophie',
        'Bernard',
        'client4@free.fr',
        '0667890123',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Lucas',
        'Petit',
        'client5@orange.fr',
        '0678901234',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Emma',
        'Lefebvre',
        'client6@wanadoo.fr',
        '0689012345',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Martinière',
        'Yvili',
        'vendeur3@boutique.fr',
        '0690123456',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    );

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO
    _vendeur (
        id_compte,
        SIREN,
        raison_sociale,
        denomination,
        nb_produits_crees
    )
VALUES (
        2,
        '123456789',
        'TechStore SARL',
        'TechStore',
        5
    ),
    (
        3,
        '987654321',
        'FashionHub SAS',
        'FashionHub',
        3
    ),
    (
        10,
        '456789123',
        'SportPro EURL',
        'SportPro',
        2
    );

-- 4. CLIENTS
INSERT INTO
    _client (
        id_compte,
        c_pseudo,
        c_nb_produits_achetes,
        c_depense_totale,
        c_cloture,
        c_datenaissance
    )
VALUES (
        4,
        'jdupont',
        2,
        907.18,
        FALSE,
        '1985-03-15'
    ),
    (
        5,
        'mmartin',
        3,
        124.75,
        FALSE,
        '1990-07-22'
    ),
    (
        6,
        'pdurand',
        1,
        1091.98,
        FALSE,
        '1988-11-10'
    ),
    (
        7,
        'sbernard',
        2,
        298.76,
        FALSE,
        '1995-05-30'
    ),
    (
        8,
        'lpetit',
        0,
        0.0,
        FALSE,
        '2000-01-18'
    ),
    (
        9,
        'elefebvre',
        1,
        179.98,
        FALSE,
        '1992-09-25'
    );

-- 5. ADRESSES
INSERT INTO
    _adresse (
        id_compte,
        a_adresse,
        a_ville,
        a_code_postal,
        a_complement
    )
VALUES (
        4,
        '15 rue de la Paix',
        'Paris',
        '75001',
        'Apt 5'
    ),
    (
        5,
        '23 avenue des Champs',
        'Lyon',
        '69001',
        NULL
    ),
    (
        6,
        '8 boulevard Victor Hugo',
        'Marseille',
        '13001',
        'Bâtiment B'
    ),
    (
        7,
        '42 rue du Commerce',
        'Toulouse',
        '31000',
        NULL
    ),
    (
        8,
        '67 place de la République',
        'Nice',
        '06000',
        '3ème étage'
    ),
    (
        9,
        '91 rue Principale',
        'Bordeaux',
        '33000',
        NULL
    ),
    (
        2,
        '12 avenue du Commerce',
        'Paris',
        '75015',
        'Entrepôt A'
    ),
    (
        3,
        '55 rue de la Mode',
        'Lyon',
        '69002',
        NULL
    ),
    (
        10,
        '78 boulevard du Sport',
        'Marseille',
        '13008',
        'Zone industrielle'
    );

-- 6. COULEURS
INSERT INTO
    _couleur (code_hexa, nom, type_couleur)
VALUES (
        '#FF0000',
        'Rouge vif',
        'Rouge'
    ),
    (
        '#0000FF',
        'Bleu marine',
        'Bleu'
    ),
    ('#000000', 'Noir', 'Noir'),
    (
        '#FFFFFF',
        'Blanc pur',
        'Blanc'
    ),
    (
        '#00FF00',
        'Vert émeraude',
        'Vert'
    ),
    (
        '#FFFF00',
        'Jaune citron',
        'Jaune'
    ),
    ('#FFA500', 'Orange', 'Orange'),
    ('#808080', 'Gris', 'Gris'),
    (
        '#8B4513',
        'Marron chocolat',
        'Marron'
    ),
    ('#EE82EE', 'Violet', 'Violet'),
    (
        '#87CEEB',
        'Bleu ciel',
        'Bleu'
    ),
    (
        '#32CD32',
        'Vert lime',
        'Vert'
    );

-- 7. CATÉGORIES
INSERT INTO
    _categorie_produit (nom_categorie)
VALUES ('Électronique'),
    ('Vêtements'),
    ('Accessoires'),
    ('Maison'),
    ('Sport'),
    ('Livres'),
    ('Informatique'),
    ('Mode homme'),
    ('Mode femme'),
    ('Chaussures');

-- 8. TVA
INSERT INTO
    _TVA (montant_TVA, libelle_TVA)
VALUES (20.0, 'TVA normale'),
    (10.0, 'TVA intermédiaire'),
    (5.5, 'TVA réduite'),
    (2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO
    _produit (
        id_TVA,
        id_vendeur,
        p_nom,
        p_description,
        p_prix,
        p_stock,
        p_statut,
        p_origine,
        p_poids,
        p_volume,
        p_frais_de_port,
        p_note,
        p_nb_ventes
    )
VALUES (
        1,
        1,
        'Smartphone XPro',
        'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G',
        599.99,
        35,
        'En ligne',
        'Bretagne',
        0.180,
        0.01,
        5.99,
        4.3,
        15
    ),
    (
        1,
        1,
        'Ordinateur portable Ultra',
        'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7',
        899.99,
        22,
        'En ligne',
        'Bretagne',
        2.5,
        0.03,
        9.99,
        4.0,
        8
    ),
    (
        1,
        2,
        'T-shirt coton bio',
        'T-shirt 100% coton biologique, coupe regular, diverses couleurs',
        24.99,
        58,
        'En ligne',
        'Bretagne',
        0.15,
        0.5,
        3.99,
        5.0,
        42
    ),
    (
        1,
        2,
        'Jean slim',
        'Jean coupe slim stretch, denim premium',
        49.99,
        62,
        'En ligne',
        'Bretagne',
        1.00,
        0.01,
        4.99,
        NULL,
        18
    ),
    (
        1,
        2,
        'Robe d été',
        'Robe légère et fluide pour l été, motifs floraux',
        39.99,
        48,
        'En ligne',
        'Bretagne',
        0.30,
        0.08,
        4.99,
        NULL,
        12
    ),
    (
        2,
        1,
        'Casque audio Bluetooth',
        'Casque sans fil avec réduction de bruit active, autonomie 30h',
        149.99,
        15,
        'En ligne',
        'Bretagne',
        0.25,
        0.02,
        5.99,
        4.5,
        25
    ),
    (
        1,
        2,
        'Sac à dos urbain',
        'Sac à dos pour ordinateur portable, compartiments multiples, imperméable',
        69.99,
        35,
        'En ligne',
        'Bretagne',
        0.60,
        0.15,
        6.99,
        NULL,
        10
    ),
    (
        1,
        1,
        'Montre connectée',
        'Montre sport avec GPS, cardiofréquencemètre, étanche 50m',
        199.99,
        15,
        'En ligne',
        'Bretagne',
        0.05,
        0.01,
        3.99,
        4.7,
        20
    ),
    (
        1,
        3,
        'Chaussures running',
        'Chaussures de course avec amorti premium, semelle respirante',
        89.99,
        54,
        'En ligne',
        'Bretagne',
        0.40,
        0.08,
        5.99,
        4.2,
        16
    ),
    (
        1,
        1,
        'Tablette 10 pouces',
        'Tablette Android, écran Full HD, 64Go, stylet inclus',
        299.99,
        16,
        'En ligne',
        'Bretagne',
        0.50,
        0.02,
        7.99,
        3.8,
        9
    ),
    (
        1,
        3,
        'Ballon de football',
        'Ballon officiel en cuir synthétique, taille 5',
        29.99,
        85,
        'En ligne',
        'Bretagne',
        0.45,
        0.06,
        4.99,
        4.6,
        35
    ),
    (
        1,
        2,
        'Veste en cuir',
        'Veste en cuir véritable, coupe motard, doublure intérieure',
        189.99,
        15,
        'En ligne',
        'Bretagne',
        1.20,
        0.01,
        8.99,
        NULL,
        5
    ),
    (
        3,
        1,
        'Livre cuisine française',
        'Recettes traditionnelles de cuisine française, 300 pages',
        24.99,
        28,
        'En ligne',
        'Bretagne',
        0.80,
        0.03,
        3.99,
        4.8,
        22
    ),
    (
        1,
        3,
        'Tapis de yoga',
        'Tapis antidérapant, épaisseur 6mm, avec sac de transport',
        34.99,
        52,
        'En ligne',
        'Bretagne',
        1.10,
        0.02,
        5.99,
        4.4,
        28
    ),
    (
        1,
        1,
        'Clavier mécanique RGB',
        'Clavier gamer avec rétroéclairage RGB, switches mécaniques',
        79.99,
        29,
        'En ligne',
        'Bretagne',
        0.90,
        0.04,
        5.99,
        4.1,
        11
    ),
    (
        1,
        1,
        'Console NextGen',
        'Console de jeu dernière génération, 1To SSD, 4K HDR',
        499.99,
        0,
        'Hors ligne',
        'France',
        3.5,
        0.02,
        14.99,
        4.8,
        25
    ),
    (
        1,
        2,
        'Sweat à capuche premium',
        'Sweat-shirt en coton bio, coupe oversize, poche kangourou',
        59.99,
        0,
        'Hors ligne',
        'France',
        0.70,
        0.03,
        5.99,
        4.4,
        18
    ),
    (
        1,
        3,
        'Raquette de tennis pro',
        'Raquette carbone, tension 25kg, grip confort',
        129.99,
        0,
        'Hors ligne',
        'France',
        0.35,
        0.02,
        6.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Écran gaming 4K 27"',
        'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms',
        349.99,
        0,
        'Hors ligne',
        'France',
        5.2,
        0.35,
        19.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Baskets limited edition',
        'Baskets cuir véritable, édition limitée, semelle comfort',
        179.99,
        0,
        'Hors ligne',
        'France',
        0.80,
        0.06,
        7.99,
        4.9,
        65
    ),
    (
        1,
        3,
        'Vélo de route carbone',
        'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses',
        1299.99,
        0,
        'Hors ligne',
        'UE',
        8.5,
        0.15,
        29.99,
        4.8,
        25
    ),
    (
        1,
        1,
        'Drone professionnel 4K',
        'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min',
        899.99,
        0,
        'Hors ligne',
        'UE',
        1.2,
        0.02,
        12.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Manteau d hiver imperméable',
        'Manteau longueur genoux, doublure polaire, coupe-vent',
        179.99,
        0,
        'Hors ligne',
        'UE',
        1.5,
        0.01,
        8.99,
        4.4,
        65
    ),
    (
        1,
        3,
        'Tente 4 places',
        'Tente familiale, double toit, arceaux aluminium, imperméable',
        249.99,
        0,
        'Hors ligne',
        'Hors UE',
        4.8,
        0.08,
        19.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Enceinte Bluetooth waterproof',
        'Enceinte portable, autonomie 24h, résistance IP67',
        129.99,
        0,
        'Hors ligne',
        'Hors UE',
        0.9,
        0.05,
        6.99,
        4.9,
        95
    ),
    (
        2,
        1,
        'Pull Marin de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.',
        36.37,
        31,
        'En ligne',
        'Bretagne',
        2.06,
        0.45,
        5.78,
        4.4,
        12
    ),
    (
        1,
        1,
        'Bonnet Miki de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.',
        121.37,
        6,
        'Hors ligne',
        'Bretagne',
        2.3,
        0.09,
        8.8,
        4.3,
        60
    ),
    (
        2,
        3,
        'Galettes Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        147.92,
        142,
        'En ligne',
        'Bretagne',
        0.46,
        0.46,
        5.71,
        4.3,
        97
    ),
    (
        1,
        3,
        'Écharpe Rayée Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        173.77,
        102,
        'En ligne',
        'Bretagne',
        0.91,
        0.32,
        8.28,
        4.4,
        58
    ),
    (
        1,
        2,
        'Écharpe Rayée de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.',
        197.02,
        168,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.12,
        7.92,
        4.8,
        19
    ),
    (
        4,
        2,
        'Ciré Navy de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        104.35,
        169,
        'En ligne',
        'Bretagne',
        1.43,
        0.14,
        7.22,
        4.6,
        72
    ),
    (
        4,
        3,
        'Bracelet Ancre Fait main',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        172.75,
        44,
        'Hors ligne',
        'Bretagne',
        1.92,
        0.4,
        8.8,
        4.1,
        102
    ),
    (
        1,
        3,
        'Marinière Local',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        74.29,
        80,
        'Hors ligne',
        'Bretagne',
        1.36,
        0.23,
        13.58,
        4.9,
        72
    ),
    (
        3,
        1,
        'Bracelet Ancre de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.',
        40.53,
        140,
        'En ligne',
        'Bretagne',
        2.76,
        0.3,
        9.4,
        4.1,
        97
    ),
    (
        3,
        3,
        'Pendentif Hermine Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        164.23,
        199,
        'Hors ligne',
        'Bretagne',
        1.64,
        0.07,
        10.94,
        4.9,
        47
    ),
    (
        1,
        3,
        'Sac Voile de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.',
        136.95,
        100,
        'En ligne',
        'Bretagne',
        1.37,
        0.26,
        6.09,
        4.2,
        91
    ),
    (
        2,
        3,
        'Écharpe Rayée de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        21.13,
        22,
        'Hors ligne',
        'Bretagne',
        2.73,
        0.43,
        5.64,
        4.2,
        129
    ),
    (
        1,
        2,
        'Coussin Triskell de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        134.55,
        95,
        'Hors ligne',
        'Bretagne',
        1.33,
        0.24,
        11.56,
        4.7,
        30
    ),
    (
        1,
        3,
        'Écharpe Rayée Authentique',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.',
        36.49,
        51,
        'En ligne',
        'Bretagne',
        0.91,
        0.13,
        13.31,
        4.4,
        145
    ),
    (
        4,
        3,
        'Écharpe Rayée Bio',
        'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.',
        50.4,
        107,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.09,
        5.02,
        4.4,
        121
    ),
    (
        1,
        3,
        'Bonnet Miki Authentique',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        119.47,
        143,
        'En ligne',
        'Bretagne',
        0.28,
        0.16,
        5.45,
        4.5,
        140
    ),
    (
        3,
        1,
        'Ciré Navy de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        187.96,
        150,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.3,
        10.57,
        4.4,
        149
    ),
    (
        1,
        1,
        'Bol Breton Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.',
        66.7,
        85,
        'En ligne',
        'Bretagne',
        2.79,
        0.47,
        5.08,
        4.6,
        149
    ),
    (
        1,
        3,
        'Bol Breton Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        176.18,
        99,
        'Hors ligne',
        'Bretagne',
        0.93,
        0.22,
        9.89,
        4.3,
        140
    ),
    (
        3,
        1,
        'Pull Marin de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.',
        30.23,
        146,
        'En ligne',
        'Bretagne',
        0.55,
        0.15,
        6.9,
        4.3,
        72
    ),
    (
        1,
        1,
        'Affiche Vintage de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        155.74,
        168,
        'En ligne',
        'Bretagne',
        2.94,
        0.09,
        8.98,
        4.7,
        148
    ),
    (
        2,
        3,
        'Vareuse Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        120.09,
        42,
        'En ligne',
        'Bretagne',
        1.35,
        0.03,
        8.28,
        4.9,
        15
    ),
    (
        3,
        2,
        'Pull Marin Bio',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.',
        151.65,
        65,
        'En ligne',
        'Bretagne',
        2.61,
        0.49,
        12.3,
        4.9,
        11
    ),
    (
        1,
        3,
        'Kabig Bio',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.',
        172.27,
        61,
        'En ligne',
        'Bretagne',
        0.68,
        0.46,
        8.15,
        4.8,
        63
    ),
    (
        1,
        2,
        'Phare Miniature Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        62.75,
        169,
        'En ligne',
        'Bretagne',
        1.58,
        0.34,
        12.59,
        4.3,
        12
    ),
    (
        3,
        1,
        'Bol Breton Fait main',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        75.33,
        85,
        'Hors ligne',
        'Bretagne',
        1.37,
        0.49,
        6.04,
        4.9,
        53
    ),
    (
        3,
        3,
        'Bracelet Ancre de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        23.23,
        175,
        'Hors ligne',
        'Bretagne',
        2.77,
        0.32,
        10.97,
        4.1,
        81
    ),
    (
        1,
        2,
        'Caramels de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        135.67,
        102,
        'Hors ligne',
        'Bretagne',
        2.06,
        0.45,
        10.54,
        4.3,
        145
    ),
    (
        3,
        3,
        'Affiche Vintage de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.',
        137.69,
        135,
        'Hors ligne',
        'Bretagne',
        1.47,
        0.45,
        12.16,
        4.2,
        26
    ),
    (
        4,
        2,
        'Écharpe Rayée de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        37.85,
        16,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.24,
        12.65,
        4.1,
        111
    ),
    (
        4,
        3,
        'Vareuse de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        51.36,
        183,
        'Hors ligne',
        'Bretagne',
        1.6,
        0.03,
        7.24,
        4.8,
        121
    ),
    (
        4,
        3,
        'Bracelet Ancre Durable',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.',
        150.55,
        126,
        'En ligne',
        'Bretagne',
        1.41,
        0.38,
        12.56,
        4.3,
        138
    ),
    (
        1,
        2,
        'Lampe Tempête de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        73.48,
        143,
        'Hors ligne',
        'Bretagne',
        0.33,
        0.08,
        8.45,
        4.2,
        59
    ),
    (
        4,
        1,
        'Sac Voile de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.',
        167.42,
        104,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.3,
        11.26,
        4.9,
        102
    ),
    (
        4,
        1,
        'Caramels de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        61.58,
        129,
        'En ligne',
        'Bretagne',
        0.18,
        0.17,
        11.11,
        4.4,
        47
    ),
    (
        4,
        2,
        'Pendentif Hermine de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        35.65,
        123,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.14,
        7.95,
        4.5,
        91
    ),
    (
        2,
        1,
        'Ciré Navy Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.',
        19.84,
        94,
        'En ligne',
        'Bretagne',
        0.75,
        0.04,
        13.62,
        4.0,
        12
    ),
    (
        3,
        1,
        'Vareuse de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        51.2,
        184,
        'En ligne',
        'Bretagne',
        0.84,
        0.19,
        10.45,
        5.0,
        34
    ),
    (
        1,
        2,
        'Pendentif Hermine Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        47.48,
        156,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.32,
        5.92,
        4.8,
        35
    ),
    (
        4,
        1,
        'Galettes de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.',
        89.39,
        130,
        'Hors ligne',
        'Bretagne',
        0.41,
        0.48,
        10.72,
        4.8,
        44
    ),
    (
        2,
        2,
        'Sac Voile Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.',
        148.16,
        73,
        'Hors ligne',
        'Bretagne',
        1.03,
        0.13,
        13.41,
        4.3,
        120
    ),
    (
        1,
        1,
        'Marinière de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.',
        50.09,
        71,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.44,
        11.31,
        4.3,
        7
    ),
    (
        4,
        3,
        'Sac Voile Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        102.77,
        9,
        'Hors ligne',
        'Bretagne',
        0.37,
        0.12,
        11.23,
        4.3,
        99
    ),
    (
        2,
        1,
        'Sac Voile Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        61.2,
        69,
        'Hors ligne',
        'Bretagne',
        0.77,
        0.36,
        7.84,
        4.7,
        52
    ),
    (
        1,
        1,
        'Pendentif Hermine Local',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.',
        167.37,
        80,
        'Hors ligne',
        'Bretagne',
        0.76,
        0.1,
        5.13,
        4.5,
        75
    ),
    (
        1,
        2,
        'Vareuse Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        118.5,
        125,
        'Hors ligne',
        'Bretagne',
        1.49,
        0.18,
        13.69,
        4.3,
        127
    ),
    (
        4,
        2,
        'Pendentif Hermine Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        116.38,
        82,
        'Hors ligne',
        'Bretagne',
        0.35,
        0.13,
        10.02,
        4.4,
        62
    ),
    (
        2,
        1,
        'Pendentif Hermine de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        21.38,
        194,
        'En ligne',
        'Bretagne',
        0.39,
        0.38,
        10.63,
        4.3,
        25
    ),
    (
        2,
        2,
        'Ciré Navy de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.',
        140.29,
        125,
        'En ligne',
        'Bretagne',
        0.94,
        0.12,
        11.36,
        4.7,
        121
    ),
    (
        4,
        1,
        'Pull Marin Authentique',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        181.69,
        41,
        'Hors ligne',
        'Bretagne',
        0.31,
        0.09,
        7.77,
        4.7,
        150
    ),
    (
        1,
        1,
        'Bolée à Cidre Local',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        103.33,
        25,
        'En ligne',
        'Bretagne',
        1.83,
        0.45,
        11.61,
        4.6,
        11
    ),
    (
        4,
        2,
        'Bol Breton de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.14,
        76,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.3,
        10.71,
        4.5,
        28
    ),
    (
        3,
        2,
        'Phare Miniature de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        141.1,
        78,
        'Hors ligne',
        'Bretagne',
        2.02,
        0.21,
        11.84,
        4.0,
        27
    ),
    (
        1,
        1,
        'Caramels Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        112.55,
        110,
        'Hors ligne',
        'Bretagne',
        0.26,
        0.26,
        10.6,
        4.5,
        118
    ),
    (
        4,
        1,
        'Vareuse de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.',
        101.61,
        12,
        'En ligne',
        'Bretagne',
        2.92,
        0.31,
        7.15,
        4.2,
        146
    ),
    (
        2,
        2,
        'Lampe Tempête Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        145.44,
        135,
        'En ligne',
        'Bretagne',
        2.15,
        0.21,
        9.34,
        4.5,
        121
    ),
    (
        4,
        1,
        'Bracelet Ancre de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.',
        159.31,
        111,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.4,
        7.4,
        4.0,
        81
    ),
    (
        2,
        2,
        'Coussin Triskell Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        112.71,
        121,
        'En ligne',
        'Bretagne',
        2.81,
        0.44,
        13.83,
        4.2,
        103
    ),
    (
        1,
        2,
        'Coussin Triskell Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        159.76,
        171,
        'En ligne',
        'Bretagne',
        2.94,
        0.25,
        5.33,
        4.5,
        89
    ),
    (
        1,
        2,
        'Lampe Tempête de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.75,
        44,
        'Hors ligne',
        'Bretagne',
        0.32,
        0.39,
        7.39,
        4.6,
        106
    ),
    (
        1,
        2,
        'Coussin Triskell Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        54.37,
        180,
        'En ligne',
        'Bretagne',
        2.77,
        0.5,
        11.72,
        4.4,
        30
    ),
    (
        2,
        1,
        'Bolée à Cidre de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.',
        20.61,
        96,
        'En ligne',
        'Bretagne',
        1.19,
        0.08,
        9.78,
        4.6,
        51
    ),
    (
        3,
        3,
        'Caramels Durable',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        37.05,
        123,
        'En ligne',
        'Bretagne',
        1.95,
        0.24,
        11.0,
        4.9,
        124
    ),
    (
        2,
        2,
        'Lampe Tempête Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        90.19,
        69,
        'Hors ligne',
        'Bretagne',
        1.42,
        0.16,
        13.99,
        4.9,
        32
    ),
    (
        3,
        1,
        'Bolée à Cidre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        134.41,
        75,
        'Hors ligne',
        'Bretagne',
        0.12,
        0.43,
        12.0,
        5.0,
        132
    ),
    (
        3,
        2,
        'Bonnet Miki Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        180.74,
        170,
        'Hors ligne',
        'Bretagne',
        0.21,
        0.4,
        5.3,
        4.4,
        38
    ),
    (
        4,
        1,
        'Bonnet Miki Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        182.65,
        47,
        'En ligne',
        'Bretagne',
        0.85,
        0.41,
        9.34,
        4.8,
        91
    ),
    (
        3,
        1,
        'Caramels de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        84.57,
        72,
        'En ligne',
        'Bretagne',
        1.66,
        0.23,
        11.06,
        4.7,
        102
    ),
    (
        1,
        1,
        'Marinière Premium',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        51.84,
        21,
        'Hors ligne',
        'Bretagne',
        1.94,
        0.24,
        11.31,
        4.6,
        34
    ),
    (
        1,
        2,
        'Pull Marin de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        35.64,
        121,
        'Hors ligne',
        'Bretagne',
        1.18,
        0.48,
        11.27,
        4.5,
        44
    ),
    (
        4,
        2,
        'Ciré Jaune de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        189.65,
        97,
        'En ligne',
        'Bretagne',
        0.39,
        0.35,
        9.9,
        5.0,
        96
    ),
    (
        1,
        3,
        'Lampe Tempête Authentique',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        122.86,
        10,
        'En ligne',
        'Bretagne',
        0.25,
        0.17,
        13.9,
        4.8,
        57
    ),
    (
        1,
        3,
        'Bonnet Miki de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        159.05,
        157,
        'En ligne',
        'Bretagne',
        0.11,
        0.43,
        6.3,
        4.1,
        69
    ),
    (
        3,
        3,
        'Marinière Authentique',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        12.98,
        72,
        'En ligne',
        'Bretagne',
        0.25,
        0.37,
        9.73,
        4.7,
        126
    ),
    (
        4,
        2,
        'Bracelet Ancre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.',
        181.75,
        173,
        'En ligne',
        'Bretagne',
        1.61,
        0.23,
        13.68,
        4.1,
        127
    ),
    (
        3,
        2,
        'Lampe Tempête de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        38.04,
        37,
        'Hors ligne',
        'Bretagne',
        0.9,
        0.32,
        9.94,
        4.3,
        140
    ),
    (
        3,
        2,
        'Pull Marin de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        177.85,
        110,
        'En ligne',
        'Bretagne',
        1.08,
        0.23,
        8.74,
        4.1,
        114
    ),
    (
        3,
        3,
        'Coussin Triskell Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        27.62,
        29,
        'En ligne',
        'Bretagne',
        2.26,
        0.19,
        6.17,
        4.1,
        148
    ),
    (
        3,
        3,
        'Galettes Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.',
        123.48,
        95,
        'Hors ligne',
        'Bretagne',
        0.4,
        0.26,
        6.39,
        4.5,
        32
    ),
    (
        1,
        1,
        'Bol Breton Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.',
        194.19,
        164,
        'Hors ligne',
        'Bretagne',
        1.88,
        0.32,
        5.24,
        4.9,
        73
    );

-- 10. PROMOTIONS (futures)
INSERT INTO
    _promotion (
        id_produit,
        promotion_debut,
        promotion_fin
    )
VALUES (
        1,
        '2025-12-20 00:00:00',
        '2027-12-25 23:59:00'
    ),
    (
        2,
        '2026-01-01 00:00:00',
        '2026-02-07 23:59:00'
    ),
    (
        3,
        '2026-02-16 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        4,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        5,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        6,
        '2026-06-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        7,
        '2026-01-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 9. RÉDUCTIONS (futures)
INSERT INTO
    _reduction (
        id_produit,
        reduction_pourcentage,
        reduction_debut,
        reduction_fin
    )
VALUES (
        1,
        10.00,
        '2026-01-05 00:00:00',
        '2026-09-19 23:59:00'
    ),
    (
        2,
        15.00,
        '2026-02-15 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        3,
        20.00,
        '2026-01-01 00:00:00',
        '2026-05-15 23:59:00'
    ),
    (
        4,
        25.00,
        '2026-01-20 00:00:00',
        '2026-02-26 23:59:00'
    ),
    (
        5,
        30.00,
        '2026-06-01 00:00:00',
        '2026-06-30 23:59:00'
    ),
    (
        6,
        60.00,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        7,
        55.00,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        8,
        70.00,
        '2026-01-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        9,
        65.00,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 12. IMAGES
INSERT INTO
    _image (i_lien, i_title, i_alt)
VALUES (
        '/img/photo/enceinte_bluetooth_waterproof.jpg',
        'Enceinte Bluetooth.jpg',
        'Image de l enceinte'
    ),
    (
        '/img/photo/ordinateur_portable_ultra.jpg',
        'Ordinateur portable.jpeg',
        'Image de l ordinateur'
    ),
    (
        '/img/photo/_cran_gaming_4k_27_.jpg',
        'Écran 4K.jpeg',
        'Image de l écran'
    ),
    (
        '/img/photo/console_nextgen.jpg',
        'Console NextGen.jpg',
        'Image de la console'
    ),
    (
        '/img/photo/montre_connect_e.jpg',
        'Montre connectée.jpg',
        'Image de la montre'
    ),
    (
        '/img/photo/raquette_de_tennis_pro.jpg',
        'Raquette tennis.jpg',
        'Image de la raquette'
    ),
    (
        '/img/photo/tablette_10_pouces.jpg',
        'Tablette.jpg',
        'Image de la tablette'
    ),
    (
        '/img/photo/tente_4_places.jpg',
        'Tente 4 places.jpg',
        'Image de la tente'
    ),
    (
        '/img/photo/veste_en_cuir.jpg',
        'Veste cuir.jpg',
        'Image de la veste'
    ),
    (
        '/img/photo/baskets_limited_edition.jpg',
        'Baskets limited.jpeg',
        'Image des baskets'
    ),
    (
        '/img/photo/chaussures_running.jpg',
        'Chaussures running.jpeg',
        'Image des chaussures'
    ),
    (
        '/img/photo/ballon_de_football.jpg',
        'Ballon football.jpg',
        'Image du ballon'
    ),
    (
        '/img/photo/casque_audio_bluetooth.jpg',
        'Casque audio.jpg',
        'Image du casque'
    ),
    (
        '/img/photo/clavier_m_canique_rgb.jpg',
        'Clavier.jpg',
        'Image du clavier'
    ),
    (
        '/img/photo/drone_professionnel_4k.jpg',
        'Drone 4K.jpg',
        'Image du drone'
    ),
    (
        '/img/photo/jean_slim.jpg',
        'Jean.jpg',
        'Image du jean'
    ),
    (
        '/img/photo/livre_cuisine_fran_aise.jpg',
        'Livre cuisine.jpeg',
        'Image du livre'
    ),
    (
        '/img/photo/manteau_d_hiver_imperm_able.jpg',
        'Manteau hiver.jpeg',
        'Image du manteau'
    ),
    (
        '/img/photo/sac___dos_urbain.jpg',
        'Sac à dos.jpeg',
        'Image du sac'
    ),
    (
        '/img/photo/smartphone_xpro.jpg',
        'Smartphone XPro.jpg',
        'Image du smartphone'
    ),
    (
        '/img/photo/sweat___capuche_premium.jpg',
        'Sweat à capuche.jpeg',
        'Image du sweat'
    ),
    (
        '/img/photo/t_shirt_coton_bio.jpg',
        'T-shirt.png',
        'Image du t-shirt'
    ),
    (
        '/img/photo/tapis_de_yoga.jpg',
        'Tapis yoga.jpeg',
        'Image du tapis'
    ),
    (
        '/img/photo/v_lo_de_route_carbone.jpg',
        'Vélo route.jpeg',
        'Image du vélo'
    ),
    (
        '/img/photo/logo_fashionhub.jpg',
        'Logo FashionHub.jpg',
        'Logo entreprise FashionHub'
    ),
    (
        '/img/photo/logo_techstore.jpg',
        'Logo TechStore.jpg',
        'Logo entreprise TechStore'
    ),
    (
        '/img/photo/affiche_vintage_de_dinard.jpg',
        'Affiche Vintage de Dinard',
        'Photo de Affiche Vintage de Dinard'
    ),
    (
        '/img/photo/affiche_vintage_de_vannes.jpg',
        'Affiche Vintage de Vannes',
        'Photo de Affiche Vintage de Vannes'
    ),
    (
        '/img/photo/bol_breton_bio.jpg',
        'Bol Breton Bio',
        'Photo de Bol Breton Bio'
    ),
    (
        '/img/photo/bol_breton_fait_main.jpg',
        'Bol Breton Fait main',
        'Photo de Bol Breton Fait main'
    ),
    (
        '/img/photo/bol_breton_premium.jpg',
        'Bol Breton Premium',
        'Photo de Bol Breton Premium'
    ),
    (
        '/img/photo/bol_breton_traditionnel.jpg',
        'Bol Breton Traditionnel',
        'Photo de Bol Breton Traditionnel'
    ),
    (
        '/img/photo/bol_breton_de_saint_malo.jpg',
        'Bol Breton de Saint-Malo',
        'Photo de Bol Breton de Saint-Malo'
    ),
    (
        '/img/photo/bol_e___cidre_artisanal.jpg',
        'Bolée à Cidre Artisanal',
        'Photo de Bolée à Cidre Artisanal'
    ),
    (
        '/img/photo/bol_e___cidre_local.jpg',
        'Bolée à Cidre Local',
        'Photo de Bolée à Cidre Local'
    ),
    (
        '/img/photo/bol_e___cidre_de_saint_malo.jpg',
        'Bolée à Cidre de Saint-Malo',
        'Photo de Bolée à Cidre de Saint-Malo'
    ),
    (
        '/img/photo/bonnet_miki_authentique.jpg',
        'Bonnet Miki Authentique',
        'Photo de Bonnet Miki Authentique'
    ),
    (
        '/img/photo/bonnet_miki_premium.jpg',
        'Bonnet Miki Premium',
        'Photo de Bonnet Miki Premium'
    ),
    (
        '/img/photo/bonnet_miki_traditionnel.jpg',
        'Bonnet Miki Traditionnel',
        'Photo de Bonnet Miki Traditionnel'
    ),
    (
        '/img/photo/bonnet_miki_de_carnac.jpg',
        'Bonnet Miki de Carnac',
        'Photo de Bonnet Miki de Carnac'
    ),
    (
        '/img/photo/bonnet_miki_de_concarneau.jpg',
        'Bonnet Miki de Concarneau',
        'Photo de Bonnet Miki de Concarneau'
    ),
    (
        '/img/photo/bracelet_ancre_artisanal.jpg',
        'Bracelet Ancre Artisanal',
        'Photo de Bracelet Ancre Artisanal'
    ),
    (
        '/img/photo/bracelet_ancre_durable.jpg',
        'Bracelet Ancre Durable',
        'Photo de Bracelet Ancre Durable'
    ),
    (
        '/img/photo/bracelet_ancre_fait_main.jpg',
        'Bracelet Ancre Fait main',
        'Photo de Bracelet Ancre Fait main'
    ),
    (
        '/img/photo/bracelet_ancre_de_brest.jpg',
        'Bracelet Ancre de Brest',
        'Photo de Bracelet Ancre de Brest'
    ),
    (
        '/img/photo/bracelet_ancre_de_carnac.jpg',
        'Bracelet Ancre de Carnac',
        'Photo de Bracelet Ancre de Carnac'
    ),
    (
        '/img/photo/bracelet_ancre_de_concarneau.jpg',
        'Bracelet Ancre de Concarneau',
        'Photo de Bracelet Ancre de Concarneau'
    ),
    (
        '/img/photo/caramels_artisanal.jpg',
        'Caramels Artisanal',
        'Photo de Caramels Artisanal'
    ),
    (
        '/img/photo/caramels_durable.jpg',
        'Caramels Durable',
        'Photo de Caramels Durable'
    ),
    (
        '/img/photo/caramels_de_carnac.jpg',
        'Caramels de Carnac',
        'Photo de Caramels de Carnac'
    ),
    (
        '/img/photo/caramels_de_dinard.jpg',
        'Caramels de Dinard',
        'Photo de Caramels de Dinard'
    ),
    (
        '/img/photo/caramels_de_roscoff.jpg',
        'Caramels de Roscoff',
        'Photo de Caramels de Roscoff'
    ),
    (
        '/img/photo/cir__jaune_de_vannes.jpg',
        'Ciré Jaune de Vannes',
        'Photo de Ciré Jaune de Vannes'
    ),
    (
        '/img/photo/cir__navy_artisanal.jpg',
        'Ciré Navy Artisanal',
        'Photo de Ciré Navy Artisanal'
    ),
    (
        '/img/photo/cir__navy_de_brest.jpg',
        'Ciré Navy de Brest',
        'Photo de Ciré Navy de Brest'
    ),
    (
        '/img/photo/cir__navy_de_concarneau.jpg',
        'Ciré Navy de Concarneau',
        'Photo de Ciré Navy de Concarneau'
    ),
    (
        '/img/photo/cir__navy_de_quimper.jpg',
        'Ciré Navy de Quimper',
        'Photo de Ciré Navy de Quimper'
    ),
    (
        '/img/photo/coussin_triskell_artisanal.jpg',
        'Coussin Triskell Artisanal',
        'Photo de Coussin Triskell Artisanal'
    ),
    (
        '/img/photo/coussin_triskell_bio.jpg',
        'Coussin Triskell Bio',
        'Photo de Coussin Triskell Bio'
    ),
    (
        '/img/photo/coussin_triskell_fait_main.jpg',
        'Coussin Triskell Fait main',
        'Photo de Coussin Triskell Fait main'
    ),
    (
        '/img/photo/coussin_triskell_premium.jpg',
        'Coussin Triskell Premium',
        'Photo de Coussin Triskell Premium'
    ),
    (
        '/img/photo/coussin_triskell_de_roscoff.jpg',
        'Coussin Triskell de Roscoff',
        'Photo de Coussin Triskell de Roscoff'
    ),
    (
        '/img/photo/galettes_artisanal.jpg',
        'Galettes Artisanal',
        'Photo de Galettes Artisanal'
    ),
    (
        '/img/photo/galettes_local.jpg',
        'Galettes Local',
        'Photo de Galettes Local'
    ),
    (
        '/img/photo/galettes_de_quimper.jpg',
        'Galettes de Quimper',
        'Photo de Galettes de Quimper'
    ),
    (
        '/img/photo/kabig_bio.jpg',
        'Kabig Bio',
        'Photo de Kabig Bio'
    ),
    (
        '/img/photo/lampe_temp_te_authentique.jpg',
        'Lampe Tempête Authentique',
        'Photo de Lampe Tempête Authentique'
    ),
    (
        '/img/photo/lampe_temp_te_local.jpg',
        'Lampe Tempête Local',
        'Photo de Lampe Tempête Local'
    ),
    (
        '/img/photo/lampe_temp_te_traditionnel.jpg',
        'Lampe Tempête Traditionnel',
        'Photo de Lampe Tempête Traditionnel'
    ),
    (
        '/img/photo/lampe_temp_te_de_quimper.jpg',
        'Lampe Tempête de Quimper',
        'Photo de Lampe Tempête de Quimper'
    ),
    (
        '/img/photo/lampe_temp_te_de_saint_malo.jpg',
        'Lampe Tempête de Saint-Malo',
        'Photo de Lampe Tempête de Saint-Malo'
    ),
    (
        '/img/photo/lampe_temp_te_de_vannes.jpg',
        'Lampe Tempête de Vannes',
        'Photo de Lampe Tempête de Vannes'
    ),
    (
        '/img/photo/marini_re_authentique.jpg',
        'Marinière Authentique',
        'Photo de Marinière Authentique'
    ),
    (
        '/img/photo/marini_re_local.jpg',
        'Marinière Local',
        'Photo de Marinière Local'
    ),
    (
        '/img/photo/marini_re_premium.jpg',
        'Marinière Premium',
        'Photo de Marinière Premium'
    ),
    (
        '/img/photo/marini_re_de_pont_aven.jpg',
        'Marinière de Pont-Aven',
        'Photo de Marinière de Pont-Aven'
    ),
    (
        '/img/photo/pendentif_hermine_bio.jpg',
        'Pendentif Hermine Bio',
        'Photo de Pendentif Hermine Bio'
    ),
    (
        '/img/photo/pendentif_hermine_fait_main.jpg',
        'Pendentif Hermine Fait main',
        'Photo de Pendentif Hermine Fait main'
    ),
    (
        '/img/photo/pendentif_hermine_local.jpg',
        'Pendentif Hermine Local',
        'Photo de Pendentif Hermine Local'
    ),
    (
        '/img/photo/pendentif_hermine_traditionnel.jpg',
        'Pendentif Hermine Traditionnel',
        'Photo de Pendentif Hermine Traditionnel'
    ),
    (
        '/img/photo/pendentif_hermine_de_roscoff.jpg',
        'Pendentif Hermine de Roscoff',
        'Photo de Pendentif Hermine de Roscoff'
    ),
    (
        '/img/photo/pendentif_hermine_de_saint_malo.jpg',
        'Pendentif Hermine de Saint-Malo',
        'Photo de Pendentif Hermine de Saint-Malo'
    ),
    (
        '/img/photo/phare_miniature_fait_main.jpg',
        'Phare Miniature Fait main',
        'Photo de Phare Miniature Fait main'
    ),
    (
        '/img/photo/phare_miniature_de_quimper.jpg',
        'Phare Miniature de Quimper',
        'Photo de Phare Miniature de Quimper'
    ),
    (
        '/img/photo/pull_marin_authentique.jpg',
        'Pull Marin Authentique',
        'Photo de Pull Marin Authentique'
    ),
    (
        '/img/photo/pull_marin_bio.jpg',
        'Pull Marin Bio',
        'Photo de Pull Marin Bio'
    ),
    (
        '/img/photo/pull_marin_de_brest.jpg',
        'Pull Marin de Brest',
        'Photo de Pull Marin de Brest'
    ),
    (
        '/img/photo/pull_marin_de_carnac.jpg',
        'Pull Marin de Carnac',
        'Photo de Pull Marin de Carnac'
    ),
    (
        '/img/photo/pull_marin_de_quimper.jpg',
        'Pull Marin de Quimper',
        'Photo de Pull Marin de Quimper'
    ),
    (
        '/img/photo/pull_marin_de_saint_malo.jpg',
        'Pull Marin de Saint-Malo',
        'Photo de Pull Marin de Saint-Malo'
    ),
    (
        '/img/photo/sac_voile_bio.jpg',
        'Sac Voile Bio',
        'Photo de Sac Voile Bio'
    ),
    (
        '/img/photo/sac_voile_durable.jpg',
        'Sac Voile Durable',
        'Photo de Sac Voile Durable'
    ),
    (
        '/img/photo/sac_voile_premium.jpg',
        'Sac Voile Premium',
        'Photo de Sac Voile Premium'
    ),
    (
        '/img/photo/sac_voile_de_concarneau.jpg',
        'Sac Voile de Concarneau',
        'Photo de Sac Voile de Concarneau'
    ),
    (
        '/img/photo/sac_voile_de_pont_aven.jpg',
        'Sac Voile de Pont-Aven',
        'Photo de Sac Voile de Pont-Aven'
    ),
    (
        '/img/photo/vareuse_artisanal.jpg',
        'Vareuse Artisanal',
        'Photo de Vareuse Artisanal'
    ),
    (
        '/img/photo/vareuse_durable.jpg',
        'Vareuse Durable',
        'Photo de Vareuse Durable'
    ),
    (
        '/img/photo/vareuse_de_dinard.jpg',
        'Vareuse de Dinard',
        'Photo de Vareuse de Dinard'
    ),
    (
        '/img/photo/vareuse_de_pont_aven.jpg',
        'Vareuse de Pont-Aven',
        'Photo de Vareuse de Pont-Aven'
    ),
    (
        '/img/photo/vareuse_de_saint_malo.jpg',
        'Vareuse de Saint-Malo',
        'Photo de Vareuse de Saint-Malo'
    ),
    (
        '/img/photo/avatar_jean.jpg',
        'Avatar Jean.jpeg',
        'Photo de profil Jean'
    ),
    (
        '/img/photo/avatar_marie.jpg',
        'Avatar Marie.jpg',
        'Photo de profil Marie'
    ),
    (
        '/img/photo/_charpe_ray_e_authentique.jpg',
        'Écharpe Rayée Authentique',
        'Photo de Écharpe Rayée Authentique'
    ),
    (
        '/img/photo/_charpe_ray_e_bio.jpg',
        'Écharpe Rayée Bio',
        'Photo de Écharpe Rayée Bio'
    ),
    (
        '/img/photo/_charpe_ray_e_fait_main.jpg',
        'Écharpe Rayée Fait main',
        'Photo de Écharpe Rayée Fait main'
    ),
    (
        '/img/photo/_charpe_ray_e_de_brest.jpg',
        'Écharpe Rayée de Brest',
        'Photo de Écharpe Rayée de Brest'
    ),
    (
        '/img/photo/_charpe_ray_e_de_dinard.jpg',
        'Écharpe Rayée de Dinard',
        'Photo de Écharpe Rayée de Dinard'
    ),
    (
        '/img/photo/_charpe_ray_e_de_saint_malo.jpg',
        'Écharpe Rayée de Saint-Malo',
        'Photo de Écharpe Rayée de Saint-Malo'
    ),
    (
        '/img/photo/5_S01618f64dc714163846501cb2c2e0f0fN.webp',
        '5_S01618f64dc714163846501cb2c2e0f0fN.webp',
        'photo du produit Robe d été'
    );

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO
    _represente_produit (id_image, id_produit)
VALUES (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 6),
    (10, 8),
    (11, 7),
    (12, 9),
    (13, 10),
    (14, 11),
    (15, 12),
    (16, 13),
    (17, 14),
    (18, 15),
    (19, 16),
    (20, 17),
    (21, 18),
    (22, 19),
    (23, 20),
    (24, 21),
    (25, 22),
    (26, 23),
    (27, 24),
    (28, 25),
    (29, 26),
    (30, 27),
    (31, 28),
    (32, 29),
    (33, 30),
    (34, 31),
    (35, 32),
    (36, 33),
    (37, 34),
    (38, 35),
    (39, 36),
    (40, 37),
    (41, 38),
    (42, 39),
    (43, 40),
    (44, 41),
    (45, 42),
    (46, 43),
    (47, 44),
    (48, 45),
    (49, 46),
    (50, 47),
    (51, 48),
    (52, 49),
    (53, 50),
    (54, 51),
    (55, 52),
    (56, 53),
    (57, 54),
    (58, 55),
    (59, 56),
    (60, 57),
    (61, 58),
    (62, 59),
    (63, 60),
    (64, 61),
    (65, 62),
    (66, 63),
    (67, 64),
    (68, 65),
    (69, 66),
    (70, 67),
    (71, 68),
    (72, 69),
    (73, 70),
    (74, 71),
    (75, 72),
    (76, 73),
    (77, 74),
    (78, 75),
    (79, 76),
    (80, 77),
    (81, 78),
    (82, 79),
    (83, 80),
    (84, 81),
    (85, 82),
    (86, 83),
    (87, 84),
    (88, 85),
    (89, 86),
    (90, 87),
    (91, 88),
    (92, 89),
    (93, 90),
    (94, 91),
    (95, 92),
    (96, 93),
    (97, 94),
    (98, 95),
    (99, 96),
    (100, 97),
    (101, 98),
    (102, 99),
    (103, 100),
    (104, 101),
    (105, 102),
    (106, 103),
    (107, 104),
    (108, 105);

-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO
    _represente_compte (id_image, id_compte)
VALUES (6, 4),
    (7, 5),
    (8, 2),
    (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO
    _fait_partie_de (id_produit, id_categorie)
VALUES (1, 1),
    (1, 7),
    (2, 1),
    (2, 7),
    (3, 2),
    (3, 8),
    (4, 2),
    (4, 8),
    (5, 2),
    (5, 9),
    (6, 1),
    (6, 3),
    (7, 3),
    (8, 1),
    (8, 3),
    (8, 5),
    (9, 5),
    (9, 10),
    (10, 1),
    (10, 7),
    (11, 5),
    (12, 2),
    (12, 8),
    (13, 6),
    (14, 5),
    (15, 1),
    (15, 7),
    (16, 1),
    (16, 7),
    (17, 2),
    (17, 8),
    (18, 5),
    (19, 1),
    (19, 7),
    (20, 10),
    (21, 5),
    (22, 1),
    (22, 3),
    (23, 2),
    (23, 8),
    (24, 4),
    (24, 5),
    (25, 1),
    (25, 3),
    (26, 2),
    (26, 8),
    (27, 2),
    (27, 3),
    (27, 8),
    (28, 4),
    (29, 2),
    (29, 3),
    (30, 2),
    (30, 3),
    (31, 2),
    (31, 8),
    (31, 9),
    (32, 3),
    (33, 2),
    (33, 8),
    (33, 9),
    (34, 3),
    (35, 3),
    (36, 3),
    (37, 2),
    (37, 3),
    (38, 4),
    (39, 2),
    (39, 3),
    (40, 2),
    (40, 3),
    (41, 2),
    (41, 3),
    (41, 8),
    (42, 2),
    (42, 8),
    (42, 9),
    (43, 4),
    (44, 4),
    (45, 2),
    (45, 8),
    (46, 4),
    (47, 2),
    (47, 8),
    (48, 2),
    (48, 8),
    (49, 2),
    (49, 8),
    (49, 9),
    (50, 4),
    (51, 4),
    (52, 3),
    (53, 4),
    (54, 4),
    (55, 2),
    (55, 3),
    (56, 2),
    (56, 8),
    (57, 3),
    (58, 4),
    (59, 3),
    (60, 4),
    (61, 3),
    (62, 2),
    (62, 8),
    (62, 9),
    (63, 2),
    (63, 8),
    (64, 3),
    (65, 4),
    (66, 3),
    (67, 2),
    (67, 8),
    (67, 9),
    (68, 3),
    (69, 3),
    (70, 3),
    (71, 2),
    (71, 8),
    (72, 3),
    (73, 3),
    (74, 2),
    (74, 8),
    (74, 9),
    (75, 2),
    (75, 8),
    (76, 4),
    (77, 4),
    (78, 4),
    (79, 4),
    (80, 2),
    (80, 8),
    (81, 4),
    (82, 3),
    (83, 4),
    (84, 4),
    (85, 4),
    (86, 4),
    (87, 4),
    (88, 4),
    (89, 4),
    (90, 4),
    (91, 2),
    (91, 3),
    (91, 8),
    (92, 2),
    (92, 3),
    (92, 8),
    (93, 4),
    (94, 2),
    (94, 8),
    (94, 9),
    (95, 2),
    (95, 8),
    (96, 2),
    (96, 8),
    (96, 9),
    (97, 4),
    (98, 2),
    (98, 3),
    (98, 8),
    (99, 2),
    (99, 8),
    (99, 9),
    (100, 3),
    (101, 4),
    (102, 2),
    (102, 8),
    (103, 4),
    (104, 4),
    (105, 4);

-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO
    _est_dote_de (id_produit, code_hexa)
VALUES (1, '#000000'),
    (1, '#FFFFFF'),
    (2, '#808080'),
    (3, '#0000FF'),
    (3, '#FF0000'),
    (3, '#00FF00'),
    (4, '#0000FF'),
    (4, '#000000'),
    (5, '#FF0000'),
    (5, '#FFFFFF'),
    (6, '#000000'),
    (7, '#808080'),
    (8, '#000000'),
    (9, '#0000FF'),
    (9, '#FF0000'),
    (10, '#808080'),
    (11, '#FFFFFF'),
    (12, '#000000'),
    (12, '#8B4513'),
    (14, '#EE82EE'),
    (14, '#87CEEB'),
    (15, '#000000'),
    (16, '#000000'),
    (16, '#FFFFFF'),
    (17, '#808080'),
    (17, '#000000'),
    (18, '#FFFFFF'),
    (18, '#000000'),
    (19, '#000000'),
    (20, '#FFFFFF'),
    (20, '#000000'),
    (21, '#0000FF'),
    (21, '#FF0000'),
    (22, '#808080'),
    (23, '#000000'),
    (23, '#8B4513'),
    (24, '#87CEEB'),
    (24, '#32CD32'),
    (25, '#000000'),
    (25, '#FF0000'),
    (26, '#8B4513'),
    (27, '#0000FF'),
    (28, '#FF0000'),
    (29, '#8B4513'),
    (30, '#00FF00'),
    (31, '#000000'),
    (32, '#8B4513'),
    (33, '#87CEEB'),
    (34, '#FFFFFF'),
    (35, '#FFFFFF'),
    (36, '#EE82EE'),
    (37, '#FFFFFF'),
    (38, '#0000FF'),
    (39, '#0000FF'),
    (40, '#000000'),
    (41, '#000000'),
    (42, '#FFFFFF'),
    (43, '#8B4513'),
    (44, '#87CEEB'),
    (45, '#87CEEB'),
    (46, '#32CD32'),
    (47, '#87CEEB'),
    (48, '#00FF00'),
    (49, '#FFA500'),
    (50, '#EE82EE'),
    (51, '#FF0000'),
    (52, '#FFFF00'),
    (53, '#FFFFFF'),
    (54, '#0000FF'),
    (55, '#FFFFFF'),
    (56, '#808080'),
    (57, '#00FF00'),
    (58, '#FFFF00'),
    (59, '#00FF00'),
    (60, '#FFA500'),
    (61, '#00FF00'),
    (62, '#FFFFFF'),
    (63, '#00FF00'),
    (64, '#87CEEB'),
    (65, '#EE82EE'),
    (66, '#FFFF00'),
    (67, '#808080'),
    (68, '#FFA500'),
    (69, '#00FF00'),
    (70, '#32CD32'),
    (71, '#0000FF'),
    (72, '#00FF00'),
    (73, '#8B4513'),
    (74, '#FFA500'),
    (75, '#32CD32'),
    (76, '#87CEEB'),
    (77, '#FFFF00'),
    (78, '#0000FF'),
    (79, '#8B4513'),
    (80, '#0000FF'),
    (81, '#EE82EE'),
    (82, '#8B4513'),
    (83, '#FFFF00'),
    (84, '#8B4513'),
    (85, '#FFFF00'),
    (86, '#32CD32'),
    (87, '#EE82EE'),
    (88, '#0000FF'),
    (89, '#EE82EE'),
    (90, '#FFFFFF'),
    (91, '#000000'),
    (92, '#FFFFFF'),
    (93, '#808080'),
    (94, '#808080'),
    (95, '#00FF00'),
    (96, '#0000FF'),
    (97, '#EE82EE'),
    (98, '#000000'),
    (99, '#808080'),
    (100, '#808080'),
    (101, '#0000FF'),
    (102, '#87CEEB'),
    (103, '#FFA500'),
    (104, '#0000FF'),
    (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO
    _seuil_alerte (nb_seuil, message_seuil)
VALUES (
        10,
        'Stock faible - Envisager un réapprovisionnement'
    ),
    (
        5,
        'Stock critique - Réapprovisionnement urgent'
    ),
    (
        3,
        'Rupture imminente - Commander immédiatement'
    ),
    (
        20,
        'Stock normal - Surveillance recommandée'
    ),
    (
        1,
        'Rupture de stock - Produit indisponible'
    );

INSERT INTO
    _adresse (
        id_compte,
        a_numero,
        a_adresse,
        a_ville,
        a_code_postal,
        a_pays
    )
VALUES (
        4,
        13,
        'rue du Pillard',
        'Rennes',
        35590,
        'France'
    );

-- 18. PANIERS/COMMANDES
INSERT INTO
    _panier_commande (id_client, timestamp_commande)
VALUES (1, '2025-11-01 10:30:00'),
    (2, '2025-11-02 14:45:00'),
    (3, '2025-11-03 09:15:00'),
    (1, NULL),
    (4, '2025-11-04 16:20:00'),
    (6, '2025-11-05 11:00:00'),
    (2, NULL),
    (5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO
    _contient (
        id_panier,
        id_produit,
        quantite,
        prix_unitaire,
        remise_unitaire,
        frais_de_port,
        TVA
    )
VALUES (
        1,
        1,
        1,
        599.99,
        0.0,
        5.99,
        20.0
    ),
    (
        1,
        6,
        1,
        149.99,
        0.0,
        5.99,
        20.0
    ),
    (
        2,
        3,
        2,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        2,
        4,
        1,
        49.99,
        0.0,
        4.99,
        20.0
    ),
    (
        3,
        2,
        1,
        899.99,
        0.0,
        9.99,
        20.0
    ),
    (
        4,
        7,
        1,
        69.99,
        0.0,
        6.99,
        20.0
    ),
    (
        5,
        5,
        1,
        39.99,
        0.0,
        4.99,
        20.0
    ),
    (
        5,
        8,
        1,
        199.99,
        0.0,
        3.99,
        20.0
    ),
    (
        6,
        9,
        2,
        89.99,
        0.0,
        5.99,
        20.0
    ),
    (
        7,
        10,
        1,
        299.99,
        0.0,
        7.99,
        20.0
    ),
    (
        8,
        11,
        1,
        29.99,
        0.0,
        4.99,
        20.0
    ),
    (
        8,
        13,
        1,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        8,
        14,
        1,
        34.99,
        0.0,
        5.99,
        20.0
    );

-- 20. FACTURES
INSERT INTO
    _facture (
        id_panier,
        id_adresse,
        f_total_ht,
        f_total_remise,
        f_total_ttc
    )
VALUES (1, 1, 755.98, 0.0, 907.18),
    (2, 1, 103.96, 0.0, 124.75),
    (3, 1, 909.98, 0.0, 1091.98),
    (5, 1, 248.97, 0.0, 298.76),
    (6, 1, 185.97, 0.0, 223.16),
    (8, 1, 95.96, 0.0, 115.15);

-- 21. PAIEMENTS
INSERT INTO
    _paiement (
        id_facture,
        mode_paiement,
        numero_carte,
        mois_annee_expiration,
        cryptogramme_carte,
        timestamp_paiement
    )
VALUES (
        1,
        'CB',
        '1234567890123456',
        '12/27',
        '123',
        '2025-11-01 10:35:00'
    ),
    (
        2,
        'CB',
        '6543210987654321',
        '06/26',
        '456',
        '2025-11-02 14:50:00'
    ),
    (
        3,
        'CB',
        '1111222233334444',
        '03/28',
        '789',
        '2025-11-03 09:20:00'
    ),
    (
        4,
        'CB',
        '9999888877776666',
        '09/27',
        '321',
        '2025-11-04 16:25:00'
    ),
    (
        5,
        'CB',
        '5555666677778888',
        '11/26',
        '654',
        '2025-11-05 11:05:00'
    ),
    (
        6,
        'CB',
        '4444333322221111',
        '08/27',
        '987',
        '2025-11-06 13:35:00'
    );

-- 22. LIVRAISONS
INSERT INTO
    _livraison (
        id_facture,
        date_livraison,
        etat_livraison
    )
VALUES (1, '2025-11-05', 'Livré'),
    (2, '2025-11-06', 'Livré'),
    (3, '2025-11-08', 'En transit'),
    (4, NULL, 'En préparation'),
    (5, '2025-11-09', 'Livré'),
    (6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO
    _definie_pour (id_seuil, id_compte)
VALUES (1, 2),
    (2, 2),
    (3, 2),
    (4, 2),
    (5, 2),
    (1, 3),
    (2, 3),
    (3, 3),
    (5, 3),
    (1, 10),
    (2, 10),
    (3, 10),
    (4, 10),
    (5, 10),
    (5, 1);

-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;

UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;

UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;

UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;

UPDATE cobrec1._commentaire SET a_note = 0.0;
----------- WbStatement -----------
##sqlwb.pos=97443
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;

CREATE SCHEMA cobrec1;

SET SCHEMA 'cobrec1';

-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (
        civilite IN (
            'M.',
            'Mme',
            'Inconnu',
            'Ne souhaite pas s''exprimer',
            'Autre'
        )
    ),
    CONSTRAINT verif_compte_email CHECK (
        email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'
    ),
    CONSTRAINT verif_compte_num_telephone CHECK (
        num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$'
    )
);

ALTER TABLE ONLY cobrec1._compte
ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11, 2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (
        type_couleur IN (
            'Vert',
            'Jaune',
            'Rouge',
            'Noir',
            'Blanc',
            'Bleu',
            'Violet',
            'Orange',
            'Gris',
            'Marron'
        )
    )
);

ALTER TABLE ONLY cobrec1._couleur
ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4, 1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (
        montant_TVA >= 0.00
        AND montant_TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11, 2) DEFAULT 0.0,
    p_volume numeric(11, 2) DEFAULT 0.0,
    p_frais_de_port numeric(11, 2) DEFAULT 0.0,
    p_prix numeric(11, 2) NOT NULL,
    p_note numeric(2, 1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (
        p_note >= 0
        AND p_note <= 5
    ),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (
        p_statut IN (
            'Ébauche',
            'En ligne',
            'Hors ligne',
            'Supprimé'
        )
    ),
    CONSTRAINT verif_produit_origine CHECK (
        p_origine IN (
            'Inconnu',
            'Bretagne',
            'France',
            'UE',
            'Hors UE'
        )
    )
);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) REFERENCES cobrec1._vendeur (id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) REFERENCES cobrec1._TVA (id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5, 2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (
        reduction_pourcentage >= 0.00
        AND reduction_pourcentage <= 100.00
    ),
    /*CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_reduction_fin CHECK (
        reduction_fin > reduction_debut
    )
);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    /*CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_promotion_fin CHECK (
        promotion_fin > promotion_debut
    )
);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11, 2) DEFAULT 0.0,
    f_total_remise numeric(11, 2) DEFAULT 0.0,
    f_total_ttc numeric(11, 2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) REFERENCES cobrec1._adresse (id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2, 1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (
        vote_type IN ('like', 'dislike')
    )
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2, 1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (
        a_note IN (
            NULL,
            0.0,
            0.5,
            1.0,
            1.5,
            2.0,
            2.5,
            3.0,
            3.5,
            4.0,
            4.5,
            5.0
        )
    )
);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) REFERENCES cobrec1._livraison (id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison, id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (
        type_signalement IN (
            'signale_avis',
            'signale_compte',
            'signale_produit'
        )
    )
);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11, 2) NOT NULL,
    remise_unitaire numeric(11, 2) DEFAULT 0.0,
    frais_de_port numeric(11, 2) DEFAULT 0.0,
    TVA numeric(4, 1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (
        TVA >= 0.00
        AND TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
-- CREATE TABLE cobrec1._represente_promotion (
--     id_image integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image)
--             REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) REFERENCES cobrec1._categorie_produit (id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) REFERENCES cobrec1._couleur (code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction)
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) REFERENCES cobrec1._seuil_alerte (id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();

CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

CREATE FUNCTION mise_sur_marche_produit_insert()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche_insert
AFTER INSERT on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit_insert();

CREATE FUNCTION update_p_modif_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_modif = OLD.p_modif) THEN
        NEW.p_modif = CURRENT_TIMESTAMP;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_update_p_modif_produit
BEFORE UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE update_p_modif_produit();

CREATE FUNCTION produit_deja_en_reduction_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_insert
BEFORE INSERT on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_insert();

CREATE FUNCTION produit_deja_en_reduction_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_update
BEFORE UPDATE on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_update();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO
    _compte (
        nom,
        prenom,
        email,
        num_telephone,
        mdp,
        etat_A2F,
        nb_fois_signale,
        nb_signalements_avis,
        nb_cpts_signales,
        nb_avis_signales
    )
VALUES (
        'Maeleau',
        'Le Hyver',
        'admin@cobrec.fr',
        '0601020304',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Lopicier',
        'Mallo',
        'vendeur1@example.com',
        '0612345678',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Elouard',
        'Jean-Jacques',
        'vendeur2@shop.fr',
        '0623456789',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        1,
        0,
        0,
        0
    ),
    (
        'Jean',
        'Dupont',
        'client1@gmail.com',
        '0634567890',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        1,
        0,
        0
    ),
    (
        'Marie',
        'Martin',
        'client2@yahoo.fr',
        '0645678901',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        1,
        0
    ),
    (
        'Pierre',
        'Durand',
        'client3@outlook.com',
        '0656789012',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Sophie',
        'Bernard',
        'client4@free.fr',
        '0667890123',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Lucas',
        'Petit',
        'client5@orange.fr',
        '0678901234',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Emma',
        'Lefebvre',
        'client6@wanadoo.fr',
        '0689012345',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Martinière',
        'Yvili',
        'vendeur3@boutique.fr',
        '0690123456',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    );

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO
    _vendeur (
        id_compte,
        SIREN,
        raison_sociale,
        denomination,
        nb_produits_crees
    )
VALUES (
        2,
        '123456789',
        'TechStore SARL',
        'TechStore',
        5
    ),
    (
        3,
        '987654321',
        'FashionHub SAS',
        'FashionHub',
        3
    ),
    (
        10,
        '456789123',
        'SportPro EURL',
        'SportPro',
        2
    );

-- 4. CLIENTS
INSERT INTO
    _client (
        id_compte,
        c_pseudo,
        c_nb_produits_achetes,
        c_depense_totale,
        c_cloture,
        c_datenaissance
    )
VALUES (
        4,
        'jdupont',
        2,
        907.18,
        FALSE,
        '1985-03-15'
    ),
    (
        5,
        'mmartin',
        3,
        124.75,
        FALSE,
        '1990-07-22'
    ),
    (
        6,
        'pdurand',
        1,
        1091.98,
        FALSE,
        '1988-11-10'
    ),
    (
        7,
        'sbernard',
        2,
        298.76,
        FALSE,
        '1995-05-30'
    ),
    (
        8,
        'lpetit',
        0,
        0.0,
        FALSE,
        '2000-01-18'
    ),
    (
        9,
        'elefebvre',
        1,
        179.98,
        FALSE,
        '1992-09-25'
    );

-- 5. ADRESSES
INSERT INTO
    _adresse (
        id_compte,
        a_adresse,
        a_ville,
        a_code_postal,
        a_complement
    )
VALUES (
        4,
        '15 rue de la Paix',
        'Paris',
        '75001',
        'Apt 5'
    ),
    (
        5,
        '23 avenue des Champs',
        'Lyon',
        '69001',
        NULL
    ),
    (
        6,
        '8 boulevard Victor Hugo',
        'Marseille',
        '13001',
        'Bâtiment B'
    ),
    (
        7,
        '42 rue du Commerce',
        'Toulouse',
        '31000',
        NULL
    ),
    (
        8,
        '67 place de la République',
        'Nice',
        '06000',
        '3ème étage'
    ),
    (
        9,
        '91 rue Principale',
        'Bordeaux',
        '33000',
        NULL
    ),
    (
        2,
        '12 avenue du Commerce',
        'Paris',
        '75015',
        'Entrepôt A'
    ),
    (
        3,
        '55 rue de la Mode',
        'Lyon',
        '69002',
        NULL
    ),
    (
        10,
        '78 boulevard du Sport',
        'Marseille',
        '13008',
        'Zone industrielle'
    );

-- 6. COULEURS
INSERT INTO
    _couleur (code_hexa, nom, type_couleur)
VALUES (
        '#FF0000',
        'Rouge vif',
        'Rouge'
    ),
    (
        '#0000FF',
        'Bleu marine',
        'Bleu'
    ),
    ('#000000', 'Noir', 'Noir'),
    (
        '#FFFFFF',
        'Blanc pur',
        'Blanc'
    ),
    (
        '#00FF00',
        'Vert émeraude',
        'Vert'
    ),
    (
        '#FFFF00',
        'Jaune citron',
        'Jaune'
    ),
    ('#FFA500', 'Orange', 'Orange'),
    ('#808080', 'Gris', 'Gris'),
    (
        '#8B4513',
        'Marron chocolat',
        'Marron'
    ),
    ('#EE82EE', 'Violet', 'Violet'),
    (
        '#87CEEB',
        'Bleu ciel',
        'Bleu'
    ),
    (
        '#32CD32',
        'Vert lime',
        'Vert'
    );

-- 7. CATÉGORIES
INSERT INTO
    _categorie_produit (nom_categorie)
VALUES ('Électronique'),
    ('Vêtements'),
    ('Accessoires'),
    ('Maison'),
    ('Sport'),
    ('Livres'),
    ('Informatique'),
    ('Mode homme'),
    ('Mode femme'),
    ('Chaussures');

-- 8. TVA
INSERT INTO
    _TVA (montant_TVA, libelle_TVA)
VALUES (20.0, 'TVA normale'),
    (10.0, 'TVA intermédiaire'),
    (5.5, 'TVA réduite'),
    (2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO
    _produit (
        id_TVA,
        id_vendeur,
        p_nom,
        p_description,
        p_prix,
        p_stock,
        p_statut,
        p_origine,
        p_poids,
        p_volume,
        p_frais_de_port,
        p_note,
        p_nb_ventes
    )
VALUES (
        1,
        1,
        'Smartphone XPro',
        'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G',
        599.99,
        35,
        'En ligne',
        'Bretagne',
        0.180,
        0.01,
        5.99,
        4.3,
        15
    ),
    (
        1,
        1,
        'Ordinateur portable Ultra',
        'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7',
        899.99,
        22,
        'En ligne',
        'Bretagne',
        2.5,
        0.03,
        9.99,
        4.0,
        8
    ),
    (
        1,
        2,
        'T-shirt coton bio',
        'T-shirt 100% coton biologique, coupe regular, diverses couleurs',
        24.99,
        58,
        'En ligne',
        'Bretagne',
        0.15,
        0.5,
        3.99,
        5.0,
        42
    ),
    (
        1,
        2,
        'Jean slim',
        'Jean coupe slim stretch, denim premium',
        49.99,
        62,
        'En ligne',
        'Bretagne',
        1.00,
        0.01,
        4.99,
        NULL,
        18
    ),
    (
        1,
        2,
        'Robe d été',
        'Robe légère et fluide pour l été, motifs floraux',
        39.99,
        48,
        'En ligne',
        'Bretagne',
        0.30,
        0.08,
        4.99,
        NULL,
        12
    ),
    (
        2,
        1,
        'Casque audio Bluetooth',
        'Casque sans fil avec réduction de bruit active, autonomie 30h',
        149.99,
        15,
        'En ligne',
        'Bretagne',
        0.25,
        0.02,
        5.99,
        4.5,
        25
    ),
    (
        1,
        2,
        'Sac à dos urbain',
        'Sac à dos pour ordinateur portable, compartiments multiples, imperméable',
        69.99,
        35,
        'En ligne',
        'Bretagne',
        0.60,
        0.15,
        6.99,
        NULL,
        10
    ),
    (
        1,
        1,
        'Montre connectée',
        'Montre sport avec GPS, cardiofréquencemètre, étanche 50m',
        199.99,
        15,
        'En ligne',
        'Bretagne',
        0.05,
        0.01,
        3.99,
        4.7,
        20
    ),
    (
        1,
        3,
        'Chaussures running',
        'Chaussures de course avec amorti premium, semelle respirante',
        89.99,
        54,
        'En ligne',
        'Bretagne',
        0.40,
        0.08,
        5.99,
        4.2,
        16
    ),
    (
        1,
        1,
        'Tablette 10 pouces',
        'Tablette Android, écran Full HD, 64Go, stylet inclus',
        299.99,
        16,
        'En ligne',
        'Bretagne',
        0.50,
        0.02,
        7.99,
        3.8,
        9
    ),
    (
        1,
        3,
        'Ballon de football',
        'Ballon officiel en cuir synthétique, taille 5',
        29.99,
        85,
        'En ligne',
        'Bretagne',
        0.45,
        0.06,
        4.99,
        4.6,
        35
    ),
    (
        1,
        2,
        'Veste en cuir',
        'Veste en cuir véritable, coupe motard, doublure intérieure',
        189.99,
        15,
        'En ligne',
        'Bretagne',
        1.20,
        0.01,
        8.99,
        NULL,
        5
    ),
    (
        3,
        1,
        'Livre cuisine française',
        'Recettes traditionnelles de cuisine française, 300 pages',
        24.99,
        28,
        'En ligne',
        'Bretagne',
        0.80,
        0.03,
        3.99,
        4.8,
        22
    ),
    (
        1,
        3,
        'Tapis de yoga',
        'Tapis antidérapant, épaisseur 6mm, avec sac de transport',
        34.99,
        52,
        'En ligne',
        'Bretagne',
        1.10,
        0.02,
        5.99,
        4.4,
        28
    ),
    (
        1,
        1,
        'Clavier mécanique RGB',
        'Clavier gamer avec rétroéclairage RGB, switches mécaniques',
        79.99,
        29,
        'En ligne',
        'Bretagne',
        0.90,
        0.04,
        5.99,
        4.1,
        11
    ),
    (
        1,
        1,
        'Console NextGen',
        'Console de jeu dernière génération, 1To SSD, 4K HDR',
        499.99,
        0,
        'Hors ligne',
        'France',
        3.5,
        0.02,
        14.99,
        4.8,
        25
    ),
    (
        1,
        2,
        'Sweat à capuche premium',
        'Sweat-shirt en coton bio, coupe oversize, poche kangourou',
        59.99,
        0,
        'Hors ligne',
        'France',
        0.70,
        0.03,
        5.99,
        4.4,
        18
    ),
    (
        1,
        3,
        'Raquette de tennis pro',
        'Raquette carbone, tension 25kg, grip confort',
        129.99,
        0,
        'Hors ligne',
        'France',
        0.35,
        0.02,
        6.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Écran gaming 4K 27"',
        'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms',
        349.99,
        0,
        'Hors ligne',
        'France',
        5.2,
        0.35,
        19.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Baskets limited edition',
        'Baskets cuir véritable, édition limitée, semelle comfort',
        179.99,
        0,
        'Hors ligne',
        'France',
        0.80,
        0.06,
        7.99,
        4.9,
        65
    ),
    (
        1,
        3,
        'Vélo de route carbone',
        'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses',
        1299.99,
        0,
        'Hors ligne',
        'UE',
        8.5,
        0.15,
        29.99,
        4.8,
        25
    ),
    (
        1,
        1,
        'Drone professionnel 4K',
        'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min',
        899.99,
        0,
        'Hors ligne',
        'UE',
        1.2,
        0.02,
        12.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Manteau d hiver imperméable',
        'Manteau longueur genoux, doublure polaire, coupe-vent',
        179.99,
        0,
        'Hors ligne',
        'UE',
        1.5,
        0.01,
        8.99,
        4.4,
        65
    ),
    (
        1,
        3,
        'Tente 4 places',
        'Tente familiale, double toit, arceaux aluminium, imperméable',
        249.99,
        0,
        'Hors ligne',
        'Hors UE',
        4.8,
        0.08,
        19.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Enceinte Bluetooth waterproof',
        'Enceinte portable, autonomie 24h, résistance IP67',
        129.99,
        0,
        'Hors ligne',
        'Hors UE',
        0.9,
        0.05,
        6.99,
        4.9,
        95
    ),
    (
        2,
        1,
        'Pull Marin de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.',
        36.37,
        31,
        'En ligne',
        'Bretagne',
        2.06,
        0.45,
        5.78,
        4.4,
        12
    ),
    (
        1,
        1,
        'Bonnet Miki de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.',
        121.37,
        6,
        'Hors ligne',
        'Bretagne',
        2.3,
        0.09,
        8.8,
        4.3,
        60
    ),
    (
        2,
        3,
        'Galettes Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        147.92,
        142,
        'En ligne',
        'Bretagne',
        0.46,
        0.46,
        5.71,
        4.3,
        97
    ),
    (
        1,
        3,
        'Écharpe Rayée Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        173.77,
        102,
        'En ligne',
        'Bretagne',
        0.91,
        0.32,
        8.28,
        4.4,
        58
    ),
    (
        1,
        2,
        'Écharpe Rayée de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.',
        197.02,
        168,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.12,
        7.92,
        4.8,
        19
    ),
    (
        4,
        2,
        'Ciré Navy de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        104.35,
        169,
        'En ligne',
        'Bretagne',
        1.43,
        0.14,
        7.22,
        4.6,
        72
    ),
    (
        4,
        3,
        'Bracelet Ancre Fait main',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        172.75,
        44,
        'Hors ligne',
        'Bretagne',
        1.92,
        0.4,
        8.8,
        4.1,
        102
    ),
    (
        1,
        3,
        'Marinière Local',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        74.29,
        80,
        'Hors ligne',
        'Bretagne',
        1.36,
        0.23,
        13.58,
        4.9,
        72
    ),
    (
        3,
        1,
        'Bracelet Ancre de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.',
        40.53,
        140,
        'En ligne',
        'Bretagne',
        2.76,
        0.3,
        9.4,
        4.1,
        97
    ),
    (
        3,
        3,
        'Pendentif Hermine Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        164.23,
        199,
        'Hors ligne',
        'Bretagne',
        1.64,
        0.07,
        10.94,
        4.9,
        47
    ),
    (
        1,
        3,
        'Sac Voile de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.',
        136.95,
        100,
        'En ligne',
        'Bretagne',
        1.37,
        0.26,
        6.09,
        4.2,
        91
    ),
    (
        2,
        3,
        'Écharpe Rayée de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        21.13,
        22,
        'Hors ligne',
        'Bretagne',
        2.73,
        0.43,
        5.64,
        4.2,
        129
    ),
    (
        1,
        2,
        'Coussin Triskell de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        134.55,
        95,
        'Hors ligne',
        'Bretagne',
        1.33,
        0.24,
        11.56,
        4.7,
        30
    ),
    (
        1,
        3,
        'Écharpe Rayée Authentique',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.',
        36.49,
        51,
        'En ligne',
        'Bretagne',
        0.91,
        0.13,
        13.31,
        4.4,
        145
    ),
    (
        4,
        3,
        'Écharpe Rayée Bio',
        'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.',
        50.4,
        107,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.09,
        5.02,
        4.4,
        121
    ),
    (
        1,
        3,
        'Bonnet Miki Authentique',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        119.47,
        143,
        'En ligne',
        'Bretagne',
        0.28,
        0.16,
        5.45,
        4.5,
        140
    ),
    (
        3,
        1,
        'Ciré Navy de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        187.96,
        150,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.3,
        10.57,
        4.4,
        149
    ),
    (
        1,
        1,
        'Bol Breton Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.',
        66.7,
        85,
        'En ligne',
        'Bretagne',
        2.79,
        0.47,
        5.08,
        4.6,
        149
    ),
    (
        1,
        3,
        'Bol Breton Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        176.18,
        99,
        'Hors ligne',
        'Bretagne',
        0.93,
        0.22,
        9.89,
        4.3,
        140
    ),
    (
        3,
        1,
        'Pull Marin de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.',
        30.23,
        146,
        'En ligne',
        'Bretagne',
        0.55,
        0.15,
        6.9,
        4.3,
        72
    ),
    (
        1,
        1,
        'Affiche Vintage de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        155.74,
        168,
        'En ligne',
        'Bretagne',
        2.94,
        0.09,
        8.98,
        4.7,
        148
    ),
    (
        2,
        3,
        'Vareuse Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        120.09,
        42,
        'En ligne',
        'Bretagne',
        1.35,
        0.03,
        8.28,
        4.9,
        15
    ),
    (
        3,
        2,
        'Pull Marin Bio',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.',
        151.65,
        65,
        'En ligne',
        'Bretagne',
        2.61,
        0.49,
        12.3,
        4.9,
        11
    ),
    (
        1,
        3,
        'Kabig Bio',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.',
        172.27,
        61,
        'En ligne',
        'Bretagne',
        0.68,
        0.46,
        8.15,
        4.8,
        63
    ),
    (
        1,
        2,
        'Phare Miniature Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        62.75,
        169,
        'En ligne',
        'Bretagne',
        1.58,
        0.34,
        12.59,
        4.3,
        12
    ),
    (
        3,
        1,
        'Bol Breton Fait main',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        75.33,
        85,
        'Hors ligne',
        'Bretagne',
        1.37,
        0.49,
        6.04,
        4.9,
        53
    ),
    (
        3,
        3,
        'Bracelet Ancre de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        23.23,
        175,
        'Hors ligne',
        'Bretagne',
        2.77,
        0.32,
        10.97,
        4.1,
        81
    ),
    (
        1,
        2,
        'Caramels de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        135.67,
        102,
        'Hors ligne',
        'Bretagne',
        2.06,
        0.45,
        10.54,
        4.3,
        145
    ),
    (
        3,
        3,
        'Affiche Vintage de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.',
        137.69,
        135,
        'Hors ligne',
        'Bretagne',
        1.47,
        0.45,
        12.16,
        4.2,
        26
    ),
    (
        4,
        2,
        'Écharpe Rayée de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        37.85,
        16,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.24,
        12.65,
        4.1,
        111
    ),
    (
        4,
        3,
        'Vareuse de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        51.36,
        183,
        'Hors ligne',
        'Bretagne',
        1.6,
        0.03,
        7.24,
        4.8,
        121
    ),
    (
        4,
        3,
        'Bracelet Ancre Durable',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.',
        150.55,
        126,
        'En ligne',
        'Bretagne',
        1.41,
        0.38,
        12.56,
        4.3,
        138
    ),
    (
        1,
        2,
        'Lampe Tempête de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        73.48,
        143,
        'Hors ligne',
        'Bretagne',
        0.33,
        0.08,
        8.45,
        4.2,
        59
    ),
    (
        4,
        1,
        'Sac Voile de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.',
        167.42,
        104,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.3,
        11.26,
        4.9,
        102
    ),
    (
        4,
        1,
        'Caramels de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        61.58,
        129,
        'En ligne',
        'Bretagne',
        0.18,
        0.17,
        11.11,
        4.4,
        47
    ),
    (
        4,
        2,
        'Pendentif Hermine de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        35.65,
        123,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.14,
        7.95,
        4.5,
        91
    ),
    (
        2,
        1,
        'Ciré Navy Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.',
        19.84,
        94,
        'En ligne',
        'Bretagne',
        0.75,
        0.04,
        13.62,
        4.0,
        12
    ),
    (
        3,
        1,
        'Vareuse de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        51.2,
        184,
        'En ligne',
        'Bretagne',
        0.84,
        0.19,
        10.45,
        5.0,
        34
    ),
    (
        1,
        2,
        'Pendentif Hermine Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        47.48,
        156,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.32,
        5.92,
        4.8,
        35
    ),
    (
        4,
        1,
        'Galettes de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.',
        89.39,
        130,
        'Hors ligne',
        'Bretagne',
        0.41,
        0.48,
        10.72,
        4.8,
        44
    ),
    (
        2,
        2,
        'Sac Voile Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.',
        148.16,
        73,
        'Hors ligne',
        'Bretagne',
        1.03,
        0.13,
        13.41,
        4.3,
        120
    ),
    (
        1,
        1,
        'Marinière de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.',
        50.09,
        71,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.44,
        11.31,
        4.3,
        7
    ),
    (
        4,
        3,
        'Sac Voile Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        102.77,
        9,
        'Hors ligne',
        'Bretagne',
        0.37,
        0.12,
        11.23,
        4.3,
        99
    ),
    (
        2,
        1,
        'Sac Voile Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        61.2,
        69,
        'Hors ligne',
        'Bretagne',
        0.77,
        0.36,
        7.84,
        4.7,
        52
    ),
    (
        1,
        1,
        'Pendentif Hermine Local',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.',
        167.37,
        80,
        'Hors ligne',
        'Bretagne',
        0.76,
        0.1,
        5.13,
        4.5,
        75
    ),
    (
        1,
        2,
        'Vareuse Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        118.5,
        125,
        'Hors ligne',
        'Bretagne',
        1.49,
        0.18,
        13.69,
        4.3,
        127
    ),
    (
        4,
        2,
        'Pendentif Hermine Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        116.38,
        82,
        'Hors ligne',
        'Bretagne',
        0.35,
        0.13,
        10.02,
        4.4,
        62
    ),
    (
        2,
        1,
        'Pendentif Hermine de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        21.38,
        194,
        'En ligne',
        'Bretagne',
        0.39,
        0.38,
        10.63,
        4.3,
        25
    ),
    (
        2,
        2,
        'Ciré Navy de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.',
        140.29,
        125,
        'En ligne',
        'Bretagne',
        0.94,
        0.12,
        11.36,
        4.7,
        121
    ),
    (
        4,
        1,
        'Pull Marin Authentique',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        181.69,
        41,
        'Hors ligne',
        'Bretagne',
        0.31,
        0.09,
        7.77,
        4.7,
        150
    ),
    (
        1,
        1,
        'Bolée à Cidre Local',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        103.33,
        25,
        'En ligne',
        'Bretagne',
        1.83,
        0.45,
        11.61,
        4.6,
        11
    ),
    (
        4,
        2,
        'Bol Breton de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.14,
        76,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.3,
        10.71,
        4.5,
        28
    ),
    (
        3,
        2,
        'Phare Miniature de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        141.1,
        78,
        'Hors ligne',
        'Bretagne',
        2.02,
        0.21,
        11.84,
        4.0,
        27
    ),
    (
        1,
        1,
        'Caramels Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        112.55,
        110,
        'Hors ligne',
        'Bretagne',
        0.26,
        0.26,
        10.6,
        4.5,
        118
    ),
    (
        4,
        1,
        'Vareuse de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.',
        101.61,
        12,
        'En ligne',
        'Bretagne',
        2.92,
        0.31,
        7.15,
        4.2,
        146
    ),
    (
        2,
        2,
        'Lampe Tempête Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        145.44,
        135,
        'En ligne',
        'Bretagne',
        2.15,
        0.21,
        9.34,
        4.5,
        121
    ),
    (
        4,
        1,
        'Bracelet Ancre de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.',
        159.31,
        111,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.4,
        7.4,
        4.0,
        81
    ),
    (
        2,
        2,
        'Coussin Triskell Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        112.71,
        121,
        'En ligne',
        'Bretagne',
        2.81,
        0.44,
        13.83,
        4.2,
        103
    ),
    (
        1,
        2,
        'Coussin Triskell Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        159.76,
        171,
        'En ligne',
        'Bretagne',
        2.94,
        0.25,
        5.33,
        4.5,
        89
    ),
    (
        1,
        2,
        'Lampe Tempête de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.75,
        44,
        'Hors ligne',
        'Bretagne',
        0.32,
        0.39,
        7.39,
        4.6,
        106
    ),
    (
        1,
        2,
        'Coussin Triskell Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        54.37,
        180,
        'En ligne',
        'Bretagne',
        2.77,
        0.5,
        11.72,
        4.4,
        30
    ),
    (
        2,
        1,
        'Bolée à Cidre de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.',
        20.61,
        96,
        'En ligne',
        'Bretagne',
        1.19,
        0.08,
        9.78,
        4.6,
        51
    ),
    (
        3,
        3,
        'Caramels Durable',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        37.05,
        123,
        'En ligne',
        'Bretagne',
        1.95,
        0.24,
        11.0,
        4.9,
        124
    ),
    (
        2,
        2,
        'Lampe Tempête Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        90.19,
        69,
        'Hors ligne',
        'Bretagne',
        1.42,
        0.16,
        13.99,
        4.9,
        32
    ),
    (
        3,
        1,
        'Bolée à Cidre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        134.41,
        75,
        'Hors ligne',
        'Bretagne',
        0.12,
        0.43,
        12.0,
        5.0,
        132
    ),
    (
        3,
        2,
        'Bonnet Miki Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        180.74,
        170,
        'Hors ligne',
        'Bretagne',
        0.21,
        0.4,
        5.3,
        4.4,
        38
    ),
    (
        4,
        1,
        'Bonnet Miki Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        182.65,
        47,
        'En ligne',
        'Bretagne',
        0.85,
        0.41,
        9.34,
        4.8,
        91
    ),
    (
        3,
        1,
        'Caramels de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        84.57,
        72,
        'En ligne',
        'Bretagne',
        1.66,
        0.23,
        11.06,
        4.7,
        102
    ),
    (
        1,
        1,
        'Marinière Premium',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        51.84,
        21,
        'Hors ligne',
        'Bretagne',
        1.94,
        0.24,
        11.31,
        4.6,
        34
    ),
    (
        1,
        2,
        'Pull Marin de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        35.64,
        121,
        'Hors ligne',
        'Bretagne',
        1.18,
        0.48,
        11.27,
        4.5,
        44
    ),
    (
        4,
        2,
        'Ciré Jaune de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        189.65,
        97,
        'En ligne',
        'Bretagne',
        0.39,
        0.35,
        9.9,
        5.0,
        96
    ),
    (
        1,
        3,
        'Lampe Tempête Authentique',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        122.86,
        10,
        'En ligne',
        'Bretagne',
        0.25,
        0.17,
        13.9,
        4.8,
        57
    ),
    (
        1,
        3,
        'Bonnet Miki de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        159.05,
        157,
        'En ligne',
        'Bretagne',
        0.11,
        0.43,
        6.3,
        4.1,
        69
    ),
    (
        3,
        3,
        'Marinière Authentique',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        12.98,
        72,
        'En ligne',
        'Bretagne',
        0.25,
        0.37,
        9.73,
        4.7,
        126
    ),
    (
        4,
        2,
        'Bracelet Ancre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.',
        181.75,
        173,
        'En ligne',
        'Bretagne',
        1.61,
        0.23,
        13.68,
        4.1,
        127
    ),
    (
        3,
        2,
        'Lampe Tempête de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        38.04,
        37,
        'Hors ligne',
        'Bretagne',
        0.9,
        0.32,
        9.94,
        4.3,
        140
    ),
    (
        3,
        2,
        'Pull Marin de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        177.85,
        110,
        'En ligne',
        'Bretagne',
        1.08,
        0.23,
        8.74,
        4.1,
        114
    ),
    (
        3,
        3,
        'Coussin Triskell Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        27.62,
        29,
        'En ligne',
        'Bretagne',
        2.26,
        0.19,
        6.17,
        4.1,
        148
    ),
    (
        3,
        3,
        'Galettes Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.',
        123.48,
        95,
        'Hors ligne',
        'Bretagne',
        0.4,
        0.26,
        6.39,
        4.5,
        32
    ),
    (
        1,
        1,
        'Bol Breton Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.',
        194.19,
        164,
        'Hors ligne',
        'Bretagne',
        1.88,
        0.32,
        5.24,
        4.9,
        73
    );

-- 10. PROMOTIONS (futures)
INSERT INTO
    _promotion (
        id_produit,
        promotion_debut,
        promotion_fin
    )
VALUES (
        1,
        '2025-12-20 00:00:00',
        '2027-12-25 23:59:00'
    ),
    (
        2,
        '2026-01-01 00:00:00',
        '2026-02-07 23:59:00'
    ),
    (
        3,
        '2026-02-16 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        4,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        5,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        6,
        '2026-06-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        7,
        '2026-01-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 9. RÉDUCTIONS (futures)
INSERT INTO
    _reduction (
        id_produit,
        reduction_pourcentage,
        reduction_debut,
        reduction_fin
    )
VALUES (
        1,
        10.00,
        '2026-01-05 00:00:00',
        '2026-09-19 23:59:00'
    ),
    (
        2,
        15.00,
        '2026-02-15 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        3,
        20.00,
        '2026-01-01 00:00:00',
        '2026-05-15 23:59:00'
    ),
    (
        4,
        25.00,
        '2026-01-20 00:00:00',
        '2026-02-26 23:59:00'
    ),
    (
        5,
        30.00,
        '2026-06-01 00:00:00',
        '2026-06-30 23:59:00'
    ),
    (
        6,
        60.00,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        7,
        55.00,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        8,
        70.00,
        '2026-01-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        9,
        65.00,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 12. IMAGES
INSERT INTO
    _image (i_lien, i_title, i_alt)
VALUES (
        '/img/photo/smartphone_xpro.jpg',
        'Smartphone XPro.jpg',
        'Image du smartphone'
    ),
    (
        '/img/photo/ordinateur_portable_ultra.jpg',
        'Ordinateur portable.jpeg',
        'Image de l ordinateur'
    ),
    (
        '/img/photo/t_shirt_coton_bio.jpg',
        'T-shirt.png',
        'Image du t-shirt'
    ),
    (
        '/img/photo/jean_slim.jpg',
        'Jean.jpg',
        'Image du jean'
    ),
    (
        '/img/photo/casque_audio_bluetooth.jpg',
        'Casque audio.jpg',
        'Image du casque'
    ),
    (
        '/img/photo/avatar_jean.jpg',
        'Avatar Jean.jpeg',
        'Photo de profil Jean'
    ),
    (
        '/img/photo/avatar_marie.jpg',
        'Avatar Marie.jpg',
        'Photo de profil Marie'
    ),
    (
        '/img/photo/logo_techstore.jpg',
        'Logo TechStore.jpg',
        'Logo entreprise TechStore'
    ),
    (
        '/img/photo/logo_fashionhub.jpg',
        'Logo FashionHub.jpg',
        'Logo entreprise FashionHub'
    ),
    (
        '/img/photo/montre_connect_e.jpg',
        'Montre connectée.jpg',
        'Image de la montre'
    ),
    (
        '/img/photo/sac___dos_urbain.jpg',
        'Sac à dos.jpeg',
        'Image du sac'
    ),
    (
        '/img/photo/chaussures_running.jpg',
        'Chaussures running.jpeg',
        'Image des chaussures'
    ),
    (
        '/img/photo/tablette_10_pouces.jpg',
        'Tablette.jpg',
        'Image de la tablette'
    ),
    (
        '/img/photo/ballon_de_football.jpg',
        'Ballon football.jpg',
        'Image du ballon'
    ),
    (
        '/img/photo/veste_en_cuir.jpg',
        'Veste cuir.jpg',
        'Image de la veste'
    ),
    (
        '/img/photo/livre_cuisine_fran_aise.jpg',
        'Livre cuisine.jpeg',
        'Image du livre'
    ),
    (
        '/img/photo/tapis_de_yoga.jpg',
        'Tapis yoga.jpeg',
        'Image du tapis'
    ),
    (
        '/img/photo/clavier_m_canique_rgb.jpg',
        'Clavier.jpg',
        'Image du clavier'
    ),
    (
        '/img/photo/console_nextgen.jpg',
        'Console NextGen.jpg',
        'Image de la console'
    ),
    (
        '/img/photo/sweat___capuche_premium.jpg',
        'Sweat à capuche.jpeg',
        'Image du sweat'
    ),
    (
        '/img/photo/raquette_de_tennis_pro.jpg',
        'Raquette tennis.jpg',
        'Image de la raquette'
    ),
    (
        '/img/photo/_cran_gaming_4k_27_.jpg',
        'Écran 4K.jpeg',
        'Image de l écran'
    ),
    (
        '/img/photo/baskets_limited_edition.jpg',
        'Baskets limited.jpeg',
        'Image des baskets'
    ),
    (
        '/img/photo/v_lo_de_route_carbone.jpg',
        'Vélo route.jpeg',
        'Image du vélo'
    ),
    (
        '/img/photo/drone_professionnel_4k.jpg',
        'Drone 4K.jpg',
        'Image du drone'
    ),
    (
        '/img/photo/manteau_d_hiver_imperm_able.jpg',
        'Manteau hiver.jpeg',
        'Image du manteau'
    ),
    (
        '/img/photo/tente_4_places.jpg',
        'Tente 4 places.jpg',
        'Image de la tente'
    ),
    (
        '/img/photo/enceinte_bluetooth_waterproof.jpg',
        'Enceinte Bluetooth.jpg',
        'Image de l enceinte'
    ),
    (
        '/img/photo/pull_marin_de_saint_malo.jpg',
        'Pull Marin de Saint-Malo',
        'Photo de Pull Marin de Saint-Malo'
    ),
    (
        '/img/photo/bonnet_miki_de_carnac.jpg',
        'Bonnet Miki de Carnac',
        'Photo de Bonnet Miki de Carnac'
    ),
    (
        '/img/photo/galettes_local.jpg',
        'Galettes Local',
        'Photo de Galettes Local'
    ),
    (
        '/img/photo/_charpe_ray_e_fait_main.jpg',
        'Écharpe Rayée Fait main',
        'Photo de Écharpe Rayée Fait main'
    ),
    (
        '/img/photo/_charpe_ray_e_de_brest.jpg',
        'Écharpe Rayée de Brest',
        'Photo de Écharpe Rayée de Brest'
    ),
    (
        '/img/photo/cir__navy_de_concarneau.jpg',
        'Ciré Navy de Concarneau',
        'Photo de Ciré Navy de Concarneau'
    ),
    (
        '/img/photo/bracelet_ancre_fait_main.jpg',
        'Bracelet Ancre Fait main',
        'Photo de Bracelet Ancre Fait main'
    ),
    (
        '/img/photo/marini_re_local.jpg',
        'Marinière Local',
        'Photo de Marinière Local'
    ),
    (
        '/img/photo/bracelet_ancre_de_concarneau.jpg',
        'Bracelet Ancre de Concarneau',
        'Photo de Bracelet Ancre de Concarneau'
    ),
    (
        '/img/photo/pendentif_hermine_fait_main.jpg',
        'Pendentif Hermine Fait main',
        'Photo de Pendentif Hermine Fait main'
    ),
    (
        '/img/photo/sac_voile_de_concarneau.jpg',
        'Sac Voile de Concarneau',
        'Photo de Sac Voile de Concarneau'
    ),
    (
        '/img/photo/_charpe_ray_e_de_saint_malo.jpg',
        'Écharpe Rayée de Saint-Malo',
        'Photo de Écharpe Rayée de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_de_roscoff.jpg',
        'Coussin Triskell de Roscoff',
        'Photo de Coussin Triskell de Roscoff'
    ),
    (
        '/img/photo/_charpe_ray_e_authentique.jpg',
        'Écharpe Rayée Authentique',
        'Photo de Écharpe Rayée Authentique'
    ),
    (
        '/img/photo/_charpe_ray_e_bio.jpg',
        'Écharpe Rayée Bio',
        'Photo de Écharpe Rayée Bio'
    ),
    (
        '/img/photo/bonnet_miki_authentique.jpg',
        'Bonnet Miki Authentique',
        'Photo de Bonnet Miki Authentique'
    ),
    (
        '/img/photo/cir__navy_de_quimper.jpg',
        'Ciré Navy de Quimper',
        'Photo de Ciré Navy de Quimper'
    ),
    (
        '/img/photo/bol_breton_traditionnel.jpg',
        'Bol Breton Traditionnel',
        'Photo de Bol Breton Traditionnel'
    ),
    (
        '/img/photo/bol_breton_premium.jpg',
        'Bol Breton Premium',
        'Photo de Bol Breton Premium'
    ),
    (
        '/img/photo/pull_marin_de_brest.jpg',
        'Pull Marin de Brest',
        'Photo de Pull Marin de Brest'
    ),
    (
        '/img/photo/affiche_vintage_de_dinard.jpg',
        'Affiche Vintage de Dinard',
        'Photo de Affiche Vintage de Dinard'
    ),
    (
        '/img/photo/vareuse_artisanal.jpg',
        'Vareuse Artisanal',
        'Photo de Vareuse Artisanal'
    ),
    (
        '/img/photo/pull_marin_bio.jpg',
        'Pull Marin Bio',
        'Photo de Pull Marin Bio'
    ),
    (
        '/img/photo/kabig_bio.jpg',
        'Kabig Bio',
        'Photo de Kabig Bio'
    ),
    (
        '/img/photo/phare_miniature_fait_main.jpg',
        'Phare Miniature Fait main',
        'Photo de Phare Miniature Fait main'
    ),
    (
        '/img/photo/bol_breton_fait_main.jpg',
        'Bol Breton Fait main',
        'Photo de Bol Breton Fait main'
    ),
    (
        '/img/photo/bracelet_ancre_de_carnac.jpg',
        'Bracelet Ancre de Carnac',
        'Photo de Bracelet Ancre de Carnac'
    ),
    (
        '/img/photo/caramels_de_dinard.jpg',
        'Caramels de Dinard',
        'Photo de Caramels de Dinard'
    ),
    (
        '/img/photo/affiche_vintage_de_vannes.jpg',
        'Affiche Vintage de Vannes',
        'Photo de Affiche Vintage de Vannes'
    ),
    (
        '/img/photo/_charpe_ray_e_de_dinard.jpg',
        'Écharpe Rayée de Dinard',
        'Photo de Écharpe Rayée de Dinard'
    ),
    (
        '/img/photo/vareuse_de_saint_malo.jpg',
        'Vareuse de Saint-Malo',
        'Photo de Vareuse de Saint-Malo'
    ),
    (
        '/img/photo/bracelet_ancre_durable.jpg',
        'Bracelet Ancre Durable',
        'Photo de Bracelet Ancre Durable'
    ),
    (
        '/img/photo/lampe_temp_te_de_quimper.jpg',
        'Lampe Tempête de Quimper',
        'Photo de Lampe Tempête de Quimper'
    ),
    (
        '/img/photo/sac_voile_de_pont_aven.jpg',
        'Sac Voile de Pont-Aven',
        'Photo de Sac Voile de Pont-Aven'
    ),
    (
        '/img/photo/caramels_de_roscoff.jpg',
        'Caramels de Roscoff',
        'Photo de Caramels de Roscoff'
    ),
    (
        '/img/photo/pendentif_hermine_de_saint_malo.jpg',
        'Pendentif Hermine de Saint-Malo',
        'Photo de Pendentif Hermine de Saint-Malo'
    ),
    (
        '/img/photo/cir__navy_artisanal.jpg',
        'Ciré Navy Artisanal',
        'Photo de Ciré Navy Artisanal'
    ),
    (
        '/img/photo/vareuse_de_pont_aven.jpg',
        'Vareuse de Pont-Aven',
        'Photo de Vareuse de Pont-Aven'
    ),
    (
        '/img/photo/pendentif_hermine_bio.jpg',
        'Pendentif Hermine Bio',
        'Photo de Pendentif Hermine Bio'
    ),
    (
        '/img/photo/galettes_de_quimper.jpg',
        'Galettes de Quimper',
        'Photo de Galettes de Quimper'
    ),
    (
        '/img/photo/sac_voile_durable.jpg',
        'Sac Voile Durable',
        'Photo de Sac Voile Durable'
    ),
    (
        '/img/photo/marini_re_de_pont_aven.jpg',
        'Marinière de Pont-Aven',
        'Photo de Marinière de Pont-Aven'
    ),
    (
        '/img/photo/sac_voile_bio.jpg',
        'Sac Voile Bio',
        'Photo de Sac Voile Bio'
    ),
    (
        '/img/photo/sac_voile_premium.jpg',
        'Sac Voile Premium',
        'Photo de Sac Voile Premium'
    ),
    (
        '/img/photo/pendentif_hermine_local.jpg',
        'Pendentif Hermine Local',
        'Photo de Pendentif Hermine Local'
    ),
    (
        '/img/photo/vareuse_durable.jpg',
        'Vareuse Durable',
        'Photo de Vareuse Durable'
    ),
    (
        '/img/photo/pendentif_hermine_traditionnel.jpg',
        'Pendentif Hermine Traditionnel',
        'Photo de Pendentif Hermine Traditionnel'
    ),
    (
        '/img/photo/pendentif_hermine_de_roscoff.jpg',
        'Pendentif Hermine de Roscoff',
        'Photo de Pendentif Hermine de Roscoff'
    ),
    (
        '/img/photo/cir__navy_de_brest.jpg',
        'Ciré Navy de Brest',
        'Photo de Ciré Navy de Brest'
    ),
    (
        '/img/photo/pull_marin_authentique.jpg',
        'Pull Marin Authentique',
        'Photo de Pull Marin Authentique'
    ),
    (
        '/img/photo/bol_e___cidre_local.jpg',
        'Bolée à Cidre Local',
        'Photo de Bolée à Cidre Local'
    ),
    (
        '/img/photo/bol_breton_de_saint_malo.jpg',
        'Bol Breton de Saint-Malo',
        'Photo de Bol Breton de Saint-Malo'
    ),
    (
        '/img/photo/phare_miniature_de_quimper.jpg',
        'Phare Miniature de Quimper',
        'Photo de Phare Miniature de Quimper'
    ),
    (
        '/img/photo/caramels_artisanal.jpg',
        'Caramels Artisanal',
        'Photo de Caramels Artisanal'
    ),
    (
        '/img/photo/vareuse_de_dinard.jpg',
        'Vareuse de Dinard',
        'Photo de Vareuse de Dinard'
    ),
    (
        '/img/photo/lampe_temp_te_traditionnel.jpg',
        'Lampe Tempête Traditionnel',
        'Photo de Lampe Tempête Traditionnel'
    ),
    (
        '/img/photo/bracelet_ancre_de_brest.jpg',
        'Bracelet Ancre de Brest',
        'Photo de Bracelet Ancre de Brest'
    ),
    (
        '/img/photo/coussin_triskell_premium.jpg',
        'Coussin Triskell Premium',
        'Photo de Coussin Triskell Premium'
    ),
    (
        '/img/photo/coussin_triskell_bio.jpg',
        'Coussin Triskell Bio',
        'Photo de Coussin Triskell Bio'
    ),
    (
        '/img/photo/lampe_temp_te_de_saint_malo.jpg',
        'Lampe Tempête de Saint-Malo',
        'Photo de Lampe Tempête de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_artisanal.jpg',
        'Coussin Triskell Artisanal',
        'Photo de Coussin Triskell Artisanal'
    ),
    (
        '/img/photo/bol_e___cidre_de_saint_malo.jpg',
        'Bolée à Cidre de Saint-Malo',
        'Photo de Bolée à Cidre de Saint-Malo'
    ),
    (
        '/img/photo/caramels_durable.jpg',
        'Caramels Durable',
        'Photo de Caramels Durable'
    ),
    (
        '/img/photo/lampe_temp_te_local.jpg',
        'Lampe Tempête Local',
        'Photo de Lampe Tempête Local'
    ),
    (
        '/img/photo/bol_e___cidre_artisanal.jpg',
        'Bolée à Cidre Artisanal',
        'Photo de Bolée à Cidre Artisanal'
    ),
    (
        '/img/photo/bonnet_miki_traditionnel.jpg',
        'Bonnet Miki Traditionnel',
        'Photo de Bonnet Miki Traditionnel'
    ),
    (
        '/img/photo/bonnet_miki_premium.jpg',
        'Bonnet Miki Premium',
        'Photo de Bonnet Miki Premium'
    ),
    (
        '/img/photo/caramels_de_carnac.jpg',
        'Caramels de Carnac',
        'Photo de Caramels de Carnac'
    ),
    (
        '/img/photo/marini_re_premium.jpg',
        'Marinière Premium',
        'Photo de Marinière Premium'
    ),
    (
        '/img/photo/pull_marin_de_quimper.jpg',
        'Pull Marin de Quimper',
        'Photo de Pull Marin de Quimper'
    ),
    (
        '/img/photo/cir__jaune_de_vannes.jpg',
        'Ciré Jaune de Vannes',
        'Photo de Ciré Jaune de Vannes'
    ),
    (
        '/img/photo/lampe_temp_te_authentique.jpg',
        'Lampe Tempête Authentique',
        'Photo de Lampe Tempête Authentique'
    ),
    (
        '/img/photo/bonnet_miki_de_concarneau.jpg',
        'Bonnet Miki de Concarneau',
        'Photo de Bonnet Miki de Concarneau'
    ),
    (
        '/img/photo/marini_re_authentique.jpg',
        'Marinière Authentique',
        'Photo de Marinière Authentique'
    ),
    (
        '/img/photo/bracelet_ancre_artisanal.jpg',
        'Bracelet Ancre Artisanal',
        'Photo de Bracelet Ancre Artisanal'
    ),
    (
        '/img/photo/lampe_temp_te_de_vannes.jpg',
        'Lampe Tempête de Vannes',
        'Photo de Lampe Tempête de Vannes'
    ),
    (
        '/img/photo/pull_marin_de_carnac.jpg',
        'Pull Marin de Carnac',
        'Photo de Pull Marin de Carnac'
    ),
    (
        '/img/photo/coussin_triskell_fait_main.jpg',
        'Coussin Triskell Fait main',
        'Photo de Coussin Triskell Fait main'
    ),
    (
        '/img/photo/galettes_artisanal.jpg',
        'Galettes Artisanal',
        'Photo de Galettes Artisanal'
    ),
    (
        '/img/photo/bol_breton_bio.jpg',
        'Bol Breton Bio',
        'Photo de Bol Breton Bio'
    );

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO
    _represente_produit (id_image, id_produit)
VALUES (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 6),
    (10, 8),
    (11, 7),
    (12, 9),
    (13, 10),
    (14, 11),
    (15, 12),
    (16, 13),
    (17, 14),
    (18, 15),
    (19, 16),
    (20, 17),
    (21, 18),
    (22, 19),
    (23, 20),
    (24, 21),
    (25, 22),
    (26, 23),
    (27, 24),
    (28, 25),
    (29, 26),
    (30, 27),
    (31, 28),
    (32, 29),
    (33, 30),
    (34, 31),
    (35, 32),
    (36, 33),
    (37, 34),
    (38, 35),
    (39, 36),
    (40, 37),
    (41, 38),
    (42, 39),
    (43, 40),
    (44, 41),
    (45, 42),
    (46, 43),
    (47, 44),
    (48, 45),
    (49, 46),
    (50, 47),
    (51, 48),
    (52, 49),
    (53, 50),
    (54, 51),
    (55, 52),
    (56, 53),
    (57, 54),
    (58, 55),
    (59, 56),
    (60, 57),
    (61, 58),
    (62, 59),
    (63, 60),
    (64, 61),
    (65, 62),
    (66, 63),
    (67, 64),
    (68, 65),
    (69, 66),
    (70, 67),
    (71, 68),
    (72, 69),
    (73, 70),
    (74, 71),
    (75, 72),
    (76, 73),
    (77, 74),
    (78, 75),
    (79, 76),
    (80, 77),
    (81, 78),
    (82, 79),
    (83, 80),
    (84, 81),
    (85, 82),
    (86, 83),
    (87, 84),
    (88, 85),
    (89, 86),
    (90, 87),
    (91, 88),
    (92, 89),
    (93, 90),
    (94, 91),
    (95, 92),
    (96, 93),
    (97, 94),
    (98, 95),
    (99, 96),
    (100, 97),
    (101, 98),
    (102, 99),
    (103, 100),
    (104, 101),
    (105, 102),
    (106, 103),
    (107, 104),
    (108, 105);

-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO
    _represente_compte (id_image, id_compte)
VALUES (6, 4),
    (7, 5),
    (8, 2),
    (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO
    _fait_partie_de (id_produit, id_categorie)
VALUES (1, 1),
    (1, 7),
    (2, 1),
    (2, 7),
    (3, 2),
    (3, 8),
    (4, 2),
    (4, 8),
    (5, 2),
    (5, 9),
    (6, 1),
    (6, 3),
    (7, 3),
    (8, 1),
    (8, 3),
    (8, 5),
    (9, 5),
    (9, 10),
    (10, 1),
    (10, 7),
    (11, 5),
    (12, 2),
    (12, 8),
    (13, 6),
    (14, 5),
    (15, 1),
    (15, 7),
    (16, 1),
    (16, 7),
    (17, 2),
    (17, 8),
    (18, 5),
    (19, 1),
    (19, 7),
    (20, 10),
    (21, 5),
    (22, 1),
    (22, 3),
    (23, 2),
    (23, 8),
    (24, 4),
    (24, 5),
    (25, 1),
    (25, 3),
    (26, 2),
    (26, 8),
    (27, 2),
    (27, 3),
    (27, 8),
    (28, 4),
    (29, 2),
    (29, 3),
    (30, 2),
    (30, 3),
    (31, 2),
    (31, 8),
    (31, 9),
    (32, 3),
    (33, 2),
    (33, 8),
    (33, 9),
    (34, 3),
    (35, 3),
    (36, 3),
    (37, 2),
    (37, 3),
    (38, 4),
    (39, 2),
    (39, 3),
    (40, 2),
    (40, 3),
    (41, 2),
    (41, 3),
    (41, 8),
    (42, 2),
    (42, 8),
    (42, 9),
    (43, 4),
    (44, 4),
    (45, 2),
    (45, 8),
    (46, 4),
    (47, 2),
    (47, 8),
    (48, 2),
    (48, 8),
    (49, 2),
    (49, 8),
    (49, 9),
    (50, 4),
    (51, 4),
    (52, 3),
    (53, 4),
    (54, 4),
    (55, 2),
    (55, 3),
    (56, 2),
    (56, 8),
    (57, 3),
    (58, 4),
    (59, 3),
    (60, 4),
    (61, 3),
    (62, 2),
    (62, 8),
    (62, 9),
    (63, 2),
    (63, 8),
    (64, 3),
    (65, 4),
    (66, 3),
    (67, 2),
    (67, 8),
    (67, 9),
    (68, 3),
    (69, 3),
    (70, 3),
    (71, 2),
    (71, 8),
    (72, 3),
    (73, 3),
    (74, 2),
    (74, 8),
    (74, 9),
    (75, 2),
    (75, 8),
    (76, 4),
    (77, 4),
    (78, 4),
    (79, 4),
    (80, 2),
    (80, 8),
    (81, 4),
    (82, 3),
    (83, 4),
    (84, 4),
    (85, 4),
    (86, 4),
    (87, 4),
    (88, 4),
    (89, 4),
    (90, 4),
    (91, 2),
    (91, 3),
    (91, 8),
    (92, 2),
    (92, 3),
    (92, 8),
    (93, 4),
    (94, 2),
    (94, 8),
    (94, 9),
    (95, 2),
    (95, 8),
    (96, 2),
    (96, 8),
    (96, 9),
    (97, 4),
    (98, 2),
    (98, 3),
    (98, 8),
    (99, 2),
    (99, 8),
    (99, 9),
    (100, 3),
    (101, 4),
    (102, 2),
    (102, 8),
    (103, 4),
    (104, 4),
    (105, 4);

-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO
    _est_dote_de (id_produit, code_hexa)
VALUES (1, '#000000'),
    (1, '#FFFFFF'),
    (2, '#808080'),
    (3, '#0000FF'),
    (3, '#FF0000'),
    (3, '#00FF00'),
    (4, '#0000FF'),
    (4, '#000000'),
    (5, '#FF0000'),
    (5, '#FFFFFF'),
    (6, '#000000'),
    (7, '#808080'),
    (8, '#000000'),
    (9, '#0000FF'),
    (9, '#FF0000'),
    (10, '#808080'),
    (11, '#FFFFFF'),
    (12, '#000000'),
    (12, '#8B4513'),
    (14, '#EE82EE'),
    (14, '#87CEEB'),
    (15, '#000000'),
    (16, '#000000'),
    (16, '#FFFFFF'),
    (17, '#808080'),
    (17, '#000000'),
    (18, '#FFFFFF'),
    (18, '#000000'),
    (19, '#000000'),
    (20, '#FFFFFF'),
    (20, '#000000'),
    (21, '#0000FF'),
    (21, '#FF0000'),
    (22, '#808080'),
    (23, '#000000'),
    (23, '#8B4513'),
    (24, '#87CEEB'),
    (24, '#32CD32'),
    (25, '#000000'),
    (25, '#FF0000'),
    (26, '#8B4513'),
    (27, '#0000FF'),
    (28, '#FF0000'),
    (29, '#8B4513'),
    (30, '#00FF00'),
    (31, '#000000'),
    (32, '#8B4513'),
    (33, '#87CEEB'),
    (34, '#FFFFFF'),
    (35, '#FFFFFF'),
    (36, '#EE82EE'),
    (37, '#FFFFFF'),
    (38, '#0000FF'),
    (39, '#0000FF'),
    (40, '#000000'),
    (41, '#000000'),
    (42, '#FFFFFF'),
    (43, '#8B4513'),
    (44, '#87CEEB'),
    (45, '#87CEEB'),
    (46, '#32CD32'),
    (47, '#87CEEB'),
    (48, '#00FF00'),
    (49, '#FFA500'),
    (50, '#EE82EE'),
    (51, '#FF0000'),
    (52, '#FFFF00'),
    (53, '#FFFFFF'),
    (54, '#0000FF'),
    (55, '#FFFFFF'),
    (56, '#808080'),
    (57, '#00FF00'),
    (58, '#FFFF00'),
    (59, '#00FF00'),
    (60, '#FFA500'),
    (61, '#00FF00'),
    (62, '#FFFFFF'),
    (63, '#00FF00'),
    (64, '#87CEEB'),
    (65, '#EE82EE'),
    (66, '#FFFF00'),
    (67, '#808080'),
    (68, '#FFA500'),
    (69, '#00FF00'),
    (70, '#32CD32'),
    (71, '#0000FF'),
    (72, '#00FF00'),
    (73, '#8B4513'),
    (74, '#FFA500'),
    (75, '#32CD32'),
    (76, '#87CEEB'),
    (77, '#FFFF00'),
    (78, '#0000FF'),
    (79, '#8B4513'),
    (80, '#0000FF'),
    (81, '#EE82EE'),
    (82, '#8B4513'),
    (83, '#FFFF00'),
    (84, '#8B4513'),
    (85, '#FFFF00'),
    (86, '#32CD32'),
    (87, '#EE82EE'),
    (88, '#0000FF'),
    (89, '#EE82EE'),
    (90, '#FFFFFF'),
    (91, '#000000'),
    (92, '#FFFFFF'),
    (93, '#808080'),
    (94, '#808080'),
    (95, '#00FF00'),
    (96, '#0000FF'),
    (97, '#EE82EE'),
    (98, '#000000'),
    (99, '#808080'),
    (100, '#808080'),
    (101, '#0000FF'),
    (102, '#87CEEB'),
    (103, '#FFA500'),
    (104, '#0000FF'),
    (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO
    _seuil_alerte (nb_seuil, message_seuil)
VALUES (
        10,
        'Stock faible - Envisager un réapprovisionnement'
    ),
    (
        5,
        'Stock critique - Réapprovisionnement urgent'
    ),
    (
        3,
        'Rupture imminente - Commander immédiatement'
    ),
    (
        20,
        'Stock normal - Surveillance recommandée'
    ),
    (
        1,
        'Rupture de stock - Produit indisponible'
    );

INSERT INTO
    _adresse (
        id_compte,
        a_numero,
        a_adresse,
        a_ville,
        a_code_postal,
        a_pays
    )
VALUES (
        4,
        13,
        'rue du Pillard',
        'Rennes',
        35590,
        'France'
    );

-- 18. PANIERS/COMMANDES
INSERT INTO
    _panier_commande (id_client, timestamp_commande)
VALUES (1, '2025-11-01 10:30:00'),
    (2, '2025-11-02 14:45:00'),
    (3, '2025-11-03 09:15:00'),
    (1, NULL),
    (4, '2025-11-04 16:20:00'),
    (6, '2025-11-05 11:00:00'),
    (2, NULL),
    (5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO
    _contient (
        id_panier,
        id_produit,
        quantite,
        prix_unitaire,
        remise_unitaire,
        frais_de_port,
        TVA
    )
VALUES (
        1,
        1,
        1,
        599.99,
        0.0,
        5.99,
        20.0
    ),
    (
        1,
        6,
        1,
        149.99,
        0.0,
        5.99,
        20.0
    ),
    (
        2,
        3,
        2,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        2,
        4,
        1,
        49.99,
        0.0,
        4.99,
        20.0
    ),
    (
        3,
        2,
        1,
        899.99,
        0.0,
        9.99,
        20.0
    ),
    (
        4,
        7,
        1,
        69.99,
        0.0,
        6.99,
        20.0
    ),
    (
        5,
        5,
        1,
        39.99,
        0.0,
        4.99,
        20.0
    ),
    (
        5,
        8,
        1,
        199.99,
        0.0,
        3.99,
        20.0
    ),
    (
        6,
        9,
        2,
        89.99,
        0.0,
        5.99,
        20.0
    ),
    (
        7,
        10,
        1,
        299.99,
        0.0,
        7.99,
        20.0
    ),
    (
        8,
        11,
        1,
        29.99,
        0.0,
        4.99,
        20.0
    ),
    (
        8,
        13,
        1,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        8,
        14,
        1,
        34.99,
        0.0,
        5.99,
        20.0
    );

-- 20. FACTURES
INSERT INTO
    _facture (
        id_panier,
        id_adresse,
        f_total_ht,
        f_total_remise,
        f_total_ttc
    )
VALUES (1, 1, 755.98, 0.0, 907.18),
    (2, 1, 103.96, 0.0, 124.75),
    (3, 1, 909.98, 0.0, 1091.98),
    (5, 1, 248.97, 0.0, 298.76),
    (6, 1, 185.97, 0.0, 223.16),
    (8, 1, 95.96, 0.0, 115.15);

-- 21. PAIEMENTS
INSERT INTO
    _paiement (
        id_facture,
        mode_paiement,
        numero_carte,
        mois_annee_expiration,
        cryptogramme_carte,
        timestamp_paiement
    )
VALUES (
        1,
        'CB',
        '1234567890123456',
        '12/27',
        '123',
        '2025-11-01 10:35:00'
    ),
    (
        2,
        'CB',
        '6543210987654321',
        '06/26',
        '456',
        '2025-11-02 14:50:00'
    ),
    (
        3,
        'CB',
        '1111222233334444',
        '03/28',
        '789',
        '2025-11-03 09:20:00'
    ),
    (
        4,
        'CB',
        '9999888877776666',
        '09/27',
        '321',
        '2025-11-04 16:25:00'
    ),
    (
        5,
        'CB',
        '5555666677778888',
        '11/26',
        '654',
        '2025-11-05 11:05:00'
    ),
    (
        6,
        'CB',
        '4444333322221111',
        '08/27',
        '987',
        '2025-11-06 13:35:00'
    );

-- 22. LIVRAISONS
INSERT INTO
    _livraison (
        id_facture,
        date_livraison,
        etat_livraison
    )
VALUES (1, '2025-11-05', 'Livré'),
    (2, '2025-11-06', 'Livré'),
    (3, '2025-11-08', 'En transit'),
    (4, NULL, 'En préparation'),
    (5, '2025-11-09', 'Livré'),
    (6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO
    _definie_pour (id_seuil, id_compte)
VALUES (1, 2),
    (2, 2),
    (3, 2),
    (4, 2),
    (5, 2),
    (1, 3),
    (2, 3),
    (3, 3),
    (5, 3),
    (1, 10),
    (2, 10),
    (3, 10),
    (4, 10),
    (5, 10),
    (5, 1);

-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;

UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;

UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;

UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;

UPDATE cobrec1._commentaire SET a_note = 0.0;
----------- WbStatement -----------
##sqlwb.pos=97275
##sqlwb.selStart=0
##sqlwb.selEnd=0
-- ============================================
-- CRÉATION DU SCHÉMA ET SUPPRESSION SI EXISTE
-- ============================================
DROP SCHEMA IF EXISTS cobrec1 CASCADE;

CREATE SCHEMA cobrec1;

SET SCHEMA 'cobrec1';

-- GLOSSAIRE
--
-- SERIAL : nombre naturel qui s'auto-incrémente
-- DOUBLE PRECISION : nombre décimal, a n'utiliser que pour des montants n'ayant pas de plafonds
-- NUMERIC(X,Y) : nombre décimal, X indique le nombre de chiffres total de la valeur et Y son nombre de chiffres après la virgule. Surtout utilisé pour les pourcentages
-- UNIQUE : sert à iniquer que la valeur que prend la variable est unique dnas toutes les instances de la table. 2 instances ne peuvent avoir la même valeur sur cette variable
-- CHECK : utilisé pour faire des vérifications sur les variables
-- LIKE : utilisé pour le REGEX (cf. regextester.com, onglet Top Regular Expressions)
-- IN (VAL1, VAL2, ...) : utilisé quand les valeurs que peut prendre une variable sont limités et définies à l'avance. Indique une liste de valeurs possibles.
-- ALTER TABLE ONLY : permet de modifier une table déjà créée, pour y rajouter des contraintes de clé étrangère, de valeurs uniques et des vérifications. Préférer cette utilisation à des inscriptions en dur dans la table, ne serait-ce que pour les clés étrangères (fk) et les unique (unique)

-- MULTIPLICITÉS
--
-- Cas de deux id dans une même table (hors héritage) : Inique une multpiplicté 1..* (cf. UML), ne pas représenter le lien via une table
-- Autre cas : représneter les liens via des tables

-- HÉRITAGE
--
-- L'héritage est représenté en faisant référence à l'id de la table parent dans le.s table.s enfant.s

-- ============================================
-- CRÉATION DES TABLES
-- ============================================

-- TABLE COMPTE
CREATE TABLE cobrec1._compte (
    id_compte SERIAL NOT NULL,
    email varchar(255) UNIQUE NOT NULL,
    num_telephone varchar(20) UNIQUE NOT NULL,
    nb_fois_signale integer DEFAULT 0,
    nb_signalements_avis integer DEFAULT 0,
    nb_cpts_signales integer DEFAULT 0,
    nb_avis_signales integer DEFAULT 0,
    timestamp_inscription timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    timestamp_blocage timestamp,
    motif_blocage varchar(255),
    mdp varchar(255) NOT NULL,
    etat_A2F boolean DEFAULT FALSE,
    prenom varchar(100) NOT NULL,
    nom varchar(100) NOT NULL,
    civilite varchar(255) DEFAULT 'Inconnu' NOT NULL,
    CONSTRAINT verif_compte_civilite CHECK (
        civilite IN (
            'M.',
            'Mme',
            'Inconnu',
            'Ne souhaite pas s''exprimer',
            'Autre'
        )
    ),
    CONSTRAINT verif_compte_email CHECK (
        email ~ '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'
    ),
    CONSTRAINT verif_compte_num_telephone CHECK (
        num_telephone ~ '^(0|\+33|0033)[1-9][0-9]{8}$'
    )
);

ALTER TABLE ONLY cobrec1._compte
ADD CONSTRAINT pk_compte PRIMARY KEY (id_compte);

-- TABLE ADMINISTRATEUR
CREATE TABLE cobrec1._administrateur (
    id_admin SERIAL NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT pk_administrateur PRIMARY KEY (id_admin);

ALTER TABLE ONLY cobrec1._administrateur
ADD CONSTRAINT fk_administrateur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE VENDEUR
CREATE TABLE cobrec1._vendeur (
    id_vendeur SERIAL NOT NULL,
    id_compte integer NOT NULL,
    SIREN CHAR(9) NOT NULL,
    raison_sociale varchar(255) UNIQUE NOT NULL,
    denomination varchar(255) UNIQUE NOT NULL,
    nb_produits_crees integer DEFAULT 0,
    CONSTRAINT verif_vendeur_siren CHECK (SIREN ~ '^\d{9}$')
);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT pk_vendeur PRIMARY KEY (id_vendeur);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT unique_vendeur_siren UNIQUE (SIREN);

ALTER TABLE ONLY cobrec1._vendeur
ADD CONSTRAINT fk_vendeur_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CLIENT
CREATE TABLE cobrec1._client (
    id_client SERIAL NOT NULL,
    id_compte integer NOT NULL,
    c_pseudo varchar(100),
    c_nb_produits_achetes integer DEFAULT 0,
    c_depense_totale numeric(11, 2) DEFAULT 0.0,
    c_cloture boolean DEFAULT FALSE,
    c_datenaissance date NOT NULL
);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT pk_client PRIMARY KEY (id_client);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT unique_client_pseudo UNIQUE (c_pseudo);

ALTER TABLE ONLY cobrec1._client
ADD CONSTRAINT fk_client_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE ADRESSE
CREATE TABLE cobrec1._adresse (
    id_adresse serial NOT NULL,
    id_compte integer NOT NULL,
    a_numero integer DEFAULT 0 NOT NULL,
    a_adresse varchar(255) NOT NULL,
    a_ville varchar(100) NOT NULL,
    a_code_postal varchar(10) NOT NULL,
    a_pays varchar(255) DEFAULT 'France' NOT NULL,
    a_complement varchar(255),
    CONSTRAINT verif_adresse_numero CHECK (a_numero >= 0)
);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT pk_adresse PRIMARY KEY (id_adresse);

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_adresse_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE COULEUR
CREATE TABLE cobrec1._couleur (
    code_hexa varchar(7) NOT NULL,
    nom varchar(50) UNIQUE NOT NULL,
    type_couleur varchar(50),
    CONSTRAINT verif_couleur_type_couleur CHECK (
        type_couleur IN (
            'Vert',
            'Jaune',
            'Rouge',
            'Noir',
            'Blanc',
            'Bleu',
            'Violet',
            'Orange',
            'Gris',
            'Marron'
        )
    )
);

ALTER TABLE ONLY cobrec1._couleur
ADD CONSTRAINT pk_couleur PRIMARY KEY (code_hexa);

-- TABLE CATEGORIE_PRODUIT
CREATE TABLE cobrec1._categorie_produit (
    id_categorie SERIAL NOT NULL,
    nom_categorie varchar(100) NOT NULL
);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT pk_categorie_produit PRIMARY KEY (id_categorie);

ALTER TABLE ONLY cobrec1._categorie_produit
ADD CONSTRAINT unique_categorie_produit_nom UNIQUE (nom_categorie);

-- TABLE TVA
CREATE TABLE cobrec1._TVA (
    id_TVA SERIAL NOT NULL,
    montant_TVA numeric(4, 1) DEFAULT 0.0,
    libelle_TVA varchar(255) NOT NULL,
    CONSTRAINT verif_TVA_montant_TVA CHECK (
        montant_TVA >= 0.00
        AND montant_TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT pk_TVA PRIMARY KEY (id_TVA);

ALTER TABLE ONLY cobrec1._TVA
ADD CONSTRAINT unique_TVA_libelle UNIQUE (libelle_TVA);

-- TABLE PRODUIT
CREATE TABLE cobrec1._produit (
    id_produit SERIAL NOT NULL,
    id_TVA integer NOT NULL,
    id_vendeur integer NOT NULL,
    p_nom varchar(100) NOT NULL,
    p_description text NOT NULL,
    p_poids numeric(11, 2) DEFAULT 0.0,
    p_volume numeric(11, 2) DEFAULT 0.0,
    p_frais_de_port numeric(11, 2) DEFAULT 0.0,
    p_prix numeric(11, 2) NOT NULL,
    p_note numeric(2, 1) DEFAULT NULL,
    p_stock integer DEFAULT 0,
    p_nb_signalements integer DEFAULT 0,
    date_arrivee_stock_recent timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    date_mise_sur_marche timestamp,
    p_nb_ventes integer DEFAULT 0,
    p_statut varchar(20) DEFAULT 'Ébauche',
    p_origine varchar(20) DEFAULT 'Inconnu',
    p_modif timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT verif_produit_frais_de_port CHECK (p_frais_de_port >= 0.00),
    CONSTRAINT verif_produit_volume CHECK (p_volume >= 0.00),
    CONSTRAINT verif_produit_poids CHECK (p_poids >= 0.00),
    CONSTRAINT verif_produit_prix CHECK (p_prix >= 0),
    CONSTRAINT verif_produit_note CHECK (
        p_note >= 0
        AND p_note <= 5
    ),
    CONSTRAINT verif_produit_stock CHECK (p_stock >= 0),
    CONSTRAINT verif_produit_nb_signalements CHECK (p_nb_signalements >= 0),
    CONSTRAINT verif_produit_nb_ventes CHECK (p_nb_ventes >= 0),
    CONSTRAINT verif_produit_statut CHECK (
        p_statut IN (
            'Ébauche',
            'En ligne',
            'Hors ligne',
            'Supprimé'
        )
    ),
    CONSTRAINT verif_produit_origine CHECK (
        p_origine IN (
            'Inconnu',
            'Bretagne',
            'France',
            'UE',
            'Hors UE'
        )
    )
);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT pk_produit PRIMARY KEY (id_produit);

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_vendeur FOREIGN KEY (id_vendeur) REFERENCES cobrec1._vendeur (id_vendeur) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT fk_produit_TVA FOREIGN KEY (id_TVA) REFERENCES cobrec1._TVA (id_TVA) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._produit
ADD CONSTRAINT unique_produit_nom UNIQUE (p_nom);

-- TABLE REDUCTION
CREATE TABLE cobrec1._reduction (
    id_reduction SERIAL NOT NULL,
    id_produit INT NOT NULL,
    reduction_pourcentage numeric(5, 2) DEFAULT 0.00 NOT NULL,
    reduction_debut timestamp NOT NULL,
    reduction_fin timestamp NOT NULL,
    CONSTRAINT verif_reduction_pourcentage CHECK (
        reduction_pourcentage >= 0.00
        AND reduction_pourcentage <= 100.00
    ),
    /*CONSTRAINT verif_reduction_debut CHECK (reduction_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_reduction_fin CHECK (
        reduction_fin > reduction_debut
    )
);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT pk_reduction PRIMARY KEY (id_reduction);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT unique_reduction_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._reduction
ADD CONSTRAINT fk_reduction_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE PROMOTION
CREATE TABLE cobrec1._promotion (
    id_promotion SERIAL NOT NULL,
    id_produit INT NOT NULL,
    promotion_debut timestamp NOT NULL,
    promotion_fin timestamp NOT NULL,
    /*CONSTRAINT verif_promotion_debut CHECK (promotion_debut >  CURRENT_TIMESTAMP),*/
    CONSTRAINT verif_promotion_fin CHECK (
        promotion_fin > promotion_debut
    )
);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT pk_promotion PRIMARY KEY (id_promotion);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT unique_promotion_id_produit UNIQUE (id_produit);

ALTER TABLE ONLY cobrec1._promotion
ADD CONSTRAINT fk_promotion_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE IMAGE
CREATE TABLE cobrec1._image (
    id_image SERIAL NOT NULL,
    i_lien varchar(255) NOT NULL,
    i_title varchar(255),
    i_alt varchar(255)
);

ALTER TABLE ONLY cobrec1._image
ADD CONSTRAINT pk_image PRIMARY KEY (id_image);

-- TABLE SEUIL_ALERTE
CREATE TABLE cobrec1._seuil_alerte (
    id_seuil SERIAL NOT NULL,
    nb_seuil integer DEFAULT 0 NOT NULL,
    message_seuil text
);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT pk_seuil_alerte PRIMARY KEY (id_seuil);

ALTER TABLE ONLY cobrec1._seuil_alerte
ADD CONSTRAINT unique_seuil_alerte_nb UNIQUE (nb_seuil);

-- TABLE PANIER_COMMANDE
CREATE TABLE cobrec1._panier_commande (
    id_panier SERIAL NOT NULL,
    id_client integer NOT NULL,
    timestamp_commande timestamp
);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT pk_panier_commande PRIMARY KEY (id_panier);

ALTER TABLE ONLY cobrec1._panier_commande
ADD CONSTRAINT fk_panier_commande_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

-- TABLE FACTURE
CREATE TABLE cobrec1._facture (
    id_facture SERIAL NOT NULL,
    id_panier integer NOT NULL,
    id_adresse integer NOT NULL,
    nom_destinataire varchar(100),
    prenom_destinataire varchar(100),
    f_total_ht numeric(11, 2) DEFAULT 0.0,
    f_total_remise numeric(11, 2) DEFAULT 0.0,
    f_total_ttc numeric(11, 2) DEFAULT 0.0
);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT pk_facture PRIMARY KEY (id_facture);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT unique_facture_panier UNIQUE (id_panier);

ALTER TABLE ONLY cobrec1._facture
ADD CONSTRAINT fk_facture_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._adresse
ADD CONSTRAINT fk_facture_adresse FOREIGN KEY (id_adresse) REFERENCES cobrec1._adresse (id_adresse) ON DELETE CASCADE;

-- TABLE PAIEMENT
CREATE TABLE cobrec1._paiement (
    id_paiement SERIAL NOT NULL,
    id_facture integer NOT NULL,
    mode_paiement varchar(50) DEFAULT 'CB' NOT NULL,
    timestamp_paiement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    numero_carte varchar(16),
    mois_annee_expiration varchar(5),
    titulaire_carte varchar(100),
    cryptogramme_carte varchar(3)
);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT pk_paiement PRIMARY KEY (id_paiement);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT unique_paiement_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._paiement
ADD CONSTRAINT fk_paiement_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE LIVRAISON
CREATE TABLE cobrec1._livraison (
    id_livraison SERIAL NOT NULL,
    id_facture integer NOT NULL,
    date_livraison date,
    etat_livraison varchar(50) DEFAULT 'En préparation' NOT NULL
);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT pk_livraison PRIMARY KEY (id_livraison);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT unique_livraison_facture UNIQUE (id_facture);

ALTER TABLE ONLY cobrec1._livraison
ADD CONSTRAINT fk_livraison_facture FOREIGN KEY (id_facture) REFERENCES cobrec1._facture (id_facture) ON DELETE CASCADE;

-- TABLE AVIS
CREATE TABLE cobrec1._avis (
    id_avis SERIAL NOT NULL,
    id_produit integer NOT NULL,
    id_client integer,
    a_texte text,
    a_note numeric(2, 1),
    a_owner_token text,
    a_pouce_bleu integer DEFAULT 0,
    a_pouce_rouge integer DEFAULT 0,
    a_nb_signalements integer DEFAULT 0,
    a_timestamp_creation timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    a_timestamp_modification timestamp,
    a_titre varchar(255),
    CONSTRAINT verif_pouce_bleu CHECK (a_pouce_bleu >= 0),
    CONSTRAINT verif_pouce_rouge CHECK (a_pouce_rouge >= 0)
);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT pk_avis PRIMARY KEY (id_avis);

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._avis
ADD CONSTRAINT fk_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE SET NULL;

-- TABLE VOTE_AVIS
CREATE TABLE cobrec1._vote_avis (
    id_client integer NOT NULL,
    id_avis integer NOT NULL,
    vote_type varchar(10) NOT NULL, -- 'like' ou 'dislike'
    CONSTRAINT pk_vote_avis PRIMARY KEY (id_client, id_avis),
    CONSTRAINT fk_vote_avis_client FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE,
    CONSTRAINT fk_vote_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE,
    CONSTRAINT chk_vote_type CHECK (
        vote_type IN ('like', 'dislike')
    )
);

-- TABLE COMMENTAIRE
CREATE TABLE cobrec1._commentaire (
    id_commentaire SERIAL NOT NULL,
    id_avis integer NOT NULL,
    a_note numeric(2, 1),
    id_livraison integer UNIQUE NOT NULL,
    a_achat_verifie boolean DEFAULT FALSE,
    id_client integer NOT NULL,
    CONSTRAINT verif_commentaire_note CHECK (
        a_note IN (
            NULL,
            0.0,
            0.5,
            1.0,
            1.5,
            2.0,
            2.5,
            3.0,
            3.5,
            4.0,
            4.5,
            5.0
        )
    )
);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT pk_commentaire PRIMARY KEY (id_commentaire);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk1_commentaire_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk2_commentaire_avis FOREIGN KEY (id_client) REFERENCES cobrec1._client (id_client) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT fk_commentaire_livraison FOREIGN KEY (id_livraison) REFERENCES cobrec1._livraison (id_livraison) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._commentaire
ADD CONSTRAINT unique_commentaire_ids UNIQUE (id_livraison, id_client);

-- TABLE REPONSE
CREATE TABLE cobrec1._reponse (
    id_reponse SERIAL NOT NULL,
    id_avis integer NOT NULL,
    id_avis_parent integer NOT NULL
);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT pk_reponse PRIMARY KEY (id_reponse);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT unique_reponse_avis UNIQUE (id_avis);

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._reponse
ADD CONSTRAINT fk_reponse_avis_parent FOREIGN KEY (id_avis_parent) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE SIGNALEMENT
CREATE TABLE cobrec1._signalement (
    id_signalement SERIAL NOT NULL,
    id_compte integer NOT NULL,
    timestamp_signalement timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    type_signalement varchar(50) NOT NULL,
    motif_signalement text NOT NULL,
    commentaire_libre text,
    CONSTRAINT verif_signalement_type_signalement CHECK (
        type_signalement IN (
            'signale_avis',
            'signale_compte',
            'signale_produit'
        )
    )
);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT pk_signalement PRIMARY KEY (id_signalement);

ALTER TABLE ONLY cobrec1._signalement
ADD CONSTRAINT fk_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE CONTIENT
CREATE TABLE cobrec1._contient (
    id_panier integer NOT NULL,
    id_produit integer NOT NULL,
    quantite integer NOT NULL,
    prix_unitaire numeric(11, 2) NOT NULL,
    remise_unitaire numeric(11, 2) DEFAULT 0.0,
    frais_de_port numeric(11, 2) DEFAULT 0.0,
    TVA numeric(4, 1) DEFAULT 0.0,
    CONSTRAINT verif_contient_quantite CHECK (quantite > 0),
    CONSTRAINT verif_contient_prix_unitaire CHECK (prix_unitaire > 0),
    CONSTRAINT verif_contient_remise_unitaire CHECK (remise_unitaire >= 0),
    CONSTRAINT verif_contient_frais_de_port CHECK (frais_de_port >= 0),
    CONSTRAINT verif_contient_TVA CHECK (
        TVA >= 0.00
        AND TVA <= 100.00
    )
);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT pk_contient PRIMARY KEY (id_panier, id_produit);

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_panier FOREIGN KEY (id_panier) REFERENCES cobrec1._panier_commande (id_panier) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._contient
ADD CONSTRAINT fk_contient_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PRODUIT
CREATE TABLE cobrec1._represente_produit (
    id_image integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT pk_represente_produit PRIMARY KEY (id_image, id_produit);

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_produit
ADD CONSTRAINT fk_represente_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE REPRESENTE_PROMOTION
-- CREATE TABLE cobrec1._represente_promotion (
--     id_image integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT pk_represente_promotion PRIMARY KEY (id_image, id_promotion);

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_image FOREIGN KEY (id_image)
--             REFERENCES cobrec1._image(id_image) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._represente_promotion
--     ADD CONSTRAINT fk_represente_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE REPRESENTE_COMPTE
CREATE TABLE cobrec1._represente_compte (
    id_image integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT pk_represente_compte PRIMARY KEY (id_image, id_compte);

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_image FOREIGN KEY (id_image) REFERENCES cobrec1._image (id_image) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._represente_compte
ADD CONSTRAINT fk_represente_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE FAIT_PARTIE_DE
CREATE TABLE cobrec1._fait_partie_de (
    id_produit integer NOT NULL,
    id_categorie integer NOT NULL
);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT pk_fait_partie_de PRIMARY KEY (id_produit, id_categorie);

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._fait_partie_de
ADD CONSTRAINT fk_fait_partie_de_categorie FOREIGN KEY (id_categorie) REFERENCES cobrec1._categorie_produit (id_categorie) ON DELETE CASCADE;

-- TABLE EST_DOTE_DE
CREATE TABLE cobrec1._est_dote_de (
    id_produit integer NOT NULL,
    code_hexa varchar(7) NOT NULL
);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT pk_est_dote_de PRIMARY KEY (id_produit, code_hexa);

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._est_dote_de
ADD CONSTRAINT fk_est_dote_de_couleur FOREIGN KEY (code_hexa) REFERENCES cobrec1._couleur (code_hexa) ON DELETE CASCADE;

-- TABLE EN_REDUCTION
-- CREATE TABLE cobrec1._en_reduction (
--     id_produit integer NOT NULL,
--     id_reduction integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT pk_en_reduction PRIMARY KEY (id_produit, id_reduction);

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_reduction
--     ADD CONSTRAINT fk_en_reduction_reduction FOREIGN KEY (id_reduction)
--             REFERENCES cobrec1._reduction(id_reduction) ON DELETE CASCADE;

-- TABLE EN_PROMOTION
-- CREATE TABLE cobrec1._en_promotion (
--     id_produit integer NOT NULL,
--     id_promotion integer NOT NULL
-- );

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT pk_en_promotion PRIMARY KEY (id_produit, id_promotion);

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_produit FOREIGN KEY (id_produit)
--             REFERENCES cobrec1._produit(id_produit) ON DELETE CASCADE;

-- ALTER TABLE ONLY cobrec1._en_promotion
--     ADD CONSTRAINT fk_en_promotion_promotion FOREIGN KEY (id_promotion)
--             REFERENCES cobrec1._promotion(id_promotion) ON DELETE CASCADE;

-- TABLE SIGNALE_PRODUIT
CREATE TABLE cobrec1._signale_produit (
    id_signalement integer NOT NULL,
    id_produit integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT pk_signale_produit PRIMARY KEY (id_signalement, id_produit);

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_produit
ADD CONSTRAINT fk_signale_produit_produit FOREIGN KEY (id_produit) REFERENCES cobrec1._produit (id_produit) ON DELETE CASCADE;

-- TABLE SIGNALE_COMPTE
CREATE TABLE cobrec1._signale_compte (
    id_signalement integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT pk_signale_compte PRIMARY KEY (id_signalement, id_compte);

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_compte
ADD CONSTRAINT fk_signale_compte_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- TABLE SIGNALE_AVIS
CREATE TABLE cobrec1._signale_avis (
    id_signalement integer NOT NULL,
    id_avis integer NOT NULL
);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT pk_signale_avis PRIMARY KEY (id_signalement, id_avis);

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._signale_avis
ADD CONSTRAINT fk_signale_avis_avis FOREIGN KEY (id_avis) REFERENCES cobrec1._avis (id_avis) ON DELETE CASCADE;

-- TABLE ENVOIE_SIGNALEMENT
CREATE TABLE cobrec1._envoie_signalement (
    id_compte integer NOT NULL,
    id_signalement integer NOT NULL
);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT pk_envoie_signalement PRIMARY KEY (id_compte, id_signalement);

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._envoie_signalement
ADD CONSTRAINT fk_envoie_signalement_signalement FOREIGN KEY (id_signalement) REFERENCES cobrec1._signalement (id_signalement) ON DELETE CASCADE;

-- TABLE DEFINIE_POUR
CREATE TABLE cobrec1._definie_pour (
    id_seuil integer NOT NULL,
    id_compte integer NOT NULL
);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT pk_definie_pour PRIMARY KEY (id_seuil, id_compte);

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_seuil FOREIGN KEY (id_seuil) REFERENCES cobrec1._seuil_alerte (id_seuil) ON DELETE CASCADE;

ALTER TABLE ONLY cobrec1._definie_pour
ADD CONSTRAINT fk_definie_pour_compte FOREIGN KEY (id_compte) REFERENCES cobrec1._compte (id_compte) ON DELETE CASCADE;

-- ============================================
-- TABLE DU COTE TRANSPORTEUR
-- ============================================

CREATE TABLE cobrec1.bordereau (
    id_bordereau integer NOT NULL,
    id_commande integer NOT NULL
);

-- ============================================
-- FONCTIONS ET TRIGGERS
-- ============================================
CREATE FUNCTION maj_moyenne_notes_produit_apres_insertion()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_modification()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = NEW.id_produit
    )
    WHERE id_produit = NEW.id_produit;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE FUNCTION maj_moyenne_notes_produit_apres_suppression()
RETURNS TRIGGER AS $$
BEGIN
    UPDATE cobrec1._produit
    SET p_note = (
        SELECT ROUND(AVG(a_note)::numeric,1)
        FROM cobrec1._avis
        WHERE id_produit = OLD.id_produit
    )
    WHERE id_produit = OLD.id_produit;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_moyenne_notes_produit_apres_insertion
AFTER INSERT on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_insertion();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_modification
AFTER UPDATE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_modification();

CREATE TRIGGER tgr_moyenne_notes_produit_apres_suppression
AFTER DELETE on _avis
FOR EACH ROW
EXECUTE PROCEDURE maj_moyenne_notes_produit_apres_suppression();

CREATE FUNCTION mise_sur_marche_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (OLD.p_statut = 'Ébauche' AND NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche
AFTER UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit();

CREATE FUNCTION mise_sur_marche_produit_insert()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_statut = 'En ligne') THEN
        UPDATE cobrec1._produit
        SET date_mise_sur_marche = CURRENT_TIMESTAMP
        WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_mise_sur_marche_insert
AFTER INSERT on _produit
FOR EACH ROW
EXECUTE PROCEDURE mise_sur_marche_produit_insert();

CREATE FUNCTION update_p_modif_produit()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.p_modif = OLD.p_modif) THEN
        NEW.p_modif = CURRENT_TIMESTAMP;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_update_p_modif_produit
BEFORE UPDATE on _produit
FOR EACH ROW
EXECUTE PROCEDURE update_p_modif_produit();

CREATE FUNCTION produit_deja_en_reduction_insert()
RETURNS TRIGGER AS $$
BEGIN
    PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    IF FOUND THEN
        DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_insert
BEFORE INSERT on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_insert();

CREATE FUNCTION produit_deja_en_reduction_update()
RETURNS TRIGGER AS $$
BEGIN
    IF (NEW.id_produit != OLD.id_produit) THEN
        PERFORM * FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        IF FOUND THEN
            DELETE FROM cobrec1._reduction WHERE id_produit = NEW.id_produit;
        END IF;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER tgr_produit_deja_en_reduction_update
BEFORE UPDATE on _reduction
FOR EACH ROW
EXECUTE PROCEDURE produit_deja_en_reduction_update();

-- ============================================
-- PEUPLEMENT DE LA BASE DE DONNÉES
-- ============================================

-- 1. COMPTES
INSERT INTO
    _compte (
        nom,
        prenom,
        email,
        num_telephone,
        mdp,
        etat_A2F,
        nb_fois_signale,
        nb_signalements_avis,
        nb_cpts_signales,
        nb_avis_signales
    )
VALUES (
        'Maeleau',
        'Le Hyver',
        'admin@cobrec.fr',
        '0601020304',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Lopicier',
        'Mallo',
        'vendeur1@example.com',
        '0612345678',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Elouard',
        'Jean-Jacques',
        'vendeur2@shop.fr',
        '0623456789',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        1,
        0,
        0,
        0
    ),
    (
        'Jean',
        'Dupont',
        'client1@gmail.com',
        '0634567890',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        1,
        0,
        0
    ),
    (
        'Marie',
        'Martin',
        'client2@yahoo.fr',
        '0645678901',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        1,
        0
    ),
    (
        'Pierre',
        'Durand',
        'client3@outlook.com',
        '0656789012',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Sophie',
        'Bernard',
        'client4@free.fr',
        '0667890123',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Lucas',
        'Petit',
        'client5@orange.fr',
        '0678901234',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    ),
    (
        'Emma',
        'Lefebvre',
        'client6@wanadoo.fr',
        '0689012345',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        TRUE,
        0,
        0,
        0,
        0
    ),
    (
        'Martinière',
        'Yvili',
        'vendeur3@boutique.fr',
        '0690123456',
        '$2y$10$PBn4Ku/PsP8epY7TLI1iS./gbw53STiEgT9Af3h/Ni5MMLMUU/JbS',
        FALSE,
        0,
        0,
        0,
        0
    );

-- 2. ADMINISTRATEURS
INSERT INTO _administrateur (id_compte) VALUES (1);

-- 3. VENDEURS
INSERT INTO
    _vendeur (
        id_compte,
        SIREN,
        raison_sociale,
        denomination,
        nb_produits_crees
    )
VALUES (
        2,
        '123456789',
        'TechStore SARL',
        'TechStore',
        5
    ),
    (
        3,
        '987654321',
        'FashionHub SAS',
        'FashionHub',
        3
    ),
    (
        10,
        '456789123',
        'SportPro EURL',
        'SportPro',
        2
    );

-- 4. CLIENTS
INSERT INTO
    _client (
        id_compte,
        c_pseudo,
        c_nb_produits_achetes,
        c_depense_totale,
        c_cloture,
        c_datenaissance
    )
VALUES (
        4,
        'jdupont',
        2,
        907.18,
        FALSE,
        '1985-03-15'
    ),
    (
        5,
        'mmartin',
        3,
        124.75,
        FALSE,
        '1990-07-22'
    ),
    (
        6,
        'pdurand',
        1,
        1091.98,
        FALSE,
        '1988-11-10'
    ),
    (
        7,
        'sbernard',
        2,
        298.76,
        FALSE,
        '1995-05-30'
    ),
    (
        8,
        'lpetit',
        0,
        0.0,
        FALSE,
        '2000-01-18'
    ),
    (
        9,
        'elefebvre',
        1,
        179.98,
        FALSE,
        '1992-09-25'
    );

-- 5. ADRESSES
INSERT INTO
    _adresse (
        id_compte,
        a_adresse,
        a_ville,
        a_code_postal,
        a_complement
    )
VALUES (
        4,
        '15 rue de la Paix',
        'Paris',
        '75001',
        'Apt 5'
    ),
    (
        5,
        '23 avenue des Champs',
        'Lyon',
        '69001',
        NULL
    ),
    (
        6,
        '8 boulevard Victor Hugo',
        'Marseille',
        '13001',
        'Bâtiment B'
    ),
    (
        7,
        '42 rue du Commerce',
        'Toulouse',
        '31000',
        NULL
    ),
    (
        8,
        '67 place de la République',
        'Nice',
        '06000',
        '3ème étage'
    ),
    (
        9,
        '91 rue Principale',
        'Bordeaux',
        '33000',
        NULL
    ),
    (
        2,
        '12 avenue du Commerce',
        'Paris',
        '75015',
        'Entrepôt A'
    ),
    (
        3,
        '55 rue de la Mode',
        'Lyon',
        '69002',
        NULL
    ),
    (
        10,
        '78 boulevard du Sport',
        'Marseille',
        '13008',
        'Zone industrielle'
    );

-- 6. COULEURS
INSERT INTO
    _couleur (code_hexa, nom, type_couleur)
VALUES (
        '#FF0000',
        'Rouge vif',
        'Rouge'
    ),
    (
        '#0000FF',
        'Bleu marine',
        'Bleu'
    ),
    ('#000000', 'Noir', 'Noir'),
    (
        '#FFFFFF',
        'Blanc pur',
        'Blanc'
    ),
    (
        '#00FF00',
        'Vert émeraude',
        'Vert'
    ),
    (
        '#FFFF00',
        'Jaune citron',
        'Jaune'
    ),
    ('#FFA500', 'Orange', 'Orange'),
    ('#808080', 'Gris', 'Gris'),
    (
        '#8B4513',
        'Marron chocolat',
        'Marron'
    ),
    ('#EE82EE', 'Violet', 'Violet'),
    (
        '#87CEEB',
        'Bleu ciel',
        'Bleu'
    ),
    (
        '#32CD32',
        'Vert lime',
        'Vert'
    );

-- 7. CATÉGORIES
INSERT INTO
    _categorie_produit (nom_categorie)
VALUES ('Électronique'),
    ('Vêtements'),
    ('Accessoires'),
    ('Maison'),
    ('Sport'),
    ('Livres'),
    ('Informatique'),
    ('Mode homme'),
    ('Mode femme'),
    ('Chaussures');

-- 8. TVA
INSERT INTO
    _TVA (montant_TVA, libelle_TVA)
VALUES (20.0, 'TVA normale'),
    (10.0, 'TVA intermédiaire'),
    (5.5, 'TVA réduite'),
    (2.1, 'TVA super réduite');

-- 11. PRODUITS
INSERT INTO
    _produit (
        id_TVA,
        id_vendeur,
        p_nom,
        p_description,
        p_prix,
        p_stock,
        p_statut,
        p_origine,
        p_poids,
        p_volume,
        p_frais_de_port,
        p_note,
        p_nb_ventes
    )
VALUES (
        1,
        1,
        'Smartphone XPro',
        'Smartphone dernière génération avec écran OLED 6.7 pouces, 256Go stockage, 5G',
        599.99,
        35,
        'En ligne',
        'Bretagne',
        0.180,
        0.01,
        5.99,
        4.3,
        15
    ),
    (
        1,
        1,
        'Ordinateur portable Ultra',
        'PC portable 15 pouces, 16Go RAM, SSD 512Go, processeur i7',
        899.99,
        22,
        'En ligne',
        'Bretagne',
        2.5,
        0.03,
        9.99,
        4.0,
        8
    ),
    (
        1,
        2,
        'T-shirt coton bio',
        'T-shirt 100% coton biologique, coupe regular, diverses couleurs',
        24.99,
        58,
        'En ligne',
        'Bretagne',
        0.15,
        0.5,
        3.99,
        5.0,
        42
    ),
    (
        1,
        2,
        'Jean slim',
        'Jean coupe slim stretch, denim premium',
        49.99,
        62,
        'En ligne',
        'Bretagne',
        1.00,
        0.01,
        4.99,
        NULL,
        18
    ),
    (
        1,
        2,
        'Robe d été',
        'Robe légère et fluide pour l été, motifs floraux',
        39.99,
        48,
        'En ligne',
        'Bretagne',
        0.30,
        0.08,
        4.99,
        NULL,
        12
    ),
    (
        2,
        1,
        'Casque audio Bluetooth',
        'Casque sans fil avec réduction de bruit active, autonomie 30h',
        149.99,
        15,
        'En ligne',
        'Bretagne',
        0.25,
        0.02,
        5.99,
        4.5,
        25
    ),
    (
        1,
        2,
        'Sac à dos urbain',
        'Sac à dos pour ordinateur portable, compartiments multiples, imperméable',
        69.99,
        35,
        'En ligne',
        'Bretagne',
        0.60,
        0.15,
        6.99,
        NULL,
        10
    ),
    (
        1,
        1,
        'Montre connectée',
        'Montre sport avec GPS, cardiofréquencemètre, étanche 50m',
        199.99,
        15,
        'En ligne',
        'Bretagne',
        0.05,
        0.01,
        3.99,
        4.7,
        20
    ),
    (
        1,
        3,
        'Chaussures running',
        'Chaussures de course avec amorti premium, semelle respirante',
        89.99,
        54,
        'En ligne',
        'Bretagne',
        0.40,
        0.08,
        5.99,
        4.2,
        16
    ),
    (
        1,
        1,
        'Tablette 10 pouces',
        'Tablette Android, écran Full HD, 64Go, stylet inclus',
        299.99,
        16,
        'En ligne',
        'Bretagne',
        0.50,
        0.02,
        7.99,
        3.8,
        9
    ),
    (
        1,
        3,
        'Ballon de football',
        'Ballon officiel en cuir synthétique, taille 5',
        29.99,
        85,
        'En ligne',
        'Bretagne',
        0.45,
        0.06,
        4.99,
        4.6,
        35
    ),
    (
        1,
        2,
        'Veste en cuir',
        'Veste en cuir véritable, coupe motard, doublure intérieure',
        189.99,
        15,
        'En ligne',
        'Bretagne',
        1.20,
        0.01,
        8.99,
        NULL,
        5
    ),
    (
        3,
        1,
        'Livre cuisine française',
        'Recettes traditionnelles de cuisine française, 300 pages',
        24.99,
        28,
        'En ligne',
        'Bretagne',
        0.80,
        0.03,
        3.99,
        4.8,
        22
    ),
    (
        1,
        3,
        'Tapis de yoga',
        'Tapis antidérapant, épaisseur 6mm, avec sac de transport',
        34.99,
        52,
        'En ligne',
        'Bretagne',
        1.10,
        0.02,
        5.99,
        4.4,
        28
    ),
    (
        1,
        1,
        'Clavier mécanique RGB',
        'Clavier gamer avec rétroéclairage RGB, switches mécaniques',
        79.99,
        29,
        'En ligne',
        'Bretagne',
        0.90,
        0.04,
        5.99,
        4.1,
        11
    ),
    (
        1,
        1,
        'Console NextGen',
        'Console de jeu dernière génération, 1To SSD, 4K HDR',
        499.99,
        0,
        'Hors ligne',
        'France',
        3.5,
        0.02,
        14.99,
        4.8,
        25
    ),
    (
        1,
        2,
        'Sweat à capuche premium',
        'Sweat-shirt en coton bio, coupe oversize, poche kangourou',
        59.99,
        0,
        'Hors ligne',
        'France',
        0.70,
        0.03,
        5.99,
        4.4,
        18
    ),
    (
        1,
        3,
        'Raquette de tennis pro',
        'Raquette carbone, tension 25kg, grip confort',
        129.99,
        0,
        'Hors ligne',
        'France',
        0.35,
        0.02,
        6.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Écran gaming 4K 27"',
        'Écran IPS 27 pouces, 144Hz, HDR400, temps de réponse 1ms',
        349.99,
        0,
        'Hors ligne',
        'France',
        5.2,
        0.35,
        19.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Baskets limited edition',
        'Baskets cuir véritable, édition limitée, semelle comfort',
        179.99,
        0,
        'Hors ligne',
        'France',
        0.80,
        0.06,
        7.99,
        4.9,
        65
    ),
    (
        1,
        3,
        'Vélo de route carbone',
        'Vélo course cadre carbone, groupe Shimano 105, 11 vitesses',
        1299.99,
        0,
        'Hors ligne',
        'UE',
        8.5,
        0.15,
        29.99,
        4.8,
        25
    ),
    (
        1,
        1,
        'Drone professionnel 4K',
        'Drone avec caméra 4K, stabilisation 3 axes, autonomie 30min',
        899.99,
        0,
        'Hors ligne',
        'UE',
        1.2,
        0.02,
        12.99,
        4.6,
        18
    ),
    (
        1,
        2,
        'Manteau d hiver imperméable',
        'Manteau longueur genoux, doublure polaire, coupe-vent',
        179.99,
        0,
        'Hors ligne',
        'UE',
        1.5,
        0.01,
        8.99,
        4.4,
        65
    ),
    (
        1,
        3,
        'Tente 4 places',
        'Tente familiale, double toit, arceaux aluminium, imperméable',
        249.99,
        0,
        'Hors ligne',
        'Hors UE',
        4.8,
        0.08,
        19.99,
        4.7,
        32
    ),
    (
        1,
        1,
        'Enceinte Bluetooth waterproof',
        'Enceinte portable, autonomie 24h, résistance IP67',
        129.99,
        0,
        'Hors ligne',
        'Hors UE',
        0.9,
        0.05,
        6.99,
        4.9,
        95
    ),
    (
        2,
        1,
        'Pull Marin de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Local. Qualité supérieure garantie.',
        36.37,
        31,
        'En ligne',
        'Bretagne',
        2.06,
        0.45,
        5.78,
        4.4,
        12
    ),
    (
        1,
        1,
        'Bonnet Miki de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Bio. Qualité supérieure garantie.',
        121.37,
        6,
        'Hors ligne',
        'Bretagne',
        2.3,
        0.09,
        8.8,
        4.3,
        60
    ),
    (
        2,
        3,
        'Galettes Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        147.92,
        142,
        'En ligne',
        'Bretagne',
        0.46,
        0.46,
        5.71,
        4.3,
        97
    ),
    (
        1,
        3,
        'Écharpe Rayée Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        173.77,
        102,
        'En ligne',
        'Bretagne',
        0.91,
        0.32,
        8.28,
        4.4,
        58
    ),
    (
        1,
        2,
        'Écharpe Rayée de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Durable. Qualité supérieure garantie.',
        197.02,
        168,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.12,
        7.92,
        4.8,
        19
    ),
    (
        4,
        2,
        'Ciré Navy de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        104.35,
        169,
        'En ligne',
        'Bretagne',
        1.43,
        0.14,
        7.22,
        4.6,
        72
    ),
    (
        4,
        3,
        'Bracelet Ancre Fait main',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        172.75,
        44,
        'Hors ligne',
        'Bretagne',
        1.92,
        0.4,
        8.8,
        4.1,
        102
    ),
    (
        1,
        3,
        'Marinière Local',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        74.29,
        80,
        'Hors ligne',
        'Bretagne',
        1.36,
        0.23,
        13.58,
        4.9,
        72
    ),
    (
        3,
        1,
        'Bracelet Ancre de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Traditionnel. Qualité supérieure garantie.',
        40.53,
        140,
        'En ligne',
        'Bretagne',
        2.76,
        0.3,
        9.4,
        4.1,
        97
    ),
    (
        3,
        3,
        'Pendentif Hermine Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        164.23,
        199,
        'Hors ligne',
        'Bretagne',
        1.64,
        0.07,
        10.94,
        4.9,
        47
    ),
    (
        1,
        3,
        'Sac Voile de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Local. Qualité supérieure garantie.',
        136.95,
        100,
        'En ligne',
        'Bretagne',
        1.37,
        0.26,
        6.09,
        4.2,
        91
    ),
    (
        2,
        3,
        'Écharpe Rayée de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        21.13,
        22,
        'Hors ligne',
        'Bretagne',
        2.73,
        0.43,
        5.64,
        4.2,
        129
    ),
    (
        1,
        2,
        'Coussin Triskell de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        134.55,
        95,
        'Hors ligne',
        'Bretagne',
        1.33,
        0.24,
        11.56,
        4.7,
        30
    ),
    (
        1,
        3,
        'Écharpe Rayée Authentique',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Authentique. Qualité supérieure garantie.',
        36.49,
        51,
        'En ligne',
        'Bretagne',
        0.91,
        0.13,
        13.31,
        4.4,
        145
    ),
    (
        4,
        3,
        'Écharpe Rayée Bio',
        'Produit breton authentique. Fabriqué avec passion à Brest. Bio. Qualité supérieure garantie.',
        50.4,
        107,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.09,
        5.02,
        4.4,
        121
    ),
    (
        1,
        3,
        'Bonnet Miki Authentique',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        119.47,
        143,
        'En ligne',
        'Bretagne',
        0.28,
        0.16,
        5.45,
        4.5,
        140
    ),
    (
        3,
        1,
        'Ciré Navy de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        187.96,
        150,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.3,
        10.57,
        4.4,
        149
    ),
    (
        1,
        1,
        'Bol Breton Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Traditionnel. Qualité supérieure garantie.',
        66.7,
        85,
        'En ligne',
        'Bretagne',
        2.79,
        0.47,
        5.08,
        4.6,
        149
    ),
    (
        1,
        3,
        'Bol Breton Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        176.18,
        99,
        'Hors ligne',
        'Bretagne',
        0.93,
        0.22,
        9.89,
        4.3,
        140
    ),
    (
        3,
        1,
        'Pull Marin de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Local. Qualité supérieure garantie.',
        30.23,
        146,
        'En ligne',
        'Bretagne',
        0.55,
        0.15,
        6.9,
        4.3,
        72
    ),
    (
        1,
        1,
        'Affiche Vintage de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        155.74,
        168,
        'En ligne',
        'Bretagne',
        2.94,
        0.09,
        8.98,
        4.7,
        148
    ),
    (
        2,
        3,
        'Vareuse Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        120.09,
        42,
        'En ligne',
        'Bretagne',
        1.35,
        0.03,
        8.28,
        4.9,
        15
    ),
    (
        3,
        2,
        'Pull Marin Bio',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Bio. Qualité supérieure garantie.',
        151.65,
        65,
        'En ligne',
        'Bretagne',
        2.61,
        0.49,
        12.3,
        4.9,
        11
    ),
    (
        1,
        3,
        'Kabig Bio',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Bio. Qualité supérieure garantie.',
        172.27,
        61,
        'En ligne',
        'Bretagne',
        0.68,
        0.46,
        8.15,
        4.8,
        63
    ),
    (
        1,
        2,
        'Phare Miniature Fait main',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Fait main. Qualité supérieure garantie.',
        62.75,
        169,
        'En ligne',
        'Bretagne',
        1.58,
        0.34,
        12.59,
        4.3,
        12
    ),
    (
        3,
        1,
        'Bol Breton Fait main',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        75.33,
        85,
        'Hors ligne',
        'Bretagne',
        1.37,
        0.49,
        6.04,
        4.9,
        53
    ),
    (
        3,
        3,
        'Bracelet Ancre de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        23.23,
        175,
        'Hors ligne',
        'Bretagne',
        2.77,
        0.32,
        10.97,
        4.1,
        81
    ),
    (
        1,
        2,
        'Caramels de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        135.67,
        102,
        'Hors ligne',
        'Bretagne',
        2.06,
        0.45,
        10.54,
        4.3,
        145
    ),
    (
        3,
        3,
        'Affiche Vintage de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Durable. Qualité supérieure garantie.',
        137.69,
        135,
        'Hors ligne',
        'Bretagne',
        1.47,
        0.45,
        12.16,
        4.2,
        26
    ),
    (
        4,
        2,
        'Écharpe Rayée de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Authentique. Qualité supérieure garantie.',
        37.85,
        16,
        'Hors ligne',
        'Bretagne',
        0.81,
        0.24,
        12.65,
        4.1,
        111
    ),
    (
        4,
        3,
        'Vareuse de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        51.36,
        183,
        'Hors ligne',
        'Bretagne',
        1.6,
        0.03,
        7.24,
        4.8,
        121
    ),
    (
        4,
        3,
        'Bracelet Ancre Durable',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Durable. Qualité supérieure garantie.',
        150.55,
        126,
        'En ligne',
        'Bretagne',
        1.41,
        0.38,
        12.56,
        4.3,
        138
    ),
    (
        1,
        2,
        'Lampe Tempête de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Local. Qualité supérieure garantie.',
        73.48,
        143,
        'Hors ligne',
        'Bretagne',
        0.33,
        0.08,
        8.45,
        4.2,
        59
    ),
    (
        4,
        1,
        'Sac Voile de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Bio. Qualité supérieure garantie.',
        167.42,
        104,
        'Hors ligne',
        'Bretagne',
        2.72,
        0.3,
        11.26,
        4.9,
        102
    ),
    (
        4,
        1,
        'Caramels de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Authentique. Qualité supérieure garantie.',
        61.58,
        129,
        'En ligne',
        'Bretagne',
        0.18,
        0.17,
        11.11,
        4.4,
        47
    ),
    (
        4,
        2,
        'Pendentif Hermine de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Fait main. Qualité supérieure garantie.',
        35.65,
        123,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.14,
        7.95,
        4.5,
        91
    ),
    (
        2,
        1,
        'Ciré Navy Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Artisanal. Qualité supérieure garantie.',
        19.84,
        94,
        'En ligne',
        'Bretagne',
        0.75,
        0.04,
        13.62,
        4.0,
        12
    ),
    (
        3,
        1,
        'Vareuse de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        51.2,
        184,
        'En ligne',
        'Bretagne',
        0.84,
        0.19,
        10.45,
        5.0,
        34
    ),
    (
        1,
        2,
        'Pendentif Hermine Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        47.48,
        156,
        'Hors ligne',
        'Bretagne',
        2.1,
        0.32,
        5.92,
        4.8,
        35
    ),
    (
        4,
        1,
        'Galettes de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Premium. Qualité supérieure garantie.',
        89.39,
        130,
        'Hors ligne',
        'Bretagne',
        0.41,
        0.48,
        10.72,
        4.8,
        44
    ),
    (
        2,
        2,
        'Sac Voile Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Durable. Qualité supérieure garantie.',
        148.16,
        73,
        'Hors ligne',
        'Bretagne',
        1.03,
        0.13,
        13.41,
        4.3,
        120
    ),
    (
        1,
        1,
        'Marinière de Pont-Aven',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Premium. Qualité supérieure garantie.',
        50.09,
        71,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.44,
        11.31,
        4.3,
        7
    ),
    (
        4,
        3,
        'Sac Voile Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        102.77,
        9,
        'Hors ligne',
        'Bretagne',
        0.37,
        0.12,
        11.23,
        4.3,
        99
    ),
    (
        2,
        1,
        'Sac Voile Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        61.2,
        69,
        'Hors ligne',
        'Bretagne',
        0.77,
        0.36,
        7.84,
        4.7,
        52
    ),
    (
        1,
        1,
        'Pendentif Hermine Local',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Local. Qualité supérieure garantie.',
        167.37,
        80,
        'Hors ligne',
        'Bretagne',
        0.76,
        0.1,
        5.13,
        4.5,
        75
    ),
    (
        1,
        2,
        'Vareuse Durable',
        'Produit breton authentique. Fabriqué avec passion à Pont-Aven. Fait main. Qualité supérieure garantie.',
        118.5,
        125,
        'Hors ligne',
        'Bretagne',
        1.49,
        0.18,
        13.69,
        4.3,
        127
    ),
    (
        4,
        2,
        'Pendentif Hermine Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        116.38,
        82,
        'Hors ligne',
        'Bretagne',
        0.35,
        0.13,
        10.02,
        4.4,
        62
    ),
    (
        2,
        1,
        'Pendentif Hermine de Roscoff',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        21.38,
        194,
        'En ligne',
        'Bretagne',
        0.39,
        0.38,
        10.63,
        4.3,
        25
    ),
    (
        2,
        2,
        'Ciré Navy de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Artisanal. Qualité supérieure garantie.',
        140.29,
        125,
        'En ligne',
        'Bretagne',
        0.94,
        0.12,
        11.36,
        4.7,
        121
    ),
    (
        4,
        1,
        'Pull Marin Authentique',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        181.69,
        41,
        'Hors ligne',
        'Bretagne',
        0.31,
        0.09,
        7.77,
        4.7,
        150
    ),
    (
        1,
        1,
        'Bolée à Cidre Local',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Local. Qualité supérieure garantie.',
        103.33,
        25,
        'En ligne',
        'Bretagne',
        1.83,
        0.45,
        11.61,
        4.6,
        11
    ),
    (
        4,
        2,
        'Bol Breton de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.14,
        76,
        'Hors ligne',
        'Bretagne',
        0.63,
        0.3,
        10.71,
        4.5,
        28
    ),
    (
        3,
        2,
        'Phare Miniature de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        141.1,
        78,
        'Hors ligne',
        'Bretagne',
        2.02,
        0.21,
        11.84,
        4.0,
        27
    ),
    (
        1,
        1,
        'Caramels Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        112.55,
        110,
        'Hors ligne',
        'Bretagne',
        0.26,
        0.26,
        10.6,
        4.5,
        118
    ),
    (
        4,
        1,
        'Vareuse de Dinard',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Durable. Qualité supérieure garantie.',
        101.61,
        12,
        'En ligne',
        'Bretagne',
        2.92,
        0.31,
        7.15,
        4.2,
        146
    ),
    (
        2,
        2,
        'Lampe Tempête Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Traditionnel. Qualité supérieure garantie.',
        145.44,
        135,
        'En ligne',
        'Bretagne',
        2.15,
        0.21,
        9.34,
        4.5,
        121
    ),
    (
        4,
        1,
        'Bracelet Ancre de Brest',
        'Produit breton authentique. Fabriqué avec passion à Brest. Fait main. Qualité supérieure garantie.',
        159.31,
        111,
        'Hors ligne',
        'Bretagne',
        1.09,
        0.4,
        7.4,
        4.0,
        81
    ),
    (
        2,
        2,
        'Coussin Triskell Premium',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Premium. Qualité supérieure garantie.',
        112.71,
        121,
        'En ligne',
        'Bretagne',
        2.81,
        0.44,
        13.83,
        4.2,
        103
    ),
    (
        1,
        2,
        'Coussin Triskell Bio',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Bio. Qualité supérieure garantie.',
        159.76,
        171,
        'En ligne',
        'Bretagne',
        2.94,
        0.25,
        5.33,
        4.5,
        89
    ),
    (
        1,
        2,
        'Lampe Tempête de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Traditionnel. Qualité supérieure garantie.',
        133.75,
        44,
        'Hors ligne',
        'Bretagne',
        0.32,
        0.39,
        7.39,
        4.6,
        106
    ),
    (
        1,
        2,
        'Coussin Triskell Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Artisanal. Qualité supérieure garantie.',
        54.37,
        180,
        'En ligne',
        'Bretagne',
        2.77,
        0.5,
        11.72,
        4.4,
        30
    ),
    (
        2,
        1,
        'Bolée à Cidre de Saint-Malo',
        'Produit breton authentique. Fabriqué avec passion à Saint-Malo. Artisanal. Qualité supérieure garantie.',
        20.61,
        96,
        'En ligne',
        'Bretagne',
        1.19,
        0.08,
        9.78,
        4.6,
        51
    ),
    (
        3,
        3,
        'Caramels Durable',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Durable. Qualité supérieure garantie.',
        37.05,
        123,
        'En ligne',
        'Bretagne',
        1.95,
        0.24,
        11.0,
        4.9,
        124
    ),
    (
        2,
        2,
        'Lampe Tempête Local',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Local. Qualité supérieure garantie.',
        90.19,
        69,
        'Hors ligne',
        'Bretagne',
        1.42,
        0.16,
        13.99,
        4.9,
        32
    ),
    (
        3,
        1,
        'Bolée à Cidre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Artisanal. Qualité supérieure garantie.',
        134.41,
        75,
        'Hors ligne',
        'Bretagne',
        0.12,
        0.43,
        12.0,
        5.0,
        132
    ),
    (
        3,
        2,
        'Bonnet Miki Traditionnel',
        'Produit breton authentique. Fabriqué avec passion à Dinard. Traditionnel. Qualité supérieure garantie.',
        180.74,
        170,
        'Hors ligne',
        'Bretagne',
        0.21,
        0.4,
        5.3,
        4.4,
        38
    ),
    (
        4,
        1,
        'Bonnet Miki Premium',
        'Produit breton authentique. Fabriqué avec passion à Brest. Premium. Qualité supérieure garantie.',
        182.65,
        47,
        'En ligne',
        'Bretagne',
        0.85,
        0.41,
        9.34,
        4.8,
        91
    ),
    (
        3,
        1,
        'Caramels de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        84.57,
        72,
        'En ligne',
        'Bretagne',
        1.66,
        0.23,
        11.06,
        4.7,
        102
    ),
    (
        1,
        1,
        'Marinière Premium',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Premium. Qualité supérieure garantie.',
        51.84,
        21,
        'Hors ligne',
        'Bretagne',
        1.94,
        0.24,
        11.31,
        4.6,
        34
    ),
    (
        1,
        2,
        'Pull Marin de Quimper',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        35.64,
        121,
        'Hors ligne',
        'Bretagne',
        1.18,
        0.48,
        11.27,
        4.5,
        44
    ),
    (
        4,
        2,
        'Ciré Jaune de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        189.65,
        97,
        'En ligne',
        'Bretagne',
        0.39,
        0.35,
        9.9,
        5.0,
        96
    ),
    (
        1,
        3,
        'Lampe Tempête Authentique',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Authentique. Qualité supérieure garantie.',
        122.86,
        10,
        'En ligne',
        'Bretagne',
        0.25,
        0.17,
        13.9,
        4.8,
        57
    ),
    (
        1,
        3,
        'Bonnet Miki de Concarneau',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Premium. Qualité supérieure garantie.',
        159.05,
        157,
        'En ligne',
        'Bretagne',
        0.11,
        0.43,
        6.3,
        4.1,
        69
    ),
    (
        3,
        3,
        'Marinière Authentique',
        'Produit breton authentique. Fabriqué avec passion à Vannes. Authentique. Qualité supérieure garantie.',
        12.98,
        72,
        'En ligne',
        'Bretagne',
        0.25,
        0.37,
        9.73,
        4.7,
        126
    ),
    (
        4,
        2,
        'Bracelet Ancre Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Artisanal. Qualité supérieure garantie.',
        181.75,
        173,
        'En ligne',
        'Bretagne',
        1.61,
        0.23,
        13.68,
        4.1,
        127
    ),
    (
        3,
        2,
        'Lampe Tempête de Vannes',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        38.04,
        37,
        'Hors ligne',
        'Bretagne',
        0.9,
        0.32,
        9.94,
        4.3,
        140
    ),
    (
        3,
        2,
        'Pull Marin de Carnac',
        'Produit breton authentique. Fabriqué avec passion à Carnac. Authentique. Qualité supérieure garantie.',
        177.85,
        110,
        'En ligne',
        'Bretagne',
        1.08,
        0.23,
        8.74,
        4.1,
        114
    ),
    (
        3,
        3,
        'Coussin Triskell Fait main',
        'Produit breton authentique. Fabriqué avec passion à Quimper. Fait main. Qualité supérieure garantie.',
        27.62,
        29,
        'En ligne',
        'Bretagne',
        2.26,
        0.19,
        6.17,
        4.1,
        148
    ),
    (
        3,
        3,
        'Galettes Artisanal',
        'Produit breton authentique. Fabriqué avec passion à Roscoff. Artisanal. Qualité supérieure garantie.',
        123.48,
        95,
        'Hors ligne',
        'Bretagne',
        0.4,
        0.26,
        6.39,
        4.5,
        32
    ),
    (
        1,
        1,
        'Bol Breton Bio',
        'Produit breton authentique. Fabriqué avec passion à Concarneau. Bio. Qualité supérieure garantie.',
        194.19,
        164,
        'Hors ligne',
        'Bretagne',
        1.88,
        0.32,
        5.24,
        4.9,
        73
    );

-- 10. PROMOTIONS (futures)
INSERT INTO
    _promotion (
        id_produit,
        promotion_debut,
        promotion_fin
    )
VALUES (
        1,
        '2025-12-20 00:00:00',
        '2027-12-25 23:59:00'
    ),
    (
        2,
        '2026-01-01 00:00:00',
        '2026-02-07 23:59:00'
    ),
    (
        3,
        '2026-02-16 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        4,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        5,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        6,
        '2026-06-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        7,
        '2026-01-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 9. RÉDUCTIONS (futures)
INSERT INTO
    _reduction (
        id_produit,
        reduction_pourcentage,
        reduction_debut,
        reduction_fin
    )
VALUES (
        1,
        10.00,
        '2026-01-05 00:00:00',
        '2026-09-19 23:59:00'
    ),
    (
        2,
        15.00,
        '2026-02-15 00:00:00',
        '2026-02-25 23:59:00'
    ),
    (
        3,
        20.00,
        '2026-01-01 00:00:00',
        '2026-05-15 23:59:00'
    ),
    (
        4,
        25.00,
        '2026-01-20 00:00:00',
        '2026-02-26 23:59:00'
    ),
    (
        5,
        30.00,
        '2026-06-01 00:00:00',
        '2026-06-30 23:59:00'
    ),
    (
        6,
        60.00,
        '2026-01-01 00:00:00',
        '2026-04-15 23:59:00'
    ),
    (
        7,
        55.00,
        '2026-05-01 00:00:00',
        '2026-05-07 23:59:00'
    ),
    (
        8,
        70.00,
        '2026-01-10 00:00:00',
        '2026-06-20 23:59:00'
    ),
    (
        9,
        65.00,
        '2026-07-01 00:00:00',
        '2026-07-31 23:59:00'
    );

-- 12. IMAGES
INSERT INTO
    _image (i_lien, i_title, i_alt)
VALUES (
        '/img/photo/smartphone_xpro.jpg',
        'Smartphone XPro.jpg',
        'Image du smartphone'
    ),
    (
        '/img/photo/ordinateur_portable_ultra.jpg',
        'Ordinateur portable.jpeg',
        'Image de l ordinateur'
    ),
    (
        '/img/photo/t_shirt_coton_bio.jpg',
        'T-shirt.png',
        'Image du t-shirt'
    ),
    (
        '/img/photo/jean_slim.jpg',
        'Jean.jpg',
        'Image du jean'
    ),
    (
        '/img/photo/casque_audio_bluetooth.jpg',
        'Casque audio.jpg',
        'Image du casque'
    ),
    (
        '/img/photo/avatar_jean.jpg',
        'Avatar Jean.jpeg',
        'Photo de profil Jean'
    ),
    (
        '/img/photo/avatar_marie.jpg',
        'Avatar Marie.jpg',
        'Photo de profil Marie'
    ),
    (
        '/img/photo/logo_techstore.jpg',
        'Logo TechStore.jpg',
        'Logo entreprise TechStore'
    ),
    (
        '/img/photo/logo_fashionhub.jpg',
        'Logo FashionHub.jpg',
        'Logo entreprise FashionHub'
    ),
    (
        '/img/photo/montre_connect_e.jpg',
        'Montre connectée.jpg',
        'Image de la montre'
    ),
    (
        '/img/photo/sac___dos_urbain.jpg',
        'Sac à dos.jpeg',
        'Image du sac'
    ),
    (
        '/img/photo/chaussures_running.jpg',
        'Chaussures running.jpeg',
        'Image des chaussures'
    ),
    (
        '/img/photo/tablette_10_pouces.jpg',
        'Tablette.jpg',
        'Image de la tablette'
    ),
    (
        '/img/photo/ballon_de_football.jpg',
        'Ballon football.jpg',
        'Image du ballon'
    ),
    (
        '/img/photo/veste_en_cuir.jpg',
        'Veste cuir.jpg',
        'Image de la veste'
    ),
    (
        '/img/photo/livre_cuisine_fran_aise.jpg',
        'Livre cuisine.jpeg',
        'Image du livre'
    ),
    (
        '/img/photo/tapis_de_yoga.jpg',
        'Tapis yoga.jpeg',
        'Image du tapis'
    ),
    (
        '/img/photo/clavier_m_canique_rgb.jpg',
        'Clavier.jpg',
        'Image du clavier'
    ),
    (
        '/img/photo/console_nextgen.jpg',
        'Console NextGen.jpg',
        'Image de la console'
    ),
    (
        '/img/photo/sweat___capuche_premium.jpg',
        'Sweat à capuche.jpeg',
        'Image du sweat'
    ),
    (
        '/img/photo/raquette_de_tennis_pro.jpg',
        'Raquette tennis.jpg',
        'Image de la raquette'
    ),
    (
        '/img/photo/_cran_gaming_4k_27_.jpg',
        'Écran 4K.jpeg',
        'Image de l écran'
    ),
    (
        '/img/photo/baskets_limited_edition.jpg',
        'Baskets limited.jpeg',
        'Image des baskets'
    ),
    (
        '/img/photo/v_lo_de_route_carbone.jpg',
        'Vélo route.jpeg',
        'Image du vélo'
    ),
    (
        '/img/photo/drone_professionnel_4k.jpg',
        'Drone 4K.jpg',
        'Image du drone'
    ),
    (
        '/img/photo/manteau_d_hiver_imperm_able.jpg',
        'Manteau hiver.jpeg',
        'Image du manteau'
    ),
    (
        '/img/photo/tente_4_places.jpg',
        'Tente 4 places.jpg',
        'Image de la tente'
    ),
    (
        '/img/photo/enceinte_bluetooth_waterproof.jpg',
        'Enceinte Bluetooth.jpg',
        'Image de l enceinte'
    ),
    (
        '/img/photo/pull_marin_de_saint_malo.jpg',
        'Pull Marin de Saint-Malo',
        'Photo de Pull Marin de Saint-Malo'
    ),
    (
        '/img/photo/bonnet_miki_de_carnac.jpg',
        'Bonnet Miki de Carnac',
        'Photo de Bonnet Miki de Carnac'
    ),
    (
        '/img/photo/galettes_local.jpg',
        'Galettes Local',
        'Photo de Galettes Local'
    ),
    (
        '/img/photo/_charpe_ray_e_fait_main.jpg',
        'Écharpe Rayée Fait main',
        'Photo de Écharpe Rayée Fait main'
    ),
    (
        '/img/photo/_charpe_ray_e_de_brest.jpg',
        'Écharpe Rayée de Brest',
        'Photo de Écharpe Rayée de Brest'
    ),
    (
        '/img/photo/cir__navy_de_concarneau.jpg',
        'Ciré Navy de Concarneau',
        'Photo de Ciré Navy de Concarneau'
    ),
    (
        '/img/photo/bracelet_ancre_fait_main.jpg',
        'Bracelet Ancre Fait main',
        'Photo de Bracelet Ancre Fait main'
    ),
    (
        '/img/photo/marini_re_local.jpg',
        'Marinière Local',
        'Photo de Marinière Local'
    ),
    (
        '/img/photo/bracelet_ancre_de_concarneau.jpg',
        'Bracelet Ancre de Concarneau',
        'Photo de Bracelet Ancre de Concarneau'
    ),
    (
        '/img/photo/pendentif_hermine_fait_main.jpg',
        'Pendentif Hermine Fait main',
        'Photo de Pendentif Hermine Fait main'
    ),
    (
        '/img/photo/sac_voile_de_concarneau.jpg',
        'Sac Voile de Concarneau',
        'Photo de Sac Voile de Concarneau'
    ),
    (
        '/img/photo/_charpe_ray_e_de_saint_malo.jpg',
        'Écharpe Rayée de Saint-Malo',
        'Photo de Écharpe Rayée de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_de_roscoff.jpg',
        'Coussin Triskell de Roscoff',
        'Photo de Coussin Triskell de Roscoff'
    ),
    (
        '/img/photo/_charpe_ray_e_authentique.jpg',
        'Écharpe Rayée Authentique',
        'Photo de Écharpe Rayée Authentique'
    ),
    (
        '/img/photo/_charpe_ray_e_bio.jpg',
        'Écharpe Rayée Bio',
        'Photo de Écharpe Rayée Bio'
    ),
    (
        '/img/photo/bonnet_miki_authentique.jpg',
        'Bonnet Miki Authentique',
        'Photo de Bonnet Miki Authentique'
    ),
    (
        '/img/photo/cir__navy_de_quimper.jpg',
        'Ciré Navy de Quimper',
        'Photo de Ciré Navy de Quimper'
    ),
    (
        '/img/photo/bol_breton_traditionnel.jpg',
        'Bol Breton Traditionnel',
        'Photo de Bol Breton Traditionnel'
    ),
    (
        '/img/photo/bol_breton_premium.jpg',
        'Bol Breton Premium',
        'Photo de Bol Breton Premium'
    ),
    (
        '/img/photo/pull_marin_de_brest.jpg',
        'Pull Marin de Brest',
        'Photo de Pull Marin de Brest'
    ),
    (
        '/img/photo/affiche_vintage_de_dinard.jpg',
        'Affiche Vintage de Dinard',
        'Photo de Affiche Vintage de Dinard'
    ),
    (
        '/img/photo/vareuse_artisanal.jpg',
        'Vareuse Artisanal',
        'Photo de Vareuse Artisanal'
    ),
    (
        '/img/photo/pull_marin_bio.jpg',
        'Pull Marin Bio',
        'Photo de Pull Marin Bio'
    ),
    (
        '/img/photo/kabig_bio.jpg',
        'Kabig Bio',
        'Photo de Kabig Bio'
    ),
    (
        '/img/photo/phare_miniature_fait_main.jpg',
        'Phare Miniature Fait main',
        'Photo de Phare Miniature Fait main'
    ),
    (
        '/img/photo/bol_breton_fait_main.jpg',
        'Bol Breton Fait main',
        'Photo de Bol Breton Fait main'
    ),
    (
        '/img/photo/bracelet_ancre_de_carnac.jpg',
        'Bracelet Ancre de Carnac',
        'Photo de Bracelet Ancre de Carnac'
    ),
    (
        '/img/photo/caramels_de_dinard.jpg',
        'Caramels de Dinard',
        'Photo de Caramels de Dinard'
    ),
    (
        '/img/photo/affiche_vintage_de_vannes.jpg',
        'Affiche Vintage de Vannes',
        'Photo de Affiche Vintage de Vannes'
    ),
    (
        '/img/photo/_charpe_ray_e_de_dinard.jpg',
        'Écharpe Rayée de Dinard',
        'Photo de Écharpe Rayée de Dinard'
    ),
    (
        '/img/photo/vareuse_de_saint_malo.jpg',
        'Vareuse de Saint-Malo',
        'Photo de Vareuse de Saint-Malo'
    ),
    (
        '/img/photo/bracelet_ancre_durable.jpg',
        'Bracelet Ancre Durable',
        'Photo de Bracelet Ancre Durable'
    ),
    (
        '/img/photo/lampe_temp_te_de_quimper.jpg',
        'Lampe Tempête de Quimper',
        'Photo de Lampe Tempête de Quimper'
    ),
    (
        '/img/photo/sac_voile_de_pont_aven.jpg',
        'Sac Voile de Pont-Aven',
        'Photo de Sac Voile de Pont-Aven'
    ),
    (
        '/img/photo/caramels_de_roscoff.jpg',
        'Caramels de Roscoff',
        'Photo de Caramels de Roscoff'
    ),
    (
        '/img/photo/pendentif_hermine_de_saint_malo.jpg',
        'Pendentif Hermine de Saint-Malo',
        'Photo de Pendentif Hermine de Saint-Malo'
    ),
    (
        '/img/photo/cir__navy_artisanal.jpg',
        'Ciré Navy Artisanal',
        'Photo de Ciré Navy Artisanal'
    ),
    (
        '/img/photo/vareuse_de_pont_aven.jpg',
        'Vareuse de Pont-Aven',
        'Photo de Vareuse de Pont-Aven'
    ),
    (
        '/img/photo/pendentif_hermine_bio.jpg',
        'Pendentif Hermine Bio',
        'Photo de Pendentif Hermine Bio'
    ),
    (
        '/img/photo/galettes_de_quimper.jpg',
        'Galettes de Quimper',
        'Photo de Galettes de Quimper'
    ),
    (
        '/img/photo/sac_voile_durable.jpg',
        'Sac Voile Durable',
        'Photo de Sac Voile Durable'
    ),
    (
        '/img/photo/marini_re_de_pont_aven.jpg',
        'Marinière de Pont-Aven',
        'Photo de Marinière de Pont-Aven'
    ),
    (
        '/img/photo/sac_voile_bio.jpg',
        'Sac Voile Bio',
        'Photo de Sac Voile Bio'
    ),
    (
        '/img/photo/sac_voile_premium.jpg',
        'Sac Voile Premium',
        'Photo de Sac Voile Premium'
    ),
    (
        '/img/photo/pendentif_hermine_local.jpg',
        'Pendentif Hermine Local',
        'Photo de Pendentif Hermine Local'
    ),
    (
        '/img/photo/vareuse_durable.jpg',
        'Vareuse Durable',
        'Photo de Vareuse Durable'
    ),
    (
        '/img/photo/pendentif_hermine_traditionnel.jpg',
        'Pendentif Hermine Traditionnel',
        'Photo de Pendentif Hermine Traditionnel'
    ),
    (
        '/img/photo/pendentif_hermine_de_roscoff.jpg',
        'Pendentif Hermine de Roscoff',
        'Photo de Pendentif Hermine de Roscoff'
    ),
    (
        '/img/photo/cir__navy_de_brest.jpg',
        'Ciré Navy de Brest',
        'Photo de Ciré Navy de Brest'
    ),
    (
        '/img/photo/pull_marin_authentique.jpg',
        'Pull Marin Authentique',
        'Photo de Pull Marin Authentique'
    ),
    (
        '/img/photo/bol_e___cidre_local.jpg',
        'Bolée à Cidre Local',
        'Photo de Bolée à Cidre Local'
    ),
    (
        '/img/photo/bol_breton_de_saint_malo.jpg',
        'Bol Breton de Saint-Malo',
        'Photo de Bol Breton de Saint-Malo'
    ),
    (
        '/img/photo/phare_miniature_de_quimper.jpg',
        'Phare Miniature de Quimper',
        'Photo de Phare Miniature de Quimper'
    ),
    (
        '/img/photo/caramels_artisanal.jpg',
        'Caramels Artisanal',
        'Photo de Caramels Artisanal'
    ),
    (
        '/img/photo/vareuse_de_dinard.jpg',
        'Vareuse de Dinard',
        'Photo de Vareuse de Dinard'
    ),
    (
        '/img/photo/lampe_temp_te_traditionnel.jpg',
        'Lampe Tempête Traditionnel',
        'Photo de Lampe Tempête Traditionnel'
    ),
    (
        '/img/photo/bracelet_ancre_de_brest.jpg',
        'Bracelet Ancre de Brest',
        'Photo de Bracelet Ancre de Brest'
    ),
    (
        '/img/photo/coussin_triskell_premium.jpg',
        'Coussin Triskell Premium',
        'Photo de Coussin Triskell Premium'
    ),
    (
        '/img/photo/coussin_triskell_bio.jpg',
        'Coussin Triskell Bio',
        'Photo de Coussin Triskell Bio'
    ),
    (
        '/img/photo/lampe_temp_te_de_saint_malo.jpg',
        'Lampe Tempête de Saint-Malo',
        'Photo de Lampe Tempête de Saint-Malo'
    ),
    (
        '/img/photo/coussin_triskell_artisanal.jpg',
        'Coussin Triskell Artisanal',
        'Photo de Coussin Triskell Artisanal'
    ),
    (
        '/img/photo/bol_e___cidre_de_saint_malo.jpg',
        'Bolée à Cidre de Saint-Malo',
        'Photo de Bolée à Cidre de Saint-Malo'
    ),
    (
        '/img/photo/caramels_durable.jpg',
        'Caramels Durable',
        'Photo de Caramels Durable'
    ),
    (
        '/img/photo/lampe_temp_te_local.jpg',
        'Lampe Tempête Local',
        'Photo de Lampe Tempête Local'
    ),
    (
        '/img/photo/bol_e___cidre_artisanal.jpg',
        'Bolée à Cidre Artisanal',
        'Photo de Bolée à Cidre Artisanal'
    ),
    (
        '/img/photo/bonnet_miki_traditionnel.jpg',
        'Bonnet Miki Traditionnel',
        'Photo de Bonnet Miki Traditionnel'
    ),
    (
        '/img/photo/bonnet_miki_premium.jpg',
        'Bonnet Miki Premium',
        'Photo de Bonnet Miki Premium'
    ),
    (
        '/img/photo/caramels_de_carnac.jpg',
        'Caramels de Carnac',
        'Photo de Caramels de Carnac'
    ),
    (
        '/img/photo/marini_re_premium.jpg',
        'Marinière Premium',
        'Photo de Marinière Premium'
    ),
    (
        '/img/photo/pull_marin_de_quimper.jpg',
        'Pull Marin de Quimper',
        'Photo de Pull Marin de Quimper'
    ),
    (
        '/img/photo/cir__jaune_de_vannes.jpg',
        'Ciré Jaune de Vannes',
        'Photo de Ciré Jaune de Vannes'
    ),
    (
        '/img/photo/lampe_temp_te_authentique.jpg',
        'Lampe Tempête Authentique',
        'Photo de Lampe Tempête Authentique'
    ),
    (
        '/img/photo/bonnet_miki_de_concarneau.jpg',
        'Bonnet Miki de Concarneau',
        'Photo de Bonnet Miki de Concarneau'
    ),
    (
        '/img/photo/marini_re_authentique.jpg',
        'Marinière Authentique',
        'Photo de Marinière Authentique'
    ),
    (
        '/img/photo/bracelet_ancre_artisanal.jpg',
        'Bracelet Ancre Artisanal',
        'Photo de Bracelet Ancre Artisanal'
    ),
    (
        '/img/photo/lampe_temp_te_de_vannes.jpg',
        'Lampe Tempête de Vannes',
        'Photo de Lampe Tempête de Vannes'
    ),
    (
        '/img/photo/pull_marin_de_carnac.jpg',
        'Pull Marin de Carnac',
        'Photo de Pull Marin de Carnac'
    ),
    (
        '/img/photo/coussin_triskell_fait_main.jpg',
        'Coussin Triskell Fait main',
        'Photo de Coussin Triskell Fait main'
    ),
    (
        '/img/photo/galettes_artisanal.jpg',
        'Galettes Artisanal',
        'Photo de Galettes Artisanal'
    ),
    (
        '/img/photo/bol_breton_bio.jpg',
        'Bol Breton Bio',
        'Photo de Bol Breton Bio'
    );

-- 13. RELATIONS IMAGES-PRODUITS
INSERT INTO
    _represente_produit (id_image, id_produit)
VALUES (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 6),
    (10, 8),
    (11, 7),
    (12, 9),
    (13, 10),
    (14, 11),
    (15, 12),
    (16, 13),
    (17, 14),
    (18, 15),
    (19, 16),
    (20, 17),
    (21, 18),
    (22, 19),
    (23, 20),
    (24, 21),
    (25, 22),
    (26, 23),
    (27, 24),
    (28, 25),
    (29, 26),
    (30, 27),
    (31, 28),
    (32, 29),
    (33, 30),
    (34, 31),
    (35, 32),
    (36, 33),
    (37, 34),
    (38, 35),
    (39, 36),
    (40, 37),
    (41, 38),
    (42, 39),
    (43, 40),
    (44, 41),
    (45, 42),
    (46, 43),
    (47, 44),
    (48, 45),
    (49, 46),
    (50, 47),
    (51, 48),
    (52, 49),
    (53, 50),
    (54, 51),
    (55, 52),
    (56, 53),
    (57, 54),
    (58, 55),
    (59, 56),
    (60, 57),
    (61, 58),
    (62, 59),
    (63, 60),
    (64, 61),
    (65, 62),
    (66, 63),
    (67, 64),
    (68, 65),
    (69, 66),
    (70, 67),
    (71, 68),
    (72, 69),
    (73, 70),
    (74, 71),
    (75, 72),
    (76, 73),
    (77, 74),
    (78, 75),
    (79, 76),
    (80, 77),
    (81, 78),
    (82, 79),
    (83, 80),
    (84, 81),
    (85, 82),
    (86, 83),
    (87, 84),
    (88, 85),
    (89, 86),
    (90, 87),
    (91, 88),
    (92, 89),
    (93, 90),
    (94, 91),
    (95, 92),
    (96, 93),
    (97, 94),
    (98, 95),
    (99, 96),
    (100, 97),
    (101, 98),
    (102, 99),
    (103, 100),
    (104, 101),
    (105, 102),
    (106, 103),
    (107, 104),
    (108, 105);

-- 14. RELATIONS IMAGES-COMPTES
INSERT INTO
    _represente_compte (id_image, id_compte)
VALUES (6, 4),
    (7, 5),
    (8, 2),
    (9, 3);

-- 15. RELATIONS PRODUITS-CATÉGORIES
INSERT INTO
    _fait_partie_de (id_produit, id_categorie)
VALUES (1, 1),
    (1, 7),
    (2, 1),
    (2, 7),
    (3, 2),
    (3, 8),
    (4, 2),
    (4, 8),
    (5, 2),
    (5, 9),
    (6, 1),
    (6, 3),
    (7, 3),
    (8, 1),
    (8, 3),
    (8, 5),
    (9, 5),
    (9, 10),
    (10, 1),
    (10, 7),
    (11, 5),
    (12, 2),
    (12, 8),
    (13, 6),
    (14, 5),
    (15, 1),
    (15, 7),
    (16, 1),
    (16, 7),
    (17, 2),
    (17, 8),
    (18, 5),
    (19, 1),
    (19, 7),
    (20, 10),
    (21, 5),
    (22, 1),
    (22, 3),
    (23, 2),
    (23, 8),
    (24, 4),
    (24, 5),
    (25, 1),
    (25, 3),
    (26, 2),
    (26, 8),
    (27, 2),
    (27, 3),
    (27, 8),
    (28, 4),
    (29, 2),
    (29, 3),
    (30, 2),
    (30, 3),
    (31, 2),
    (31, 8),
    (31, 9),
    (32, 3),
    (33, 2),
    (33, 8),
    (33, 9),
    (34, 3),
    (35, 3),
    (36, 3),
    (37, 2),
    (37, 3),
    (38, 4),
    (39, 2),
    (39, 3),
    (40, 2),
    (40, 3),
    (41, 2),
    (41, 3),
    (41, 8),
    (42, 2),
    (42, 8),
    (42, 9),
    (43, 4),
    (44, 4),
    (45, 2),
    (45, 8),
    (46, 4),
    (47, 2),
    (47, 8),
    (48, 2),
    (48, 8),
    (49, 2),
    (49, 8),
    (49, 9),
    (50, 4),
    (51, 4),
    (52, 3),
    (53, 4),
    (54, 4),
    (55, 2),
    (55, 3),
    (56, 2),
    (56, 8),
    (57, 3),
    (58, 4),
    (59, 3),
    (60, 4),
    (61, 3),
    (62, 2),
    (62, 8),
    (62, 9),
    (63, 2),
    (63, 8),
    (64, 3),
    (65, 4),
    (66, 3),
    (67, 2),
    (67, 8),
    (67, 9),
    (68, 3),
    (69, 3),
    (70, 3),
    (71, 2),
    (71, 8),
    (72, 3),
    (73, 3),
    (74, 2),
    (74, 8),
    (74, 9),
    (75, 2),
    (75, 8),
    (76, 4),
    (77, 4),
    (78, 4),
    (79, 4),
    (80, 2),
    (80, 8),
    (81, 4),
    (82, 3),
    (83, 4),
    (84, 4),
    (85, 4),
    (86, 4),
    (87, 4),
    (88, 4),
    (89, 4),
    (90, 4),
    (91, 2),
    (91, 3),
    (91, 8),
    (92, 2),
    (92, 3),
    (92, 8),
    (93, 4),
    (94, 2),
    (94, 8),
    (94, 9),
    (95, 2),
    (95, 8),
    (96, 2),
    (96, 8),
    (96, 9),
    (97, 4),
    (98, 2),
    (98, 3),
    (98, 8),
    (99, 2),
    (99, 8),
    (99, 9),
    (100, 3),
    (101, 4),
    (102, 2),
    (102, 8),
    (103, 4),
    (104, 4),
    (105, 4);

-- 16. RELATIONS PRODUITS-COULEURS
INSERT INTO
    _est_dote_de (id_produit, code_hexa)
VALUES (1, '#000000'),
    (1, '#FFFFFF'),
    (2, '#808080'),
    (3, '#0000FF'),
    (3, '#FF0000'),
    (3, '#00FF00'),
    (4, '#0000FF'),
    (4, '#000000'),
    (5, '#FF0000'),
    (5, '#FFFFFF'),
    (6, '#000000'),
    (7, '#808080'),
    (8, '#000000'),
    (9, '#0000FF'),
    (9, '#FF0000'),
    (10, '#808080'),
    (11, '#FFFFFF'),
    (12, '#000000'),
    (12, '#8B4513'),
    (14, '#EE82EE'),
    (14, '#87CEEB'),
    (15, '#000000'),
    (16, '#000000'),
    (16, '#FFFFFF'),
    (17, '#808080'),
    (17, '#000000'),
    (18, '#FFFFFF'),
    (18, '#000000'),
    (19, '#000000'),
    (20, '#FFFFFF'),
    (20, '#000000'),
    (21, '#0000FF'),
    (21, '#FF0000'),
    (22, '#808080'),
    (23, '#000000'),
    (23, '#8B4513'),
    (24, '#87CEEB'),
    (24, '#32CD32'),
    (25, '#000000'),
    (25, '#FF0000'),
    (26, '#8B4513'),
    (27, '#0000FF'),
    (28, '#FF0000'),
    (29, '#8B4513'),
    (30, '#00FF00'),
    (31, '#000000'),
    (32, '#8B4513'),
    (33, '#87CEEB'),
    (34, '#FFFFFF'),
    (35, '#FFFFFF'),
    (36, '#EE82EE'),
    (37, '#FFFFFF'),
    (38, '#0000FF'),
    (39, '#0000FF'),
    (40, '#000000'),
    (41, '#000000'),
    (42, '#FFFFFF'),
    (43, '#8B4513'),
    (44, '#87CEEB'),
    (45, '#87CEEB'),
    (46, '#32CD32'),
    (47, '#87CEEB'),
    (48, '#00FF00'),
    (49, '#FFA500'),
    (50, '#EE82EE'),
    (51, '#FF0000'),
    (52, '#FFFF00'),
    (53, '#FFFFFF'),
    (54, '#0000FF'),
    (55, '#FFFFFF'),
    (56, '#808080'),
    (57, '#00FF00'),
    (58, '#FFFF00'),
    (59, '#00FF00'),
    (60, '#FFA500'),
    (61, '#00FF00'),
    (62, '#FFFFFF'),
    (63, '#00FF00'),
    (64, '#87CEEB'),
    (65, '#EE82EE'),
    (66, '#FFFF00'),
    (67, '#808080'),
    (68, '#FFA500'),
    (69, '#00FF00'),
    (70, '#32CD32'),
    (71, '#0000FF'),
    (72, '#00FF00'),
    (73, '#8B4513'),
    (74, '#FFA500'),
    (75, '#32CD32'),
    (76, '#87CEEB'),
    (77, '#FFFF00'),
    (78, '#0000FF'),
    (79, '#8B4513'),
    (80, '#0000FF'),
    (81, '#EE82EE'),
    (82, '#8B4513'),
    (83, '#FFFF00'),
    (84, '#8B4513'),
    (85, '#FFFF00'),
    (86, '#32CD32'),
    (87, '#EE82EE'),
    (88, '#0000FF'),
    (89, '#EE82EE'),
    (90, '#FFFFFF'),
    (91, '#000000'),
    (92, '#FFFFFF'),
    (93, '#808080'),
    (94, '#808080'),
    (95, '#00FF00'),
    (96, '#0000FF'),
    (97, '#EE82EE'),
    (98, '#000000'),
    (99, '#808080'),
    (100, '#808080'),
    (101, '#0000FF'),
    (102, '#87CEEB'),
    (103, '#FFA500'),
    (104, '#0000FF'),
    (105, '#32CD32');

-- 17. SEUILS D'ALERTE
INSERT INTO
    _seuil_alerte (nb_seuil, message_seuil)
VALUES (
        10,
        'Stock faible - Envisager un réapprovisionnement'
    ),
    (
        5,
        'Stock critique - Réapprovisionnement urgent'
    ),
    (
        3,
        'Rupture imminente - Commander immédiatement'
    ),
    (
        20,
        'Stock normal - Surveillance recommandée'
    ),
    (
        1,
        'Rupture de stock - Produit indisponible'
    );

INSERT INTO
    _adresse (
        id_compte,
        a_numero,
        a_adresse,
        a_ville,
        a_code_postal,
        a_pays
    )
VALUES (
        4,
        13,
        'rue du Pillard',
        'Rennes',
        35590,
        'France'
    );

-- 18. PANIERS/COMMANDES
INSERT INTO
    _panier_commande (id_client, timestamp_commande)
VALUES (1, '2025-11-01 10:30:00'),
    (2, '2025-11-02 14:45:00'),
    (3, '2025-11-03 09:15:00'),
    (1, NULL),
    (4, '2025-11-04 16:20:00'),
    (6, '2025-11-05 11:00:00'),
    (2, NULL),
    (5, '2025-11-06 13:30:00');

-- 19. CONTIENT (produits dans paniers)
INSERT INTO
    _contient (
        id_panier,
        id_produit,
        quantite,
        prix_unitaire,
        remise_unitaire,
        frais_de_port,
        TVA
    )
VALUES (
        1,
        1,
        1,
        599.99,
        0.0,
        5.99,
        20.0
    ),
    (
        1,
        6,
        1,
        149.99,
        0.0,
        5.99,
        20.0
    ),
    (
        2,
        3,
        2,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        2,
        4,
        1,
        49.99,
        0.0,
        4.99,
        20.0
    ),
    (
        3,
        2,
        1,
        899.99,
        0.0,
        9.99,
        20.0
    ),
    (
        4,
        7,
        1,
        69.99,
        0.0,
        6.99,
        20.0
    ),
    (
        5,
        5,
        1,
        39.99,
        0.0,
        4.99,
        20.0
    ),
    (
        5,
        8,
        1,
        199.99,
        0.0,
        3.99,
        20.0
    ),
    (
        6,
        9,
        2,
        89.99,
        0.0,
        5.99,
        20.0
    ),
    (
        7,
        10,
        1,
        299.99,
        0.0,
        7.99,
        20.0
    ),
    (
        8,
        11,
        1,
        29.99,
        0.0,
        4.99,
        20.0
    ),
    (
        8,
        13,
        1,
        24.99,
        0.0,
        3.99,
        20.0
    ),
    (
        8,
        14,
        1,
        34.99,
        0.0,
        5.99,
        20.0
    );

-- 20. FACTURES
INSERT INTO
    _facture (
        id_panier,
        id_adresse,
        f_total_ht,
        f_total_remise,
        f_total_ttc
    )
VALUES (1, 1, 755.98, 0.0, 907.18),
    (2, 1, 103.96, 0.0, 124.75),
    (3, 1, 909.98, 0.0, 1091.98),
    (5, 1, 248.97, 0.0, 298.76),
    (6, 1, 185.97, 0.0, 223.16),
    (8, 1, 95.96, 0.0, 115.15);

-- 21. PAIEMENTS
INSERT INTO
    _paiement (
        id_facture,
        mode_paiement,
        numero_carte,
        mois_annee_expiration,
        cryptogramme_carte,
        timestamp_paiement
    )
VALUES (
        1,
        'CB',
        '1234567890123456',
        '12/27',
        '123',
        '2025-11-01 10:35:00'
    ),
    (
        2,
        'CB',
        '6543210987654321',
        '06/26',
        '456',
        '2025-11-02 14:50:00'
    ),
    (
        3,
        'CB',
        '1111222233334444',
        '03/28',
        '789',
        '2025-11-03 09:20:00'
    ),
    (
        4,
        'CB',
        '9999888877776666',
        '09/27',
        '321',
        '2025-11-04 16:25:00'
    ),
    (
        5,
        'CB',
        '5555666677778888',
        '11/26',
        '654',
        '2025-11-05 11:05:00'
    ),
    (
        6,
        'CB',
        '4444333322221111',
        '08/27',
        '987',
        '2025-11-06 13:35:00'
    );

-- 22. LIVRAISONS
INSERT INTO
    _livraison (
        id_facture,
        date_livraison,
        etat_livraison
    )
VALUES (1, '2025-11-05', 'Livré'),
    (2, '2025-11-06', 'Livré'),
    (3, '2025-11-08', 'En transit'),
    (4, NULL, 'En préparation'),
    (5, '2025-11-09', 'Livré'),
    (6, NULL, 'En préparation');

-- 23. AVIS
-- Supprimer

-- 24. COMMENTAIRES (liés aux livraisons)
-- Supprimer

-- 25. RÉPONSES aux avis
-- Supprimer

-- 26. SIGNALEMENTS
-- Supprimer

-- 27. RELATIONS SIGNALEMENTS
-- Supprimer

-- 28. ENVOI DE SIGNALEMENTS
-- Supprimer

-- 29. RÉDUCTIONS APPLIQUÉES
-- INSERT INTO _en_reduction (id_produit, id_reduction) VALUES
-- (3, 2), (4, 2), (11, 1), (14, 1),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 30. PROMOTIONS APPLIQUÉES
-- INSERT INTO _en_promotion (id_produit, id_promotion) VALUES
-- (1, 1), (6, 1), (8, 1), (13, 3),
-- (16, 1), (17, 2), (18, 3), (19, 4), (20, 5),
-- (21, 1), (22, 2), (23, 3), (24, 4), (25, 5);

-- 31. SEUILS DÉFINIS POUR COMPTES (vendeurs)
INSERT INTO
    _definie_pour (id_seuil, id_compte)
VALUES (1, 2),
    (2, 2),
    (3, 2),
    (4, 2),
    (5, 2),
    (1, 3),
    (2, 3),
    (3, 3),
    (5, 3),
    (1, 10),
    (2, 10),
    (3, 10),
    (4, 10),
    (5, 10),
    (5, 1);

-- ============================================
-- MISES À JOUR DES STATISTIQUES
-- ============================================

-- Mise à jour des signalements sur produits
UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 1;

UPDATE _produit SET p_nb_signalements = 1 WHERE id_produit = 12;

-- Mise à jour du nombre de produits créés par les vendeurs
UPDATE _vendeur SET nb_produits_crees = 10 WHERE id_vendeur = 1;

UPDATE _vendeur SET nb_produits_crees = 8 WHERE id_vendeur = 2;

UPDATE _vendeur SET nb_produits_crees = 7 WHERE id_vendeur = 3;

-- Mise à jour de la moyenne des notes des produits ajoutés/modifiés/supprimés

UPDATE cobrec1._produit SET p_note = 0;

UPDATE cobrec1._commentaire SET a_note = 0.0;
----------- WbStatement -----------
